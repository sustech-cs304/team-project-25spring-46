var LN=Object.defineProperty;var X_=s=>{throw TypeError(s)};var PN=(s,t,e)=>t in s?LN(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var gt=(s,t,e)=>PN(s,typeof t!="symbol"?t+"":t,e),H0=(s,t,e)=>t.has(s)||X_("Cannot "+e);var d=(s,t,e)=>(H0(s,t,"read from private field"),e?e.call(s):t.get(s)),T=(s,t,e)=>t.has(s)?X_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),x=(s,t,e,n)=>(H0(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),D=(s,t,e)=>(H0(s,t,"access private method"),e);var ei=(s,t,e,n)=>({set _(r){x(s,t,r,e)},get _(){return d(s,t,n)}});function zN(s,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in s)){const l=Object.getOwnPropertyDescriptor(n,r);l&&Object.defineProperty(s,r,l.get?l:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();function hg(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var U0={exports:{}},Jd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function IN(){if($_)return Jd;$_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var c in r)c!=="key"&&(l[c]=r[c])}else l=r;return r=l.ref,{$$typeof:s,type:n,key:u,ref:r!==void 0?r:null,props:l}}return Jd.Fragment=t,Jd.jsx=e,Jd.jsxs=e,Jd}var W_;function jN(){return W_||(W_=1,U0.exports=IN()),U0.exports}var P=jN(),G0={exports:{}},Ht={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_;function FN(){if(K_)return Ht;K_=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(_){return _===null||typeof _!="object"?null:(_=y&&_[y]||_["@@iterator"],typeof _=="function"?_:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function k(_,K,ot){this.props=_,this.context=K,this.refs=S,this.updater=ot||A}k.prototype.isReactComponent={},k.prototype.setState=function(_,K){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,K,"setState")},k.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function C(){}C.prototype=k.prototype;function N(_,K,ot){this.props=_,this.context=K,this.refs=S,this.updater=ot||A}var O=N.prototype=new C;O.constructor=N,w(O,k.prototype),O.isPureReactComponent=!0;var I=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function B(_,K,ot,R,at,ft){return ot=ft.ref,{$$typeof:s,type:_,key:K,ref:ot!==void 0?ot:null,props:ft}}function W(_,K){return B(_.type,K,void 0,void 0,void 0,_.props)}function Q(_){return typeof _=="object"&&_!==null&&_.$$typeof===s}function st(_){var K={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(ot){return K[ot]})}var X=/\/+/g;function Z(_,K){return typeof _=="object"&&_!==null&&_.key!=null?st(""+_.key):K.toString(36)}function ct(){}function J(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(ct,ct):(_.status="pending",_.then(function(K){_.status==="pending"&&(_.status="fulfilled",_.value=K)},function(K){_.status==="pending"&&(_.status="rejected",_.reason=K)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function ht(_,K,ot,R,at){var ft=typeof _;(ft==="undefined"||ft==="boolean")&&(_=null);var it=!1;if(_===null)it=!0;else switch(ft){case"bigint":case"string":case"number":it=!0;break;case"object":switch(_.$$typeof){case s:case t:it=!0;break;case g:return it=_._init,ht(it(_._payload),K,ot,R,at)}}if(it)return at=at(_),it=R===""?"."+Z(_,0):R,I(at)?(ot="",it!=null&&(ot=it.replace(X,"$&/")+"/"),ht(at,K,ot,"",function(Tt){return Tt})):at!=null&&(Q(at)&&(at=W(at,ot+(at.key==null||_&&_.key===at.key?"":(""+at.key).replace(X,"$&/")+"/")+it)),K.push(at)),1;it=0;var ut=R===""?".":R+":";if(I(_))for(var mt=0;mt<_.length;mt++)R=_[mt],ft=ut+Z(R,mt),it+=ht(R,K,ot,ft,at);else if(mt=b(_),typeof mt=="function")for(_=mt.call(_),mt=0;!(R=_.next()).done;)R=R.value,ft=ut+Z(R,mt++),it+=ht(R,K,ot,ft,at);else if(ft==="object"){if(typeof _.then=="function")return ht(J(_),K,ot,R,at);throw K=String(_),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return it}function F(_,K,ot){if(_==null)return _;var R=[],at=0;return ht(_,R,"","",function(ft){return K.call(ot,ft,at++)}),R}function q(_){if(_._status===-1){var K=_._result;K=K(),K.then(function(ot){(_._status===0||_._status===-1)&&(_._status=1,_._result=ot)},function(ot){(_._status===0||_._status===-1)&&(_._status=2,_._result=ot)}),_._status===-1&&(_._status=0,_._result=K)}if(_._status===1)return _._result.default;throw _._result}var yt=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)};function xt(){}return Ht.Children={map:F,forEach:function(_,K,ot){F(_,function(){K.apply(this,arguments)},ot)},count:function(_){var K=0;return F(_,function(){K++}),K},toArray:function(_){return F(_,function(K){return K})||[]},only:function(_){if(!Q(_))throw Error("React.Children.only expected to receive a single React element child.");return _}},Ht.Component=k,Ht.Fragment=e,Ht.Profiler=r,Ht.PureComponent=N,Ht.StrictMode=n,Ht.Suspense=f,Ht.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Ht.__COMPILER_RUNTIME={__proto__:null,c:function(_){return z.H.useMemoCache(_)}},Ht.cache=function(_){return function(){return _.apply(null,arguments)}},Ht.cloneElement=function(_,K,ot){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var R=w({},_.props),at=_.key,ft=void 0;if(K!=null)for(it in K.ref!==void 0&&(ft=void 0),K.key!==void 0&&(at=""+K.key),K)!L.call(K,it)||it==="key"||it==="__self"||it==="__source"||it==="ref"&&K.ref===void 0||(R[it]=K[it]);var it=arguments.length-2;if(it===1)R.children=ot;else if(1<it){for(var ut=Array(it),mt=0;mt<it;mt++)ut[mt]=arguments[mt+2];R.children=ut}return B(_.type,at,void 0,void 0,ft,R)},Ht.createContext=function(_){return _={$$typeof:u,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:l,_context:_},_},Ht.createElement=function(_,K,ot){var R,at={},ft=null;if(K!=null)for(R in K.key!==void 0&&(ft=""+K.key),K)L.call(K,R)&&R!=="key"&&R!=="__self"&&R!=="__source"&&(at[R]=K[R]);var it=arguments.length-2;if(it===1)at.children=ot;else if(1<it){for(var ut=Array(it),mt=0;mt<it;mt++)ut[mt]=arguments[mt+2];at.children=ut}if(_&&_.defaultProps)for(R in it=_.defaultProps,it)at[R]===void 0&&(at[R]=it[R]);return B(_,ft,void 0,void 0,null,at)},Ht.createRef=function(){return{current:null}},Ht.forwardRef=function(_){return{$$typeof:c,render:_}},Ht.isValidElement=Q,Ht.lazy=function(_){return{$$typeof:g,_payload:{_status:-1,_result:_},_init:q}},Ht.memo=function(_,K){return{$$typeof:p,type:_,compare:K===void 0?null:K}},Ht.startTransition=function(_){var K=z.T,ot={};z.T=ot;try{var R=_(),at=z.S;at!==null&&at(ot,R),typeof R=="object"&&R!==null&&typeof R.then=="function"&&R.then(xt,yt)}catch(ft){yt(ft)}finally{z.T=K}},Ht.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Ht.use=function(_){return z.H.use(_)},Ht.useActionState=function(_,K,ot){return z.H.useActionState(_,K,ot)},Ht.useCallback=function(_,K){return z.H.useCallback(_,K)},Ht.useContext=function(_){return z.H.useContext(_)},Ht.useDebugValue=function(){},Ht.useDeferredValue=function(_,K){return z.H.useDeferredValue(_,K)},Ht.useEffect=function(_,K,ot){var R=z.H;if(typeof ot=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return R.useEffect(_,K)},Ht.useId=function(){return z.H.useId()},Ht.useImperativeHandle=function(_,K,ot){return z.H.useImperativeHandle(_,K,ot)},Ht.useInsertionEffect=function(_,K){return z.H.useInsertionEffect(_,K)},Ht.useLayoutEffect=function(_,K){return z.H.useLayoutEffect(_,K)},Ht.useMemo=function(_,K){return z.H.useMemo(_,K)},Ht.useOptimistic=function(_,K){return z.H.useOptimistic(_,K)},Ht.useReducer=function(_,K,ot){return z.H.useReducer(_,K,ot)},Ht.useRef=function(_){return z.H.useRef(_)},Ht.useState=function(_){return z.H.useState(_)},Ht.useSyncExternalStore=function(_,K,ot){return z.H.useSyncExternalStore(_,K,ot)},Ht.useTransition=function(){return z.H.useTransition()},Ht.version="19.1.0",Ht}var Q_;function vw(){return Q_||(Q_=1,G0.exports=FN()),G0.exports}var et=vw();const db=hg(et),BN=zN({__proto__:null,default:db},[et]);var V0={exports:{}},tf={},q0={exports:{}},Y0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function HN(){return Z_||(Z_=1,function(s){function t(F,q){var yt=F.length;F.push(q);t:for(;0<yt;){var xt=yt-1>>>1,_=F[xt];if(0<r(_,q))F[xt]=q,F[yt]=_,yt=xt;else break t}}function e(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var q=F[0],yt=F.pop();if(yt!==q){F[0]=yt;t:for(var xt=0,_=F.length,K=_>>>1;xt<K;){var ot=2*(xt+1)-1,R=F[ot],at=ot+1,ft=F[at];if(0>r(R,yt))at<_&&0>r(ft,R)?(F[xt]=ft,F[at]=yt,xt=at):(F[xt]=R,F[ot]=yt,xt=ot);else if(at<_&&0>r(ft,yt))F[xt]=ft,F[at]=yt,xt=at;else break t}}return q}function r(F,q){var yt=F.sortIndex-q.sortIndex;return yt!==0?yt:F.id-q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();s.unstable_now=function(){return u.now()-c}}var f=[],p=[],g=1,y=null,b=3,A=!1,w=!1,S=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function I(F){for(var q=e(p);q!==null;){if(q.callback===null)n(p);else if(q.startTime<=F)n(p),q.sortIndex=q.expirationTime,t(f,q);else break;q=e(p)}}function z(F){if(S=!1,I(F),!w)if(e(f)!==null)w=!0,L||(L=!0,Z());else{var q=e(p);q!==null&&ht(z,q.startTime-F)}}var L=!1,B=-1,W=5,Q=-1;function st(){return k?!0:!(s.unstable_now()-Q<W)}function X(){if(k=!1,L){var F=s.unstable_now();Q=F;var q=!0;try{t:{w=!1,S&&(S=!1,N(B),B=-1),A=!0;var yt=b;try{e:{for(I(F),y=e(f);y!==null&&!(y.expirationTime>F&&st());){var xt=y.callback;if(typeof xt=="function"){y.callback=null,b=y.priorityLevel;var _=xt(y.expirationTime<=F);if(F=s.unstable_now(),typeof _=="function"){y.callback=_,I(F),q=!0;break e}y===e(f)&&n(f),I(F)}else n(f);y=e(f)}if(y!==null)q=!0;else{var K=e(p);K!==null&&ht(z,K.startTime-F),q=!1}}break t}finally{y=null,b=yt,A=!1}q=void 0}}finally{q?Z():L=!1}}}var Z;if(typeof O=="function")Z=function(){O(X)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,J=ct.port2;ct.port1.onmessage=X,Z=function(){J.postMessage(null)}}else Z=function(){C(X,0)};function ht(F,q){B=C(function(){F(s.unstable_now())},q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(F){switch(b){case 1:case 2:case 3:var q=3;break;default:q=b}var yt=b;b=q;try{return F()}finally{b=yt}},s.unstable_requestPaint=function(){k=!0},s.unstable_runWithPriority=function(F,q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var yt=b;b=F;try{return q()}finally{b=yt}},s.unstable_scheduleCallback=function(F,q,yt){var xt=s.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?xt+yt:xt):yt=xt,F){case 1:var _=-1;break;case 2:_=250;break;case 5:_=1073741823;break;case 4:_=1e4;break;default:_=5e3}return _=yt+_,F={id:g++,callback:q,priorityLevel:F,startTime:yt,expirationTime:_,sortIndex:-1},yt>xt?(F.sortIndex=yt,t(p,F),e(f)===null&&F===e(p)&&(S?(N(B),B=-1):S=!0,ht(z,yt-xt))):(F.sortIndex=_,t(f,F),w||A||(w=!0,L||(L=!0,Z()))),F},s.unstable_shouldYield=st,s.unstable_wrapCallback=function(F){var q=b;return function(){var yt=b;b=q;try{return F.apply(this,arguments)}finally{b=yt}}}}(Y0)),Y0}var J_;function UN(){return J_||(J_=1,q0.exports=HN()),q0.exports}var X0={exports:{}},Gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tC;function GN(){if(tC)return Gn;tC=1;var s=vw();function t(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(f,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:f,containerInfo:p,implementation:g}}var u=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Gn.createPortal=function(f,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(f,p,null,g)},Gn.flushSync=function(f){var p=u.T,g=n.p;try{if(u.T=null,n.p=2,f)return f()}finally{u.T=p,n.p=g,n.d.f()}},Gn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(f,p))},Gn.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},Gn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var g=p.as,y=c(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?n.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):g==="script"&&n.d.X(f,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Gn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=c(p.as,p.crossOrigin);n.d.M(f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(f)},Gn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=c(g,p.crossOrigin);n.d.L(f,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Gn.preloadModule=function(f,p){if(typeof f=="string")if(p){var g=c(p.as,p.crossOrigin);n.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(f)},Gn.requestFormReset=function(f){n.d.r(f)},Gn.unstable_batchedUpdates=function(f,p){return f(p)},Gn.useFormState=function(f,p,g){return u.H.useFormState(f,p,g)},Gn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Gn.version="19.1.0",Gn}var eC;function VN(){if(eC)return X0.exports;eC=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),X0.exports=GN(),X0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nC;function qN(){if(nC)return tf;nC=1;var s=UN(),t=vw(),e=VN();function n(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var a=i,o=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(o=a.return),i=a.return;while(i)}return a.tag===3?o:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function c(i){if(l(i)!==i)throw Error(n(188))}function f(i){var a=i.alternate;if(!a){if(a=l(i),a===null)throw Error(n(188));return a!==i?null:i}for(var o=i,h=a;;){var m=o.return;if(m===null)break;var v=m.alternate;if(v===null){if(h=m.return,h!==null){o=h;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===o)return c(m),i;if(v===h)return c(m),a;v=v.sibling}throw Error(n(188))}if(o.return!==h.return)o=m,h=v;else{for(var E=!1,M=m.child;M;){if(M===o){E=!0,o=m,h=v;break}if(M===h){E=!0,h=m,o=v;break}M=M.sibling}if(!E){for(M=v.child;M;){if(M===o){E=!0,o=v,h=m;break}if(M===h){E=!0,h=v,o=m;break}M=M.sibling}if(!E)throw Error(n(189))}}if(o.alternate!==h)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?i:a}function p(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=p(i),a!==null)return a;i=i.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),O=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),st=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function Z(i){return i===null||typeof i!="object"?null:(i=X&&i[X]||i["@@iterator"],typeof i=="function"?i:null)}var ct=Symbol.for("react.client.reference");function J(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ct?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case k:return"Profiler";case S:return"StrictMode";case z:return"Suspense";case L:return"SuspenseList";case Q:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case O:return(i.displayName||"Context")+".Provider";case N:return(i._context.displayName||"Context")+".Consumer";case I:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case B:return a=i.displayName||null,a!==null?a:J(i.type)||"Memo";case W:a=i._payload,i=i._init;try{return J(i(a))}catch{}}return null}var ht=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yt={pending:!1,data:null,method:null,action:null},xt=[],_=-1;function K(i){return{current:i}}function ot(i){0>_||(i.current=xt[_],xt[_]=null,_--)}function R(i,a){_++,xt[_]=i.current,i.current=a}var at=K(null),ft=K(null),it=K(null),ut=K(null);function mt(i,a){switch(R(it,a),R(ft,i),R(at,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?S_(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=S_(a),i=w_(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ot(at),R(at,i)}function Tt(){ot(at),ot(ft),ot(it)}function Bt(i){i.memoizedState!==null&&R(ut,i);var a=at.current,o=w_(a,i.type);a!==o&&(R(ft,i),R(at,o))}function fe(i){ft.current===i&&(ot(at),ot(ft)),ut.current===i&&(ot(ut),$d._currentValue=yt)}var pe=Object.prototype.hasOwnProperty,Zt=s.unstable_scheduleCallback,Vt=s.unstable_cancelCallback,Fn=s.unstable_shouldYield,je=s.unstable_requestPaint,Fe=s.unstable_now,Ve=s.unstable_getCurrentPriorityLevel,xs=s.unstable_ImmediatePriority,_a=s.unstable_UserBlockingPriority,ci=s.unstable_NormalPriority,kr=s.unstable_LowPriority,Ca=s.unstable_IdlePriority,td=s.log,ed=s.unstable_setDisableYieldValue,tt=null,dt=null;function Dt(i){if(typeof td=="function"&&ed(i),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(tt,i)}catch{}}var kt=Math.clz32?Math.clz32:Es,ie=Math.log,Bn=Math.LN2;function Es(i){return i>>>=0,i===0?32:31-(ie(i)/Bn|0)|0}var rn=256,Ti=4194304;function Qn(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function qe(i,a,o){var h=i.pendingLanes;if(h===0)return 0;var m=0,v=i.suspendedLanes,E=i.pingedLanes;i=i.warmLanes;var M=h&134217727;return M!==0?(h=M&~v,h!==0?m=Qn(h):(E&=M,E!==0?m=Qn(E):o||(o=M&~i,o!==0&&(m=Qn(o))))):(M=h&~v,M!==0?m=Qn(M):E!==0?m=Qn(E):o||(o=h&~i,o!==0&&(m=Qn(o)))),m===0?0:a!==0&&a!==m&&(a&v)===0&&(v=m&-m,o=a&-a,v>=o||v===32&&(o&4194048)!==0)?a:m}function Zn(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Jn(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _g(){var i=rn;return rn<<=1,(rn&4194048)===0&&(rn=256),i}function nd(){var i=Ti;return Ti<<=1,(Ti&62914560)===0&&(Ti=4194304),i}function id(i){for(var a=[],o=0;31>o;o++)a.push(i);return a}function Rr(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Hn(i,a,o,h,m,v){var E=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var M=i.entanglements,j=i.expirationTimes,V=i.hiddenUpdates;for(o=E&~o;0<o;){var nt=31-kt(o),lt=1<<nt;M[nt]=0,j[nt]=-1;var Y=V[nt];if(Y!==null)for(V[nt]=null,nt=0;nt<Y.length;nt++){var $=Y[nt];$!==null&&($.lane&=-536870913)}o&=~lt}h!==0&&_n(i,h,0),v!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=v&~(E&~a))}function _n(i,a,o){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-kt(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|o&4194090}function Ql(i,a){var o=i.entangledLanes|=a;for(i=i.entanglements;o;){var h=31-kt(o),m=1<<h;m&a|i[h]&a&&(i[h]|=a),o&=~m}}function we(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function hi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Cg(){var i=q.p;return i!==0?i:(i=window.event,i===void 0?32:H_(i.type))}function sd(i,a){var o=q.p;try{return q.p=i,a()}finally{q.p=o}}var _s=Math.random().toString(36).slice(2),ln="__reactFiber$"+_s,gn="__reactProps$"+_s,Cs="__reactContainer$"+_s,Zl="__reactEvents$"+_s,ad="__reactListeners$"+_s,rd="__reactHandles$"+_s,Tg="__reactResources$"+_s,Ta="__reactMarker$"+_s;function ju(i){delete i[ln],delete i[gn],delete i[Zl],delete i[ad],delete i[rd]}function Mr(i){var a=i[ln];if(a)return a;for(var o=i.parentNode;o;){if(a=o[Cs]||o[ln]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(i=C_(i);i!==null;){if(o=i[ln])return o;i=C_(i)}return a}i=o,o=i.parentNode}return null}function Nr(i){if(i=i[ln]||i[Cs]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function It(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(n(33))}function ue(i){var a=i[Tg];return a||(a=i[Tg]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function qt(i){i[Ta]=!0}var di=new Set,fi={};function Ts(i,a){Or(i,a),Or(i+"Capture",a)}function Or(i,a){for(fi[i]=a,i=0;i<a.length;i++)di.add(a[i])}var Lb=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dx={},fx={};function TM(i){return pe.call(fx,i)?!0:pe.call(dx,i)?!1:Lb.test(i)?fx[i]=!0:(dx[i]=!0,!1)}function Dg(i,a,o){if(TM(a))if(o===null)i.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+o)}}function kg(i,a,o){if(o===null)i.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+o)}}function Da(i,a,o,h){if(h===null)i.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(a,o,""+h)}}var Pb,px;function Fu(i){if(Pb===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);Pb=a&&a[1]||"",px=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pb+i+px}var zb=!1;function Ib(i,a){if(!i||zb)return"";zb=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var lt=function(){throw Error()};if(Object.defineProperty(lt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(lt,[])}catch($){var Y=$}Reflect.construct(i,[],lt)}else{try{lt.call()}catch($){Y=$}i.call(lt.prototype)}}else{try{throw Error()}catch($){Y=$}(lt=i())&&typeof lt.catch=="function"&&lt.catch(function(){})}}catch($){if($&&Y&&typeof $.stack=="string")return[$.stack,Y.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=h.DetermineComponentFrameRoot(),E=v[0],M=v[1];if(E&&M){var j=E.split(`
`),V=M.split(`
`);for(m=h=0;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;for(;m<V.length&&!V[m].includes("DetermineComponentFrameRoot");)m++;if(h===j.length||m===V.length)for(h=j.length-1,m=V.length-1;1<=h&&0<=m&&j[h]!==V[m];)m--;for(;1<=h&&0<=m;h--,m--)if(j[h]!==V[m]){if(h!==1||m!==1)do if(h--,m--,0>m||j[h]!==V[m]){var nt=`
`+j[h].replace(" at new "," at ");return i.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",i.displayName)),nt}while(1<=h&&0<=m);break}}}finally{zb=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Fu(o):""}function DM(i){switch(i.tag){case 26:case 27:case 5:return Fu(i.type);case 16:return Fu("Lazy");case 13:return Fu("Suspense");case 19:return Fu("SuspenseList");case 0:case 15:return Ib(i.type,!1);case 11:return Ib(i.type.render,!1);case 1:return Ib(i.type,!0);case 31:return Fu("Activity");default:return""}}function gx(i){try{var a="";do a+=DM(i),i=i.return;while(i);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function ns(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function mx(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function kM(i){var a=mx(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),h=""+i[a];if(!i.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,v=o.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return m.call(this)},set:function(E){h=""+E,v.call(this,E)}}),Object.defineProperty(i,a,{enumerable:o.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Rg(i){i._valueTracker||(i._valueTracker=kM(i))}function yx(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var o=a.getValue(),h="";return i&&(h=mx(i)?i.checked?"true":"false":i.value),i=h,i!==o?(a.setValue(i),!0):!1}function Mg(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var RM=/[\n"\\]/g;function is(i){return i.replace(RM,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function jb(i,a,o,h,m,v,E,M){i.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?i.type=E:i.removeAttribute("type"),a!=null?E==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+ns(a)):i.value!==""+ns(a)&&(i.value=""+ns(a)):E!=="submit"&&E!=="reset"||i.removeAttribute("value"),a!=null?Fb(i,E,ns(a)):o!=null?Fb(i,E,ns(o)):h!=null&&i.removeAttribute("value"),m==null&&v!=null&&(i.defaultChecked=!!v),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?i.name=""+ns(M):i.removeAttribute("name")}function bx(i,a,o,h,m,v,E,M){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),a!=null||o!=null){if(!(v!=="submit"&&v!=="reset"||a!=null))return;o=o!=null?""+ns(o):"",a=a!=null?""+ns(a):o,M||a===i.value||(i.value=a),i.defaultValue=a}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=M?i.checked:!!h,i.defaultChecked=!!h,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.name=E)}function Fb(i,a,o){a==="number"&&Mg(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Bu(i,a,o,h){if(i=i.options,a){a={};for(var m=0;m<o.length;m++)a["$"+o[m]]=!0;for(o=0;o<i.length;o++)m=a.hasOwnProperty("$"+i[o].value),i[o].selected!==m&&(i[o].selected=m),m&&h&&(i[o].defaultSelected=!0)}else{for(o=""+ns(o),a=null,m=0;m<i.length;m++){if(i[m].value===o){i[m].selected=!0,h&&(i[m].defaultSelected=!0);return}a!==null||i[m].disabled||(a=i[m])}a!==null&&(a.selected=!0)}}function vx(i,a,o){if(a!=null&&(a=""+ns(a),a!==i.value&&(i.value=a),o==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=o!=null?""+ns(o):""}function Ax(i,a,o,h){if(a==null){if(h!=null){if(o!=null)throw Error(n(92));if(ht(h)){if(1<h.length)throw Error(n(93));h=h[0]}o=h}o==null&&(o=""),a=o}o=ns(a),i.defaultValue=o,h=i.textContent,h===o&&h!==""&&h!==null&&(i.value=h)}function Hu(i,a){if(a){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=a;return}}i.textContent=a}var MM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sx(i,a,o){var h=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,o):typeof o!="number"||o===0||MM.has(a)?a==="float"?i.cssFloat=o:i[a]=(""+o).trim():i[a]=o+"px"}function wx(i,a,o){if(a!=null&&typeof a!="object")throw Error(n(62));if(i=i.style,o!=null){for(var h in o)!o.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var m in a)h=a[m],a.hasOwnProperty(m)&&o[m]!==h&&Sx(i,m,h)}else for(var v in a)a.hasOwnProperty(v)&&Sx(i,v,a[v])}function Bb(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var NM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),OM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ng(i){return OM.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Hb=null;function Ub(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Uu=null,Gu=null;function xx(i){var a=Nr(i);if(a&&(i=a.stateNode)){var o=i[gn]||null;t:switch(i=a.stateNode,a.type){case"input":if(jb(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+is(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var h=o[a];if(h!==i&&h.form===i.form){var m=h[gn]||null;if(!m)throw Error(n(90));jb(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<o.length;a++)h=o[a],h.form===i.form&&yx(h)}break t;case"textarea":vx(i,o.value,o.defaultValue);break t;case"select":a=o.value,a!=null&&Bu(i,!!o.multiple,a,!1)}}}var Gb=!1;function Ex(i,a,o){if(Gb)return i(a,o);Gb=!0;try{var h=i(a);return h}finally{if(Gb=!1,(Uu!==null||Gu!==null)&&(ym(),Uu&&(a=Uu,i=Gu,Gu=Uu=null,xx(a),i)))for(a=0;a<i.length;a++)xx(i[a])}}function ld(i,a){var o=i.stateNode;if(o===null)return null;var h=o[gn]||null;if(h===null)return null;o=h[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(n(231,a,typeof o));return o}var ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vb=!1;if(ka)try{var od={};Object.defineProperty(od,"passive",{get:function(){Vb=!0}}),window.addEventListener("test",od,od),window.removeEventListener("test",od,od)}catch{Vb=!1}var Lr=null,qb=null,Og=null;function _x(){if(Og)return Og;var i,a=qb,o=a.length,h,m="value"in Lr?Lr.value:Lr.textContent,v=m.length;for(i=0;i<o&&a[i]===m[i];i++);var E=o-i;for(h=1;h<=E&&a[o-h]===m[v-h];h++);return Og=m.slice(i,1<h?1-h:void 0)}function Lg(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Pg(){return!0}function Cx(){return!1}function pi(i){function a(o,h,m,v,E){this._reactName=o,this._targetInst=m,this.type=h,this.nativeEvent=v,this.target=E,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(o=i[M],this[M]=o?o(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Pg:Cx,this.isPropagationStopped=Cx,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Pg)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Pg)},persist:function(){},isPersistent:Pg}),a}var Jl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zg=pi(Jl),ud=g({},Jl,{view:0,detail:0}),LM=pi(ud),Yb,Xb,cd,Ig=g({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wb,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==cd&&(cd&&i.type==="mousemove"?(Yb=i.screenX-cd.screenX,Xb=i.screenY-cd.screenY):Xb=Yb=0,cd=i),Yb)},movementY:function(i){return"movementY"in i?i.movementY:Xb}}),Tx=pi(Ig),PM=g({},Ig,{dataTransfer:0}),zM=pi(PM),IM=g({},ud,{relatedTarget:0}),$b=pi(IM),jM=g({},Jl,{animationName:0,elapsedTime:0,pseudoElement:0}),FM=pi(jM),BM=g({},Jl,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),HM=pi(BM),UM=g({},Jl,{data:0}),Dx=pi(UM),GM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YM(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=qM[i])?!!a[i]:!1}function Wb(){return YM}var XM=g({},ud,{key:function(i){if(i.key){var a=GM[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Lg(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?VM[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wb,charCode:function(i){return i.type==="keypress"?Lg(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Lg(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),$M=pi(XM),WM=g({},Ig,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kx=pi(WM),KM=g({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wb}),QM=pi(KM),ZM=g({},Jl,{propertyName:0,elapsedTime:0,pseudoElement:0}),JM=pi(ZM),t2=g({},Ig,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),e2=pi(t2),n2=g({},Jl,{newState:0,oldState:0}),i2=pi(n2),s2=[9,13,27,32],Kb=ka&&"CompositionEvent"in window,hd=null;ka&&"documentMode"in document&&(hd=document.documentMode);var a2=ka&&"TextEvent"in window&&!hd,Rx=ka&&(!Kb||hd&&8<hd&&11>=hd),Mx=" ",Nx=!1;function Ox(i,a){switch(i){case"keyup":return s2.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Vu=!1;function r2(i,a){switch(i){case"compositionend":return Lx(a);case"keypress":return a.which!==32?null:(Nx=!0,Mx);case"textInput":return i=a.data,i===Mx&&Nx?null:i;default:return null}}function l2(i,a){if(Vu)return i==="compositionend"||!Kb&&Ox(i,a)?(i=_x(),Og=qb=Lr=null,Vu=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Rx&&a.locale!=="ko"?null:a.data;default:return null}}var o2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Px(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!o2[i.type]:a==="textarea"}function zx(i,a,o,h){Uu?Gu?Gu.push(h):Gu=[h]:Uu=h,a=xm(a,"onChange"),0<a.length&&(o=new zg("onChange","change",null,o,h),i.push({event:o,listeners:a}))}var dd=null,fd=null;function u2(i){m_(i,0)}function jg(i){var a=It(i);if(yx(a))return i}function Ix(i,a){if(i==="change")return a}var jx=!1;if(ka){var Qb;if(ka){var Zb="oninput"in document;if(!Zb){var Fx=document.createElement("div");Fx.setAttribute("oninput","return;"),Zb=typeof Fx.oninput=="function"}Qb=Zb}else Qb=!1;jx=Qb&&(!document.documentMode||9<document.documentMode)}function Bx(){dd&&(dd.detachEvent("onpropertychange",Hx),fd=dd=null)}function Hx(i){if(i.propertyName==="value"&&jg(fd)){var a=[];zx(a,fd,i,Ub(i)),Ex(u2,a)}}function c2(i,a,o){i==="focusin"?(Bx(),dd=a,fd=o,dd.attachEvent("onpropertychange",Hx)):i==="focusout"&&Bx()}function h2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return jg(fd)}function d2(i,a){if(i==="click")return jg(a)}function f2(i,a){if(i==="input"||i==="change")return jg(a)}function p2(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Di=typeof Object.is=="function"?Object.is:p2;function pd(i,a){if(Di(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var o=Object.keys(i),h=Object.keys(a);if(o.length!==h.length)return!1;for(h=0;h<o.length;h++){var m=o[h];if(!pe.call(a,m)||!Di(i[m],a[m]))return!1}return!0}function Ux(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Gx(i,a){var o=Ux(i);i=0;for(var h;o;){if(o.nodeType===3){if(h=i+o.textContent.length,i<=a&&h>=a)return{node:o,offset:a-i};i=h}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Ux(o)}}function Vx(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Vx(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function qx(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Mg(i.document);a instanceof i.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)i=a.contentWindow;else break;a=Mg(i.document)}return a}function Jb(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var g2=ka&&"documentMode"in document&&11>=document.documentMode,qu=null,tv=null,gd=null,ev=!1;function Yx(i,a,o){var h=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ev||qu==null||qu!==Mg(h)||(h=qu,"selectionStart"in h&&Jb(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),gd&&pd(gd,h)||(gd=h,h=xm(tv,"onSelect"),0<h.length&&(a=new zg("onSelect","select",null,a,o),i.push({event:a,listeners:h}),a.target=qu)))}function to(i,a){var o={};return o[i.toLowerCase()]=a.toLowerCase(),o["Webkit"+i]="webkit"+a,o["Moz"+i]="moz"+a,o}var Yu={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionrun:to("Transition","TransitionRun"),transitionstart:to("Transition","TransitionStart"),transitioncancel:to("Transition","TransitionCancel"),transitionend:to("Transition","TransitionEnd")},nv={},Xx={};ka&&(Xx=document.createElement("div").style,"AnimationEvent"in window||(delete Yu.animationend.animation,delete Yu.animationiteration.animation,delete Yu.animationstart.animation),"TransitionEvent"in window||delete Yu.transitionend.transition);function eo(i){if(nv[i])return nv[i];if(!Yu[i])return i;var a=Yu[i],o;for(o in a)if(a.hasOwnProperty(o)&&o in Xx)return nv[i]=a[o];return i}var $x=eo("animationend"),Wx=eo("animationiteration"),Kx=eo("animationstart"),m2=eo("transitionrun"),y2=eo("transitionstart"),b2=eo("transitioncancel"),Qx=eo("transitionend"),Zx=new Map,iv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");iv.push("scrollEnd");function Ds(i,a){Zx.set(i,a),Ts(a,[i])}var Jx=new WeakMap;function ss(i,a){if(typeof i=="object"&&i!==null){var o=Jx.get(i);return o!==void 0?o:(a={value:i,source:a,stack:gx(a)},Jx.set(i,a),a)}return{value:i,source:a,stack:gx(a)}}var as=[],Xu=0,sv=0;function Fg(){for(var i=Xu,a=sv=Xu=0;a<i;){var o=as[a];as[a++]=null;var h=as[a];as[a++]=null;var m=as[a];as[a++]=null;var v=as[a];if(as[a++]=null,h!==null&&m!==null){var E=h.pending;E===null?m.next=m:(m.next=E.next,E.next=m),h.pending=m}v!==0&&t1(o,m,v)}}function Bg(i,a,o,h){as[Xu++]=i,as[Xu++]=a,as[Xu++]=o,as[Xu++]=h,sv|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function av(i,a,o,h){return Bg(i,a,o,h),Hg(i)}function $u(i,a){return Bg(i,null,null,a),Hg(i)}function t1(i,a,o){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o);for(var m=!1,v=i.return;v!==null;)v.childLanes|=o,h=v.alternate,h!==null&&(h.childLanes|=o),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(m=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,m&&a!==null&&(m=31-kt(o),i=v.hiddenUpdates,h=i[m],h===null?i[m]=[a]:h.push(a),a.lane=o|536870912),v):null}function Hg(i){if(50<Bd)throw Bd=0,h0=null,Error(n(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Wu={};function v2(i,a,o,h){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ki(i,a,o,h){return new v2(i,a,o,h)}function rv(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ra(i,a){var o=i.alternate;return o===null?(o=ki(i.tag,a,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=a,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,a=i.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function e1(i,a){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,a=o.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Ug(i,a,o,h,m,v){var E=0;if(h=i,typeof i=="function")rv(i)&&(E=1);else if(typeof i=="string")E=SN(i,o,at.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case Q:return i=ki(31,o,a,m),i.elementType=Q,i.lanes=v,i;case w:return no(o.children,m,v,a);case S:E=8,m|=24;break;case k:return i=ki(12,o,a,m|2),i.elementType=k,i.lanes=v,i;case z:return i=ki(13,o,a,m),i.elementType=z,i.lanes=v,i;case L:return i=ki(19,o,a,m),i.elementType=L,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case C:case O:E=10;break t;case N:E=9;break t;case I:E=11;break t;case B:E=14;break t;case W:E=16,h=null;break t}E=29,o=Error(n(130,i===null?"null":typeof i,"")),h=null}return a=ki(E,o,a,m),a.elementType=i,a.type=h,a.lanes=v,a}function no(i,a,o,h){return i=ki(7,i,h,a),i.lanes=o,i}function lv(i,a,o){return i=ki(6,i,null,a),i.lanes=o,i}function ov(i,a,o){return a=ki(4,i.children!==null?i.children:[],i.key,a),a.lanes=o,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Ku=[],Qu=0,Gg=null,Vg=0,rs=[],ls=0,io=null,Ma=1,Na="";function so(i,a){Ku[Qu++]=Vg,Ku[Qu++]=Gg,Gg=i,Vg=a}function n1(i,a,o){rs[ls++]=Ma,rs[ls++]=Na,rs[ls++]=io,io=i;var h=Ma;i=Na;var m=32-kt(h)-1;h&=~(1<<m),o+=1;var v=32-kt(a)+m;if(30<v){var E=m-m%5;v=(h&(1<<E)-1).toString(32),h>>=E,m-=E,Ma=1<<32-kt(a)+m|o<<m|h,Na=v+i}else Ma=1<<v|o<<m|h,Na=i}function uv(i){i.return!==null&&(so(i,1),n1(i,1,0))}function cv(i){for(;i===Gg;)Gg=Ku[--Qu],Ku[Qu]=null,Vg=Ku[--Qu],Ku[Qu]=null;for(;i===io;)io=rs[--ls],rs[ls]=null,Na=rs[--ls],rs[ls]=null,Ma=rs[--ls],rs[ls]=null}var ti=null,Be=null,ae=!1,ao=null,$s=!1,hv=Error(n(519));function ro(i){var a=Error(n(418,""));throw bd(ss(a,i)),hv}function i1(i){var a=i.stateNode,o=i.type,h=i.memoizedProps;switch(a[ln]=i,a[gn]=h,o){case"dialog":Kt("cancel",a),Kt("close",a);break;case"iframe":case"object":case"embed":Kt("load",a);break;case"video":case"audio":for(o=0;o<Ud.length;o++)Kt(Ud[o],a);break;case"source":Kt("error",a);break;case"img":case"image":case"link":Kt("error",a),Kt("load",a);break;case"details":Kt("toggle",a);break;case"input":Kt("invalid",a),bx(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Rg(a);break;case"select":Kt("invalid",a);break;case"textarea":Kt("invalid",a),Ax(a,h.value,h.defaultValue,h.children),Rg(a)}o=h.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||h.suppressHydrationWarning===!0||A_(a.textContent,o)?(h.popover!=null&&(Kt("beforetoggle",a),Kt("toggle",a)),h.onScroll!=null&&Kt("scroll",a),h.onScrollEnd!=null&&Kt("scrollend",a),h.onClick!=null&&(a.onclick=Em),a=!0):a=!1,a||ro(i)}function s1(i){for(ti=i.return;ti;)switch(ti.tag){case 5:case 13:$s=!1;return;case 27:case 3:$s=!0;return;default:ti=ti.return}}function md(i){if(i!==ti)return!1;if(!ae)return s1(i),ae=!0,!1;var a=i.tag,o;if((o=a!==3&&a!==27)&&((o=a===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||T0(i.type,i.memoizedProps)),o=!o),o&&Be&&ro(i),s1(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));t:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(a===0){Be=Rs(i.nextSibling);break t}a--}else o!=="$"&&o!=="$!"&&o!=="$?"||a++;i=i.nextSibling}Be=null}}else a===27?(a=Be,Kr(i.type)?(i=M0,M0=null,Be=i):Be=a):Be=ti?Rs(i.stateNode.nextSibling):null;return!0}function yd(){Be=ti=null,ae=!1}function a1(){var i=ao;return i!==null&&(yi===null?yi=i:yi.push.apply(yi,i),ao=null),i}function bd(i){ao===null?ao=[i]:ao.push(i)}var dv=K(null),lo=null,Oa=null;function Pr(i,a,o){R(dv,a._currentValue),a._currentValue=o}function La(i){i._currentValue=dv.current,ot(dv)}function fv(i,a,o){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===o)break;i=i.return}}function pv(i,a,o,h){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var v=m.dependencies;if(v!==null){var E=m.child;v=v.firstContext;t:for(;v!==null;){var M=v;v=m;for(var j=0;j<a.length;j++)if(M.context===a[j]){v.lanes|=o,M=v.alternate,M!==null&&(M.lanes|=o),fv(v.return,o,i),h||(E=null);break t}v=M.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(n(341));E.lanes|=o,v=E.alternate,v!==null&&(v.lanes|=o),fv(E,o,i),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===i){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function vd(i,a,o,h){i=null;for(var m=a,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var M=m.type;Di(m.pendingProps.value,E.value)||(i!==null?i.push(M):i=[M])}}else if(m===ut.current){if(E=m.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push($d):i=[$d])}m=m.return}i!==null&&pv(a,i,o,h),a.flags|=262144}function qg(i){for(i=i.firstContext;i!==null;){if(!Di(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function oo(i){lo=i,Oa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Un(i){return r1(lo,i)}function Yg(i,a){return lo===null&&oo(i),r1(i,a)}function r1(i,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},Oa===null){if(i===null)throw Error(n(308));Oa=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Oa=Oa.next=a;return o}var A2=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(o,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(o){return o()})}},S2=s.unstable_scheduleCallback,w2=s.unstable_NormalPriority,on={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gv(){return{controller:new A2,data:new Map,refCount:0}}function Ad(i){i.refCount--,i.refCount===0&&S2(w2,function(){i.controller.abort()})}var Sd=null,mv=0,Zu=0,Ju=null;function x2(i,a){if(Sd===null){var o=Sd=[];mv=0,Zu=b0(),Ju={status:"pending",value:void 0,then:function(h){o.push(h)}}}return mv++,a.then(l1,l1),a}function l1(){if(--mv===0&&Sd!==null){Ju!==null&&(Ju.status="fulfilled");var i=Sd;Sd=null,Zu=0,Ju=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function E2(i,a){var o=[],h={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var m=0;m<o.length;m++)(0,o[m])(a)},function(m){for(h.status="rejected",h.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),h}var o1=F.S;F.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&x2(i,a),o1!==null&&o1(i,a)};var uo=K(null);function yv(){var i=uo.current;return i!==null?i:Ee.pooledCache}function Xg(i,a){a===null?R(uo,uo.current):R(uo,a.pool)}function u1(){var i=yv();return i===null?null:{parent:on._currentValue,pool:i}}var wd=Error(n(460)),c1=Error(n(474)),$g=Error(n(542)),bv={then:function(){}};function h1(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Wg(){}function d1(i,a,o){switch(o=i[o],o===void 0?i.push(a):o!==a&&(a.then(Wg,Wg),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,p1(i),i;default:if(typeof a.status=="string")a.then(Wg,Wg);else{if(i=Ee,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=h}},function(h){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,p1(i),i}throw xd=a,wd}}var xd=null;function f1(){if(xd===null)throw Error(n(459));var i=xd;return xd=null,i}function p1(i){if(i===wd||i===$g)throw Error(n(483))}var zr=!1;function vv(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Av(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ir(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function jr(i,a,o){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(ce&2)!==0){var m=h.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),h.pending=a,a=Hg(i),t1(i,null,o),a}return Bg(i,h,a,o),Hg(i)}function Ed(i,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,o|=h,a.lanes=o,Ql(i,o)}}function Sv(i,a){var o=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,o===h)){var m=null,v=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};v===null?m=v=E:v=v.next=E,o=o.next}while(o!==null);v===null?m=v=a:v=v.next=a}else m=v=a;o={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:h.shared,callbacks:h.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=a:i.next=a,o.lastBaseUpdate=a}var wv=!1;function _d(){if(wv){var i=Ju;if(i!==null)throw i}}function Cd(i,a,o,h){wv=!1;var m=i.updateQueue;zr=!1;var v=m.firstBaseUpdate,E=m.lastBaseUpdate,M=m.shared.pending;if(M!==null){m.shared.pending=null;var j=M,V=j.next;j.next=null,E===null?v=V:E.next=V,E=j;var nt=i.alternate;nt!==null&&(nt=nt.updateQueue,M=nt.lastBaseUpdate,M!==E&&(M===null?nt.firstBaseUpdate=V:M.next=V,nt.lastBaseUpdate=j))}if(v!==null){var lt=m.baseState;E=0,nt=V=j=null,M=v;do{var Y=M.lane&-536870913,$=Y!==M.lane;if($?(te&Y)===Y:(h&Y)===Y){Y!==0&&Y===Zu&&(wv=!0),nt!==null&&(nt=nt.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var Ot=i,Rt=M;Y=a;var ye=o;switch(Rt.tag){case 1:if(Ot=Rt.payload,typeof Ot=="function"){lt=Ot.call(ye,lt,Y);break t}lt=Ot;break t;case 3:Ot.flags=Ot.flags&-65537|128;case 0:if(Ot=Rt.payload,Y=typeof Ot=="function"?Ot.call(ye,lt,Y):Ot,Y==null)break t;lt=g({},lt,Y);break t;case 2:zr=!0}}Y=M.callback,Y!==null&&(i.flags|=64,$&&(i.flags|=8192),$=m.callbacks,$===null?m.callbacks=[Y]:$.push(Y))}else $={lane:Y,tag:M.tag,payload:M.payload,callback:M.callback,next:null},nt===null?(V=nt=$,j=lt):nt=nt.next=$,E|=Y;if(M=M.next,M===null){if(M=m.shared.pending,M===null)break;$=M,M=$.next,$.next=null,m.lastBaseUpdate=$,m.shared.pending=null}}while(!0);nt===null&&(j=lt),m.baseState=j,m.firstBaseUpdate=V,m.lastBaseUpdate=nt,v===null&&(m.shared.lanes=0),Yr|=E,i.lanes=E,i.memoizedState=lt}}function g1(i,a){if(typeof i!="function")throw Error(n(191,i));i.call(a)}function m1(i,a){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)g1(o[i],a)}var tc=K(null),Kg=K(0);function y1(i,a){i=Ha,R(Kg,i),R(tc,a),Ha=i|a.baseLanes}function xv(){R(Kg,Ha),R(tc,tc.current)}function Ev(){Ha=Kg.current,ot(tc),ot(Kg)}var Fr=0,Yt=null,ge=null,Qe=null,Qg=!1,ec=!1,co=!1,Zg=0,Td=0,nc=null,_2=0;function Ye(){throw Error(n(321))}function _v(i,a){if(a===null)return!1;for(var o=0;o<a.length&&o<i.length;o++)if(!Di(i[o],a[o]))return!1;return!0}function Cv(i,a,o,h,m,v){return Fr=v,Yt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,F.H=i===null||i.memoizedState===null?tE:eE,co=!1,v=o(h,m),co=!1,ec&&(v=v1(a,o,h,m)),b1(i),v}function b1(i){F.H=sm;var a=ge!==null&&ge.next!==null;if(Fr=0,Qe=ge=Yt=null,Qg=!1,Td=0,nc=null,a)throw Error(n(300));i===null||mn||(i=i.dependencies,i!==null&&qg(i)&&(mn=!0))}function v1(i,a,o,h){Yt=i;var m=0;do{if(ec&&(nc=null),Td=0,ec=!1,25<=m)throw Error(n(301));if(m+=1,Qe=ge=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}F.H=N2,v=a(o,h)}while(ec);return v}function C2(){var i=F.H,a=i.useState()[0];return a=typeof a.then=="function"?Dd(a):a,i=i.useState()[0],(ge!==null?ge.memoizedState:null)!==i&&(Yt.flags|=1024),a}function Tv(){var i=Zg!==0;return Zg=0,i}function Dv(i,a,o){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~o}function kv(i){if(Qg){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Qg=!1}Fr=0,Qe=ge=Yt=null,ec=!1,Td=Zg=0,nc=null}function gi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Yt.memoizedState=Qe=i:Qe=Qe.next=i,Qe}function Ze(){if(ge===null){var i=Yt.alternate;i=i!==null?i.memoizedState:null}else i=ge.next;var a=Qe===null?Yt.memoizedState:Qe.next;if(a!==null)Qe=a,ge=i;else{if(i===null)throw Yt.alternate===null?Error(n(467)):Error(n(310));ge=i,i={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},Qe===null?Yt.memoizedState=Qe=i:Qe=Qe.next=i}return Qe}function Rv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dd(i){var a=Td;return Td+=1,nc===null&&(nc=[]),i=d1(nc,i,a),a=Yt,(Qe===null?a.memoizedState:Qe.next)===null&&(a=a.alternate,F.H=a===null||a.memoizedState===null?tE:eE),i}function Jg(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Dd(i);if(i.$$typeof===O)return Un(i)}throw Error(n(438,String(i)))}function Mv(i){var a=null,o=Yt.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var h=Yt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=Rv(),Yt.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(i),h=0;h<i;h++)o[h]=st;return a.index++,o}function Pa(i,a){return typeof a=="function"?a(i):a}function tm(i){var a=Ze();return Nv(a,ge,i)}function Nv(i,a,o){var h=i.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var m=i.baseQueue,v=h.pending;if(v!==null){if(m!==null){var E=m.next;m.next=v.next,v.next=E}a.baseQueue=m=v,h.pending=null}if(v=i.baseState,m===null)i.memoizedState=v;else{a=m.next;var M=E=null,j=null,V=a,nt=!1;do{var lt=V.lane&-536870913;if(lt!==V.lane?(te&lt)===lt:(Fr&lt)===lt){var Y=V.revertLane;if(Y===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),lt===Zu&&(nt=!0);else if((Fr&Y)===Y){V=V.next,Y===Zu&&(nt=!0);continue}else lt={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},j===null?(M=j=lt,E=v):j=j.next=lt,Yt.lanes|=Y,Yr|=Y;lt=V.action,co&&o(v,lt),v=V.hasEagerState?V.eagerState:o(v,lt)}else Y={lane:lt,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},j===null?(M=j=Y,E=v):j=j.next=Y,Yt.lanes|=lt,Yr|=lt;V=V.next}while(V!==null&&V!==a);if(j===null?E=v:j.next=M,!Di(v,i.memoizedState)&&(mn=!0,nt&&(o=Ju,o!==null)))throw o;i.memoizedState=v,i.baseState=E,i.baseQueue=j,h.lastRenderedState=v}return m===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Ov(i){var a=Ze(),o=a.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=i;var h=o.dispatch,m=o.pending,v=a.memoizedState;if(m!==null){o.pending=null;var E=m=m.next;do v=i(v,E.action),E=E.next;while(E!==m);Di(v,a.memoizedState)||(mn=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),o.lastRenderedState=v}return[v,h]}function A1(i,a,o){var h=Yt,m=Ze(),v=ae;if(v){if(o===void 0)throw Error(n(407));o=o()}else o=a();var E=!Di((ge||m).memoizedState,o);E&&(m.memoizedState=o,mn=!0),m=m.queue;var M=x1.bind(null,h,m,i);if(kd(2048,8,M,[i]),m.getSnapshot!==a||E||Qe!==null&&Qe.memoizedState.tag&1){if(h.flags|=2048,ic(9,em(),w1.bind(null,h,m,o,a),null),Ee===null)throw Error(n(349));v||(Fr&124)!==0||S1(h,a,o)}return o}function S1(i,a,o){i.flags|=16384,i={getSnapshot:a,value:o},a=Yt.updateQueue,a===null?(a=Rv(),Yt.updateQueue=a,a.stores=[i]):(o=a.stores,o===null?a.stores=[i]:o.push(i))}function w1(i,a,o,h){a.value=o,a.getSnapshot=h,E1(a)&&_1(i)}function x1(i,a,o){return o(function(){E1(a)&&_1(i)})}function E1(i){var a=i.getSnapshot;i=i.value;try{var o=a();return!Di(i,o)}catch{return!0}}function _1(i){var a=$u(i,2);a!==null&&Li(a,i,2)}function Lv(i){var a=gi();if(typeof i=="function"){var o=i;if(i=o(),co){Dt(!0);try{o()}finally{Dt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:i},a}function C1(i,a,o,h){return i.baseState=o,Nv(i,ge,typeof h=="function"?h:Pa)}function T2(i,a,o,h,m){if(im(i))throw Error(n(485));if(i=a.action,i!==null){var v={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){v.listeners.push(E)}};F.T!==null?o(!0):v.isTransition=!1,h(v),o=a.pending,o===null?(v.next=a.pending=v,T1(a,v)):(v.next=o.next,a.pending=o.next=v)}}function T1(i,a){var o=a.action,h=a.payload,m=i.state;if(a.isTransition){var v=F.T,E={};F.T=E;try{var M=o(m,h),j=F.S;j!==null&&j(E,M),D1(i,a,M)}catch(V){Pv(i,a,V)}finally{F.T=v}}else try{v=o(m,h),D1(i,a,v)}catch(V){Pv(i,a,V)}}function D1(i,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(h){k1(i,a,h)},function(h){return Pv(i,a,h)}):k1(i,a,o)}function k1(i,a,o){a.status="fulfilled",a.value=o,R1(a),i.state=o,a=i.pending,a!==null&&(o=a.next,o===a?i.pending=null:(o=o.next,a.next=o,T1(i,o)))}function Pv(i,a,o){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=o,R1(a),a=a.next;while(a!==h)}i.action=null}function R1(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function M1(i,a){return a}function N1(i,a){if(ae){var o=Ee.formState;if(o!==null){t:{var h=Yt;if(ae){if(Be){e:{for(var m=Be,v=$s;m.nodeType!==8;){if(!v){m=null;break e}if(m=Rs(m.nextSibling),m===null){m=null;break e}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){Be=Rs(m.nextSibling),h=m.data==="F!";break t}}ro(h)}h=!1}h&&(a=o[0])}}return o=gi(),o.memoizedState=o.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:M1,lastRenderedState:a},o.queue=h,o=Q1.bind(null,Yt,h),h.dispatch=o,h=Lv(!1),v=Bv.bind(null,Yt,!1,h.queue),h=gi(),m={state:a,dispatch:null,action:i,pending:null},h.queue=m,o=T2.bind(null,Yt,m,v,o),m.dispatch=o,h.memoizedState=i,[a,o,!1]}function O1(i){var a=Ze();return L1(a,ge,i)}function L1(i,a,o){if(a=Nv(i,a,M1)[0],i=tm(Pa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Dd(a)}catch(E){throw E===wd?$g:E}else h=a;a=Ze();var m=a.queue,v=m.dispatch;return o!==a.memoizedState&&(Yt.flags|=2048,ic(9,em(),D2.bind(null,m,o),null)),[h,v,i]}function D2(i,a){i.action=a}function P1(i){var a=Ze(),o=ge;if(o!==null)return L1(a,o,i);Ze(),a=a.memoizedState,o=Ze();var h=o.queue.dispatch;return o.memoizedState=i,[a,h,!1]}function ic(i,a,o,h){return i={tag:i,create:o,deps:h,inst:a,next:null},a=Yt.updateQueue,a===null&&(a=Rv(),Yt.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=i.next=i:(h=o.next,o.next=i,i.next=h,a.lastEffect=i),i}function em(){return{destroy:void 0,resource:void 0}}function z1(){return Ze().memoizedState}function nm(i,a,o,h){var m=gi();h=h===void 0?null:h,Yt.flags|=i,m.memoizedState=ic(1|a,em(),o,h)}function kd(i,a,o,h){var m=Ze();h=h===void 0?null:h;var v=m.memoizedState.inst;ge!==null&&h!==null&&_v(h,ge.memoizedState.deps)?m.memoizedState=ic(a,v,o,h):(Yt.flags|=i,m.memoizedState=ic(1|a,v,o,h))}function I1(i,a){nm(8390656,8,i,a)}function j1(i,a){kd(2048,8,i,a)}function F1(i,a){return kd(4,2,i,a)}function B1(i,a){return kd(4,4,i,a)}function H1(i,a){if(typeof a=="function"){i=i();var o=a(i);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function U1(i,a,o){o=o!=null?o.concat([i]):null,kd(4,4,H1.bind(null,a,i),o)}function zv(){}function G1(i,a){var o=Ze();a=a===void 0?null:a;var h=o.memoizedState;return a!==null&&_v(a,h[1])?h[0]:(o.memoizedState=[i,a],i)}function V1(i,a){var o=Ze();a=a===void 0?null:a;var h=o.memoizedState;if(a!==null&&_v(a,h[1]))return h[0];if(h=i(),co){Dt(!0);try{i()}finally{Dt(!1)}}return o.memoizedState=[h,a],h}function Iv(i,a,o){return o===void 0||(Fr&1073741824)!==0?i.memoizedState=a:(i.memoizedState=o,i=XE(),Yt.lanes|=i,Yr|=i,o)}function q1(i,a,o,h){return Di(o,a)?o:tc.current!==null?(i=Iv(i,o,h),Di(i,a)||(mn=!0),i):(Fr&42)===0?(mn=!0,i.memoizedState=o):(i=XE(),Yt.lanes|=i,Yr|=i,a)}function Y1(i,a,o,h,m){var v=q.p;q.p=v!==0&&8>v?v:8;var E=F.T,M={};F.T=M,Bv(i,!1,a,o);try{var j=m(),V=F.S;if(V!==null&&V(M,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var nt=E2(j,h);Rd(i,a,nt,Oi(i))}else Rd(i,a,h,Oi(i))}catch(lt){Rd(i,a,{then:function(){},status:"rejected",reason:lt},Oi())}finally{q.p=v,F.T=E}}function k2(){}function jv(i,a,o,h){if(i.tag!==5)throw Error(n(476));var m=X1(i).queue;Y1(i,m,a,yt,o===null?k2:function(){return $1(i),o(h)})}function X1(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:yt,baseState:yt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:yt},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:o},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function $1(i){var a=X1(i).next.queue;Rd(i,a,{},Oi())}function Fv(){return Un($d)}function W1(){return Ze().memoizedState}function K1(){return Ze().memoizedState}function R2(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var o=Oi();i=Ir(o);var h=jr(a,i,o);h!==null&&(Li(h,a,o),Ed(h,a,o)),a={cache:gv()},i.payload=a;return}a=a.return}}function M2(i,a,o){var h=Oi();o={lane:h,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},im(i)?Z1(a,o):(o=av(i,a,o,h),o!==null&&(Li(o,i,h),J1(o,a,h)))}function Q1(i,a,o){var h=Oi();Rd(i,a,o,h)}function Rd(i,a,o,h){var m={lane:h,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(im(i))Z1(a,m);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var E=a.lastRenderedState,M=v(E,o);if(m.hasEagerState=!0,m.eagerState=M,Di(M,E))return Bg(i,a,m,0),Ee===null&&Fg(),!1}catch{}finally{}if(o=av(i,a,m,h),o!==null)return Li(o,i,h),J1(o,a,h),!0}return!1}function Bv(i,a,o,h){if(h={lane:2,revertLane:b0(),action:h,hasEagerState:!1,eagerState:null,next:null},im(i)){if(a)throw Error(n(479))}else a=av(i,o,h,2),a!==null&&Li(a,i,2)}function im(i){var a=i.alternate;return i===Yt||a!==null&&a===Yt}function Z1(i,a){ec=Qg=!0;var o=i.pending;o===null?a.next=a:(a.next=o.next,o.next=a),i.pending=a}function J1(i,a,o){if((o&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,o|=h,a.lanes=o,Ql(i,o)}}var sm={readContext:Un,use:Jg,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useLayoutEffect:Ye,useInsertionEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useSyncExternalStore:Ye,useId:Ye,useHostTransitionStatus:Ye,useFormState:Ye,useActionState:Ye,useOptimistic:Ye,useMemoCache:Ye,useCacheRefresh:Ye},tE={readContext:Un,use:Jg,useCallback:function(i,a){return gi().memoizedState=[i,a===void 0?null:a],i},useContext:Un,useEffect:I1,useImperativeHandle:function(i,a,o){o=o!=null?o.concat([i]):null,nm(4194308,4,H1.bind(null,a,i),o)},useLayoutEffect:function(i,a){return nm(4194308,4,i,a)},useInsertionEffect:function(i,a){nm(4,2,i,a)},useMemo:function(i,a){var o=gi();a=a===void 0?null:a;var h=i();if(co){Dt(!0);try{i()}finally{Dt(!1)}}return o.memoizedState=[h,a],h},useReducer:function(i,a,o){var h=gi();if(o!==void 0){var m=o(a);if(co){Dt(!0);try{o(a)}finally{Dt(!1)}}}else m=a;return h.memoizedState=h.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},h.queue=i,i=i.dispatch=M2.bind(null,Yt,i),[h.memoizedState,i]},useRef:function(i){var a=gi();return i={current:i},a.memoizedState=i},useState:function(i){i=Lv(i);var a=i.queue,o=Q1.bind(null,Yt,a);return a.dispatch=o,[i.memoizedState,o]},useDebugValue:zv,useDeferredValue:function(i,a){var o=gi();return Iv(o,i,a)},useTransition:function(){var i=Lv(!1);return i=Y1.bind(null,Yt,i.queue,!0,!1),gi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,o){var h=Yt,m=gi();if(ae){if(o===void 0)throw Error(n(407));o=o()}else{if(o=a(),Ee===null)throw Error(n(349));(te&124)!==0||S1(h,a,o)}m.memoizedState=o;var v={value:o,getSnapshot:a};return m.queue=v,I1(x1.bind(null,h,v,i),[i]),h.flags|=2048,ic(9,em(),w1.bind(null,h,v,o,a),null),o},useId:function(){var i=gi(),a=Ee.identifierPrefix;if(ae){var o=Na,h=Ma;o=(h&~(1<<32-kt(h)-1)).toString(32)+o,a="«"+a+"R"+o,o=Zg++,0<o&&(a+="H"+o.toString(32)),a+="»"}else o=_2++,a="«"+a+"r"+o.toString(32)+"»";return i.memoizedState=a},useHostTransitionStatus:Fv,useFormState:N1,useActionState:N1,useOptimistic:function(i){var a=gi();a.memoizedState=a.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=Bv.bind(null,Yt,!0,o),o.dispatch=a,[i,a]},useMemoCache:Mv,useCacheRefresh:function(){return gi().memoizedState=R2.bind(null,Yt)}},eE={readContext:Un,use:Jg,useCallback:G1,useContext:Un,useEffect:j1,useImperativeHandle:U1,useInsertionEffect:F1,useLayoutEffect:B1,useMemo:V1,useReducer:tm,useRef:z1,useState:function(){return tm(Pa)},useDebugValue:zv,useDeferredValue:function(i,a){var o=Ze();return q1(o,ge.memoizedState,i,a)},useTransition:function(){var i=tm(Pa)[0],a=Ze().memoizedState;return[typeof i=="boolean"?i:Dd(i),a]},useSyncExternalStore:A1,useId:W1,useHostTransitionStatus:Fv,useFormState:O1,useActionState:O1,useOptimistic:function(i,a){var o=Ze();return C1(o,ge,i,a)},useMemoCache:Mv,useCacheRefresh:K1},N2={readContext:Un,use:Jg,useCallback:G1,useContext:Un,useEffect:j1,useImperativeHandle:U1,useInsertionEffect:F1,useLayoutEffect:B1,useMemo:V1,useReducer:Ov,useRef:z1,useState:function(){return Ov(Pa)},useDebugValue:zv,useDeferredValue:function(i,a){var o=Ze();return ge===null?Iv(o,i,a):q1(o,ge.memoizedState,i,a)},useTransition:function(){var i=Ov(Pa)[0],a=Ze().memoizedState;return[typeof i=="boolean"?i:Dd(i),a]},useSyncExternalStore:A1,useId:W1,useHostTransitionStatus:Fv,useFormState:P1,useActionState:P1,useOptimistic:function(i,a){var o=Ze();return ge!==null?C1(o,ge,i,a):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:Mv,useCacheRefresh:K1},sc=null,Md=0;function am(i){var a=Md;return Md+=1,sc===null&&(sc=[]),d1(sc,i,a)}function Nd(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function rm(i,a){throw a.$$typeof===y?Error(n(525)):(i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function nE(i){var a=i._init;return a(i._payload)}function iE(i){function a(U,H){if(i){var G=U.deletions;G===null?(U.deletions=[H],U.flags|=16):G.push(H)}}function o(U,H){if(!i)return null;for(;H!==null;)a(U,H),H=H.sibling;return null}function h(U){for(var H=new Map;U!==null;)U.key!==null?H.set(U.key,U):H.set(U.index,U),U=U.sibling;return H}function m(U,H){return U=Ra(U,H),U.index=0,U.sibling=null,U}function v(U,H,G){return U.index=G,i?(G=U.alternate,G!==null?(G=G.index,G<H?(U.flags|=67108866,H):G):(U.flags|=67108866,H)):(U.flags|=1048576,H)}function E(U){return i&&U.alternate===null&&(U.flags|=67108866),U}function M(U,H,G,rt){return H===null||H.tag!==6?(H=lv(G,U.mode,rt),H.return=U,H):(H=m(H,G),H.return=U,H)}function j(U,H,G,rt){var wt=G.type;return wt===w?nt(U,H,G.props.children,rt,G.key):H!==null&&(H.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===W&&nE(wt)===H.type)?(H=m(H,G.props),Nd(H,G),H.return=U,H):(H=Ug(G.type,G.key,G.props,null,U.mode,rt),Nd(H,G),H.return=U,H)}function V(U,H,G,rt){return H===null||H.tag!==4||H.stateNode.containerInfo!==G.containerInfo||H.stateNode.implementation!==G.implementation?(H=ov(G,U.mode,rt),H.return=U,H):(H=m(H,G.children||[]),H.return=U,H)}function nt(U,H,G,rt,wt){return H===null||H.tag!==7?(H=no(G,U.mode,rt,wt),H.return=U,H):(H=m(H,G),H.return=U,H)}function lt(U,H,G){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=lv(""+H,U.mode,G),H.return=U,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return G=Ug(H.type,H.key,H.props,null,U.mode,G),Nd(G,H),G.return=U,G;case A:return H=ov(H,U.mode,G),H.return=U,H;case W:var rt=H._init;return H=rt(H._payload),lt(U,H,G)}if(ht(H)||Z(H))return H=no(H,U.mode,G,null),H.return=U,H;if(typeof H.then=="function")return lt(U,am(H),G);if(H.$$typeof===O)return lt(U,Yg(U,H),G);rm(U,H)}return null}function Y(U,H,G,rt){var wt=H!==null?H.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return wt!==null?null:M(U,H,""+G,rt);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case b:return G.key===wt?j(U,H,G,rt):null;case A:return G.key===wt?V(U,H,G,rt):null;case W:return wt=G._init,G=wt(G._payload),Y(U,H,G,rt)}if(ht(G)||Z(G))return wt!==null?null:nt(U,H,G,rt,null);if(typeof G.then=="function")return Y(U,H,am(G),rt);if(G.$$typeof===O)return Y(U,H,Yg(U,G),rt);rm(U,G)}return null}function $(U,H,G,rt,wt){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return U=U.get(G)||null,M(H,U,""+rt,wt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case b:return U=U.get(rt.key===null?G:rt.key)||null,j(H,U,rt,wt);case A:return U=U.get(rt.key===null?G:rt.key)||null,V(H,U,rt,wt);case W:var Xt=rt._init;return rt=Xt(rt._payload),$(U,H,G,rt,wt)}if(ht(rt)||Z(rt))return U=U.get(G)||null,nt(H,U,rt,wt,null);if(typeof rt.then=="function")return $(U,H,G,am(rt),wt);if(rt.$$typeof===O)return $(U,H,G,Yg(H,rt),wt);rm(H,rt)}return null}function Ot(U,H,G,rt){for(var wt=null,Xt=null,Ct=H,Nt=H=0,bn=null;Ct!==null&&Nt<G.length;Nt++){Ct.index>Nt?(bn=Ct,Ct=null):bn=Ct.sibling;var se=Y(U,Ct,G[Nt],rt);if(se===null){Ct===null&&(Ct=bn);break}i&&Ct&&se.alternate===null&&a(U,Ct),H=v(se,H,Nt),Xt===null?wt=se:Xt.sibling=se,Xt=se,Ct=bn}if(Nt===G.length)return o(U,Ct),ae&&so(U,Nt),wt;if(Ct===null){for(;Nt<G.length;Nt++)Ct=lt(U,G[Nt],rt),Ct!==null&&(H=v(Ct,H,Nt),Xt===null?wt=Ct:Xt.sibling=Ct,Xt=Ct);return ae&&so(U,Nt),wt}for(Ct=h(Ct);Nt<G.length;Nt++)bn=$(Ct,U,Nt,G[Nt],rt),bn!==null&&(i&&bn.alternate!==null&&Ct.delete(bn.key===null?Nt:bn.key),H=v(bn,H,Nt),Xt===null?wt=bn:Xt.sibling=bn,Xt=bn);return i&&Ct.forEach(function(el){return a(U,el)}),ae&&so(U,Nt),wt}function Rt(U,H,G,rt){if(G==null)throw Error(n(151));for(var wt=null,Xt=null,Ct=H,Nt=H=0,bn=null,se=G.next();Ct!==null&&!se.done;Nt++,se=G.next()){Ct.index>Nt?(bn=Ct,Ct=null):bn=Ct.sibling;var el=Y(U,Ct,se.value,rt);if(el===null){Ct===null&&(Ct=bn);break}i&&Ct&&el.alternate===null&&a(U,Ct),H=v(el,H,Nt),Xt===null?wt=el:Xt.sibling=el,Xt=el,Ct=bn}if(se.done)return o(U,Ct),ae&&so(U,Nt),wt;if(Ct===null){for(;!se.done;Nt++,se=G.next())se=lt(U,se.value,rt),se!==null&&(H=v(se,H,Nt),Xt===null?wt=se:Xt.sibling=se,Xt=se);return ae&&so(U,Nt),wt}for(Ct=h(Ct);!se.done;Nt++,se=G.next())se=$(Ct,U,Nt,se.value,rt),se!==null&&(i&&se.alternate!==null&&Ct.delete(se.key===null?Nt:se.key),H=v(se,H,Nt),Xt===null?wt=se:Xt.sibling=se,Xt=se);return i&&Ct.forEach(function(ON){return a(U,ON)}),ae&&so(U,Nt),wt}function ye(U,H,G,rt){if(typeof G=="object"&&G!==null&&G.type===w&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case b:t:{for(var wt=G.key;H!==null;){if(H.key===wt){if(wt=G.type,wt===w){if(H.tag===7){o(U,H.sibling),rt=m(H,G.props.children),rt.return=U,U=rt;break t}}else if(H.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===W&&nE(wt)===H.type){o(U,H.sibling),rt=m(H,G.props),Nd(rt,G),rt.return=U,U=rt;break t}o(U,H);break}else a(U,H);H=H.sibling}G.type===w?(rt=no(G.props.children,U.mode,rt,G.key),rt.return=U,U=rt):(rt=Ug(G.type,G.key,G.props,null,U.mode,rt),Nd(rt,G),rt.return=U,U=rt)}return E(U);case A:t:{for(wt=G.key;H!==null;){if(H.key===wt)if(H.tag===4&&H.stateNode.containerInfo===G.containerInfo&&H.stateNode.implementation===G.implementation){o(U,H.sibling),rt=m(H,G.children||[]),rt.return=U,U=rt;break t}else{o(U,H);break}else a(U,H);H=H.sibling}rt=ov(G,U.mode,rt),rt.return=U,U=rt}return E(U);case W:return wt=G._init,G=wt(G._payload),ye(U,H,G,rt)}if(ht(G))return Ot(U,H,G,rt);if(Z(G)){if(wt=Z(G),typeof wt!="function")throw Error(n(150));return G=wt.call(G),Rt(U,H,G,rt)}if(typeof G.then=="function")return ye(U,H,am(G),rt);if(G.$$typeof===O)return ye(U,H,Yg(U,G),rt);rm(U,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,H!==null&&H.tag===6?(o(U,H.sibling),rt=m(H,G),rt.return=U,U=rt):(o(U,H),rt=lv(G,U.mode,rt),rt.return=U,U=rt),E(U)):o(U,H)}return function(U,H,G,rt){try{Md=0;var wt=ye(U,H,G,rt);return sc=null,wt}catch(Ct){if(Ct===wd||Ct===$g)throw Ct;var Xt=ki(29,Ct,null,U.mode);return Xt.lanes=rt,Xt.return=U,Xt}finally{}}}var ac=iE(!0),sE=iE(!1),os=K(null),Ws=null;function Br(i){var a=i.alternate;R(un,un.current&1),R(os,i),Ws===null&&(a===null||tc.current!==null||a.memoizedState!==null)&&(Ws=i)}function aE(i){if(i.tag===22){if(R(un,un.current),R(os,i),Ws===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Ws=i)}}else Hr()}function Hr(){R(un,un.current),R(os,os.current)}function za(i){ot(os),Ws===i&&(Ws=null),ot(un)}var un=K(0);function lm(i){for(var a=i;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||R0(o)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function Hv(i,a,o,h){a=i.memoizedState,o=o(h,a),o=o==null?a:g({},a,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Uv={enqueueSetState:function(i,a,o){i=i._reactInternals;var h=Oi(),m=Ir(h);m.payload=a,o!=null&&(m.callback=o),a=jr(i,m,h),a!==null&&(Li(a,i,h),Ed(a,i,h))},enqueueReplaceState:function(i,a,o){i=i._reactInternals;var h=Oi(),m=Ir(h);m.tag=1,m.payload=a,o!=null&&(m.callback=o),a=jr(i,m,h),a!==null&&(Li(a,i,h),Ed(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var o=Oi(),h=Ir(o);h.tag=2,a!=null&&(h.callback=a),a=jr(i,h,o),a!==null&&(Li(a,i,o),Ed(a,i,o))}};function rE(i,a,o,h,m,v,E){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,v,E):a.prototype&&a.prototype.isPureReactComponent?!pd(o,h)||!pd(m,v):!0}function lE(i,a,o,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,h),a.state!==i&&Uv.enqueueReplaceState(a,a.state,null)}function ho(i,a){var o=a;if("ref"in a){o={};for(var h in a)h!=="ref"&&(o[h]=a[h])}if(i=i.defaultProps){o===a&&(o=g({},o));for(var m in i)o[m]===void 0&&(o[m]=i[m])}return o}var om=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function oE(i){om(i)}function uE(i){console.error(i)}function cE(i){om(i)}function um(i,a){try{var o=i.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function hE(i,a,o){try{var h=i.onCaughtError;h(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Gv(i,a,o){return o=Ir(o),o.tag=3,o.payload={element:null},o.callback=function(){um(i,a)},o}function dE(i){return i=Ir(i),i.tag=3,i}function fE(i,a,o,h){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var v=h.value;i.payload=function(){return m(v)},i.callback=function(){hE(a,o,h)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(i.callback=function(){hE(a,o,h),typeof m!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var M=h.stack;this.componentDidCatch(h.value,{componentStack:M!==null?M:""})})}function O2(i,a,o,h,m){if(o.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=o.alternate,a!==null&&vd(a,o,m,!0),o=os.current,o!==null){switch(o.tag){case 13:return Ws===null?f0():o.alternate===null&&He===0&&(He=3),o.flags&=-257,o.flags|=65536,o.lanes=m,h===bv?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([h]):a.add(h),g0(i,h,m)),!1;case 22:return o.flags|=65536,h===bv?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([h]):o.add(h)),g0(i,h,m)),!1}throw Error(n(435,o.tag))}return g0(i,h,m),f0(),!1}if(ae)return a=os.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,h!==hv&&(i=Error(n(422),{cause:h}),bd(ss(i,o)))):(h!==hv&&(a=Error(n(423),{cause:h}),bd(ss(a,o))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,h=ss(h,o),m=Gv(i.stateNode,h,m),Sv(i,m),He!==4&&(He=2)),!1;var v=Error(n(520),{cause:h});if(v=ss(v,o),Fd===null?Fd=[v]:Fd.push(v),He!==4&&(He=2),a===null)return!0;h=ss(h,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,i=m&-m,o.lanes|=i,i=Gv(o.stateNode,h,i),Sv(o,i),!1;case 1:if(a=o.type,v=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Xr===null||!Xr.has(v))))return o.flags|=65536,m&=-m,o.lanes|=m,m=dE(m),fE(m,i,o,h),Sv(o,m),!1}o=o.return}while(o!==null);return!1}var pE=Error(n(461)),mn=!1;function Cn(i,a,o,h){a.child=i===null?sE(a,null,o,h):ac(a,i.child,o,h)}function gE(i,a,o,h,m){o=o.render;var v=a.ref;if("ref"in h){var E={};for(var M in h)M!=="ref"&&(E[M]=h[M])}else E=h;return oo(a),h=Cv(i,a,o,E,v,m),M=Tv(),i!==null&&!mn?(Dv(i,a,m),Ia(i,a,m)):(ae&&M&&uv(a),a.flags|=1,Cn(i,a,h,m),a.child)}function mE(i,a,o,h,m){if(i===null){var v=o.type;return typeof v=="function"&&!rv(v)&&v.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=v,yE(i,a,v,h,m)):(i=Ug(o.type,null,h,a,a.mode,m),i.ref=a.ref,i.return=a,a.child=i)}if(v=i.child,!Qv(i,m)){var E=v.memoizedProps;if(o=o.compare,o=o!==null?o:pd,o(E,h)&&i.ref===a.ref)return Ia(i,a,m)}return a.flags|=1,i=Ra(v,h),i.ref=a.ref,i.return=a,a.child=i}function yE(i,a,o,h,m){if(i!==null){var v=i.memoizedProps;if(pd(v,h)&&i.ref===a.ref)if(mn=!1,a.pendingProps=h=v,Qv(i,m))(i.flags&131072)!==0&&(mn=!0);else return a.lanes=i.lanes,Ia(i,a,m)}return Vv(i,a,o,h,m)}function bE(i,a,o){var h=a.pendingProps,m=h.children,v=i!==null?i.memoizedState:null;if(h.mode==="hidden"){if((a.flags&128)!==0){if(h=v!==null?v.baseLanes|o:o,i!==null){for(m=a.child=i.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;a.childLanes=v&~h}else a.childLanes=0,a.child=null;return vE(i,a,h,o)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Xg(a,v!==null?v.cachePool:null),v!==null?y1(a,v):xv(),aE(a);else return a.lanes=a.childLanes=536870912,vE(i,a,v!==null?v.baseLanes|o:o,o)}else v!==null?(Xg(a,v.cachePool),y1(a,v),Hr(),a.memoizedState=null):(i!==null&&Xg(a,null),xv(),Hr());return Cn(i,a,m,o),a.child}function vE(i,a,o,h){var m=yv();return m=m===null?null:{parent:on._currentValue,pool:m},a.memoizedState={baseLanes:o,cachePool:m},i!==null&&Xg(a,null),xv(),aE(a),i!==null&&vd(i,a,h,!0),null}function cm(i,a){var o=a.ref;if(o===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(n(284));(i===null||i.ref!==o)&&(a.flags|=4194816)}}function Vv(i,a,o,h,m){return oo(a),o=Cv(i,a,o,h,void 0,m),h=Tv(),i!==null&&!mn?(Dv(i,a,m),Ia(i,a,m)):(ae&&h&&uv(a),a.flags|=1,Cn(i,a,o,m),a.child)}function AE(i,a,o,h,m,v){return oo(a),a.updateQueue=null,o=v1(a,h,o,m),b1(i),h=Tv(),i!==null&&!mn?(Dv(i,a,v),Ia(i,a,v)):(ae&&h&&uv(a),a.flags|=1,Cn(i,a,o,v),a.child)}function SE(i,a,o,h,m){if(oo(a),a.stateNode===null){var v=Wu,E=o.contextType;typeof E=="object"&&E!==null&&(v=Un(E)),v=new o(h,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Uv,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=h,v.state=a.memoizedState,v.refs={},vv(a),E=o.contextType,v.context=typeof E=="object"&&E!==null?Un(E):Wu,v.state=a.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Hv(a,o,E,h),v.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(E=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),E!==v.state&&Uv.enqueueReplaceState(v,v.state,null),Cd(a,h,v,m),_d(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){v=a.stateNode;var M=a.memoizedProps,j=ho(o,M);v.props=j;var V=v.context,nt=o.contextType;E=Wu,typeof nt=="object"&&nt!==null&&(E=Un(nt));var lt=o.getDerivedStateFromProps;nt=typeof lt=="function"||typeof v.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,nt||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(M||V!==E)&&lE(a,v,h,E),zr=!1;var Y=a.memoizedState;v.state=Y,Cd(a,h,v,m),_d(),V=a.memoizedState,M||Y!==V||zr?(typeof lt=="function"&&(Hv(a,o,lt,h),V=a.memoizedState),(j=zr||rE(a,o,j,h,Y,V,E))?(nt||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=V),v.props=h,v.state=V,v.context=E,h=j):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{v=a.stateNode,Av(i,a),E=a.memoizedProps,nt=ho(o,E),v.props=nt,lt=a.pendingProps,Y=v.context,V=o.contextType,j=Wu,typeof V=="object"&&V!==null&&(j=Un(V)),M=o.getDerivedStateFromProps,(V=typeof M=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==lt||Y!==j)&&lE(a,v,h,j),zr=!1,Y=a.memoizedState,v.state=Y,Cd(a,h,v,m),_d();var $=a.memoizedState;E!==lt||Y!==$||zr||i!==null&&i.dependencies!==null&&qg(i.dependencies)?(typeof M=="function"&&(Hv(a,o,M,h),$=a.memoizedState),(nt=zr||rE(a,o,nt,h,Y,$,j)||i!==null&&i.dependencies!==null&&qg(i.dependencies))?(V||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,$,j),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,$,j)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||E===i.memoizedProps&&Y===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&Y===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=$),v.props=h,v.state=$,v.context=j,h=nt):(typeof v.componentDidUpdate!="function"||E===i.memoizedProps&&Y===i.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&Y===i.memoizedState||(a.flags|=1024),h=!1)}return v=h,cm(i,a),h=(a.flags&128)!==0,v||h?(v=a.stateNode,o=h&&typeof o.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,i!==null&&h?(a.child=ac(a,i.child,null,m),a.child=ac(a,null,o,m)):Cn(i,a,o,m),a.memoizedState=v.state,i=a.child):i=Ia(i,a,m),i}function wE(i,a,o,h){return yd(),a.flags|=256,Cn(i,a,o,h),a.child}var qv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yv(i){return{baseLanes:i,cachePool:u1()}}function Xv(i,a,o){return i=i!==null?i.childLanes&~o:0,a&&(i|=us),i}function xE(i,a,o){var h=a.pendingProps,m=!1,v=(a.flags&128)!==0,E;if((E=v)||(E=i!==null&&i.memoizedState===null?!1:(un.current&2)!==0),E&&(m=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,i===null){if(ae){if(m?Br(a):Hr(),ae){var M=Be,j;if(j=M){t:{for(j=M,M=$s;j.nodeType!==8;){if(!M){M=null;break t}if(j=Rs(j.nextSibling),j===null){M=null;break t}}M=j}M!==null?(a.memoizedState={dehydrated:M,treeContext:io!==null?{id:Ma,overflow:Na}:null,retryLane:536870912,hydrationErrors:null},j=ki(18,null,null,0),j.stateNode=M,j.return=a,a.child=j,ti=a,Be=null,j=!0):j=!1}j||ro(a)}if(M=a.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return R0(M)?a.lanes=32:a.lanes=536870912,null;za(a)}return M=h.children,h=h.fallback,m?(Hr(),m=a.mode,M=hm({mode:"hidden",children:M},m),h=no(h,m,o,null),M.return=a,h.return=a,M.sibling=h,a.child=M,m=a.child,m.memoizedState=Yv(o),m.childLanes=Xv(i,E,o),a.memoizedState=qv,h):(Br(a),$v(a,M))}if(j=i.memoizedState,j!==null&&(M=j.dehydrated,M!==null)){if(v)a.flags&256?(Br(a),a.flags&=-257,a=Wv(i,a,o)):a.memoizedState!==null?(Hr(),a.child=i.child,a.flags|=128,a=null):(Hr(),m=h.fallback,M=a.mode,h=hm({mode:"visible",children:h.children},M),m=no(m,M,o,null),m.flags|=2,h.return=a,m.return=a,h.sibling=m,a.child=h,ac(a,i.child,null,o),h=a.child,h.memoizedState=Yv(o),h.childLanes=Xv(i,E,o),a.memoizedState=qv,a=m);else if(Br(a),R0(M)){if(E=M.nextSibling&&M.nextSibling.dataset,E)var V=E.dgst;E=V,h=Error(n(419)),h.stack="",h.digest=E,bd({value:h,source:null,stack:null}),a=Wv(i,a,o)}else if(mn||vd(i,a,o,!1),E=(o&i.childLanes)!==0,mn||E){if(E=Ee,E!==null&&(h=o&-o,h=(h&42)!==0?1:we(h),h=(h&(E.suspendedLanes|o))!==0?0:h,h!==0&&h!==j.retryLane))throw j.retryLane=h,$u(i,h),Li(E,i,h),pE;M.data==="$?"||f0(),a=Wv(i,a,o)}else M.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=j.treeContext,Be=Rs(M.nextSibling),ti=a,ae=!0,ao=null,$s=!1,i!==null&&(rs[ls++]=Ma,rs[ls++]=Na,rs[ls++]=io,Ma=i.id,Na=i.overflow,io=a),a=$v(a,h.children),a.flags|=4096);return a}return m?(Hr(),m=h.fallback,M=a.mode,j=i.child,V=j.sibling,h=Ra(j,{mode:"hidden",children:h.children}),h.subtreeFlags=j.subtreeFlags&65011712,V!==null?m=Ra(V,m):(m=no(m,M,o,null),m.flags|=2),m.return=a,h.return=a,h.sibling=m,a.child=h,h=m,m=a.child,M=i.child.memoizedState,M===null?M=Yv(o):(j=M.cachePool,j!==null?(V=on._currentValue,j=j.parent!==V?{parent:V,pool:V}:j):j=u1(),M={baseLanes:M.baseLanes|o,cachePool:j}),m.memoizedState=M,m.childLanes=Xv(i,E,o),a.memoizedState=qv,h):(Br(a),o=i.child,i=o.sibling,o=Ra(o,{mode:"visible",children:h.children}),o.return=a,o.sibling=null,i!==null&&(E=a.deletions,E===null?(a.deletions=[i],a.flags|=16):E.push(i)),a.child=o,a.memoizedState=null,o)}function $v(i,a){return a=hm({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function hm(i,a){return i=ki(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Wv(i,a,o){return ac(a,i.child,null,o),i=$v(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function EE(i,a,o){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),fv(i.return,a,o)}function Kv(i,a,o,h,m){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:o,tailMode:m}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=o,v.tailMode=m)}function _E(i,a,o){var h=a.pendingProps,m=h.revealOrder,v=h.tail;if(Cn(i,a,h.children,o),h=un.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&EE(i,o,a);else if(i.tag===19)EE(i,o,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break t;for(;i.sibling===null;){if(i.return===null||i.return===a)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}switch(R(un,h),m){case"forwards":for(o=a.child,m=null;o!==null;)i=o.alternate,i!==null&&lm(i)===null&&(m=o),o=o.sibling;o=m,o===null?(m=a.child,a.child=null):(m=o.sibling,o.sibling=null),Kv(a,!1,m,o,v);break;case"backwards":for(o=null,m=a.child,a.child=null;m!==null;){if(i=m.alternate,i!==null&&lm(i)===null){a.child=m;break}i=m.sibling,m.sibling=o,o=m,m=i}Kv(a,!0,o,null,v);break;case"together":Kv(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ia(i,a,o){if(i!==null&&(a.dependencies=i.dependencies),Yr|=a.lanes,(o&a.childLanes)===0)if(i!==null){if(vd(i,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,o=Ra(i,i.pendingProps),a.child=o,o.return=a;i.sibling!==null;)i=i.sibling,o=o.sibling=Ra(i,i.pendingProps),o.return=a;o.sibling=null}return a.child}function Qv(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&qg(i)))}function L2(i,a,o){switch(a.tag){case 3:mt(a,a.stateNode.containerInfo),Pr(a,on,i.memoizedState.cache),yd();break;case 27:case 5:Bt(a);break;case 4:mt(a,a.stateNode.containerInfo);break;case 10:Pr(a,a.type,a.memoizedProps.value);break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Br(a),a.flags|=128,null):(o&a.child.childLanes)!==0?xE(i,a,o):(Br(a),i=Ia(i,a,o),i!==null?i.sibling:null);Br(a);break;case 19:var m=(i.flags&128)!==0;if(h=(o&a.childLanes)!==0,h||(vd(i,a,o,!1),h=(o&a.childLanes)!==0),m){if(h)return _E(i,a,o);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),R(un,un.current),h)break;return null;case 22:case 23:return a.lanes=0,bE(i,a,o);case 24:Pr(a,on,i.memoizedState.cache)}return Ia(i,a,o)}function CE(i,a,o){if(i!==null)if(i.memoizedProps!==a.pendingProps)mn=!0;else{if(!Qv(i,o)&&(a.flags&128)===0)return mn=!1,L2(i,a,o);mn=(i.flags&131072)!==0}else mn=!1,ae&&(a.flags&1048576)!==0&&n1(a,Vg,a.index);switch(a.lanes=0,a.tag){case 16:t:{i=a.pendingProps;var h=a.elementType,m=h._init;if(h=m(h._payload),a.type=h,typeof h=="function")rv(h)?(i=ho(h,i),a.tag=1,a=SE(null,a,h,i,o)):(a.tag=0,a=Vv(null,a,h,i,o));else{if(h!=null){if(m=h.$$typeof,m===I){a.tag=11,a=gE(null,a,h,i,o);break t}else if(m===B){a.tag=14,a=mE(null,a,h,i,o);break t}}throw a=J(h)||h,Error(n(306,a,""))}}return a;case 0:return Vv(i,a,a.type,a.pendingProps,o);case 1:return h=a.type,m=ho(h,a.pendingProps),SE(i,a,h,m,o);case 3:t:{if(mt(a,a.stateNode.containerInfo),i===null)throw Error(n(387));h=a.pendingProps;var v=a.memoizedState;m=v.element,Av(i,a),Cd(a,h,null,o);var E=a.memoizedState;if(h=E.cache,Pr(a,on,h),h!==v.cache&&pv(a,[on],o,!0),_d(),h=E.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=wE(i,a,h,o);break t}else if(h!==m){m=ss(Error(n(424)),a),bd(m),a=wE(i,a,h,o);break t}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Be=Rs(i.firstChild),ti=a,ae=!0,ao=null,$s=!0,o=sE(a,null,h,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(yd(),h===m){a=Ia(i,a,o);break t}Cn(i,a,h,o)}a=a.child}return a;case 26:return cm(i,a),i===null?(o=R_(a.type,null,a.pendingProps,null))?a.memoizedState=o:ae||(o=a.type,i=a.pendingProps,h=_m(it.current).createElement(o),h[ln]=a,h[gn]=i,Dn(h,o,i),qt(h),a.stateNode=h):a.memoizedState=R_(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Bt(a),i===null&&ae&&(h=a.stateNode=T_(a.type,a.pendingProps,it.current),ti=a,$s=!0,m=Be,Kr(a.type)?(M0=m,Be=Rs(h.firstChild)):Be=m),Cn(i,a,a.pendingProps.children,o),cm(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&ae&&((m=h=Be)&&(h=oN(h,a.type,a.pendingProps,$s),h!==null?(a.stateNode=h,ti=a,Be=Rs(h.firstChild),$s=!1,m=!0):m=!1),m||ro(a)),Bt(a),m=a.type,v=a.pendingProps,E=i!==null?i.memoizedProps:null,h=v.children,T0(m,v)?h=null:E!==null&&T0(m,E)&&(a.flags|=32),a.memoizedState!==null&&(m=Cv(i,a,C2,null,null,o),$d._currentValue=m),cm(i,a),Cn(i,a,h,o),a.child;case 6:return i===null&&ae&&((i=o=Be)&&(o=uN(o,a.pendingProps,$s),o!==null?(a.stateNode=o,ti=a,Be=null,i=!0):i=!1),i||ro(a)),null;case 13:return xE(i,a,o);case 4:return mt(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=ac(a,null,h,o):Cn(i,a,h,o),a.child;case 11:return gE(i,a,a.type,a.pendingProps,o);case 7:return Cn(i,a,a.pendingProps,o),a.child;case 8:return Cn(i,a,a.pendingProps.children,o),a.child;case 12:return Cn(i,a,a.pendingProps.children,o),a.child;case 10:return h=a.pendingProps,Pr(a,a.type,h.value),Cn(i,a,h.children,o),a.child;case 9:return m=a.type._context,h=a.pendingProps.children,oo(a),m=Un(m),h=h(m),a.flags|=1,Cn(i,a,h,o),a.child;case 14:return mE(i,a,a.type,a.pendingProps,o);case 15:return yE(i,a,a.type,a.pendingProps,o);case 19:return _E(i,a,o);case 31:return h=a.pendingProps,o=a.mode,h={mode:h.mode,children:h.children},i===null?(o=hm(h,o),o.ref=a.ref,a.child=o,o.return=a,a=o):(o=Ra(i.child,h),o.ref=a.ref,a.child=o,o.return=a,a=o),a;case 22:return bE(i,a,o);case 24:return oo(a),h=Un(on),i===null?(m=yv(),m===null&&(m=Ee,v=gv(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=o),m=v),a.memoizedState={parent:h,cache:m},vv(a),Pr(a,on,m)):((i.lanes&o)!==0&&(Av(i,a),Cd(a,null,null,o),_d()),m=i.memoizedState,v=a.memoizedState,m.parent!==h?(m={parent:h,cache:h},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),Pr(a,on,h)):(h=v.cache,Pr(a,on,h),h!==m.cache&&pv(a,[on],o,!0))),Cn(i,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function ja(i){i.flags|=4}function TE(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!P_(a)){if(a=os.current,a!==null&&((te&4194048)===te?Ws!==null:(te&62914560)!==te&&(te&536870912)===0||a!==Ws))throw xd=bv,c1;i.flags|=8192}}function dm(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?nd():536870912,i.lanes|=a,uc|=a)}function Od(i,a){if(!ae)switch(i.tailMode){case"hidden":a=i.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Pe(i){var a=i.alternate!==null&&i.alternate.child===i.child,o=0,h=0;if(a)for(var m=i.child;m!==null;)o|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)o|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=h,i.childLanes=o,a}function P2(i,a,o){var h=a.pendingProps;switch(cv(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(a),null;case 1:return Pe(a),null;case 3:return o=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),La(on),Tt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(md(a)?ja(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,a1())),Pe(a),null;case 26:return o=a.memoizedState,i===null?(ja(a),o!==null?(Pe(a),TE(a,o)):(Pe(a),a.flags&=-16777217)):o?o!==i.memoizedState?(ja(a),Pe(a),TE(a,o)):(Pe(a),a.flags&=-16777217):(i.memoizedProps!==h&&ja(a),Pe(a),a.flags&=-16777217),null;case 27:fe(a),o=it.current;var m=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ja(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Pe(a),null}i=at.current,md(a)?i1(a):(i=T_(m,h,o),a.stateNode=i,ja(a))}return Pe(a),null;case 5:if(fe(a),o=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&ja(a);else{if(!h){if(a.stateNode===null)throw Error(n(166));return Pe(a),null}if(i=at.current,md(a))i1(a);else{switch(m=_m(it.current),i){case 1:i=m.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=m.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=m.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=m.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof h.is=="string"?m.createElement("select",{is:h.is}):m.createElement("select"),h.multiple?i.multiple=!0:h.size&&(i.size=h.size);break;default:i=typeof h.is=="string"?m.createElement(o,{is:h.is}):m.createElement(o)}}i[ln]=a,i[gn]=h;t:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)i.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break t;for(;m.sibling===null;){if(m.return===null||m.return===a)break t;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=i;t:switch(Dn(i,o,h),o){case"button":case"input":case"select":case"textarea":i=!!h.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&ja(a)}}return Pe(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&ja(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(n(166));if(i=it.current,md(a)){if(i=a.stateNode,o=a.memoizedProps,h=null,m=ti,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}i[ln]=a,i=!!(i.nodeValue===o||h!==null&&h.suppressHydrationWarning===!0||A_(i.nodeValue,o)),i||ro(a)}else i=_m(i).createTextNode(h),i[ln]=a,a.stateNode=i}return Pe(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=md(a),h!==null&&h.dehydrated!==null){if(i===null){if(!m)throw Error(n(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[ln]=a}else yd(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pe(a),m=!1}else m=a1(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(za(a),a):(za(a),null)}if(za(a),(a.flags&128)!==0)return a.lanes=o,a;if(o=h!==null,i=i!==null&&i.memoizedState!==null,o){h=a.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool);var v=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==m&&(h.flags|=2048)}return o!==i&&o&&(a.child.flags|=8192),dm(a,a.updateQueue),Pe(a),null;case 4:return Tt(),i===null&&w0(a.stateNode.containerInfo),Pe(a),null;case 10:return La(a.type),Pe(a),null;case 19:if(ot(un),m=a.memoizedState,m===null)return Pe(a),null;if(h=(a.flags&128)!==0,v=m.rendering,v===null)if(h)Od(m,!1);else{if(He!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(v=lm(i),v!==null){for(a.flags|=128,Od(m,!1),i=v.updateQueue,a.updateQueue=i,dm(a,i),a.subtreeFlags=0,i=o,o=a.child;o!==null;)e1(o,i),o=o.sibling;return R(un,un.current&1|2),a.child}i=i.sibling}m.tail!==null&&Fe()>gm&&(a.flags|=128,h=!0,Od(m,!1),a.lanes=4194304)}else{if(!h)if(i=lm(v),i!==null){if(a.flags|=128,h=!0,i=i.updateQueue,a.updateQueue=i,dm(a,i),Od(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!ae)return Pe(a),null}else 2*Fe()-m.renderingStartTime>gm&&o!==536870912&&(a.flags|=128,h=!0,Od(m,!1),a.lanes=4194304);m.isBackwards?(v.sibling=a.child,a.child=v):(i=m.last,i!==null?i.sibling=v:a.child=v,m.last=v)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=Fe(),a.sibling=null,i=un.current,R(un,h?i&1|2:i&1),a):(Pe(a),null);case 22:case 23:return za(a),Ev(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(o&536870912)!==0&&(a.flags&128)===0&&(Pe(a),a.subtreeFlags&6&&(a.flags|=8192)):Pe(a),o=a.updateQueue,o!==null&&dm(a,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==o&&(a.flags|=2048),i!==null&&ot(uo),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),La(on),Pe(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function z2(i,a){switch(cv(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return La(on),Tt(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return fe(a),null;case 13:if(za(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));yd()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ot(un),null;case 4:return Tt(),null;case 10:return La(a.type),null;case 22:case 23:return za(a),Ev(),i!==null&&ot(uo),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return La(on),null;case 25:return null;default:return null}}function DE(i,a){switch(cv(a),a.tag){case 3:La(on),Tt();break;case 26:case 27:case 5:fe(a);break;case 4:Tt();break;case 13:za(a);break;case 19:ot(un);break;case 10:La(a.type);break;case 22:case 23:za(a),Ev(),i!==null&&ot(uo);break;case 24:La(on)}}function Ld(i,a){try{var o=a.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var m=h.next;o=m;do{if((o.tag&i)===i){h=void 0;var v=o.create,E=o.inst;h=v(),E.destroy=h}o=o.next}while(o!==m)}}catch(M){xe(a,a.return,M)}}function Ur(i,a,o){try{var h=a.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var v=m.next;h=v;do{if((h.tag&i)===i){var E=h.inst,M=E.destroy;if(M!==void 0){E.destroy=void 0,m=a;var j=o,V=M;try{V()}catch(nt){xe(m,j,nt)}}}h=h.next}while(h!==v)}}catch(nt){xe(a,a.return,nt)}}function kE(i){var a=i.updateQueue;if(a!==null){var o=i.stateNode;try{m1(a,o)}catch(h){xe(i,i.return,h)}}}function RE(i,a,o){o.props=ho(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(h){xe(i,a,h)}}function Pd(i,a){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof o=="function"?i.refCleanup=o(h):o.current=h}}catch(m){xe(i,a,m)}}function Ks(i,a){var o=i.ref,h=i.refCleanup;if(o!==null)if(typeof h=="function")try{h()}catch(m){xe(i,a,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){xe(i,a,m)}else o.current=null}function ME(i){var a=i.type,o=i.memoizedProps,h=i.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&h.focus();break t;case"img":o.src?h.src=o.src:o.srcSet&&(h.srcset=o.srcSet)}}catch(m){xe(i,i.return,m)}}function Zv(i,a,o){try{var h=i.stateNode;iN(h,i.type,o,a),h[gn]=a}catch(m){xe(i,i.return,m)}}function NE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Kr(i.type)||i.tag===4}function Jv(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||NE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Kr(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function t0(i,a,o){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,a):(a=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,a.appendChild(i),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=Em));else if(h!==4&&(h===27&&Kr(i.type)&&(o=i.stateNode,a=null),i=i.child,i!==null))for(t0(i,a,o),i=i.sibling;i!==null;)t0(i,a,o),i=i.sibling}function fm(i,a,o){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?o.insertBefore(i,a):o.appendChild(i);else if(h!==4&&(h===27&&Kr(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(fm(i,a,o),i=i.sibling;i!==null;)fm(i,a,o),i=i.sibling}function OE(i){var a=i.stateNode,o=i.memoizedProps;try{for(var h=i.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Dn(a,h,o),a[ln]=i,a[gn]=o}catch(v){xe(i,i.return,v)}}var Fa=!1,Xe=!1,e0=!1,LE=typeof WeakSet=="function"?WeakSet:Set,yn=null;function I2(i,a){if(i=i.containerInfo,_0=Mm,i=qx(i),Jb(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var h=o.getSelection&&o.getSelection();if(h&&h.rangeCount!==0){o=h.anchorNode;var m=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{o.nodeType,v.nodeType}catch{o=null;break t}var E=0,M=-1,j=-1,V=0,nt=0,lt=i,Y=null;e:for(;;){for(var $;lt!==o||m!==0&&lt.nodeType!==3||(M=E+m),lt!==v||h!==0&&lt.nodeType!==3||(j=E+h),lt.nodeType===3&&(E+=lt.nodeValue.length),($=lt.firstChild)!==null;)Y=lt,lt=$;for(;;){if(lt===i)break e;if(Y===o&&++V===m&&(M=E),Y===v&&++nt===h&&(j=E),($=lt.nextSibling)!==null)break;lt=Y,Y=lt.parentNode}lt=$}o=M===-1||j===-1?null:{start:M,end:j}}else o=null}o=o||{start:0,end:0}}else o=null;for(C0={focusedElem:i,selectionRange:o},Mm=!1,yn=a;yn!==null;)if(a=yn,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,yn=i;else for(;yn!==null;){switch(a=yn,v=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,o=a,m=v.memoizedProps,v=v.memoizedState,h=o.stateNode;try{var Ot=ho(o.type,m,o.elementType===o.type);i=h.getSnapshotBeforeUpdate(Ot,v),h.__reactInternalSnapshotBeforeUpdate=i}catch(Rt){xe(o,o.return,Rt)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,o=i.nodeType,o===9)k0(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":k0(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=a.sibling,i!==null){i.return=a.return,yn=i;break}yn=a.return}}function PE(i,a,o){var h=o.flags;switch(o.tag){case 0:case 11:case 15:Gr(i,o),h&4&&Ld(5,o);break;case 1:if(Gr(i,o),h&4)if(i=o.stateNode,a===null)try{i.componentDidMount()}catch(E){xe(o,o.return,E)}else{var m=ho(o.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(m,a,i.__reactInternalSnapshotBeforeUpdate)}catch(E){xe(o,o.return,E)}}h&64&&kE(o),h&512&&Pd(o,o.return);break;case 3:if(Gr(i,o),h&64&&(i=o.updateQueue,i!==null)){if(a=null,o.child!==null)switch(o.child.tag){case 27:case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}try{m1(i,a)}catch(E){xe(o,o.return,E)}}break;case 27:a===null&&h&4&&OE(o);case 26:case 5:Gr(i,o),a===null&&h&4&&ME(o),h&512&&Pd(o,o.return);break;case 12:Gr(i,o);break;case 13:Gr(i,o),h&4&&jE(i,o),h&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=Y2.bind(null,o),cN(i,o))));break;case 22:if(h=o.memoizedState!==null||Fa,!h){a=a!==null&&a.memoizedState!==null||Xe,m=Fa;var v=Xe;Fa=h,(Xe=a)&&!v?Vr(i,o,(o.subtreeFlags&8772)!==0):Gr(i,o),Fa=m,Xe=v}break;case 30:break;default:Gr(i,o)}}function zE(i){var a=i.alternate;a!==null&&(i.alternate=null,zE(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&ju(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Re=null,mi=!1;function Ba(i,a,o){for(o=o.child;o!==null;)IE(i,a,o),o=o.sibling}function IE(i,a,o){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(tt,o)}catch{}switch(o.tag){case 26:Xe||Ks(o,a),Ba(i,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Xe||Ks(o,a);var h=Re,m=mi;Kr(o.type)&&(Re=o.stateNode,mi=!1),Ba(i,a,o),Vd(o.stateNode),Re=h,mi=m;break;case 5:Xe||Ks(o,a);case 6:if(h=Re,m=mi,Re=null,Ba(i,a,o),Re=h,mi=m,Re!==null)if(mi)try{(Re.nodeType===9?Re.body:Re.nodeName==="HTML"?Re.ownerDocument.body:Re).removeChild(o.stateNode)}catch(v){xe(o,a,v)}else try{Re.removeChild(o.stateNode)}catch(v){xe(o,a,v)}break;case 18:Re!==null&&(mi?(i=Re,__(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Zd(i)):__(Re,o.stateNode));break;case 4:h=Re,m=mi,Re=o.stateNode.containerInfo,mi=!0,Ba(i,a,o),Re=h,mi=m;break;case 0:case 11:case 14:case 15:Xe||Ur(2,o,a),Xe||Ur(4,o,a),Ba(i,a,o);break;case 1:Xe||(Ks(o,a),h=o.stateNode,typeof h.componentWillUnmount=="function"&&RE(o,a,h)),Ba(i,a,o);break;case 21:Ba(i,a,o);break;case 22:Xe=(h=Xe)||o.memoizedState!==null,Ba(i,a,o),Xe=h;break;default:Ba(i,a,o)}}function jE(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Zd(i)}catch(o){xe(a,a.return,o)}}function j2(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new LE),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new LE),a;default:throw Error(n(435,i.tag))}}function n0(i,a){var o=j2(i);a.forEach(function(h){var m=X2.bind(null,i,h);o.has(h)||(o.add(h),h.then(m,m))})}function Ri(i,a){var o=a.deletions;if(o!==null)for(var h=0;h<o.length;h++){var m=o[h],v=i,E=a,M=E;t:for(;M!==null;){switch(M.tag){case 27:if(Kr(M.type)){Re=M.stateNode,mi=!1;break t}break;case 5:Re=M.stateNode,mi=!1;break t;case 3:case 4:Re=M.stateNode.containerInfo,mi=!0;break t}M=M.return}if(Re===null)throw Error(n(160));IE(v,E,m),Re=null,mi=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)FE(a,i),a=a.sibling}var ks=null;function FE(i,a){var o=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ri(a,i),Mi(i),h&4&&(Ur(3,i,i.return),Ld(3,i),Ur(5,i,i.return));break;case 1:Ri(a,i),Mi(i),h&512&&(Xe||o===null||Ks(o,o.return)),h&64&&Fa&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?h:o.concat(h))));break;case 26:var m=ks;if(Ri(a,i),Mi(i),h&512&&(Xe||o===null||Ks(o,o.return)),h&4){var v=o!==null?o.memoizedState:null;if(h=i.memoizedState,o===null)if(h===null)if(i.stateNode===null){t:{h=i.type,o=i.memoizedProps,m=m.ownerDocument||m;e:switch(h){case"title":v=m.getElementsByTagName("title")[0],(!v||v[Ta]||v[ln]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(h),m.head.insertBefore(v,m.querySelector("head > title"))),Dn(v,h,o),v[ln]=i,qt(v),h=v;break t;case"link":var E=O_("link","href",m).get(h+(o.href||""));if(E){for(var M=0;M<E.length;M++)if(v=E[M],v.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&v.getAttribute("rel")===(o.rel==null?null:o.rel)&&v.getAttribute("title")===(o.title==null?null:o.title)&&v.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(M,1);break e}}v=m.createElement(h),Dn(v,h,o),m.head.appendChild(v);break;case"meta":if(E=O_("meta","content",m).get(h+(o.content||""))){for(M=0;M<E.length;M++)if(v=E[M],v.getAttribute("content")===(o.content==null?null:""+o.content)&&v.getAttribute("name")===(o.name==null?null:o.name)&&v.getAttribute("property")===(o.property==null?null:o.property)&&v.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&v.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(M,1);break e}}v=m.createElement(h),Dn(v,h,o),m.head.appendChild(v);break;default:throw Error(n(468,h))}v[ln]=i,qt(v),h=v}i.stateNode=h}else L_(m,i.type,i.stateNode);else i.stateNode=N_(m,h,i.memoizedProps);else v!==h?(v===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):v.count--,h===null?L_(m,i.type,i.stateNode):N_(m,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Zv(i,i.memoizedProps,o.memoizedProps)}break;case 27:Ri(a,i),Mi(i),h&512&&(Xe||o===null||Ks(o,o.return)),o!==null&&h&4&&Zv(i,i.memoizedProps,o.memoizedProps);break;case 5:if(Ri(a,i),Mi(i),h&512&&(Xe||o===null||Ks(o,o.return)),i.flags&32){m=i.stateNode;try{Hu(m,"")}catch($){xe(i,i.return,$)}}h&4&&i.stateNode!=null&&(m=i.memoizedProps,Zv(i,m,o!==null?o.memoizedProps:m)),h&1024&&(e0=!0);break;case 6:if(Ri(a,i),Mi(i),h&4){if(i.stateNode===null)throw Error(n(162));h=i.memoizedProps,o=i.stateNode;try{o.nodeValue=h}catch($){xe(i,i.return,$)}}break;case 3:if(Dm=null,m=ks,ks=Cm(a.containerInfo),Ri(a,i),ks=m,Mi(i),h&4&&o!==null&&o.memoizedState.isDehydrated)try{Zd(a.containerInfo)}catch($){xe(i,i.return,$)}e0&&(e0=!1,BE(i));break;case 4:h=ks,ks=Cm(i.stateNode.containerInfo),Ri(a,i),Mi(i),ks=h;break;case 12:Ri(a,i),Mi(i);break;case 13:Ri(a,i),Mi(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(o0=Fe()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,n0(i,h)));break;case 22:m=i.memoizedState!==null;var j=o!==null&&o.memoizedState!==null,V=Fa,nt=Xe;if(Fa=V||m,Xe=nt||j,Ri(a,i),Xe=nt,Fa=V,Mi(i),h&8192)t:for(a=i.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(o===null||j||Fa||Xe||fo(i)),o=null,a=i;;){if(a.tag===5||a.tag===26){if(o===null){j=o=a;try{if(v=j.stateNode,m)E=v.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{M=j.stateNode;var lt=j.memoizedProps.style,Y=lt!=null&&lt.hasOwnProperty("display")?lt.display:null;M.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch($){xe(j,j.return,$)}}}else if(a.tag===6){if(o===null){j=a;try{j.stateNode.nodeValue=m?"":j.memoizedProps}catch($){xe(j,j.return,$)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break t;for(;a.sibling===null;){if(a.return===null||a.return===i)break t;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(o=h.retryQueue,o!==null&&(h.retryQueue=null,n0(i,o))));break;case 19:Ri(a,i),Mi(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,n0(i,h)));break;case 30:break;case 21:break;default:Ri(a,i),Mi(i)}}function Mi(i){var a=i.flags;if(a&2){try{for(var o,h=i.return;h!==null;){if(NE(h)){o=h;break}h=h.return}if(o==null)throw Error(n(160));switch(o.tag){case 27:var m=o.stateNode,v=Jv(i);fm(i,v,m);break;case 5:var E=o.stateNode;o.flags&32&&(Hu(E,""),o.flags&=-33);var M=Jv(i);fm(i,M,E);break;case 3:case 4:var j=o.stateNode.containerInfo,V=Jv(i);t0(i,V,j);break;default:throw Error(n(161))}}catch(nt){xe(i,i.return,nt)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function BE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;BE(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Gr(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)PE(i,a.alternate,a),a=a.sibling}function fo(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Ur(4,a,a.return),fo(a);break;case 1:Ks(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&RE(a,a.return,o),fo(a);break;case 27:Vd(a.stateNode);case 26:case 5:Ks(a,a.return),fo(a);break;case 22:a.memoizedState===null&&fo(a);break;case 30:fo(a);break;default:fo(a)}i=i.sibling}}function Vr(i,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,m=i,v=a,E=v.flags;switch(v.tag){case 0:case 11:case 15:Vr(m,v,o),Ld(4,v);break;case 1:if(Vr(m,v,o),h=v,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(V){xe(h,h.return,V)}if(h=v,m=h.updateQueue,m!==null){var M=h.stateNode;try{var j=m.shared.hiddenCallbacks;if(j!==null)for(m.shared.hiddenCallbacks=null,m=0;m<j.length;m++)g1(j[m],M)}catch(V){xe(h,h.return,V)}}o&&E&64&&kE(v),Pd(v,v.return);break;case 27:OE(v);case 26:case 5:Vr(m,v,o),o&&h===null&&E&4&&ME(v),Pd(v,v.return);break;case 12:Vr(m,v,o);break;case 13:Vr(m,v,o),o&&E&4&&jE(m,v);break;case 22:v.memoizedState===null&&Vr(m,v,o),Pd(v,v.return);break;case 30:break;default:Vr(m,v,o)}a=a.sibling}}function i0(i,a){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Ad(o))}function s0(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Ad(i))}function Qs(i,a,o,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)HE(i,a,o,h),a=a.sibling}function HE(i,a,o,h){var m=a.flags;switch(a.tag){case 0:case 11:case 15:Qs(i,a,o,h),m&2048&&Ld(9,a);break;case 1:Qs(i,a,o,h);break;case 3:Qs(i,a,o,h),m&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Ad(i)));break;case 12:if(m&2048){Qs(i,a,o,h),i=a.stateNode;try{var v=a.memoizedProps,E=v.id,M=v.onPostCommit;typeof M=="function"&&M(E,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(j){xe(a,a.return,j)}}else Qs(i,a,o,h);break;case 13:Qs(i,a,o,h);break;case 23:break;case 22:v=a.stateNode,E=a.alternate,a.memoizedState!==null?v._visibility&2?Qs(i,a,o,h):zd(i,a):v._visibility&2?Qs(i,a,o,h):(v._visibility|=2,rc(i,a,o,h,(a.subtreeFlags&10256)!==0)),m&2048&&i0(E,a);break;case 24:Qs(i,a,o,h),m&2048&&s0(a.alternate,a);break;default:Qs(i,a,o,h)}}function rc(i,a,o,h,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var v=i,E=a,M=o,j=h,V=E.flags;switch(E.tag){case 0:case 11:case 15:rc(v,E,M,j,m),Ld(8,E);break;case 23:break;case 22:var nt=E.stateNode;E.memoizedState!==null?nt._visibility&2?rc(v,E,M,j,m):zd(v,E):(nt._visibility|=2,rc(v,E,M,j,m)),m&&V&2048&&i0(E.alternate,E);break;case 24:rc(v,E,M,j,m),m&&V&2048&&s0(E.alternate,E);break;default:rc(v,E,M,j,m)}a=a.sibling}}function zd(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=i,h=a,m=h.flags;switch(h.tag){case 22:zd(o,h),m&2048&&i0(h.alternate,h);break;case 24:zd(o,h),m&2048&&s0(h.alternate,h);break;default:zd(o,h)}a=a.sibling}}var Id=8192;function lc(i){if(i.subtreeFlags&Id)for(i=i.child;i!==null;)UE(i),i=i.sibling}function UE(i){switch(i.tag){case 26:lc(i),i.flags&Id&&i.memoizedState!==null&&xN(ks,i.memoizedState,i.memoizedProps);break;case 5:lc(i);break;case 3:case 4:var a=ks;ks=Cm(i.stateNode.containerInfo),lc(i),ks=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=Id,Id=16777216,lc(i),Id=a):lc(i));break;default:lc(i)}}function GE(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function jd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var h=a[o];yn=h,qE(h,i)}GE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)VE(i),i=i.sibling}function VE(i){switch(i.tag){case 0:case 11:case 15:jd(i),i.flags&2048&&Ur(9,i,i.return);break;case 3:jd(i);break;case 12:jd(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,pm(i)):jd(i);break;default:jd(i)}}function pm(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var h=a[o];yn=h,qE(h,i)}GE(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Ur(8,a,a.return),pm(a);break;case 22:o=a.stateNode,o._visibility&2&&(o._visibility&=-3,pm(a));break;default:pm(a)}i=i.sibling}}function qE(i,a){for(;yn!==null;){var o=yn;switch(o.tag){case 0:case 11:case 15:Ur(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var h=o.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Ad(o.memoizedState.cache)}if(h=o.child,h!==null)h.return=o,yn=h;else t:for(o=i;yn!==null;){h=yn;var m=h.sibling,v=h.return;if(zE(h),h===o){yn=null;break t}if(m!==null){m.return=v,yn=m;break t}yn=v}}}var F2={getCacheForType:function(i){var a=Un(on),o=a.data.get(i);return o===void 0&&(o=i(),a.data.set(i,o)),o}},B2=typeof WeakMap=="function"?WeakMap:Map,ce=0,Ee=null,Wt=null,te=0,he=0,Ni=null,qr=!1,oc=!1,a0=!1,Ha=0,He=0,Yr=0,po=0,r0=0,us=0,uc=0,Fd=null,yi=null,l0=!1,o0=0,gm=1/0,mm=null,Xr=null,Tn=0,$r=null,cc=null,hc=0,u0=0,c0=null,YE=null,Bd=0,h0=null;function Oi(){if((ce&2)!==0&&te!==0)return te&-te;if(F.T!==null){var i=Zu;return i!==0?i:b0()}return Cg()}function XE(){us===0&&(us=(te&536870912)===0||ae?_g():536870912);var i=os.current;return i!==null&&(i.flags|=32),us}function Li(i,a,o){(i===Ee&&(he===2||he===9)||i.cancelPendingCommit!==null)&&(dc(i,0),Wr(i,te,us,!1)),Rr(i,o),((ce&2)===0||i!==Ee)&&(i===Ee&&((ce&2)===0&&(po|=o),He===4&&Wr(i,te,us,!1)),Zs(i))}function $E(i,a,o){if((ce&6)!==0)throw Error(n(327));var h=!o&&(a&124)===0&&(a&i.expiredLanes)===0||Zn(i,a),m=h?G2(i,a):p0(i,a,!0),v=h;do{if(m===0){oc&&!h&&Wr(i,a,0,!1);break}else{if(o=i.current.alternate,v&&!H2(o)){m=p0(i,a,!1),v=!1;continue}if(m===2){if(v=a,i.errorRecoveryDisabledLanes&v)var E=0;else E=i.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;t:{var M=i;m=Fd;var j=M.current.memoizedState.isDehydrated;if(j&&(dc(M,E).flags|=256),E=p0(M,E,!1),E!==2){if(a0&&!j){M.errorRecoveryDisabledLanes|=v,po|=v,m=4;break t}v=yi,yi=m,v!==null&&(yi===null?yi=v:yi.push.apply(yi,v))}m=E}if(v=!1,m!==2)continue}}if(m===1){dc(i,0),Wr(i,a,0,!0);break}t:{switch(h=i,v=m,v){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:Wr(h,a,us,!qr);break t;case 2:yi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(m=o0+300-Fe(),10<m)){if(Wr(h,a,us,!qr),qe(h,0,!0)!==0)break t;h.timeoutHandle=x_(WE.bind(null,h,o,yi,mm,l0,a,us,po,uc,qr,v,2,-0,0),m);break t}WE(h,o,yi,mm,l0,a,us,po,uc,qr,v,0,-0,0)}}break}while(!0);Zs(i)}function WE(i,a,o,h,m,v,E,M,j,V,nt,lt,Y,$){if(i.timeoutHandle=-1,lt=a.subtreeFlags,(lt&8192||(lt&16785408)===16785408)&&(Xd={stylesheets:null,count:0,unsuspend:wN},UE(a),lt=EN(),lt!==null)){i.cancelPendingCommit=lt(n_.bind(null,i,a,v,o,h,m,E,M,j,nt,1,Y,$)),Wr(i,v,E,!V);return}n_(i,a,v,o,h,m,E,M,j)}function H2(i){for(var a=i;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var h=0;h<o.length;h++){var m=o[h],v=m.getSnapshot;m=m.value;try{if(!Di(v(),m))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Wr(i,a,o,h){a&=~r0,a&=~po,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var m=a;0<m;){var v=31-kt(m),E=1<<v;h[v]=-1,m&=~E}o!==0&&_n(i,o,a)}function ym(){return(ce&6)===0?(Hd(0),!1):!0}function d0(){if(Wt!==null){if(he===0)var i=Wt.return;else i=Wt,Oa=lo=null,kv(i),sc=null,Md=0,i=Wt;for(;i!==null;)DE(i.alternate,i),i=i.return;Wt=null}}function dc(i,a){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,aN(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),d0(),Ee=i,Wt=o=Ra(i.current,null),te=a,he=0,Ni=null,qr=!1,oc=Zn(i,a),a0=!1,uc=us=r0=po=Yr=He=0,yi=Fd=null,l0=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var m=31-kt(h),v=1<<m;a|=i[m],h&=~v}return Ha=a,Fg(),o}function KE(i,a){Yt=null,F.H=sm,a===wd||a===$g?(a=f1(),he=3):a===c1?(a=f1(),he=4):he=a===pE?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ni=a,Wt===null&&(He=1,um(i,ss(a,i.current)))}function QE(){var i=F.H;return F.H=sm,i===null?sm:i}function ZE(){var i=F.A;return F.A=F2,i}function f0(){He=4,qr||(te&4194048)!==te&&os.current!==null||(oc=!0),(Yr&134217727)===0&&(po&134217727)===0||Ee===null||Wr(Ee,te,us,!1)}function p0(i,a,o){var h=ce;ce|=2;var m=QE(),v=ZE();(Ee!==i||te!==a)&&(mm=null,dc(i,a)),a=!1;var E=He;t:do try{if(he!==0&&Wt!==null){var M=Wt,j=Ni;switch(he){case 8:d0(),E=6;break t;case 3:case 2:case 9:case 6:os.current===null&&(a=!0);var V=he;if(he=0,Ni=null,fc(i,M,j,V),o&&oc){E=0;break t}break;default:V=he,he=0,Ni=null,fc(i,M,j,V)}}U2(),E=He;break}catch(nt){KE(i,nt)}while(!0);return a&&i.shellSuspendCounter++,Oa=lo=null,ce=h,F.H=m,F.A=v,Wt===null&&(Ee=null,te=0,Fg()),E}function U2(){for(;Wt!==null;)JE(Wt)}function G2(i,a){var o=ce;ce|=2;var h=QE(),m=ZE();Ee!==i||te!==a?(mm=null,gm=Fe()+500,dc(i,a)):oc=Zn(i,a);t:do try{if(he!==0&&Wt!==null){a=Wt;var v=Ni;e:switch(he){case 1:he=0,Ni=null,fc(i,a,v,1);break;case 2:case 9:if(h1(v)){he=0,Ni=null,t_(a);break}a=function(){he!==2&&he!==9||Ee!==i||(he=7),Zs(i)},v.then(a,a);break t;case 3:he=7;break t;case 4:he=5;break t;case 7:h1(v)?(he=0,Ni=null,t_(a)):(he=0,Ni=null,fc(i,a,v,7));break;case 5:var E=null;switch(Wt.tag){case 26:E=Wt.memoizedState;case 5:case 27:var M=Wt;if(!E||P_(E)){he=0,Ni=null;var j=M.sibling;if(j!==null)Wt=j;else{var V=M.return;V!==null?(Wt=V,bm(V)):Wt=null}break e}}he=0,Ni=null,fc(i,a,v,5);break;case 6:he=0,Ni=null,fc(i,a,v,6);break;case 8:d0(),He=6;break t;default:throw Error(n(462))}}V2();break}catch(nt){KE(i,nt)}while(!0);return Oa=lo=null,F.H=h,F.A=m,ce=o,Wt!==null?0:(Ee=null,te=0,Fg(),He)}function V2(){for(;Wt!==null&&!Fn();)JE(Wt)}function JE(i){var a=CE(i.alternate,i,Ha);i.memoizedProps=i.pendingProps,a===null?bm(i):Wt=a}function t_(i){var a=i,o=a.alternate;switch(a.tag){case 15:case 0:a=AE(o,a,a.pendingProps,a.type,void 0,te);break;case 11:a=AE(o,a,a.pendingProps,a.type.render,a.ref,te);break;case 5:kv(a);default:DE(o,a),a=Wt=e1(a,Ha),a=CE(o,a,Ha)}i.memoizedProps=i.pendingProps,a===null?bm(i):Wt=a}function fc(i,a,o,h){Oa=lo=null,kv(a),sc=null,Md=0;var m=a.return;try{if(O2(i,m,a,o,te)){He=1,um(i,ss(o,i.current)),Wt=null;return}}catch(v){if(m!==null)throw Wt=m,v;He=1,um(i,ss(o,i.current)),Wt=null;return}a.flags&32768?(ae||h===1?i=!0:oc||(te&536870912)!==0?i=!1:(qr=i=!0,(h===2||h===9||h===3||h===6)&&(h=os.current,h!==null&&h.tag===13&&(h.flags|=16384))),e_(a,i)):bm(a)}function bm(i){var a=i;do{if((a.flags&32768)!==0){e_(a,qr);return}i=a.return;var o=P2(a.alternate,a,Ha);if(o!==null){Wt=o;return}if(a=a.sibling,a!==null){Wt=a;return}Wt=a=i}while(a!==null);He===0&&(He=5)}function e_(i,a){do{var o=z2(i.alternate,i);if(o!==null){o.flags&=32767,Wt=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(i=i.sibling,i!==null)){Wt=i;return}Wt=i=o}while(i!==null);He=6,Wt=null}function n_(i,a,o,h,m,v,E,M,j){i.cancelPendingCommit=null;do vm();while(Tn!==0);if((ce&6)!==0)throw Error(n(327));if(a!==null){if(a===i.current)throw Error(n(177));if(v=a.lanes|a.childLanes,v|=sv,Hn(i,o,v,E,M,j),i===Ee&&(Wt=Ee=null,te=0),cc=a,$r=i,hc=o,u0=v,c0=m,YE=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,$2(ci,function(){return l_(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=F.T,F.T=null,m=q.p,q.p=2,E=ce,ce|=4;try{I2(i,a,o)}finally{ce=E,q.p=m,F.T=h}}Tn=1,i_(),s_(),a_()}}function i_(){if(Tn===1){Tn=0;var i=$r,a=cc,o=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||o){o=F.T,F.T=null;var h=q.p;q.p=2;var m=ce;ce|=4;try{FE(a,i);var v=C0,E=qx(i.containerInfo),M=v.focusedElem,j=v.selectionRange;if(E!==M&&M&&M.ownerDocument&&Vx(M.ownerDocument.documentElement,M)){if(j!==null&&Jb(M)){var V=j.start,nt=j.end;if(nt===void 0&&(nt=V),"selectionStart"in M)M.selectionStart=V,M.selectionEnd=Math.min(nt,M.value.length);else{var lt=M.ownerDocument||document,Y=lt&&lt.defaultView||window;if(Y.getSelection){var $=Y.getSelection(),Ot=M.textContent.length,Rt=Math.min(j.start,Ot),ye=j.end===void 0?Rt:Math.min(j.end,Ot);!$.extend&&Rt>ye&&(E=ye,ye=Rt,Rt=E);var U=Gx(M,Rt),H=Gx(M,ye);if(U&&H&&($.rangeCount!==1||$.anchorNode!==U.node||$.anchorOffset!==U.offset||$.focusNode!==H.node||$.focusOffset!==H.offset)){var G=lt.createRange();G.setStart(U.node,U.offset),$.removeAllRanges(),Rt>ye?($.addRange(G),$.extend(H.node,H.offset)):(G.setEnd(H.node,H.offset),$.addRange(G))}}}}for(lt=[],$=M;$=$.parentNode;)$.nodeType===1&&lt.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<lt.length;M++){var rt=lt[M];rt.element.scrollLeft=rt.left,rt.element.scrollTop=rt.top}}Mm=!!_0,C0=_0=null}finally{ce=m,q.p=h,F.T=o}}i.current=a,Tn=2}}function s_(){if(Tn===2){Tn=0;var i=$r,a=cc,o=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||o){o=F.T,F.T=null;var h=q.p;q.p=2;var m=ce;ce|=4;try{PE(i,a.alternate,a)}finally{ce=m,q.p=h,F.T=o}}Tn=3}}function a_(){if(Tn===4||Tn===3){Tn=0,je();var i=$r,a=cc,o=hc,h=YE;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Tn=5:(Tn=0,cc=$r=null,r_(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Xr=null),hi(o),a=a.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(tt,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=F.T,m=q.p,q.p=2,F.T=null;try{for(var v=i.onRecoverableError,E=0;E<h.length;E++){var M=h[E];v(M.value,{componentStack:M.stack})}}finally{F.T=a,q.p=m}}(hc&3)!==0&&vm(),Zs(i),m=i.pendingLanes,(o&4194090)!==0&&(m&42)!==0?i===h0?Bd++:(Bd=0,h0=i):Bd=0,Hd(0)}}function r_(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Ad(a)))}function vm(i){return i_(),s_(),a_(),l_()}function l_(){if(Tn!==5)return!1;var i=$r,a=u0;u0=0;var o=hi(hc),h=F.T,m=q.p;try{q.p=32>o?32:o,F.T=null,o=c0,c0=null;var v=$r,E=hc;if(Tn=0,cc=$r=null,hc=0,(ce&6)!==0)throw Error(n(331));var M=ce;if(ce|=4,VE(v.current),HE(v,v.current,E,o),ce=M,Hd(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(tt,v)}catch{}return!0}finally{q.p=m,F.T=h,r_(i,a)}}function o_(i,a,o){a=ss(o,a),a=Gv(i.stateNode,a,2),i=jr(i,a,2),i!==null&&(Rr(i,2),Zs(i))}function xe(i,a,o){if(i.tag===3)o_(i,i,o);else for(;a!==null;){if(a.tag===3){o_(a,i,o);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Xr===null||!Xr.has(h))){i=ss(o,i),o=dE(2),h=jr(a,o,2),h!==null&&(fE(o,h,a,i),Rr(h,2),Zs(h));break}}a=a.return}}function g0(i,a,o){var h=i.pingCache;if(h===null){h=i.pingCache=new B2;var m=new Set;h.set(a,m)}else m=h.get(a),m===void 0&&(m=new Set,h.set(a,m));m.has(o)||(a0=!0,m.add(o),i=q2.bind(null,i,a,o),a.then(i,i))}function q2(i,a,o){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,Ee===i&&(te&o)===o&&(He===4||He===3&&(te&62914560)===te&&300>Fe()-o0?(ce&2)===0&&dc(i,0):r0|=o,uc===te&&(uc=0)),Zs(i)}function u_(i,a){a===0&&(a=nd()),i=$u(i,a),i!==null&&(Rr(i,a),Zs(i))}function Y2(i){var a=i.memoizedState,o=0;a!==null&&(o=a.retryLane),u_(i,o)}function X2(i,a){var o=0;switch(i.tag){case 13:var h=i.stateNode,m=i.memoizedState;m!==null&&(o=m.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(a),u_(i,o)}function $2(i,a){return Zt(i,a)}var Am=null,pc=null,m0=!1,Sm=!1,y0=!1,go=0;function Zs(i){i!==pc&&i.next===null&&(pc===null?Am=pc=i:pc=pc.next=i),Sm=!0,m0||(m0=!0,K2())}function Hd(i,a){if(!y0&&Sm){y0=!0;do for(var o=!1,h=Am;h!==null;){if(i!==0){var m=h.pendingLanes;if(m===0)var v=0;else{var E=h.suspendedLanes,M=h.pingedLanes;v=(1<<31-kt(42|i)+1)-1,v&=m&~(E&~M),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(o=!0,f_(h,v))}else v=te,v=qe(h,h===Ee?v:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(v&3)===0||Zn(h,v)||(o=!0,f_(h,v));h=h.next}while(o);y0=!1}}function W2(){c_()}function c_(){Sm=m0=!1;var i=0;go!==0&&(sN()&&(i=go),go=0);for(var a=Fe(),o=null,h=Am;h!==null;){var m=h.next,v=h_(h,a);v===0?(h.next=null,o===null?Am=m:o.next=m,m===null&&(pc=o)):(o=h,(i!==0||(v&3)!==0)&&(Sm=!0)),h=m}Hd(i)}function h_(i,a){for(var o=i.suspendedLanes,h=i.pingedLanes,m=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var E=31-kt(v),M=1<<E,j=m[E];j===-1?((M&o)===0||(M&h)!==0)&&(m[E]=Jn(M,a)):j<=a&&(i.expiredLanes|=M),v&=~M}if(a=Ee,o=te,o=qe(i,i===a?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,o===0||i===a&&(he===2||he===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Vt(h),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||Zn(i,o)){if(a=o&-o,a===i.callbackPriority)return a;switch(h!==null&&Vt(h),hi(o)){case 2:case 8:o=_a;break;case 32:o=ci;break;case 268435456:o=Ca;break;default:o=ci}return h=d_.bind(null,i),o=Zt(o,h),i.callbackPriority=a,i.callbackNode=o,a}return h!==null&&h!==null&&Vt(h),i.callbackPriority=2,i.callbackNode=null,2}function d_(i,a){if(Tn!==0&&Tn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(vm()&&i.callbackNode!==o)return null;var h=te;return h=qe(i,i===Ee?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:($E(i,h,a),h_(i,Fe()),i.callbackNode!=null&&i.callbackNode===o?d_.bind(null,i):null)}function f_(i,a){if(vm())return null;$E(i,a,!0)}function K2(){rN(function(){(ce&6)!==0?Zt(xs,W2):c_()})}function b0(){return go===0&&(go=_g()),go}function p_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ng(""+i)}function g_(i,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,i.id&&o.setAttribute("form",i.id),a.parentNode.insertBefore(o,a),i=new FormData(i),o.parentNode.removeChild(o),i}function Q2(i,a,o,h,m){if(a==="submit"&&o&&o.stateNode===m){var v=p_((m[gn]||null).action),E=h.submitter;E&&(a=(a=E[gn]||null)?p_(a.formAction):E.getAttribute("formAction"),a!==null&&(v=a,E=null));var M=new zg("action","action",null,h,m);i.push({event:M,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(go!==0){var j=E?g_(m,E):new FormData(m);jv(o,{pending:!0,data:j,method:m.method,action:v},null,j)}}else typeof v=="function"&&(M.preventDefault(),j=E?g_(m,E):new FormData(m),jv(o,{pending:!0,data:j,method:m.method,action:v},v,j))},currentTarget:m}]})}}for(var v0=0;v0<iv.length;v0++){var A0=iv[v0],Z2=A0.toLowerCase(),J2=A0[0].toUpperCase()+A0.slice(1);Ds(Z2,"on"+J2)}Ds($x,"onAnimationEnd"),Ds(Wx,"onAnimationIteration"),Ds(Kx,"onAnimationStart"),Ds("dblclick","onDoubleClick"),Ds("focusin","onFocus"),Ds("focusout","onBlur"),Ds(m2,"onTransitionRun"),Ds(y2,"onTransitionStart"),Ds(b2,"onTransitionCancel"),Ds(Qx,"onTransitionEnd"),Or("onMouseEnter",["mouseout","mouseover"]),Or("onMouseLeave",["mouseout","mouseover"]),Or("onPointerEnter",["pointerout","pointerover"]),Or("onPointerLeave",["pointerout","pointerover"]),Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ud="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ud));function m_(i,a){a=(a&4)!==0;for(var o=0;o<i.length;o++){var h=i[o],m=h.event;h=h.listeners;t:{var v=void 0;if(a)for(var E=h.length-1;0<=E;E--){var M=h[E],j=M.instance,V=M.currentTarget;if(M=M.listener,j!==v&&m.isPropagationStopped())break t;v=M,m.currentTarget=V;try{v(m)}catch(nt){om(nt)}m.currentTarget=null,v=j}else for(E=0;E<h.length;E++){if(M=h[E],j=M.instance,V=M.currentTarget,M=M.listener,j!==v&&m.isPropagationStopped())break t;v=M,m.currentTarget=V;try{v(m)}catch(nt){om(nt)}m.currentTarget=null,v=j}}}}function Kt(i,a){var o=a[Zl];o===void 0&&(o=a[Zl]=new Set);var h=i+"__bubble";o.has(h)||(y_(a,i,2,!1),o.add(h))}function S0(i,a,o){var h=0;a&&(h|=4),y_(o,i,h,a)}var wm="_reactListening"+Math.random().toString(36).slice(2);function w0(i){if(!i[wm]){i[wm]=!0,di.forEach(function(o){o!=="selectionchange"&&(tN.has(o)||S0(o,!1,i),S0(o,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[wm]||(a[wm]=!0,S0("selectionchange",!1,a))}}function y_(i,a,o,h){switch(H_(a)){case 2:var m=TN;break;case 8:m=DN;break;default:m=z0}o=m.bind(null,a,o,i),m=void 0,!Vb||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),h?m!==void 0?i.addEventListener(a,o,{capture:!0,passive:m}):i.addEventListener(a,o,!0):m!==void 0?i.addEventListener(a,o,{passive:m}):i.addEventListener(a,o,!1)}function x0(i,a,o,h,m){var v=h;if((a&1)===0&&(a&2)===0&&h!==null)t:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var M=h.stateNode.containerInfo;if(M===m)break;if(E===4)for(E=h.return;E!==null;){var j=E.tag;if((j===3||j===4)&&E.stateNode.containerInfo===m)return;E=E.return}for(;M!==null;){if(E=Mr(M),E===null)return;if(j=E.tag,j===5||j===6||j===26||j===27){h=v=E;continue t}M=M.parentNode}}h=h.return}Ex(function(){var V=v,nt=Ub(o),lt=[];t:{var Y=Zx.get(i);if(Y!==void 0){var $=zg,Ot=i;switch(i){case"keypress":if(Lg(o)===0)break t;case"keydown":case"keyup":$=$M;break;case"focusin":Ot="focus",$=$b;break;case"focusout":Ot="blur",$=$b;break;case"beforeblur":case"afterblur":$=$b;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Tx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=zM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=QM;break;case $x:case Wx:case Kx:$=FM;break;case Qx:$=JM;break;case"scroll":case"scrollend":$=LM;break;case"wheel":$=e2;break;case"copy":case"cut":case"paste":$=HM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=kx;break;case"toggle":case"beforetoggle":$=i2}var Rt=(a&4)!==0,ye=!Rt&&(i==="scroll"||i==="scrollend"),U=Rt?Y!==null?Y+"Capture":null:Y;Rt=[];for(var H=V,G;H!==null;){var rt=H;if(G=rt.stateNode,rt=rt.tag,rt!==5&&rt!==26&&rt!==27||G===null||U===null||(rt=ld(H,U),rt!=null&&Rt.push(Gd(H,rt,G))),ye)break;H=H.return}0<Rt.length&&(Y=new $(Y,Ot,null,o,nt),lt.push({event:Y,listeners:Rt}))}}if((a&7)===0){t:{if(Y=i==="mouseover"||i==="pointerover",$=i==="mouseout"||i==="pointerout",Y&&o!==Hb&&(Ot=o.relatedTarget||o.fromElement)&&(Mr(Ot)||Ot[Cs]))break t;if(($||Y)&&(Y=nt.window===nt?nt:(Y=nt.ownerDocument)?Y.defaultView||Y.parentWindow:window,$?(Ot=o.relatedTarget||o.toElement,$=V,Ot=Ot?Mr(Ot):null,Ot!==null&&(ye=l(Ot),Rt=Ot.tag,Ot!==ye||Rt!==5&&Rt!==27&&Rt!==6)&&(Ot=null)):($=null,Ot=V),$!==Ot)){if(Rt=Tx,rt="onMouseLeave",U="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(Rt=kx,rt="onPointerLeave",U="onPointerEnter",H="pointer"),ye=$==null?Y:It($),G=Ot==null?Y:It(Ot),Y=new Rt(rt,H+"leave",$,o,nt),Y.target=ye,Y.relatedTarget=G,rt=null,Mr(nt)===V&&(Rt=new Rt(U,H+"enter",Ot,o,nt),Rt.target=G,Rt.relatedTarget=ye,rt=Rt),ye=rt,$&&Ot)e:{for(Rt=$,U=Ot,H=0,G=Rt;G;G=gc(G))H++;for(G=0,rt=U;rt;rt=gc(rt))G++;for(;0<H-G;)Rt=gc(Rt),H--;for(;0<G-H;)U=gc(U),G--;for(;H--;){if(Rt===U||U!==null&&Rt===U.alternate)break e;Rt=gc(Rt),U=gc(U)}Rt=null}else Rt=null;$!==null&&b_(lt,Y,$,Rt,!1),Ot!==null&&ye!==null&&b_(lt,ye,Ot,Rt,!0)}}t:{if(Y=V?It(V):window,$=Y.nodeName&&Y.nodeName.toLowerCase(),$==="select"||$==="input"&&Y.type==="file")var wt=Ix;else if(Px(Y))if(jx)wt=f2;else{wt=h2;var Xt=c2}else $=Y.nodeName,!$||$.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?V&&Bb(V.elementType)&&(wt=Ix):wt=d2;if(wt&&(wt=wt(i,V))){zx(lt,wt,o,nt);break t}Xt&&Xt(i,Y,V),i==="focusout"&&V&&Y.type==="number"&&V.memoizedProps.value!=null&&Fb(Y,"number",Y.value)}switch(Xt=V?It(V):window,i){case"focusin":(Px(Xt)||Xt.contentEditable==="true")&&(qu=Xt,tv=V,gd=null);break;case"focusout":gd=tv=qu=null;break;case"mousedown":ev=!0;break;case"contextmenu":case"mouseup":case"dragend":ev=!1,Yx(lt,o,nt);break;case"selectionchange":if(g2)break;case"keydown":case"keyup":Yx(lt,o,nt)}var Ct;if(Kb)t:{switch(i){case"compositionstart":var Nt="onCompositionStart";break t;case"compositionend":Nt="onCompositionEnd";break t;case"compositionupdate":Nt="onCompositionUpdate";break t}Nt=void 0}else Vu?Ox(i,o)&&(Nt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Nt="onCompositionStart");Nt&&(Rx&&o.locale!=="ko"&&(Vu||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&Vu&&(Ct=_x()):(Lr=nt,qb="value"in Lr?Lr.value:Lr.textContent,Vu=!0)),Xt=xm(V,Nt),0<Xt.length&&(Nt=new Dx(Nt,i,null,o,nt),lt.push({event:Nt,listeners:Xt}),Ct?Nt.data=Ct:(Ct=Lx(o),Ct!==null&&(Nt.data=Ct)))),(Ct=a2?r2(i,o):l2(i,o))&&(Nt=xm(V,"onBeforeInput"),0<Nt.length&&(Xt=new Dx("onBeforeInput","beforeinput",null,o,nt),lt.push({event:Xt,listeners:Nt}),Xt.data=Ct)),Q2(lt,i,V,o,nt)}m_(lt,a)})}function Gd(i,a,o){return{instance:i,listener:a,currentTarget:o}}function xm(i,a){for(var o=a+"Capture",h=[];i!==null;){var m=i,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=ld(i,o),m!=null&&h.unshift(Gd(i,m,v)),m=ld(i,a),m!=null&&h.push(Gd(i,m,v))),i.tag===3)return h;i=i.return}return[]}function gc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function b_(i,a,o,h,m){for(var v=a._reactName,E=[];o!==null&&o!==h;){var M=o,j=M.alternate,V=M.stateNode;if(M=M.tag,j!==null&&j===h)break;M!==5&&M!==26&&M!==27||V===null||(j=V,m?(V=ld(o,v),V!=null&&E.unshift(Gd(o,V,j))):m||(V=ld(o,v),V!=null&&E.push(Gd(o,V,j)))),o=o.return}E.length!==0&&i.push({event:a,listeners:E})}var eN=/\r\n?/g,nN=/\u0000|\uFFFD/g;function v_(i){return(typeof i=="string"?i:""+i).replace(eN,`
`).replace(nN,"")}function A_(i,a){return a=v_(a),v_(i)===a}function Em(){}function me(i,a,o,h,m,v){switch(o){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Hu(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Hu(i,""+h);break;case"className":kg(i,"class",h);break;case"tabIndex":kg(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":kg(i,o,h);break;case"style":wx(i,h,v);break;case"data":if(a!=="object"){kg(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||o!=="href")){i.removeAttribute(o);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(o);break}h=Ng(""+h),i.setAttribute(o,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(o==="formAction"?(a!=="input"&&me(i,a,"name",m.name,m,null),me(i,a,"formEncType",m.formEncType,m,null),me(i,a,"formMethod",m.formMethod,m,null),me(i,a,"formTarget",m.formTarget,m,null)):(me(i,a,"encType",m.encType,m,null),me(i,a,"method",m.method,m,null),me(i,a,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(o);break}h=Ng(""+h),i.setAttribute(o,h);break;case"onClick":h!=null&&(i.onclick=Em);break;case"onScroll":h!=null&&Kt("scroll",i);break;case"onScrollEnd":h!=null&&Kt("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(o=h.__html,o!=null){if(m.children!=null)throw Error(n(60));i.innerHTML=o}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}o=Ng(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(o,""+h):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":h===!0?i.setAttribute(o,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(o,h):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(o,h):i.removeAttribute(o);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(o):i.setAttribute(o,h);break;case"popover":Kt("beforetoggle",i),Kt("toggle",i),Dg(i,"popover",h);break;case"xlinkActuate":Da(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Da(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Da(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Da(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Da(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Da(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Da(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Da(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Da(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Dg(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=NM.get(o)||o,Dg(i,o,h))}}function E0(i,a,o,h,m,v){switch(o){case"style":wx(i,h,v);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(o=h.__html,o!=null){if(m.children!=null)throw Error(n(60));i.innerHTML=o}}break;case"children":typeof h=="string"?Hu(i,h):(typeof h=="number"||typeof h=="bigint")&&Hu(i,""+h);break;case"onScroll":h!=null&&Kt("scroll",i);break;case"onScrollEnd":h!=null&&Kt("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Em);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fi.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),a=o.slice(2,m?o.length-7:void 0),v=i[gn]||null,v=v!=null?v[o]:null,typeof v=="function"&&i.removeEventListener(a,v,m),typeof h=="function")){typeof v!="function"&&v!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(a,h,m);break t}o in i?i[o]=h:h===!0?i.setAttribute(o,""):Dg(i,o,h)}}}function Dn(i,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Kt("error",i),Kt("load",i);var h=!1,m=!1,v;for(v in o)if(o.hasOwnProperty(v)){var E=o[v];if(E!=null)switch(v){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:me(i,a,v,E,o,null)}}m&&me(i,a,"srcSet",o.srcSet,o,null),h&&me(i,a,"src",o.src,o,null);return;case"input":Kt("invalid",i);var M=v=E=m=null,j=null,V=null;for(h in o)if(o.hasOwnProperty(h)){var nt=o[h];if(nt!=null)switch(h){case"name":m=nt;break;case"type":E=nt;break;case"checked":j=nt;break;case"defaultChecked":V=nt;break;case"value":v=nt;break;case"defaultValue":M=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(n(137,a));break;default:me(i,a,h,nt,o,null)}}bx(i,v,M,j,V,E,m,!1),Rg(i);return;case"select":Kt("invalid",i),h=E=v=null;for(m in o)if(o.hasOwnProperty(m)&&(M=o[m],M!=null))switch(m){case"value":v=M;break;case"defaultValue":E=M;break;case"multiple":h=M;default:me(i,a,m,M,o,null)}a=v,o=E,i.multiple=!!h,a!=null?Bu(i,!!h,a,!1):o!=null&&Bu(i,!!h,o,!0);return;case"textarea":Kt("invalid",i),v=m=h=null;for(E in o)if(o.hasOwnProperty(E)&&(M=o[E],M!=null))switch(E){case"value":h=M;break;case"defaultValue":m=M;break;case"children":v=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:me(i,a,E,M,o,null)}Ax(i,h,m,v),Rg(i);return;case"option":for(j in o)if(o.hasOwnProperty(j)&&(h=o[j],h!=null))switch(j){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:me(i,a,j,h,o,null)}return;case"dialog":Kt("beforetoggle",i),Kt("toggle",i),Kt("cancel",i),Kt("close",i);break;case"iframe":case"object":Kt("load",i);break;case"video":case"audio":for(h=0;h<Ud.length;h++)Kt(Ud[h],i);break;case"image":Kt("error",i),Kt("load",i);break;case"details":Kt("toggle",i);break;case"embed":case"source":case"link":Kt("error",i),Kt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in o)if(o.hasOwnProperty(V)&&(h=o[V],h!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:me(i,a,V,h,o,null)}return;default:if(Bb(a)){for(nt in o)o.hasOwnProperty(nt)&&(h=o[nt],h!==void 0&&E0(i,a,nt,h,o,void 0));return}}for(M in o)o.hasOwnProperty(M)&&(h=o[M],h!=null&&me(i,a,M,h,o,null))}function iN(i,a,o,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,E=null,M=null,j=null,V=null,nt=null;for($ in o){var lt=o[$];if(o.hasOwnProperty($)&&lt!=null)switch($){case"checked":break;case"value":break;case"defaultValue":j=lt;default:h.hasOwnProperty($)||me(i,a,$,null,h,lt)}}for(var Y in h){var $=h[Y];if(lt=o[Y],h.hasOwnProperty(Y)&&($!=null||lt!=null))switch(Y){case"type":v=$;break;case"name":m=$;break;case"checked":V=$;break;case"defaultChecked":nt=$;break;case"value":E=$;break;case"defaultValue":M=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(n(137,a));break;default:$!==lt&&me(i,a,Y,$,h,lt)}}jb(i,E,M,j,V,nt,v,m);return;case"select":$=E=M=Y=null;for(v in o)if(j=o[v],o.hasOwnProperty(v)&&j!=null)switch(v){case"value":break;case"multiple":$=j;default:h.hasOwnProperty(v)||me(i,a,v,null,h,j)}for(m in h)if(v=h[m],j=o[m],h.hasOwnProperty(m)&&(v!=null||j!=null))switch(m){case"value":Y=v;break;case"defaultValue":M=v;break;case"multiple":E=v;default:v!==j&&me(i,a,m,v,h,j)}a=M,o=E,h=$,Y!=null?Bu(i,!!o,Y,!1):!!h!=!!o&&(a!=null?Bu(i,!!o,a,!0):Bu(i,!!o,o?[]:"",!1));return;case"textarea":$=Y=null;for(M in o)if(m=o[M],o.hasOwnProperty(M)&&m!=null&&!h.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:me(i,a,M,null,h,m)}for(E in h)if(m=h[E],v=o[E],h.hasOwnProperty(E)&&(m!=null||v!=null))switch(E){case"value":Y=m;break;case"defaultValue":$=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==v&&me(i,a,E,m,h,v)}vx(i,Y,$);return;case"option":for(var Ot in o)if(Y=o[Ot],o.hasOwnProperty(Ot)&&Y!=null&&!h.hasOwnProperty(Ot))switch(Ot){case"selected":i.selected=!1;break;default:me(i,a,Ot,null,h,Y)}for(j in h)if(Y=h[j],$=o[j],h.hasOwnProperty(j)&&Y!==$&&(Y!=null||$!=null))switch(j){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:me(i,a,j,Y,h,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in o)Y=o[Rt],o.hasOwnProperty(Rt)&&Y!=null&&!h.hasOwnProperty(Rt)&&me(i,a,Rt,null,h,Y);for(V in h)if(Y=h[V],$=o[V],h.hasOwnProperty(V)&&Y!==$&&(Y!=null||$!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(137,a));break;default:me(i,a,V,Y,h,$)}return;default:if(Bb(a)){for(var ye in o)Y=o[ye],o.hasOwnProperty(ye)&&Y!==void 0&&!h.hasOwnProperty(ye)&&E0(i,a,ye,void 0,h,Y);for(nt in h)Y=h[nt],$=o[nt],!h.hasOwnProperty(nt)||Y===$||Y===void 0&&$===void 0||E0(i,a,nt,Y,h,$);return}}for(var U in o)Y=o[U],o.hasOwnProperty(U)&&Y!=null&&!h.hasOwnProperty(U)&&me(i,a,U,null,h,Y);for(lt in h)Y=h[lt],$=o[lt],!h.hasOwnProperty(lt)||Y===$||Y==null&&$==null||me(i,a,lt,Y,h,$)}var _0=null,C0=null;function _m(i){return i.nodeType===9?i:i.ownerDocument}function S_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w_(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function T0(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var D0=null;function sN(){var i=window.event;return i&&i.type==="popstate"?i===D0?!1:(D0=i,!0):(D0=null,!1)}var x_=typeof setTimeout=="function"?setTimeout:void 0,aN=typeof clearTimeout=="function"?clearTimeout:void 0,E_=typeof Promise=="function"?Promise:void 0,rN=typeof queueMicrotask=="function"?queueMicrotask:typeof E_<"u"?function(i){return E_.resolve(null).then(i).catch(lN)}:x_;function lN(i){setTimeout(function(){throw i})}function Kr(i){return i==="head"}function __(i,a){var o=a,h=0,m=0;do{var v=o.nextSibling;if(i.removeChild(o),v&&v.nodeType===8)if(o=v.data,o==="/$"){if(0<h&&8>h){o=h;var E=i.ownerDocument;if(o&1&&Vd(E.documentElement),o&2&&Vd(E.body),o&4)for(o=E.head,Vd(o),E=o.firstChild;E;){var M=E.nextSibling,j=E.nodeName;E[Ta]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=M}}if(m===0){i.removeChild(v),Zd(a);return}m--}else o==="$"||o==="$?"||o==="$!"?m++:h=o.charCodeAt(0)-48;else h=0;o=v}while(o);Zd(a)}function k0(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":k0(o),ju(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function oN(i,a,o,h){for(;i.nodeType===1;){var m=o;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Ta])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Rs(i.nextSibling),i===null)break}return null}function uN(i,a,o){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Rs(i.nextSibling),i===null))return null;return i}function R0(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function cN(i,a){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")a();else{var h=function(){a(),o.removeEventListener("DOMContentLoaded",h)};o.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Rs(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var M0=null;function C_(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(a===0)return i;a--}else o==="/$"&&a++}i=i.previousSibling}return null}function T_(i,a,o){switch(a=_m(o),i){case"html":if(i=a.documentElement,!i)throw Error(n(452));return i;case"head":if(i=a.head,!i)throw Error(n(453));return i;case"body":if(i=a.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Vd(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);ju(i)}var cs=new Map,D_=new Set;function Cm(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ua=q.d;q.d={f:hN,r:dN,D:fN,C:pN,L:gN,m:mN,X:bN,S:yN,M:vN};function hN(){var i=Ua.f(),a=ym();return i||a}function dN(i){var a=Nr(i);a!==null&&a.tag===5&&a.type==="form"?$1(a):Ua.r(i)}var mc=typeof document>"u"?null:document;function k_(i,a,o){var h=mc;if(h&&typeof a=="string"&&a){var m=is(a);m='link[rel="'+i+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),D_.has(m)||(D_.add(m),i={rel:i,crossOrigin:o,href:a},h.querySelector(m)===null&&(a=h.createElement("link"),Dn(a,"link",i),qt(a),h.head.appendChild(a)))}}function fN(i){Ua.D(i),k_("dns-prefetch",i,null)}function pN(i,a){Ua.C(i,a),k_("preconnect",i,a)}function gN(i,a,o){Ua.L(i,a,o);var h=mc;if(h&&i&&a){var m='link[rel="preload"][as="'+is(a)+'"]';a==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+is(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+is(o.imageSizes)+'"]')):m+='[href="'+is(i)+'"]';var v=m;switch(a){case"style":v=yc(i);break;case"script":v=bc(i)}cs.has(v)||(i=g({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:i,as:a},o),cs.set(v,i),h.querySelector(m)!==null||a==="style"&&h.querySelector(qd(v))||a==="script"&&h.querySelector(Yd(v))||(a=h.createElement("link"),Dn(a,"link",i),qt(a),h.head.appendChild(a)))}}function mN(i,a){Ua.m(i,a);var o=mc;if(o&&i){var h=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+is(h)+'"][href="'+is(i)+'"]',v=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=bc(i)}if(!cs.has(v)&&(i=g({rel:"modulepreload",href:i},a),cs.set(v,i),o.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Yd(v)))return}h=o.createElement("link"),Dn(h,"link",i),qt(h),o.head.appendChild(h)}}}function yN(i,a,o){Ua.S(i,a,o);var h=mc;if(h&&i){var m=ue(h).hoistableStyles,v=yc(i);a=a||"default";var E=m.get(v);if(!E){var M={loading:0,preload:null};if(E=h.querySelector(qd(v)))M.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":a},o),(o=cs.get(v))&&N0(i,o);var j=E=h.createElement("link");qt(j),Dn(j,"link",i),j._p=new Promise(function(V,nt){j.onload=V,j.onerror=nt}),j.addEventListener("load",function(){M.loading|=1}),j.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Tm(E,a,h)}E={type:"stylesheet",instance:E,count:1,state:M},m.set(v,E)}}}function bN(i,a){Ua.X(i,a);var o=mc;if(o&&i){var h=ue(o).hoistableScripts,m=bc(i),v=h.get(m);v||(v=o.querySelector(Yd(m)),v||(i=g({src:i,async:!0},a),(a=cs.get(m))&&O0(i,a),v=o.createElement("script"),qt(v),Dn(v,"link",i),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function vN(i,a){Ua.M(i,a);var o=mc;if(o&&i){var h=ue(o).hoistableScripts,m=bc(i),v=h.get(m);v||(v=o.querySelector(Yd(m)),v||(i=g({src:i,async:!0,type:"module"},a),(a=cs.get(m))&&O0(i,a),v=o.createElement("script"),qt(v),Dn(v,"link",i),o.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(m,v))}}function R_(i,a,o,h){var m=(m=it.current)?Cm(m):null;if(!m)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=yc(o.href),o=ue(m).hoistableStyles,h=o.get(a),h||(h={type:"style",instance:null,count:0,state:null},o.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=yc(o.href);var v=ue(m).hoistableStyles,E=v.get(i);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,E),(v=m.querySelector(qd(i)))&&!v._p&&(E.instance=v,E.state.loading=5),cs.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},cs.set(i,o),v||AN(m,i,o,E.state))),a&&h===null)throw Error(n(528,""));return E}if(a&&h!==null)throw Error(n(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=bc(o),o=ue(m).hoistableScripts,h=o.get(a),h||(h={type:"script",instance:null,count:0,state:null},o.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function yc(i){return'href="'+is(i)+'"'}function qd(i){return'link[rel="stylesheet"]['+i+"]"}function M_(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function AN(i,a,o,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Dn(a,"link",o),qt(a),i.head.appendChild(a))}function bc(i){return'[src="'+is(i)+'"]'}function Yd(i){return"script[async]"+i}function N_(i,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+is(o.href)+'"]');if(h)return a.instance=h,qt(h),h;var m=g({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),qt(h),Dn(h,"style",m),Tm(h,o.precedence,i),a.instance=h;case"stylesheet":m=yc(o.href);var v=i.querySelector(qd(m));if(v)return a.state.loading|=4,a.instance=v,qt(v),v;h=M_(o),(m=cs.get(m))&&N0(h,m),v=(i.ownerDocument||i).createElement("link"),qt(v);var E=v;return E._p=new Promise(function(M,j){E.onload=M,E.onerror=j}),Dn(v,"link",h),a.state.loading|=4,Tm(v,o.precedence,i),a.instance=v;case"script":return v=bc(o.src),(m=i.querySelector(Yd(v)))?(a.instance=m,qt(m),m):(h=o,(m=cs.get(v))&&(h=g({},o),O0(h,m)),i=i.ownerDocument||i,m=i.createElement("script"),qt(m),Dn(m,"link",h),i.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Tm(h,o.precedence,i));return a.instance}function Tm(i,a,o){for(var h=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,v=m,E=0;E<h.length;E++){var M=h[E];if(M.dataset.precedence===a)v=M;else if(v!==m)break}v?v.parentNode.insertBefore(i,v.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(i,a.firstChild))}function N0(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function O0(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Dm=null;function O_(i,a,o){if(Dm===null){var h=new Map,m=Dm=new Map;m.set(o,h)}else m=Dm,h=m.get(o),h||(h=new Map,m.set(o,h));if(h.has(i))return h;for(h.set(i,null),o=o.getElementsByTagName(i),m=0;m<o.length;m++){var v=o[m];if(!(v[Ta]||v[ln]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var E=v.getAttribute(a)||"";E=i+E;var M=h.get(E);M?M.push(v):h.set(E,[v])}}return h}function L_(i,a,o){i=i.ownerDocument||i,i.head.insertBefore(o,a==="title"?i.querySelector("head > title"):null)}function SN(i,a,o){if(o===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function P_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Xd=null;function wN(){}function xN(i,a,o){if(Xd===null)throw Error(n(475));var h=Xd;if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=yc(o.href),v=i.querySelector(qd(m));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(h.count++,h=km.bind(h),i.then(h,h)),a.state.loading|=4,a.instance=v,qt(v);return}v=i.ownerDocument||i,o=M_(o),(m=cs.get(m))&&N0(o,m),v=v.createElement("link"),qt(v);var E=v;E._p=new Promise(function(M,j){E.onload=M,E.onerror=j}),Dn(v,"link",o),a.instance=v}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(h.count++,a=km.bind(h),i.addEventListener("load",a),i.addEventListener("error",a))}}function EN(){if(Xd===null)throw Error(n(475));var i=Xd;return i.stylesheets&&i.count===0&&L0(i,i.stylesheets),0<i.count?function(a){var o=setTimeout(function(){if(i.stylesheets&&L0(i,i.stylesheets),i.unsuspend){var h=i.unsuspend;i.unsuspend=null,h()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(o)}}:null}function km(){if(this.count--,this.count===0){if(this.stylesheets)L0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Rm=null;function L0(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Rm=new Map,a.forEach(_N,i),Rm=null,km.call(i))}function _N(i,a){if(!(a.state.loading&4)){var o=Rm.get(i);if(o)var h=o.get(null);else{o=new Map,Rm.set(i,o);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var E=m[v];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),h=E)}h&&o.set(null,h)}m=a.instance,E=m.getAttribute("data-precedence"),v=o.get(E)||h,v===h&&o.set(null,m),o.set(E,m),this.count++,h=km.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),v?v.parentNode.insertBefore(m,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),a.state.loading|=4}}var $d={$$typeof:O,Provider:null,Consumer:null,_currentValue:yt,_currentValue2:yt,_threadCount:0};function CN(i,a,o,h,m,v,E,M){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=id(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=id(0),this.hiddenUpdates=id(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function z_(i,a,o,h,m,v,E,M,j,V,nt,lt){return i=new CN(i,a,o,E,M,j,V,lt),a=1,v===!0&&(a|=24),v=ki(3,null,null,a),i.current=v,v.stateNode=i,a=gv(),a.refCount++,i.pooledCache=a,a.refCount++,v.memoizedState={element:h,isDehydrated:o,cache:a},vv(v),i}function I_(i){return i?(i=Wu,i):Wu}function j_(i,a,o,h,m,v){m=I_(m),h.context===null?h.context=m:h.pendingContext=m,h=Ir(a),h.payload={element:o},v=v===void 0?null:v,v!==null&&(h.callback=v),o=jr(i,h,a),o!==null&&(Li(o,i,a),Ed(o,i,a))}function F_(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<a?o:a}}function P0(i,a){F_(i,a),(i=i.alternate)&&F_(i,a)}function B_(i){if(i.tag===13){var a=$u(i,67108864);a!==null&&Li(a,i,67108864),P0(i,67108864)}}var Mm=!0;function TN(i,a,o,h){var m=F.T;F.T=null;var v=q.p;try{q.p=2,z0(i,a,o,h)}finally{q.p=v,F.T=m}}function DN(i,a,o,h){var m=F.T;F.T=null;var v=q.p;try{q.p=8,z0(i,a,o,h)}finally{q.p=v,F.T=m}}function z0(i,a,o,h){if(Mm){var m=I0(h);if(m===null)x0(i,a,h,Nm,o),U_(i,h);else if(RN(m,i,a,o,h))h.stopPropagation();else if(U_(i,h),a&4&&-1<kN.indexOf(i)){for(;m!==null;){var v=Nr(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var E=Qn(v.pendingLanes);if(E!==0){var M=v;for(M.pendingLanes|=2,M.entangledLanes|=2;E;){var j=1<<31-kt(E);M.entanglements[1]|=j,E&=~j}Zs(v),(ce&6)===0&&(gm=Fe()+500,Hd(0))}}break;case 13:M=$u(v,2),M!==null&&Li(M,v,2),ym(),P0(v,2)}if(v=I0(h),v===null&&x0(i,a,h,Nm,o),v===m)break;m=v}m!==null&&h.stopPropagation()}else x0(i,a,h,null,o)}}function I0(i){return i=Ub(i),j0(i)}var Nm=null;function j0(i){if(Nm=null,i=Mr(i),i!==null){var a=l(i);if(a===null)i=null;else{var o=a.tag;if(o===13){if(i=u(a),i!==null)return i;i=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Nm=i,null}function H_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ve()){case xs:return 2;case _a:return 8;case ci:case kr:return 32;case Ca:return 268435456;default:return 32}default:return 32}}var F0=!1,Qr=null,Zr=null,Jr=null,Wd=new Map,Kd=new Map,tl=[],kN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function U_(i,a){switch(i){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":Wd.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kd.delete(a.pointerId)}}function Qd(i,a,o,h,m,v){return i===null||i.nativeEvent!==v?(i={blockedOn:a,domEventName:o,eventSystemFlags:h,nativeEvent:v,targetContainers:[m]},a!==null&&(a=Nr(a),a!==null&&B_(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),i)}function RN(i,a,o,h,m){switch(a){case"focusin":return Qr=Qd(Qr,i,a,o,h,m),!0;case"dragenter":return Zr=Qd(Zr,i,a,o,h,m),!0;case"mouseover":return Jr=Qd(Jr,i,a,o,h,m),!0;case"pointerover":var v=m.pointerId;return Wd.set(v,Qd(Wd.get(v)||null,i,a,o,h,m)),!0;case"gotpointercapture":return v=m.pointerId,Kd.set(v,Qd(Kd.get(v)||null,i,a,o,h,m)),!0}return!1}function G_(i){var a=Mr(i.target);if(a!==null){var o=l(a);if(o!==null){if(a=o.tag,a===13){if(a=u(o),a!==null){i.blockedOn=a,sd(i.priority,function(){if(o.tag===13){var h=Oi();h=we(h);var m=$u(o,h);m!==null&&Li(m,o,h),P0(o,h)}});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Om(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var o=I0(i.nativeEvent);if(o===null){o=i.nativeEvent;var h=new o.constructor(o.type,o);Hb=h,o.target.dispatchEvent(h),Hb=null}else return a=Nr(o),a!==null&&B_(a),i.blockedOn=o,!1;a.shift()}return!0}function V_(i,a,o){Om(i)&&o.delete(a)}function MN(){F0=!1,Qr!==null&&Om(Qr)&&(Qr=null),Zr!==null&&Om(Zr)&&(Zr=null),Jr!==null&&Om(Jr)&&(Jr=null),Wd.forEach(V_),Kd.forEach(V_)}function Lm(i,a){i.blockedOn===a&&(i.blockedOn=null,F0||(F0=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,MN)))}var Pm=null;function q_(i){Pm!==i&&(Pm=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Pm===i&&(Pm=null);for(var a=0;a<i.length;a+=3){var o=i[a],h=i[a+1],m=i[a+2];if(typeof h!="function"){if(j0(h||o)===null)continue;break}var v=Nr(o);v!==null&&(i.splice(a,3),a-=3,jv(v,{pending:!0,data:m,method:o.method,action:h},h,m))}}))}function Zd(i){function a(j){return Lm(j,i)}Qr!==null&&Lm(Qr,i),Zr!==null&&Lm(Zr,i),Jr!==null&&Lm(Jr,i),Wd.forEach(a),Kd.forEach(a);for(var o=0;o<tl.length;o++){var h=tl[o];h.blockedOn===i&&(h.blockedOn=null)}for(;0<tl.length&&(o=tl[0],o.blockedOn===null);)G_(o),o.blockedOn===null&&tl.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(h=0;h<o.length;h+=3){var m=o[h],v=o[h+1],E=m[gn]||null;if(typeof v=="function")E||q_(o);else if(E){var M=null;if(v&&v.hasAttribute("formAction")){if(m=v,E=v[gn]||null)M=E.formAction;else if(j0(m)!==null)continue}else M=E.action;typeof M=="function"?o[h+1]=M:(o.splice(h,3),h-=3),q_(o)}}}function B0(i){this._internalRoot=i}zm.prototype.render=B0.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));var o=a.current,h=Oi();j_(o,h,i,a,null,null)},zm.prototype.unmount=B0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;j_(i.current,2,null,i,null,null),ym(),a[Cs]=null}};function zm(i){this._internalRoot=i}zm.prototype.unstable_scheduleHydration=function(i){if(i){var a=Cg();i={blockedOn:null,target:i,priority:a};for(var o=0;o<tl.length&&a!==0&&a<tl[o].priority;o++);tl.splice(o,0,i),o===0&&G_(i)}};var Y_=t.version;if(Y_!=="19.1.0")throw Error(n(527,Y_,"19.1.0"));q.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(a),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var NN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Im=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Im.isDisabled&&Im.supportsFiber)try{tt=Im.inject(NN),dt=Im}catch{}}return tf.createRoot=function(i,a){if(!r(i))throw Error(n(299));var o=!1,h="",m=oE,v=uE,E=cE,M=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks)),a=z_(i,1,!1,null,null,o,h,m,v,E,M,null),i[Cs]=a.current,w0(i),new B0(a)},tf.hydrateRoot=function(i,a,o){if(!r(i))throw Error(n(299));var h=!1,m="",v=oE,E=uE,M=cE,j=null,V=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(j=o.unstable_transitionCallbacks),o.formState!==void 0&&(V=o.formState)),a=z_(i,1,!0,a,o??null,h,m,v,E,M,j,V),a.context=I_(null),o=a.current,h=Oi(),h=we(h),m=Ir(h),m.callback=null,jr(o,m,h),o=h,a.current.lanes=o,Rr(a,o),Zs(a),i[Cs]=a.current,w0(i),new zm(a)},tf.version="19.1.0",tf}var iC;function YN(){if(iC)return V0.exports;iC=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),V0.exports=qN(),V0.exports}var XN=YN();const $N=hg(XN);let $0=null;function Ea(){return WN()?(!$0&&window.acquireVsCodeApi&&($0=window.acquireVsCodeApi()),$0):null}function WN(){return typeof window.acquireVsCodeApi=="function"||typeof window.acquireVsCodeApi=="object"}const W0=Ea(),KN=({onLoginSuccess:s,onSwitchToRegister:t})=>{const[e,n]=et.useState(""),[r,l]=et.useState(""),[u,c]=et.useState(""),[f,p]=et.useState(null);et.useEffect(()=>{const b=A=>{const w=A.data;w.command==="loginResult"&&(w.success?s(w.user):p(w.error||"登录失败"))};return window.addEventListener("message",b),()=>window.removeEventListener("message",b)},[s]);const g=b=>{b.preventDefault(),p(null),W0==null||W0.postMessage({command:"login",name:e,email:r,password:u})},y=()=>{t()};return P.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:P.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md w-full max-w-md",children:[P.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"登录"}),f&&P.jsx("div",{className:"text-red-500 mb-4",children:f}),P.jsxs("form",{onSubmit:g,className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block mb-1",children:"姓名"}),P.jsx("input",{type:"text",value:e,onChange:b=>n(b.target.value),className:"w-full border px-3 py-2 rounded",placeholder:"请输入您的姓名",required:!0})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block mb-1",children:"邮箱"}),P.jsx("input",{type:"email",value:r,onChange:b=>l(b.target.value),className:"w-full border px-3 py-2 rounded",placeholder:"user@example.com",required:!0})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block mb-1",children:"密码"}),P.jsx("input",{type:"password",value:u,onChange:b=>c(b.target.value),className:"w-full border px-3 py-2 rounded",placeholder:"（任意输入均可）",required:!0})]}),P.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",children:"登录"})]}),P.jsxs("p",{className:"mt-4 text-center",children:["没有账号？"," ",P.jsx("button",{onClick:y,className:"text-green-600 underline",children:"注册"})]})]})})},K0=Ea();function QN({onRegisterSuccess:s,onSwitchToLogin:t}){const[e,n]=et.useState(""),[r,l]=et.useState(""),[u,c]=et.useState(""),[f,p]=et.useState(null);et.useEffect(()=>{const y=b=>{const A=b.data;A.command==="registerResult"&&(A.success?s(A.user):p(A.error||"注册失败"))};return window.addEventListener("message",y),()=>window.removeEventListener("message",y)},[s]);const g=y=>{y.preventDefault(),p(null),K0==null||K0.postMessage({command:"register",name:e,email:r,password:u})};return P.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:P.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md w-full max-w-md",children:[P.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"注册"}),f&&P.jsx("div",{className:"text-red-500 mb-4",children:f}),P.jsxs("form",{onSubmit:g,className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block mb-1",children:"姓名"}),P.jsx("input",{type:"text",value:e,onChange:y=>n(y.target.value),className:"w-full border px-3 py-2 rounded",required:!0})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block mb-1",children:"邮箱"}),P.jsx("input",{type:"email",value:r,onChange:y=>l(y.target.value),className:"w-full border px-3 py-2 rounded",required:!0})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block mb-1",children:"密码"}),P.jsx("input",{type:"password",className:"w-full border px-3 py-2 rounded",placeholder:"任意输入",required:!0})]}),P.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700",children:"注册"})]}),P.jsxs("p",{className:"mt-4 text-center",children:["已有账号？"," ",P.jsx("button",{onClick:t,className:"text-blue-600 underline",children:"去登录"})]})]})})}function jm({title:s,progress:t,ddl:e}){return P.jsxs("div",{className:"bg-white p-4 rounded-xl shadow w-full",children:[P.jsx("h2",{className:"text-xl font-semibold",children:s}),P.jsx("div",{className:"w-full bg-gray-200 h-2 rounded mt-2",children:P.jsx("div",{className:"bg-blue-600 h-2 rounded",style:{width:`${t}%`}})}),P.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["DDL：",e]})]})}const mo=Ea();function sC(){if(mo==null)return P.jsxs("div",{className:"flex flex-col items-center space-y-10",children:[P.jsx("h1",{className:"text-4xl font-extrabold font-serif text-center mt-6",children:"📚 我的课程"}),P.jsxs("div",{className:"flex flex-col items-center space-y-6 w-full max-w-xl",children:[P.jsx(jm,{title:"数据结构",progress:75,ddl:"2025-04-20"}),P.jsx(jm,{title:"操作系统",progress:40,ddl:"2025-04-18"}),P.jsx(jm,{title:"AI导论",progress:90,ddl:"2025-04-22"})]}),P.jsxs("div",{className:"mt-auto pb-10 flex gap-4",children:[P.jsx("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-xl text-lg",children:"➕ 添加课程"}),P.jsx("button",{className:"bg-gray-300 px-6 py-3 rounded-xl text-lg",children:"📁 导入课程"})]})]});const[s,t]=et.useState([]);et.useEffect(()=>{const r=l=>{const u=l.data;switch(u.command){case"coursesData":t(u.courses);break;case"createCourseResult":u.success?mo&&mo.postMessage({command:"getCourses"}):console.error("创建课程失败：",u.error);break;default:console.warn("未知的消息:",u)}};return window.addEventListener("message",r),mo&&mo.postMessage({command:"getCourses"}),()=>window.removeEventListener("message",r)},[]);const e=()=>{mo&&mo.postMessage({command:"createCourse"})},n=()=>{console.log("导入课程功能暂未实现")};return P.jsxs("div",{className:"flex flex-col items-center space-y-10",children:[P.jsx("h1",{className:"text-4xl font-extrabold font-serif text-center mt-6",children:"📚 我的课程"}),P.jsx("div",{className:"flex flex-col items-center space-y-6 w-full max-w-xl",children:s.map((r,l)=>P.jsx(jm,{title:r.name,progress:r.progress!==void 0?r.progress:0,ddl:r.ddl||"2025-04-30"},l))}),P.jsxs("div",{className:"mt-auto pb-10 flex gap-4",children:[P.jsx("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-xl text-lg",onClick:e,children:"➕ 添加课程"}),P.jsx("button",{className:"bg-gray-300 px-6 py-3 rounded-xl text-lg",onClick:n,children:"📁 导入课程"})]})]})}function ef({title:s,count:t,files:e,onFileClick:n}){const[r,l]=et.useState(!1);return P.jsxs("div",{className:"bg-white p-4 rounded-xl shadow flex flex-col items-center w-48",children:[P.jsx("div",{className:"text-2xl",children:"📂"}),P.jsx("div",{className:"font-bold mt-2",children:s}),P.jsxs("div",{className:"text-sm text-gray-500",children:[t," 个文件"]}),P.jsx("button",{className:"mt-2 text-blue-600 hover:underline",onClick:()=>l(!r),children:r?"▲ 收起":"▼ 展开文件列表"}),r&&P.jsx("ul",{className:"text-sm mt-2 text-gray-700 list-disc list-inside",children:e.map((u,c)=>P.jsx("li",{children:n?P.jsx("button",{className:"text-blue-500 hover:underline",onClick:()=>n(u),children:u}):u},c))})]})}function ZN({setSelectedFile:s}){const t=Ea();if(t==null){const[g,y]=et.useState("操作系统"),b=["操作系统","数据结构","AI导论"];return P.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[P.jsxs("div",{className:"mt-6 text-center",children:[P.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["📘 ",g]}),P.jsx("select",{value:g,onChange:A=>y(A.target.value),className:"border p-2 rounded-md",children:b.map(A=>P.jsx("option",{value:A,children:A},A))})]}),P.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mt-10",children:[P.jsx(ef,{title:"讲义",count:8,files:["Lecture1.pdf","Lecture2.pdf"]}),P.jsx(ef,{title:"作业",count:5,files:["HW1.docx","HW2.docx"]}),P.jsx(ef,{title:"资料",count:10,files:["Paper1.pdf"]}),P.jsx(ef,{title:"笔记",count:3,files:["Note1.md"]})]})]})}const[e,n]=et.useState([]),[r,l]=et.useState(""),[u,c]=et.useState([[],[],[],[]]);et.useEffect(()=>{window.addEventListener("message",g=>{const y=g.data;y.command==="coursesData"?(n(y.courses),y.courses.length>0&&(l(y.courses[0].name),t.postMessage({command:"getCourseFiles",courseName:y.courses[0].name}))):y.command==="courseFilesData"&&c(y.files)}),t.postMessage({command:"getCourses"})},[]);const f=g=>{l(g),t.postMessage({command:"getCourseFiles",courseName:g})},p=["讲义","作业","资料","笔记"];return P.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[P.jsxs("div",{className:"mt-6 text-center",children:[P.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["📘 ",r]}),P.jsx("select",{value:r,onChange:g=>f(g.target.value),className:"border p-2 rounded-md",children:e.map(g=>P.jsx("option",{value:g.name,children:g.name},g.name))})]}),P.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mt-10",children:p.map((g,y)=>P.jsx(ef,{title:g,count:u[y].length,files:u[y],onFileClick:b=>s(`${r}/${g}/${b}`)},g))})]})}function GT(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var r=s.length;for(t=0;t<r;t++)s[t]&&(e=GT(s[t]))&&(n&&(n+=" "),n+=e)}else for(e in s)s[e]&&(n&&(n+=" "),n+=e);return n}function fb(){for(var s,t,e=0,n="",r=arguments.length;e<r;e++)(s=arguments[e])&&(t=GT(s))&&(n&&(n+=" "),n+=t);return n}var Q0,aC;function JN(){if(aC)return Q0;aC=1;const s=(f,p,g,y)=>{if(g==="length"||g==="prototype"||g==="arguments"||g==="caller")return;const b=Object.getOwnPropertyDescriptor(f,g),A=Object.getOwnPropertyDescriptor(p,g);!t(b,A)&&y||Object.defineProperty(f,g,A)},t=function(f,p){return f===void 0||f.configurable||f.writable===p.writable&&f.enumerable===p.enumerable&&f.configurable===p.configurable&&(f.writable||f.value===p.value)},e=(f,p)=>{const g=Object.getPrototypeOf(p);g!==Object.getPrototypeOf(f)&&Object.setPrototypeOf(f,g)},n=(f,p)=>`/* Wrapped ${f}*/
${p}`,r=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),l=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),u=(f,p,g)=>{const y=g===""?"":`with ${g.trim()}() `,b=n.bind(null,y,p.toString());Object.defineProperty(b,"name",l),Object.defineProperty(f,"toString",{...r,value:b})};return Q0=(f,p,{ignoreNonConfigurable:g=!1}={})=>{const{name:y}=f;for(const b of Reflect.ownKeys(p))s(f,p,b,g);return e(f,p),u(f,p,y),f},Q0}var hf={exports:{}},Z0,rC;function tO(){return rC||(rC=1,Z0=()=>{const s={};return s.promise=new Promise((t,e)=>{s.resolve=t,s.reject=e}),s}),Z0}var Fm=hf.exports,lC;function eO(){return lC||(lC=1,function(s,t){var e=Fm&&Fm.__awaiter||function(u,c,f,p){return new(f||(f=Promise))(function(g,y){function b(S){try{w(p.next(S))}catch(k){y(k)}}function A(S){try{w(p.throw(S))}catch(k){y(k)}}function w(S){S.done?g(S.value):new f(function(k){k(S.value)}).then(b,A)}w((p=p.apply(u,c||[])).next())})},n=Fm&&Fm.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(tO());function l(u,c="maxAge"){let f,p,g;const y=()=>e(this,void 0,void 0,function*(){if(f!==void 0)return;const w=S=>e(this,void 0,void 0,function*(){g=r.default();const k=S[1][c]-Date.now();if(k<=0){u.delete(S[0]),g.resolve();return}return f=S[0],p=setTimeout(()=>{u.delete(S[0]),g&&g.resolve()},k),typeof p.unref=="function"&&p.unref(),g.promise});try{for(const S of u)yield w(S)}catch{}f=void 0}),b=()=>{f=void 0,p!==void 0&&(clearTimeout(p),p=void 0),g!==void 0&&(g.reject(void 0),g=void 0)},A=u.set.bind(u);return u.set=(w,S)=>{u.has(w)&&u.delete(w);const k=A(w,S);return f&&f===w&&b(),y(),k},y(),u}t.default=l,s.exports=l,s.exports.default=l}(hf,hf.exports)),hf.exports}var J0,oC;function nO(){if(oC)return J0;oC=1;const s=JN(),t=eO(),e=new WeakMap,n=new WeakMap,r=(l,{cacheKey:u,cache:c=new Map,maxAge:f}={})=>{typeof f=="number"&&t(c);const p=function(...g){const y=u?u(g):g[0],b=c.get(y);if(b)return b.data;const A=l.apply(this,g);return c.set(y,{data:A,maxAge:f?Date.now()+f:Number.POSITIVE_INFINITY}),A};return s(p,l,{ignoreNonConfigurable:!0}),n.set(p,c),p};return r.decorator=(l={})=>(u,c,f)=>{const p=u[c];if(typeof p!="function")throw new TypeError("The decorated value must be a function");delete f.value,delete f.writable,f.get=function(){if(!e.has(this)){const g=r(p,l);return e.set(this,g),g}return e.get(this)}},r.clear=l=>{const u=n.get(l);if(!u)throw new TypeError("Can't clear a function that was not memoized!");if(typeof u.clear!="function")throw new TypeError("The cache Map can't be cleared!");u.clear()},J0=r,J0}var iO=nO();const VT=hg(iO);function sO(s){return typeof s=="string"}function aO(s,t,e){return e.indexOf(s)===t}function rO(s){return s.toLowerCase()===s}function uC(s){return s.indexOf(",")===-1?s:s.split(",")}function RA(s){if(!s)return s;if(s==="C"||s==="posix"||s==="POSIX")return"en-US";if(s.indexOf(".")!==-1){var t=s.split(".")[0],e=t===void 0?"":t;return RA(e)}if(s.indexOf("@")!==-1){var n=s.split("@")[0],e=n===void 0?"":n;return RA(e)}if(s.indexOf("-")===-1||!rO(s))return s;var r=s.split("-"),l=r[0],u=r[1],c=u===void 0?"":u;return"".concat(l,"-").concat(c.toUpperCase())}function lO(s){var t=s===void 0?{}:s,e=t.useFallbackLocale,n=e===void 0?!0:e,r=t.fallbackLocale,l=r===void 0?"en-US":r,u=[];if(typeof navigator<"u"){for(var c=navigator.languages||[],f=[],p=0,g=c;p<g.length;p++){var y=g[p];f=f.concat(uC(y))}var b=navigator.language,A=b&&uC(b);u=u.concat(f,A)}return n&&u.push(l),u.filter(sO).map(RA).filter(aO)}var oO=VT(lO,{cacheKey:JSON.stringify});function uO(s){return oO(s)[0]||null}var qT=VT(uO,{cacheKey:JSON.stringify});function Dr(s,t,e){return function(r,l){l===void 0&&(l=e);var u=s(r)+l;return t(u)}}function dg(s){return function(e){return new Date(s(e).getTime()-1)}}function fg(s,t){return function(n){return[s(n),t(n)]}}function Le(s){if(s instanceof Date)return s.getFullYear();if(typeof s=="number")return s;var t=parseInt(s,10);if(typeof s=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(s,"."))}function $l(s){if(s instanceof Date)return s.getMonth();throw new Error("Failed to get month from date: ".concat(s,"."))}function pb(s){if(s instanceof Date)return s.getDate();throw new Error("Failed to get year from date: ".concat(s,"."))}function Kh(s){var t=Le(s),e=t+(-t+1)%100,n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}var cO=Dr(Le,Kh,-100),YT=Dr(Le,Kh,100),Aw=dg(YT),hO=Dr(Le,Aw,-100),XT=fg(Kh,Aw);function Wl(s){var t=Le(s),e=t+(-t+1)%10,n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}var $T=Dr(Le,Wl,-10),Sw=Dr(Le,Wl,10),gb=dg(Sw),WT=Dr(Le,gb,-10),KT=fg(Wl,gb);function Qh(s){var t=Le(s),e=new Date;return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}var QT=Dr(Le,Qh,-1),ww=Dr(Le,Qh,1),mb=dg(ww),ZT=Dr(Le,mb,-1),dO=fg(Qh,mb);function xw(s,t){return function(n,r){r===void 0&&(r=t);var l=Le(n),u=$l(n)+r,c=new Date;return c.setFullYear(l,u,1),c.setHours(0,0,0,0),s(c)}}function Ou(s){var t=Le(s),e=$l(s),n=new Date;return n.setFullYear(t,e,1),n.setHours(0,0,0,0),n}var JT=xw(Ou,-1),Ew=xw(Ou,1),pg=dg(Ew),tD=xw(pg,-1),fO=fg(Ou,pg);function pO(s,t){return function(n,r){r===void 0&&(r=t);var l=Le(n),u=$l(n),c=pb(n)+r,f=new Date;return f.setFullYear(l,u,c),f.setHours(0,0,0,0),s(f)}}function gg(s){var t=Le(s),e=$l(s),n=pb(s),r=new Date;return r.setFullYear(t,e,n),r.setHours(0,0,0,0),r}var gO=pO(gg,1),_w=dg(gO),mO=fg(gg,_w);function eD(s){return pb(pg(s))}var zn={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},yO={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},Cw=[0,1,2,3,4,5,6],tA=new Map;function bO(s){return function(e,n){var r=e||qT();tA.has(r)||tA.set(r,new Map);var l=tA.get(r);return l.has(s)||l.set(s,new Intl.DateTimeFormat(r||void 0,s).format),l.get(s)(n)}}function vO(s){var t=new Date(s);return new Date(t.setHours(12))}function Lu(s){return function(t,e){return bO(s)(t,vO(e))}}var AO={day:"numeric"},SO={day:"numeric",month:"long",year:"numeric"},wO={month:"long"},xO={month:"long",year:"numeric"},EO={weekday:"short"},_O={weekday:"long"},CO={year:"numeric"},TO=Lu(AO),DO=Lu(SO),kO=Lu(wO),nD=Lu(xO),RO=Lu(EO),MO=Lu(_O),yb=Lu(CO),NO=Cw[0],OO=Cw[5],cC=Cw[6];function Pf(s,t){t===void 0&&(t=zn.ISO_8601);var e=s.getDay();switch(t){case zn.ISO_8601:return(e+6)%7;case zn.ISLAMIC:return(e+1)%7;case zn.HEBREW:case zn.GREGORY:return e;default:throw new Error("Unsupported calendar type.")}}function LO(s){var t=Kh(s);return Le(t)}function PO(s){var t=Wl(s);return Le(t)}function MA(s,t){t===void 0&&(t=zn.ISO_8601);var e=Le(s),n=$l(s),r=s.getDate()-Pf(s,t);return new Date(e,n,r)}function zO(s,t){t===void 0&&(t=zn.ISO_8601);var e=t===zn.GREGORY?zn.GREGORY:zn.ISO_8601,n=MA(s,t),r=Le(s)+1,l,u;do l=new Date(r,0,e===zn.ISO_8601?4:1),u=MA(l,t),r-=1;while(s<u);return Math.round((n.getTime()-u.getTime())/(864e5*7))+1}function Tu(s,t){switch(s){case"century":return Kh(t);case"decade":return Wl(t);case"year":return Qh(t);case"month":return Ou(t);case"day":return gg(t);default:throw new Error("Invalid rangeType: ".concat(s))}}function IO(s,t){switch(s){case"century":return cO(t);case"decade":return $T(t);case"year":return QT(t);case"month":return JT(t);default:throw new Error("Invalid rangeType: ".concat(s))}}function iD(s,t){switch(s){case"century":return YT(t);case"decade":return Sw(t);case"year":return ww(t);case"month":return Ew(t);default:throw new Error("Invalid rangeType: ".concat(s))}}function jO(s,t){switch(s){case"decade":return $T(t,-100);case"year":return QT(t,-10);case"month":return JT(t,-12);default:throw new Error("Invalid rangeType: ".concat(s))}}function FO(s,t){switch(s){case"decade":return Sw(t,100);case"year":return ww(t,10);case"month":return Ew(t,12);default:throw new Error("Invalid rangeType: ".concat(s))}}function sD(s,t){switch(s){case"century":return Aw(t);case"decade":return gb(t);case"year":return mb(t);case"month":return pg(t);case"day":return _w(t);default:throw new Error("Invalid rangeType: ".concat(s))}}function BO(s,t){switch(s){case"century":return hO(t);case"decade":return WT(t);case"year":return ZT(t);case"month":return tD(t);default:throw new Error("Invalid rangeType: ".concat(s))}}function HO(s,t){switch(s){case"decade":return WT(t,-100);case"year":return ZT(t,-10);case"month":return tD(t,-12);default:throw new Error("Invalid rangeType: ".concat(s))}}function hC(s,t){switch(s){case"century":return XT(t);case"decade":return KT(t);case"year":return dO(t);case"month":return fO(t);case"day":return mO(t);default:throw new Error("Invalid rangeType: ".concat(s))}}function UO(s,t,e){var n=[t,e].sort(function(r,l){return r.getTime()-l.getTime()});return[Tu(s,n[0]),sD(s,n[1])]}function aD(s,t,e){return e.map(function(n){return(t||yb)(s,n)}).join(" – ")}function GO(s,t,e){return aD(s,t,XT(e))}function rD(s,t,e){return aD(s,t,KT(e))}function VO(s){return s.getDay()===new Date().getDay()}function lD(s,t){t===void 0&&(t=zn.ISO_8601);var e=s.getDay();switch(t){case zn.ISLAMIC:case zn.HEBREW:return e===OO||e===cC;case zn.ISO_8601:case zn.GREGORY:return e===cC||e===NO;default:throw new Error("Unsupported calendar type.")}}var Js="react-calendar__navigation";function qO(s){var t=s.activeStartDate,e=s.drillUp,n=s.formatMonthYear,r=n===void 0?nD:n,l=s.formatYear,u=l===void 0?yb:l,c=s.locale,f=s.maxDate,p=s.minDate,g=s.navigationAriaLabel,y=g===void 0?"":g,b=s.navigationAriaLive,A=s.navigationLabel,w=s.next2AriaLabel,S=w===void 0?"":w,k=s.next2Label,C=k===void 0?"»":k,N=s.nextAriaLabel,O=N===void 0?"":N,I=s.nextLabel,z=I===void 0?"›":I,L=s.prev2AriaLabel,B=L===void 0?"":L,W=s.prev2Label,Q=W===void 0?"«":W,st=s.prevAriaLabel,X=st===void 0?"":st,Z=s.prevLabel,ct=Z===void 0?"‹":Z,J=s.setActiveStartDate,ht=s.showDoubleView,F=s.view,q=s.views,yt=q.indexOf(F)>0,xt=F!=="century",_=IO(F,t),K=xt?jO(F,t):void 0,ot=iD(F,t),R=xt?FO(F,t):void 0,at=function(){if(_.getFullYear()<0)return!0;var Vt=BO(F,t);return p&&p>=Vt}(),ft=xt&&function(){if(K.getFullYear()<0)return!0;var Vt=HO(F,t);return p&&p>=Vt}(),it=f&&f<ot,ut=xt&&f&&f<R;function mt(){J(_,"prev")}function Tt(){J(K,"prev2")}function Bt(){J(ot,"next")}function fe(){J(R,"next2")}function pe(Vt){var Fn=function(){switch(F){case"century":return GO(c,u,Vt);case"decade":return rD(c,u,Vt);case"year":return u(c,Vt);case"month":return r(c,Vt);default:throw new Error("Invalid view: ".concat(F,"."))}}();return A?A({date:Vt,label:Fn,locale:c||qT()||void 0,view:F}):Fn}function Zt(){var Vt="".concat(Js,"__label");return P.jsxs("button",{"aria-label":y,"aria-live":b,className:Vt,disabled:!yt,onClick:e,style:{flexGrow:1},type:"button",children:[P.jsx("span",{className:"".concat(Vt,"__labelText ").concat(Vt,"__labelText--from"),children:pe(t)}),ht?P.jsxs(P.Fragment,{children:[P.jsx("span",{className:"".concat(Vt,"__divider"),children:" – "}),P.jsx("span",{className:"".concat(Vt,"__labelText ").concat(Vt,"__labelText--to"),children:pe(ot)})]}):null]})}return P.jsxs("div",{className:Js,children:[Q!==null&&xt?P.jsx("button",{"aria-label":B,className:"".concat(Js,"__arrow ").concat(Js,"__prev2-button"),disabled:ft,onClick:Tt,type:"button",children:Q}):null,ct!==null&&P.jsx("button",{"aria-label":X,className:"".concat(Js,"__arrow ").concat(Js,"__prev-button"),disabled:at,onClick:mt,type:"button",children:ct}),Zt(),z!==null&&P.jsx("button",{"aria-label":O,className:"".concat(Js,"__arrow ").concat(Js,"__next-button"),disabled:it,onClick:Bt,type:"button",children:z}),C!==null&&xt?P.jsx("button",{"aria-label":S,className:"".concat(Js,"__arrow ").concat(Js,"__next2-button"),disabled:ut,onClick:fe,type:"button",children:C}):null]})}var Nc=function(){return Nc=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},Nc.apply(this,arguments)},YO=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e};function dC(s){return"".concat(s,"%")}function Tw(s){var t=s.children,e=s.className,n=s.count,r=s.direction,l=s.offset,u=s.style,c=s.wrap,f=YO(s,["children","className","count","direction","offset","style","wrap"]);return P.jsx("div",Nc({className:e,style:Nc({display:"flex",flexDirection:r,flexWrap:c?"wrap":"nowrap"},u)},f,{children:et.Children.map(t,function(p,g){var y=l&&g===0?dC(100*l/n):null;return et.cloneElement(p,Nc(Nc({},p.props),{style:{flexBasis:dC(100/n),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:y,marginInlineStart:y,marginInlineEnd:0}}))})}))}function XO(s,t,e){return t&&t>s?t:e&&e<s?e:s}function zf(s,t){return t[0]<=s&&t[1]>=s}function $O(s,t){return s[0]<=t[0]&&s[1]>=t[1]}function oD(s,t){return zf(s[0],t)||zf(s[1],t)}function fC(s,t,e){var n=oD(t,s),r=[];if(n){r.push(e);var l=zf(s[0],t),u=zf(s[1],t);l&&r.push("".concat(e,"Start")),u&&r.push("".concat(e,"End")),l&&u&&r.push("".concat(e,"BothEnds"))}return r}function WO(s){return Array.isArray(s)?s[0]!==null&&s[1]!==null:s!==null}function KO(s){if(!s)throw new Error("args is required");var t=s.value,e=s.date,n=s.hover,r="react-calendar__tile",l=[r];if(!e)return l;var u=new Date,c=function(){if(Array.isArray(e))return e;var A=s.dateType;if(!A)throw new Error("dateType is required when date is not an array of two dates");return hC(A,e)}();if(zf(u,c)&&l.push("".concat(r,"--now")),!t||!WO(t))return l;var f=function(){if(Array.isArray(t))return t;var A=s.valueType;if(!A)throw new Error("valueType is required when value is not an array of two dates");return hC(A,t)}();$O(f,c)?l.push("".concat(r,"--active")):oD(f,c)&&l.push("".concat(r,"--hasActive"));var p=fC(f,c,"".concat(r,"--range"));l.push.apply(l,p);var g=Array.isArray(t)?t:[t];if(n&&g.length===1){var y=n>f[0]?[f[0],n]:[n,f[0]],b=fC(y,c,"".concat(r,"--hover"));l.push.apply(l,b)}return l}function bb(s){for(var t=s.className,e=s.count,n=e===void 0?3:e,r=s.dateTransform,l=s.dateType,u=s.end,c=s.hover,f=s.offset,p=s.renderTile,g=s.start,y=s.step,b=y===void 0?1:y,A=s.value,w=s.valueType,S=[],k=g;k<=u;k+=b){var C=r(k);S.push(p({classes:KO({date:C,dateType:l,hover:c,value:A,valueType:w}),date:C}))}return P.jsx(Tw,{className:t,count:n,offset:f,wrap:!0,children:S})}function vb(s){var t=s.activeStartDate,e=s.children,n=s.classes,r=s.date,l=s.formatAbbr,u=s.locale,c=s.maxDate,f=s.maxDateTransform,p=s.minDate,g=s.minDateTransform,y=s.onClick,b=s.onMouseOver,A=s.style,w=s.tileClassName,S=s.tileContent,k=s.tileDisabled,C=s.view,N=et.useMemo(function(){var I={activeStartDate:t,date:r,view:C};return typeof w=="function"?w(I):w},[t,r,w,C]),O=et.useMemo(function(){var I={activeStartDate:t,date:r,view:C};return typeof S=="function"?S(I):S},[t,r,S,C]);return P.jsxs("button",{className:fb(n,N),disabled:p&&g(p)>r||c&&f(c)<r||(k==null?void 0:k({activeStartDate:t,date:r,view:C})),onClick:y?function(I){return y(r,I)}:void 0,onFocus:b?function(){return b(r)}:void 0,onMouseOver:b?function(){return b(r)}:void 0,style:A,type:"button",children:[l?P.jsx("abbr",{"aria-label":l(u,r),children:e}):e,O]})}var NA=function(){return NA=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},NA.apply(this,arguments)},QO=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e},pC="react-calendar__century-view__decades__decade";function ZO(s){var t=s.classes,e=t===void 0?[]:t,n=s.currentCentury,r=s.formatYear,l=r===void 0?yb:r,u=QO(s,["classes","currentCentury","formatYear"]),c=u.date,f=u.locale,p=[];return e&&p.push.apply(p,e),p.push(pC),Kh(c).getFullYear()!==n&&p.push("".concat(pC,"--neighboringCentury")),P.jsx(vb,NA({},u,{classes:p,maxDateTransform:gb,minDateTransform:Wl,view:"century",children:rD(f,l,c)}))}var OA=function(){return OA=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},OA.apply(this,arguments)},gC=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e};function JO(s){var t=s.activeStartDate,e=s.hover,n=s.showNeighboringCentury,r=s.value,l=s.valueType,u=gC(s,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),c=LO(t),f=c+(n?119:99);return P.jsx(bb,{className:"react-calendar__century-view__decades",dateTransform:Wl,dateType:"decade",end:f,hover:e,renderTile:function(p){var g=p.date,y=gC(p,["date"]);return P.jsx(ZO,OA({},u,y,{activeStartDate:t,currentCentury:c,date:g}),g.getTime())},start:c,step:10,value:r,valueType:l})}var LA=function(){return LA=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},LA.apply(this,arguments)};function tL(s){function t(){return P.jsx(JO,LA({},s))}return P.jsx("div",{className:"react-calendar__century-view",children:t()})}var PA=function(){return PA=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},PA.apply(this,arguments)},eL=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e},mC="react-calendar__decade-view__years__year";function nL(s){var t=s.classes,e=t===void 0?[]:t,n=s.currentDecade,r=s.formatYear,l=r===void 0?yb:r,u=eL(s,["classes","currentDecade","formatYear"]),c=u.date,f=u.locale,p=[];return e&&p.push.apply(p,e),p.push(mC),Wl(c).getFullYear()!==n&&p.push("".concat(mC,"--neighboringDecade")),P.jsx(vb,PA({},u,{classes:p,maxDateTransform:mb,minDateTransform:Qh,view:"decade",children:l(f,c)}))}var zA=function(){return zA=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},zA.apply(this,arguments)},yC=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e};function iL(s){var t=s.activeStartDate,e=s.hover,n=s.showNeighboringDecade,r=s.value,l=s.valueType,u=yC(s,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),c=PO(t),f=c+(n?11:9);return P.jsx(bb,{className:"react-calendar__decade-view__years",dateTransform:Qh,dateType:"year",end:f,hover:e,renderTile:function(p){var g=p.date,y=yC(p,["date"]);return P.jsx(nL,zA({},u,y,{activeStartDate:t,currentDecade:c,date:g}),g.getTime())},start:c,value:r,valueType:l})}var IA=function(){return IA=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},IA.apply(this,arguments)};function sL(s){function t(){return P.jsx(iL,IA({},s))}return P.jsx("div",{className:"react-calendar__decade-view",children:t()})}var jA=function(){return jA=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},jA.apply(this,arguments)},aL=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e},bC=function(s,t,e){if(e||arguments.length===2)for(var n=0,r=t.length,l;n<r;n++)(l||!(n in t))&&(l||(l=Array.prototype.slice.call(t,0,n)),l[n]=t[n]);return s.concat(l||Array.prototype.slice.call(t))},rL="react-calendar__year-view__months__month";function lL(s){var t=s.classes,e=t===void 0?[]:t,n=s.formatMonth,r=n===void 0?kO:n,l=s.formatMonthYear,u=l===void 0?nD:l,c=aL(s,["classes","formatMonth","formatMonthYear"]),f=c.date,p=c.locale;return P.jsx(vb,jA({},c,{classes:bC(bC([],e,!0),[rL],!1),formatAbbr:u,maxDateTransform:pg,minDateTransform:Ou,view:"year",children:r(p,f)}))}var FA=function(){return FA=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},FA.apply(this,arguments)},vC=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e};function oL(s){var t=s.activeStartDate,e=s.hover,n=s.value,r=s.valueType,l=vC(s,["activeStartDate","hover","value","valueType"]),u=0,c=11,f=Le(t);return P.jsx(bb,{className:"react-calendar__year-view__months",dateTransform:function(p){var g=new Date;return g.setFullYear(f,p,1),Ou(g)},dateType:"month",end:c,hover:e,renderTile:function(p){var g=p.date,y=vC(p,["date"]);return P.jsx(lL,FA({},l,y,{activeStartDate:t,date:g}),g.getTime())},start:u,value:n,valueType:r})}var BA=function(){return BA=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},BA.apply(this,arguments)};function uL(s){function t(){return P.jsx(oL,BA({},s))}return P.jsx("div",{className:"react-calendar__year-view",children:t()})}var HA=function(){return HA=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},HA.apply(this,arguments)},cL=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e},eA="react-calendar__month-view__days__day";function hL(s){var t=s.calendarType,e=s.classes,n=e===void 0?[]:e,r=s.currentMonthIndex,l=s.formatDay,u=l===void 0?TO:l,c=s.formatLongDate,f=c===void 0?DO:c,p=cL(s,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),g=p.date,y=p.locale,b=[];return n&&b.push.apply(b,n),b.push(eA),lD(g,t)&&b.push("".concat(eA,"--weekend")),g.getMonth()!==r&&b.push("".concat(eA,"--neighboringMonth")),P.jsx(vb,HA({},p,{classes:b,formatAbbr:f,maxDateTransform:_w,minDateTransform:gg,view:"month",children:u(y,g)}))}var UA=function(){return UA=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},UA.apply(this,arguments)},AC=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e};function dL(s){var t=s.activeStartDate,e=s.calendarType,n=s.hover,r=s.showFixedNumberOfWeeks,l=s.showNeighboringMonth,u=s.value,c=s.valueType,f=AC(s,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),p=Le(t),g=$l(t),y=r||l,b=Pf(t,e),A=y?0:b,w=(y?-b:0)+1,S=function(){if(r)return w+6*7-1;var k=eD(t);if(l){var C=new Date;C.setFullYear(p,g,k),C.setHours(0,0,0,0);var N=7-Pf(C,e)-1;return k+N}return k}();return P.jsx(bb,{className:"react-calendar__month-view__days",count:7,dateTransform:function(k){var C=new Date;return C.setFullYear(p,g,k),gg(C)},dateType:"day",hover:n,end:S,renderTile:function(k){var C=k.date,N=AC(k,["date"]);return P.jsx(hL,UA({},f,N,{activeStartDate:t,calendarType:e,currentMonthIndex:g,date:C}),C.getTime())},offset:A,start:w,value:u,valueType:c})}var uD="react-calendar__month-view__weekdays",nA="".concat(uD,"__weekday");function fL(s){for(var t=s.calendarType,e=s.formatShortWeekday,n=e===void 0?RO:e,r=s.formatWeekday,l=r===void 0?MO:r,u=s.locale,c=s.onMouseLeave,f=new Date,p=Ou(f),g=Le(p),y=$l(p),b=[],A=1;A<=7;A+=1){var w=new Date(g,y,A-Pf(p,t)),S=l(u,w);b.push(P.jsx("div",{className:fb(nA,VO(w)&&"".concat(nA,"--current"),lD(w,t)&&"".concat(nA,"--weekend")),children:P.jsx("abbr",{"aria-label":S,title:S,children:n(u,w).replace(".","")})},A))}return P.jsx(Tw,{className:uD,count:7,onFocus:c,onMouseOver:c,children:b})}var Oy=function(){return Oy=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},Oy.apply(this,arguments)},SC=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e},wC="react-calendar__tile";function pL(s){var t=s.onClickWeekNumber,e=s.weekNumber,n=P.jsx("span",{children:e});if(t){var r=s.date,l=s.onClickWeekNumber,u=s.weekNumber,c=SC(s,["date","onClickWeekNumber","weekNumber"]);return P.jsx("button",Oy({},c,{className:wC,onClick:function(f){return l(u,r,f)},type:"button",children:n}))}else{s.date,s.onClickWeekNumber,s.weekNumber;var c=SC(s,["date","onClickWeekNumber","weekNumber"]);return P.jsx("div",Oy({},c,{className:wC,children:n}))}}function gL(s){var t=s.activeStartDate,e=s.calendarType,n=s.onClickWeekNumber,r=s.onMouseLeave,l=s.showFixedNumberOfWeeks,u=function(){if(l)return 6;var p=eD(t),g=Pf(t,e),y=p-(7-g);return 1+Math.ceil(y/7)}(),c=function(){for(var p=Le(t),g=$l(t),y=pb(t),b=[],A=0;A<u;A+=1)b.push(MA(new Date(p,g,y+A*7),e));return b}(),f=c.map(function(p){return zO(p,e)});return P.jsx(Tw,{className:"react-calendar__month-view__weekNumbers",count:u,direction:"column",onFocus:r,onMouseOver:r,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:f.map(function(p,g){var y=c[g];if(!y)throw new Error("date is not defined");return P.jsx(pL,{date:y,onClickWeekNumber:n,weekNumber:p},p)})})}var GA=function(){return GA=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},GA.apply(this,arguments)},mL=function(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(e[n[r]]=s[n[r]]);return e};function yL(s){if(s)for(var t=0,e=Object.entries(yO);t<e.length;t++){var n=e[t],r=n[0],l=n[1];if(l.includes(s))return r}return zn.ISO_8601}function bL(s){var t=s.activeStartDate,e=s.locale,n=s.onMouseLeave,r=s.showFixedNumberOfWeeks,l=s.calendarType,u=l===void 0?yL(e):l,c=s.formatShortWeekday,f=s.formatWeekday,p=s.onClickWeekNumber,g=s.showWeekNumbers,y=mL(s,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function b(){return P.jsx(fL,{calendarType:u,formatShortWeekday:c,formatWeekday:f,locale:e,onMouseLeave:n})}function A(){return g?P.jsx(gL,{activeStartDate:t,calendarType:u,onClickWeekNumber:p,onMouseLeave:n,showFixedNumberOfWeeks:r}):null}function w(){return P.jsx(dL,GA({calendarType:u},y))}var S="react-calendar__month-view";return P.jsx("div",{className:fb(S,g?"".concat(S,"--weekNumbers"):""),children:P.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[A(),P.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[b(),w()]})]})})}var Oc=function(){return Oc=Object.assign||function(s){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},Oc.apply(this,arguments)},Bm="react-calendar",Jm=["century","decade","year","month"],vL=["decade","year","month","day"],Dw=new Date;Dw.setFullYear(1,0,1);Dw.setHours(0,0,0,0);var AL=new Date(864e13);function df(s){return s instanceof Date?s:new Date(s)}function cD(s,t){return Jm.slice(Jm.indexOf(s),Jm.indexOf(t)+1)}function SL(s,t,e){var n=cD(t,e);return n.indexOf(s)!==-1}function kw(s,t,e){return s&&SL(s,t,e)?s:e}function hD(s){var t=Jm.indexOf(s);return vL[t]}function wL(s,t){var e=Array.isArray(s)?s[t]:s;if(!e)return null;var n=df(e);if(Number.isNaN(n.getTime()))throw new Error("Invalid date: ".concat(s));return n}function dD(s,t){var e=s.value,n=s.minDate,r=s.maxDate,l=s.maxDetail,u=wL(e,t);if(!u)return null;var c=hD(l),f=function(){switch(t){case 0:return Tu(c,u);case 1:return sD(c,u);default:throw new Error("Invalid index value: ".concat(t))}}();return XO(f,n,r)}var Rw=function(s){return dD(s,0)},fD=function(s){return dD(s,1)},xL=function(s){return[Rw,fD].map(function(t){return t(s)})};function pD(s){var t=s.maxDate,e=s.maxDetail,n=s.minDate,r=s.minDetail,l=s.value,u=s.view,c=kw(u,r,e),f=Rw({value:l,minDate:n,maxDate:t,maxDetail:e})||new Date;return Tu(c,f)}function EL(s){var t=s.activeStartDate,e=s.defaultActiveStartDate,n=s.defaultValue,r=s.defaultView,l=s.maxDate,u=s.maxDetail,c=s.minDate,f=s.minDetail,p=s.value,g=s.view,y=kw(g,f,u),b=t||e;return b?Tu(y,b):pD({maxDate:l,maxDetail:u,minDate:c,minDetail:f,value:p||n,view:g||r})}function iA(s){return s&&(!Array.isArray(s)||s.length===1)}function Hm(s,t){return s instanceof Date&&t instanceof Date&&s.getTime()===t.getTime()}var _L=et.forwardRef(function(t,e){var n=t.activeStartDate,r=t.allowPartialRange,l=t.calendarType,u=t.className,c=t.defaultActiveStartDate,f=t.defaultValue,p=t.defaultView,g=t.formatDay,y=t.formatLongDate,b=t.formatMonth,A=t.formatMonthYear,w=t.formatShortWeekday,S=t.formatWeekday,k=t.formatYear,C=t.goToRangeStartOnSelect,N=C===void 0?!0:C,O=t.inputRef,I=t.locale,z=t.maxDate,L=z===void 0?AL:z,B=t.maxDetail,W=B===void 0?"month":B,Q=t.minDate,st=Q===void 0?Dw:Q,X=t.minDetail,Z=X===void 0?"century":X,ct=t.navigationAriaLabel,J=t.navigationAriaLive,ht=t.navigationLabel,F=t.next2AriaLabel,q=t.next2Label,yt=t.nextAriaLabel,xt=t.nextLabel,_=t.onActiveStartDateChange,K=t.onChange,ot=t.onClickDay,R=t.onClickDecade,at=t.onClickMonth,ft=t.onClickWeekNumber,it=t.onClickYear,ut=t.onDrillDown,mt=t.onDrillUp,Tt=t.onViewChange,Bt=t.prev2AriaLabel,fe=t.prev2Label,pe=t.prevAriaLabel,Zt=t.prevLabel,Vt=t.returnValue,Fn=Vt===void 0?"start":Vt,je=t.selectRange,Fe=t.showDoubleView,Ve=t.showFixedNumberOfWeeks,xs=t.showNavigation,_a=xs===void 0?!0:xs,ci=t.showNeighboringCentury,kr=t.showNeighboringDecade,Ca=t.showNeighboringMonth,td=Ca===void 0?!0:Ca,ed=t.showWeekNumbers,tt=t.tileClassName,dt=t.tileContent,Dt=t.tileDisabled,kt=t.value,ie=t.view,Bn=et.useState(c),Es=Bn[0],rn=Bn[1],Ti=et.useState(null),Qn=Ti[0],qe=Ti[1],Zn=et.useState(Array.isArray(f)?f.map(function(It){return It!==null?df(It):null}):f!=null?df(f):null),Jn=Zn[0],_g=Zn[1],nd=et.useState(p),id=nd[0],Rr=nd[1],Hn=n||Es||EL({activeStartDate:n,defaultActiveStartDate:c,defaultValue:f,defaultView:p,maxDate:L,maxDetail:W,minDate:st,minDetail:Z,value:kt,view:ie}),_n=function(){var It=function(){return je&&iA(Jn)?Jn:kt!==void 0?kt:Jn}();return It?Array.isArray(It)?It.map(function(ue){return ue!==null?df(ue):null}):It!==null?df(It):null:null}(),Ql=hD(W),we=kw(ie||id,Z,W),hi=cD(Z,W),Cg=je?Qn:null,sd=hi.indexOf(we)<hi.length-1,_s=hi.indexOf(we)>0,ln=et.useCallback(function(It){var ue=function(){switch(Fn){case"start":return Rw;case"end":return fD;case"range":return xL;default:throw new Error("Invalid returnValue.")}}();return ue({maxDate:L,maxDetail:W,minDate:st,value:It})},[L,W,st,Fn]),gn=et.useCallback(function(It,ue){rn(It);var qt={action:ue,activeStartDate:It,value:_n,view:we};_&&!Hm(Hn,It)&&_(qt)},[Hn,_,_n,we]),Cs=et.useCallback(function(It,ue){var qt=function(){switch(we){case"century":return R;case"decade":return it;case"year":return at;case"month":return ot;default:throw new Error("Invalid view: ".concat(we,"."))}}();qt&&qt(It,ue)},[ot,R,at,it,we]),Zl=et.useCallback(function(It,ue){if(sd){Cs(It,ue);var qt=hi[hi.indexOf(we)+1];if(!qt)throw new Error("Attempted to drill down from the lowest view.");rn(It),Rr(qt);var di={action:"drillDown",activeStartDate:It,value:_n,view:qt};_&&!Hm(Hn,It)&&_(di),Tt&&we!==qt&&Tt(di),ut&&ut(di)}},[Hn,sd,_,Cs,ut,Tt,_n,we,hi]),ad=et.useCallback(function(){if(_s){var It=hi[hi.indexOf(we)-1];if(!It)throw new Error("Attempted to drill up from the highest view.");var ue=Tu(It,Hn);rn(ue),Rr(It);var qt={action:"drillUp",activeStartDate:ue,value:_n,view:It};_&&!Hm(Hn,ue)&&_(qt),Tt&&we!==It&&Tt(qt),mt&&mt(qt)}},[Hn,_s,_,mt,Tt,_n,we,hi]),rd=et.useCallback(function(It,ue){var qt=_n;Cs(It,ue);var di=je&&!iA(qt),fi;if(je)if(di)fi=Tu(Ql,It);else{if(!qt)throw new Error("previousValue is required");if(Array.isArray(qt))throw new Error("previousValue must not be an array");fi=UO(Ql,qt,It)}else fi=ln(It);var Ts=!je||di||N?pD({maxDate:L,maxDetail:W,minDate:st,minDetail:Z,value:fi,view:we}):null;ue.persist(),rn(Ts),_g(fi);var Or={action:"onChange",activeStartDate:Ts,value:fi,view:we};if(_&&!Hm(Hn,Ts)&&_(Or),K)if(je){var Lb=iA(fi);if(!Lb)K(fi||null,ue);else if(r){if(Array.isArray(fi))throw new Error("value must not be an array");K([fi||null,null],ue)}}else K(fi||null,ue)},[Hn,r,ln,N,L,W,st,Z,_,K,Cs,je,_n,Ql,we]);function Tg(It){qe(It)}function Ta(){qe(null)}et.useImperativeHandle(e,function(){return{activeStartDate:Hn,drillDown:Zl,drillUp:ad,onChange:rd,setActiveStartDate:gn,value:_n,view:we}},[Hn,Zl,ad,rd,gn,_n,we]);function ju(It){var ue=It?iD(we,Hn):Tu(we,Hn),qt=sd?Zl:rd,di={activeStartDate:ue,hover:Cg,locale:I,maxDate:L,minDate:st,onClick:qt,onMouseOver:je?Tg:void 0,tileClassName:tt,tileContent:dt,tileDisabled:Dt,value:_n,valueType:Ql};switch(we){case"century":return P.jsx(tL,Oc({formatYear:k,showNeighboringCentury:ci},di));case"decade":return P.jsx(sL,Oc({formatYear:k,showNeighboringDecade:kr},di));case"year":return P.jsx(uL,Oc({formatMonth:b,formatMonthYear:A},di));case"month":return P.jsx(bL,Oc({calendarType:l,formatDay:g,formatLongDate:y,formatShortWeekday:w,formatWeekday:S,onClickWeekNumber:ft,onMouseLeave:je?Ta:void 0,showFixedNumberOfWeeks:typeof Ve<"u"?Ve:Fe,showNeighboringMonth:td,showWeekNumbers:ed},di));default:throw new Error("Invalid view: ".concat(we,"."))}}function Mr(){return _a?P.jsx(qO,{activeStartDate:Hn,drillUp:ad,formatMonthYear:A,formatYear:k,locale:I,maxDate:L,minDate:st,navigationAriaLabel:ct,navigationAriaLive:J,navigationLabel:ht,next2AriaLabel:F,next2Label:q,nextAriaLabel:yt,nextLabel:xt,prev2AriaLabel:Bt,prev2Label:fe,prevAriaLabel:pe,prevLabel:Zt,setActiveStartDate:gn,showDoubleView:Fe,view:we,views:hi}):null}var Nr=Array.isArray(_n)?_n:[_n];return P.jsxs("div",{className:fb(Bm,je&&Nr.length===1&&"".concat(Bm,"--selectRange"),Fe&&"".concat(Bm,"--doubleView"),u),ref:O,children:[Mr(),P.jsxs("div",{className:"".concat(Bm,"__viewContainer"),onBlur:je?Ta:void 0,onMouseLeave:je?Ta:void 0,children:[ju(),Fe?ju(!0):null]})]})});function CL(){const[s,t]=et.useState(new Date);return P.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[P.jsx("h1",{className:"text-3xl font-bold text-center mt-6",children:"📆 日历"}),P.jsx("div",{className:"bg-white rounded-xl shadow p-6",children:P.jsx(_L,{onChange:t,value:s})})]})}function TL({filePath:s}){const t=Ea(),[e,n]=et.useState(!1),[r]=et.useState([]),l=()=>{t&&(t.postMessage({command:"runCodeRecognition",filePath:s}),n(!0))};return P.jsxs("div",{className:"bg-white shadow p-4 rounded-xl",children:[P.jsx("h2",{className:"text-xl font-semibold mb-4",children:"🧠 代码识别"}),P.jsx("button",{className:"bg-indigo-500 text-white px-4 py-2 rounded-lg hover:bg-indigo-600",onClick:l,children:"🚀 运行代码识别"}),e&&P.jsx("div",{className:"mt-4",children:r.length?r.map((u,c)=>{let f="";try{const p=JSON.parse(u.content);f=Array.isArray(p)?p.join(`
`):u.content}catch{f=u.content}return P.jsxs("div",{className:"bg-gray-100 rounded p-4 mb-2",children:[P.jsx("p",{className:"font-bold mb-2",children:u.path}),P.jsx("pre",{className:"overflow-auto max-h-64 whitespace-pre-wrap",children:P.jsx("code",{children:f})})]},c)}):"正在运行代码识别..."})]})}function DL(s,t){const e={};return(s[s.length-1]===""?[...s,""]:s).join((e.padRight?" ":"")+","+(e.padLeft===!1?"":" ")).trim()}const kL=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,RL=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ML={};function xC(s,t){return(ML.jsx?RL:kL).test(s)}const NL=/[ \t\n\f\r]/g;function OL(s){return typeof s=="object"?s.type==="text"?EC(s.value):!1:EC(s)}function EC(s){return s.replace(NL,"")===""}class mg{constructor(t,e,n){this.normal=e,this.property=t,n&&(this.space=n)}}mg.prototype.normal={};mg.prototype.property={};mg.prototype.space=void 0;function gD(s,t){const e={},n={};for(const r of s)Object.assign(e,r.property),Object.assign(n,r.normal);return new mg(e,n,t)}function VA(s){return s.toLowerCase()}class Ci{constructor(t,e){this.attribute=e,this.property=t}}Ci.prototype.attribute="";Ci.prototype.booleanish=!1;Ci.prototype.boolean=!1;Ci.prototype.commaOrSpaceSeparated=!1;Ci.prototype.commaSeparated=!1;Ci.prototype.defined=!1;Ci.prototype.mustUseProperty=!1;Ci.prototype.number=!1;Ci.prototype.overloadedBoolean=!1;Ci.prototype.property="";Ci.prototype.spaceSeparated=!1;Ci.prototype.space=void 0;let LL=0;const jt=Pu(),en=Pu(),mD=Pu(),pt=Pu(),Ce=Pu(),jc=Pu(),Pi=Pu();function Pu(){return 2**++LL}const qA=Object.freeze(Object.defineProperty({__proto__:null,boolean:jt,booleanish:en,commaOrSpaceSeparated:Pi,commaSeparated:jc,number:pt,overloadedBoolean:mD,spaceSeparated:Ce},Symbol.toStringTag,{value:"Module"})),sA=Object.keys(qA);class Mw extends Ci{constructor(t,e,n,r){let l=-1;if(super(t,e),_C(this,"space",r),typeof n=="number")for(;++l<sA.length;){const u=sA[l];_C(this,sA[l],(n&qA[u])===qA[u])}}}Mw.prototype.defined=!0;function _C(s,t,e){e&&(s[t]=e)}function Zh(s){const t={},e={};for(const[n,r]of Object.entries(s.properties)){const l=new Mw(n,s.transform(s.attributes||{},n),r,s.space);s.mustUseProperty&&s.mustUseProperty.includes(n)&&(l.mustUseProperty=!0),t[n]=l,e[VA(n)]=n,e[VA(l.attribute)]=n}return new mg(t,e,s.space)}const yD=Zh({properties:{ariaActiveDescendant:null,ariaAtomic:en,ariaAutoComplete:null,ariaBusy:en,ariaChecked:en,ariaColCount:pt,ariaColIndex:pt,ariaColSpan:pt,ariaControls:Ce,ariaCurrent:null,ariaDescribedBy:Ce,ariaDetails:null,ariaDisabled:en,ariaDropEffect:Ce,ariaErrorMessage:null,ariaExpanded:en,ariaFlowTo:Ce,ariaGrabbed:en,ariaHasPopup:null,ariaHidden:en,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ce,ariaLevel:pt,ariaLive:null,ariaModal:en,ariaMultiLine:en,ariaMultiSelectable:en,ariaOrientation:null,ariaOwns:Ce,ariaPlaceholder:null,ariaPosInSet:pt,ariaPressed:en,ariaReadOnly:en,ariaRelevant:null,ariaRequired:en,ariaRoleDescription:Ce,ariaRowCount:pt,ariaRowIndex:pt,ariaRowSpan:pt,ariaSelected:en,ariaSetSize:pt,ariaSort:null,ariaValueMax:pt,ariaValueMin:pt,ariaValueNow:pt,ariaValueText:null,role:null},transform(s,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function bD(s,t){return t in s?s[t]:t}function vD(s,t){return bD(s,t.toLowerCase())}const PL=Zh({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:jc,acceptCharset:Ce,accessKey:Ce,action:null,allow:null,allowFullScreen:jt,allowPaymentRequest:jt,allowUserMedia:jt,alt:null,as:null,async:jt,autoCapitalize:null,autoComplete:Ce,autoFocus:jt,autoPlay:jt,blocking:Ce,capture:null,charSet:null,checked:jt,cite:null,className:Ce,cols:pt,colSpan:null,content:null,contentEditable:en,controls:jt,controlsList:Ce,coords:pt|jc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:jt,defer:jt,dir:null,dirName:null,disabled:jt,download:mD,draggable:en,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:jt,formTarget:null,headers:Ce,height:pt,hidden:jt,high:pt,href:null,hrefLang:null,htmlFor:Ce,httpEquiv:Ce,id:null,imageSizes:null,imageSrcSet:null,inert:jt,inputMode:null,integrity:null,is:null,isMap:jt,itemId:null,itemProp:Ce,itemRef:Ce,itemScope:jt,itemType:Ce,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:jt,low:pt,manifest:null,max:null,maxLength:pt,media:null,method:null,min:null,minLength:pt,multiple:jt,muted:jt,name:null,nonce:null,noModule:jt,noValidate:jt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:jt,optimum:pt,pattern:null,ping:Ce,placeholder:null,playsInline:jt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:jt,referrerPolicy:null,rel:Ce,required:jt,reversed:jt,rows:pt,rowSpan:pt,sandbox:Ce,scope:null,scoped:jt,seamless:jt,selected:jt,shadowRootClonable:jt,shadowRootDelegatesFocus:jt,shadowRootMode:null,shape:null,size:pt,sizes:null,slot:null,span:pt,spellCheck:en,src:null,srcDoc:null,srcLang:null,srcSet:null,start:pt,step:null,style:null,tabIndex:pt,target:null,title:null,translate:null,type:null,typeMustMatch:jt,useMap:null,value:en,width:pt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ce,axis:null,background:null,bgColor:null,border:pt,borderColor:null,bottomMargin:pt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:jt,declare:jt,event:null,face:null,frame:null,frameBorder:null,hSpace:pt,leftMargin:pt,link:null,longDesc:null,lowSrc:null,marginHeight:pt,marginWidth:pt,noResize:jt,noHref:jt,noShade:jt,noWrap:jt,object:null,profile:null,prompt:null,rev:null,rightMargin:pt,rules:null,scheme:null,scrolling:en,standby:null,summary:null,text:null,topMargin:pt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:pt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:jt,disableRemotePlayback:jt,prefix:null,property:null,results:pt,security:null,unselectable:null},space:"html",transform:vD}),zL=Zh({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Pi,accentHeight:pt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:pt,amplitude:pt,arabicForm:null,ascent:pt,attributeName:null,attributeType:null,azimuth:pt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:pt,by:null,calcMode:null,capHeight:pt,className:Ce,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:pt,diffuseConstant:pt,direction:null,display:null,dur:null,divisor:pt,dominantBaseline:null,download:jt,dx:null,dy:null,edgeMode:null,editable:null,elevation:pt,enableBackground:null,end:null,event:null,exponent:pt,externalResourcesRequired:null,fill:null,fillOpacity:pt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:jc,g2:jc,glyphName:jc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:pt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:pt,horizOriginX:pt,horizOriginY:pt,id:null,ideographic:pt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:pt,k:pt,k1:pt,k2:pt,k3:pt,k4:pt,kernelMatrix:Pi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:pt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:pt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:pt,overlineThickness:pt,paintOrder:null,panose1:null,path:null,pathLength:pt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ce,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:pt,pointsAtY:pt,pointsAtZ:pt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Pi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Pi,rev:Pi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Pi,requiredFeatures:Pi,requiredFonts:Pi,requiredFormats:Pi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:pt,specularExponent:pt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:pt,strikethroughThickness:pt,string:null,stroke:null,strokeDashArray:Pi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:pt,strokeOpacity:pt,strokeWidth:null,style:null,surfaceScale:pt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Pi,tabIndex:pt,tableValues:null,target:null,targetX:pt,targetY:pt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Pi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:pt,underlineThickness:pt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:pt,values:null,vAlphabetic:pt,vMathematical:pt,vectorEffect:null,vHanging:pt,vIdeographic:pt,version:null,vertAdvY:pt,vertOriginX:pt,vertOriginY:pt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:pt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:bD}),AD=Zh({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(s,t){return"xlink:"+t.slice(5).toLowerCase()}}),SD=Zh({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:vD}),wD=Zh({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(s,t){return"xml:"+t.slice(3).toLowerCase()}}),IL={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},jL=/[A-Z]/g,CC=/-[a-z]/g,FL=/^data[-\w.:]+$/i;function BL(s,t){const e=VA(t);let n=t,r=Ci;if(e in s.normal)return s.property[s.normal[e]];if(e.length>4&&e.slice(0,4)==="data"&&FL.test(t)){if(t.charAt(4)==="-"){const l=t.slice(5).replace(CC,UL);n="data"+l.charAt(0).toUpperCase()+l.slice(1)}else{const l=t.slice(4);if(!CC.test(l)){let u=l.replace(jL,HL);u.charAt(0)!=="-"&&(u="-"+u),t="data"+u}}r=Mw}return new r(n,t)}function HL(s){return"-"+s.toLowerCase()}function UL(s){return s.charAt(1).toUpperCase()}const GL=gD([yD,PL,AD,SD,wD],"html"),Nw=gD([yD,zL,AD,SD,wD],"svg");function VL(s){return s.join(" ").trim()}var vc={},aA,TC;function qL(){if(TC)return aA;TC=1;var s=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,e=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,l=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,c=/^\s+|\s+$/g,f=`
`,p="/",g="*",y="",b="comment",A="declaration";aA=function(S,k){if(typeof S!="string")throw new TypeError("First argument must be a string");if(!S)return[];k=k||{};var C=1,N=1;function O(ct){var J=ct.match(t);J&&(C+=J.length);var ht=ct.lastIndexOf(f);N=~ht?ct.length-ht:N+ct.length}function I(){var ct={line:C,column:N};return function(J){return J.position=new z(ct),W(),J}}function z(ct){this.start=ct,this.end={line:C,column:N},this.source=k.source}z.prototype.content=S;function L(ct){var J=new Error(k.source+":"+C+":"+N+": "+ct);if(J.reason=ct,J.filename=k.source,J.line=C,J.column=N,J.source=S,!k.silent)throw J}function B(ct){var J=ct.exec(S);if(J){var ht=J[0];return O(ht),S=S.slice(ht.length),J}}function W(){B(e)}function Q(ct){var J;for(ct=ct||[];J=st();)J!==!1&&ct.push(J);return ct}function st(){var ct=I();if(!(p!=S.charAt(0)||g!=S.charAt(1))){for(var J=2;y!=S.charAt(J)&&(g!=S.charAt(J)||p!=S.charAt(J+1));)++J;if(J+=2,y===S.charAt(J-1))return L("End of comment missing");var ht=S.slice(2,J-2);return N+=2,O(ht),S=S.slice(J),N+=2,ct({type:b,comment:ht})}}function X(){var ct=I(),J=B(n);if(J){if(st(),!B(r))return L("property missing ':'");var ht=B(l),F=ct({type:A,property:w(J[0].replace(s,y)),value:ht?w(ht[0].replace(s,y)):y});return B(u),F}}function Z(){var ct=[];Q(ct);for(var J;J=X();)J!==!1&&(ct.push(J),Q(ct));return ct}return W(),Z()};function w(S){return S?S.replace(c,y):y}return aA}var DC;function YL(){if(DC)return vc;DC=1;var s=vc&&vc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vc,"__esModule",{value:!0}),vc.default=e;var t=s(qL());function e(n,r){var l=null;if(!n||typeof n!="string")return l;var u=(0,t.default)(n),c=typeof r=="function";return u.forEach(function(f){if(f.type==="declaration"){var p=f.property,g=f.value;c?r(p,g,f):g&&(l=l||{},l[p]=g)}}),l}return vc}var nf={},kC;function XL(){if(kC)return nf;kC=1,Object.defineProperty(nf,"__esModule",{value:!0}),nf.camelCase=void 0;var s=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,e=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,l=function(p){return!p||e.test(p)||s.test(p)},u=function(p,g){return g.toUpperCase()},c=function(p,g){return"".concat(g,"-")},f=function(p,g){return g===void 0&&(g={}),l(p)?p:(p=p.toLowerCase(),g.reactCompat?p=p.replace(r,c):p=p.replace(n,c),p.replace(t,u))};return nf.camelCase=f,nf}var sf,RC;function $L(){if(RC)return sf;RC=1;var s=sf&&sf.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},t=s(YL()),e=XL();function n(r,l){var u={};return!r||typeof r!="string"||(0,t.default)(r,function(c,f){c&&f&&(u[(0,e.camelCase)(c,l)]=f)}),u}return n.default=n,sf=n,sf}var WL=$L();const KL=hg(WL),xD=ED("end"),Ow=ED("start");function ED(s){return t;function t(e){const n=e&&e.position&&e.position[s]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function QL(s){const t=Ow(s),e=xD(s);if(t&&e)return{start:t,end:e}}function Nf(s){return!s||typeof s!="object"?"":"position"in s||"type"in s?MC(s.position):"start"in s||"end"in s?MC(s):"line"in s||"column"in s?YA(s):""}function YA(s){return NC(s&&s.line)+":"+NC(s&&s.column)}function MC(s){return YA(s&&s.start)+"-"+YA(s&&s.end)}function NC(s){return s&&typeof s=="number"?s:1}class Kn extends Error{constructor(t,e,n){super(),typeof e=="string"&&(n=e,e=void 0);let r="",l={},u=!1;if(e&&("line"in e&&"column"in e?l={place:e}:"start"in e&&"end"in e?l={place:e}:"type"in e?l={ancestors:[e],place:e.position}:l={...e}),typeof t=="string"?r=t:!l.cause&&t&&(u=!0,r=t.message,l.cause=t),!l.ruleId&&!l.source&&typeof n=="string"){const f=n.indexOf(":");f===-1?l.ruleId=n:(l.source=n.slice(0,f),l.ruleId=n.slice(f+1))}if(!l.place&&l.ancestors&&l.ancestors){const f=l.ancestors[l.ancestors.length-1];f&&(l.place=f.position)}const c=l.place&&"start"in l.place?l.place.start:l.place;this.ancestors=l.ancestors||void 0,this.cause=l.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=c?c.line:void 0,this.name=Nf(l.place)||"1:1",this.place=l.place||void 0,this.reason=this.message,this.ruleId=l.ruleId||void 0,this.source=l.source||void 0,this.stack=u&&l.cause&&typeof l.cause.stack=="string"?l.cause.stack:"",this.actual,this.expected,this.note,this.url}}Kn.prototype.file="";Kn.prototype.name="";Kn.prototype.reason="";Kn.prototype.message="";Kn.prototype.stack="";Kn.prototype.column=void 0;Kn.prototype.line=void 0;Kn.prototype.ancestors=void 0;Kn.prototype.cause=void 0;Kn.prototype.fatal=void 0;Kn.prototype.place=void 0;Kn.prototype.ruleId=void 0;Kn.prototype.source=void 0;const Lw={}.hasOwnProperty,ZL=new Map,JL=/[A-Z]/g,tP=new Set(["table","tbody","thead","tfoot","tr"]),eP=new Set(["td","th"]),_D="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function nP(s,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const e=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=cP(e,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=uP(e,t.jsx,t.jsxs)}const r={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:e,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Nw:GL,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},l=CD(r,s,void 0);return l&&typeof l!="string"?l:r.create(s,r.Fragment,{children:l||void 0},void 0)}function CD(s,t,e){if(t.type==="element")return iP(s,t,e);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return sP(s,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return rP(s,t,e);if(t.type==="mdxjsEsm")return aP(s,t);if(t.type==="root")return lP(s,t,e);if(t.type==="text")return oP(s,t)}function iP(s,t,e){const n=s.schema;let r=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Nw,s.schema=r),s.ancestors.push(t);const l=DD(s,t.tagName,!1),u=hP(s,t);let c=zw(s,t);return tP.has(t.tagName)&&(c=c.filter(function(f){return typeof f=="string"?!OL(f):!0})),TD(s,u,l,t),Pw(u,c),s.ancestors.pop(),s.schema=n,s.create(t,l,u,e)}function sP(s,t){if(t.data&&t.data.estree&&s.evaluater){const n=t.data.estree.body[0];return n.type,s.evaluater.evaluateExpression(n.expression)}If(s,t.position)}function aP(s,t){if(t.data&&t.data.estree&&s.evaluater)return s.evaluater.evaluateProgram(t.data.estree);If(s,t.position)}function rP(s,t,e){const n=s.schema;let r=n;t.name==="svg"&&n.space==="html"&&(r=Nw,s.schema=r),s.ancestors.push(t);const l=t.name===null?s.Fragment:DD(s,t.name,!0),u=dP(s,t),c=zw(s,t);return TD(s,u,l,t),Pw(u,c),s.ancestors.pop(),s.schema=n,s.create(t,l,u,e)}function lP(s,t,e){const n={};return Pw(n,zw(s,t)),s.create(t,s.Fragment,n,e)}function oP(s,t){return t.value}function TD(s,t,e,n){typeof e!="string"&&e!==s.Fragment&&s.passNode&&(t.node=n)}function Pw(s,t){if(t.length>0){const e=t.length>1?t:t[0];e&&(s.children=e)}}function uP(s,t,e){return n;function n(r,l,u,c){const p=Array.isArray(u.children)?e:t;return c?p(l,u,c):p(l,u)}}function cP(s,t){return e;function e(n,r,l,u){const c=Array.isArray(l.children),f=Ow(n);return t(r,l,u,c,{columnNumber:f?f.column-1:void 0,fileName:s,lineNumber:f?f.line:void 0},void 0)}}function hP(s,t){const e={};let n,r;for(r in t.properties)if(r!=="children"&&Lw.call(t.properties,r)){const l=fP(s,r,t.properties[r]);if(l){const[u,c]=l;s.tableCellAlignToStyle&&u==="align"&&typeof c=="string"&&eP.has(t.tagName)?n=c:e[u]=c}}if(n){const l=e.style||(e.style={});l[s.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return e}function dP(s,t){const e={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&s.evaluater){const l=n.data.estree.body[0];l.type;const u=l.expression;u.type;const c=u.properties[0];c.type,Object.assign(e,s.evaluater.evaluateExpression(c.argument))}else If(s,t.position);else{const r=n.name;let l;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&s.evaluater){const c=n.value.data.estree.body[0];c.type,l=s.evaluater.evaluateExpression(c.expression)}else If(s,t.position);else l=n.value===null?!0:n.value;e[r]=l}return e}function zw(s,t){const e=[];let n=-1;const r=s.passKeys?new Map:ZL;for(;++n<t.children.length;){const l=t.children[n];let u;if(s.passKeys){const f=l.type==="element"?l.tagName:l.type==="mdxJsxFlowElement"||l.type==="mdxJsxTextElement"?l.name:void 0;if(f){const p=r.get(f)||0;u=f+"-"+p,r.set(f,p+1)}}const c=CD(s,l,u);c!==void 0&&e.push(c)}return e}function fP(s,t,e){const n=BL(s.schema,t);if(!(e==null||typeof e=="number"&&Number.isNaN(e))){if(Array.isArray(e)&&(e=n.commaSeparated?DL(e):VL(e)),n.property==="style"){let r=typeof e=="object"?e:pP(s,String(e));return s.stylePropertyNameCase==="css"&&(r=gP(r)),["style",r]}return[s.elementAttributeNameCase==="react"&&n.space?IL[n.property]||n.property:n.attribute,e]}}function pP(s,t){try{return KL(t,{reactCompat:!0})}catch(e){if(s.ignoreInvalidStyle)return{};const n=e,r=new Kn("Cannot parse `style` attribute",{ancestors:s.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=s.filePath||void 0,r.url=_D+"#cannot-parse-style-attribute",r}}function DD(s,t,e){let n;if(!e)n={type:"Literal",value:t};else if(t.includes(".")){const r=t.split(".");let l=-1,u;for(;++l<r.length;){const c=xC(r[l])?{type:"Identifier",name:r[l]}:{type:"Literal",value:r[l]};u=u?{type:"MemberExpression",object:u,property:c,computed:!!(l&&c.type==="Literal"),optional:!1}:c}n=u}else n=xC(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const r=n.value;return Lw.call(s.components,r)?s.components[r]:r}if(s.evaluater)return s.evaluater.evaluateExpression(n);If(s)}function If(s,t){const e=new Kn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:s.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw e.file=s.filePath||void 0,e.url=_D+"#cannot-handle-mdx-estrees-without-createevaluater",e}function gP(s){const t={};let e;for(e in s)Lw.call(s,e)&&(t[mP(e)]=s[e]);return t}function mP(s){let t=s.replace(JL,yP);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function yP(s){return"-"+s.toLowerCase()}const rA={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},bP={};function vP(s,t){const e=bP,n=typeof e.includeImageAlt=="boolean"?e.includeImageAlt:!0,r=typeof e.includeHtml=="boolean"?e.includeHtml:!0;return kD(s,n,r)}function kD(s,t,e){if(AP(s)){if("value"in s)return s.type==="html"&&!e?"":s.value;if(t&&"alt"in s&&s.alt)return s.alt;if("children"in s)return OC(s.children,t,e)}return Array.isArray(s)?OC(s,t,e):""}function OC(s,t,e){const n=[];let r=-1;for(;++r<s.length;)n[r]=kD(s[r],t,e);return n.join("")}function AP(s){return!!(s&&typeof s=="object")}const LC=document.createElement("i");function Iw(s){const t="&"+s+";";LC.innerHTML=t;const e=LC.textContent;return e.charCodeAt(e.length-1)===59&&s!=="semi"||e===t?!1:e}function wa(s,t,e,n){const r=s.length;let l=0,u;if(t<0?t=-t>r?0:r+t:t=t>r?r:t,e=e>0?e:0,n.length<1e4)u=Array.from(n),u.unshift(t,e),s.splice(...u);else for(e&&s.splice(t,e);l<n.length;)u=n.slice(l,l+1e4),u.unshift(t,0),s.splice(...u),l+=1e4,t+=1e4}function As(s,t){return s.length>0?(wa(s,s.length,0,t),s):t}const PC={}.hasOwnProperty;function SP(s){const t={};let e=-1;for(;++e<s.length;)wP(t,s[e]);return t}function wP(s,t){let e;for(e in t){const r=(PC.call(s,e)?s[e]:void 0)||(s[e]={}),l=t[e];let u;if(l)for(u in l){PC.call(r,u)||(r[u]=[]);const c=l[u];xP(r[u],Array.isArray(c)?c:c?[c]:[])}}}function xP(s,t){let e=-1;const n=[];for(;++e<t.length;)(t[e].add==="after"?s:n).push(t[e]);wa(s,0,0,n)}function RD(s,t){const e=Number.parseInt(s,t);return e<9||e===11||e>13&&e<32||e>126&&e<160||e>55295&&e<57344||e>64975&&e<65008||(e&65535)===65535||(e&65535)===65534||e>1114111?"�":String.fromCodePoint(e)}function Fc(s){return s.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Aa=Kl(/[A-Za-z]/),ts=Kl(/[\dA-Za-z]/),EP=Kl(/[#-'*+\--9=?A-Z^-~]/);function XA(s){return s!==null&&(s<32||s===127)}const $A=Kl(/\d/),_P=Kl(/[\dA-Fa-f]/),CP=Kl(/[!-/:-@[-`{-~]/);function Lt(s){return s!==null&&s<-2}function _i(s){return s!==null&&(s<0||s===32)}function le(s){return s===-2||s===-1||s===32}const TP=Kl(new RegExp("\\p{P}|\\p{S}","u")),DP=Kl(/\s/);function Kl(s){return t;function t(e){return e!==null&&e>-1&&s.test(String.fromCharCode(e))}}function Jh(s){const t=[];let e=-1,n=0,r=0;for(;++e<s.length;){const l=s.charCodeAt(e);let u="";if(l===37&&ts(s.charCodeAt(e+1))&&ts(s.charCodeAt(e+2)))r=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(u=String.fromCharCode(l));else if(l>55295&&l<57344){const c=s.charCodeAt(e+1);l<56320&&c>56319&&c<57344?(u=String.fromCharCode(l,c),r=1):u="�"}else u=String.fromCharCode(l);u&&(t.push(s.slice(n,e),encodeURIComponent(u)),n=e+r+1,u=""),r&&(e+=r,r=0)}return t.join("")+s.slice(n)}function Te(s,t,e,n){const r=n?n-1:Number.POSITIVE_INFINITY;let l=0;return u;function u(f){return le(f)?(s.enter(e),c(f)):t(f)}function c(f){return le(f)&&l++<r?(s.consume(f),c):(s.exit(e),t(f))}}const kP={tokenize:RP};function RP(s){const t=s.attempt(this.parser.constructs.contentInitial,n,r);let e;return t;function n(c){if(c===null){s.consume(c);return}return s.enter("lineEnding"),s.consume(c),s.exit("lineEnding"),Te(s,t,"linePrefix")}function r(c){return s.enter("paragraph"),l(c)}function l(c){const f=s.enter("chunkText",{contentType:"text",previous:e});return e&&(e.next=f),e=f,u(c)}function u(c){if(c===null){s.exit("chunkText"),s.exit("paragraph"),s.consume(c);return}return Lt(c)?(s.consume(c),s.exit("chunkText"),l):(s.consume(c),u)}}const MP={tokenize:NP},zC={tokenize:OP};function NP(s){const t=this,e=[];let n=0,r,l,u;return c;function c(O){if(n<e.length){const I=e[n];return t.containerState=I[1],s.attempt(I[0].continuation,f,p)(O)}return p(O)}function f(O){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&N();const I=t.events.length;let z=I,L;for(;z--;)if(t.events[z][0]==="exit"&&t.events[z][1].type==="chunkFlow"){L=t.events[z][1].end;break}C(n);let B=I;for(;B<t.events.length;)t.events[B][1].end={...L},B++;return wa(t.events,z+1,0,t.events.slice(I)),t.events.length=B,p(O)}return c(O)}function p(O){if(n===e.length){if(!r)return b(O);if(r.currentConstruct&&r.currentConstruct.concrete)return w(O);t.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},s.check(zC,g,y)(O)}function g(O){return r&&N(),C(n),b(O)}function y(O){return t.parser.lazy[t.now().line]=n!==e.length,u=t.now().offset,w(O)}function b(O){return t.containerState={},s.attempt(zC,A,w)(O)}function A(O){return n++,e.push([t.currentConstruct,t.containerState]),b(O)}function w(O){if(O===null){r&&N(),C(0),s.consume(O);return}return r=r||t.parser.flow(t.now()),s.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:l}),S(O)}function S(O){if(O===null){k(s.exit("chunkFlow"),!0),C(0),s.consume(O);return}return Lt(O)?(s.consume(O),k(s.exit("chunkFlow")),n=0,t.interrupt=void 0,c):(s.consume(O),S)}function k(O,I){const z=t.sliceStream(O);if(I&&z.push(null),O.previous=l,l&&(l.next=O),l=O,r.defineSkip(O.start),r.write(z),t.parser.lazy[O.start.line]){let L=r.events.length;for(;L--;)if(r.events[L][1].start.offset<u&&(!r.events[L][1].end||r.events[L][1].end.offset>u))return;const B=t.events.length;let W=B,Q,st;for(;W--;)if(t.events[W][0]==="exit"&&t.events[W][1].type==="chunkFlow"){if(Q){st=t.events[W][1].end;break}Q=!0}for(C(n),L=B;L<t.events.length;)t.events[L][1].end={...st},L++;wa(t.events,W+1,0,t.events.slice(B)),t.events.length=L}}function C(O){let I=e.length;for(;I-- >O;){const z=e[I];t.containerState=z[1],z[0].exit.call(t,s)}e.length=O}function N(){r.write([null]),l=void 0,r=void 0,t.containerState._closeFlow=void 0}}function OP(s,t,e){return Te(s,s.attempt(this.parser.constructs.document,t,e),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function IC(s){if(s===null||_i(s)||DP(s))return 1;if(TP(s))return 2}function jw(s,t,e){const n=[];let r=-1;for(;++r<s.length;){const l=s[r].resolveAll;l&&!n.includes(l)&&(t=l(t,e),n.push(l))}return t}const WA={name:"attention",resolveAll:LP,tokenize:PP};function LP(s,t){let e=-1,n,r,l,u,c,f,p,g;for(;++e<s.length;)if(s[e][0]==="enter"&&s[e][1].type==="attentionSequence"&&s[e][1]._close){for(n=e;n--;)if(s[n][0]==="exit"&&s[n][1].type==="attentionSequence"&&s[n][1]._open&&t.sliceSerialize(s[n][1]).charCodeAt(0)===t.sliceSerialize(s[e][1]).charCodeAt(0)){if((s[n][1]._close||s[e][1]._open)&&(s[e][1].end.offset-s[e][1].start.offset)%3&&!((s[n][1].end.offset-s[n][1].start.offset+s[e][1].end.offset-s[e][1].start.offset)%3))continue;f=s[n][1].end.offset-s[n][1].start.offset>1&&s[e][1].end.offset-s[e][1].start.offset>1?2:1;const y={...s[n][1].end},b={...s[e][1].start};jC(y,-f),jC(b,f),u={type:f>1?"strongSequence":"emphasisSequence",start:y,end:{...s[n][1].end}},c={type:f>1?"strongSequence":"emphasisSequence",start:{...s[e][1].start},end:b},l={type:f>1?"strongText":"emphasisText",start:{...s[n][1].end},end:{...s[e][1].start}},r={type:f>1?"strong":"emphasis",start:{...u.start},end:{...c.end}},s[n][1].end={...u.start},s[e][1].start={...c.end},p=[],s[n][1].end.offset-s[n][1].start.offset&&(p=As(p,[["enter",s[n][1],t],["exit",s[n][1],t]])),p=As(p,[["enter",r,t],["enter",u,t],["exit",u,t],["enter",l,t]]),p=As(p,jw(t.parser.constructs.insideSpan.null,s.slice(n+1,e),t)),p=As(p,[["exit",l,t],["enter",c,t],["exit",c,t],["exit",r,t]]),s[e][1].end.offset-s[e][1].start.offset?(g=2,p=As(p,[["enter",s[e][1],t],["exit",s[e][1],t]])):g=0,wa(s,n-1,e-n+3,p),e=n+p.length-g-2;break}}for(e=-1;++e<s.length;)s[e][1].type==="attentionSequence"&&(s[e][1].type="data");return s}function PP(s,t){const e=this.parser.constructs.attentionMarkers.null,n=this.previous,r=IC(n);let l;return u;function u(f){return l=f,s.enter("attentionSequence"),c(f)}function c(f){if(f===l)return s.consume(f),c;const p=s.exit("attentionSequence"),g=IC(f),y=!g||g===2&&r||e.includes(f),b=!r||r===2&&g||e.includes(n);return p._open=!!(l===42?y:y&&(r||!b)),p._close=!!(l===42?b:b&&(g||!y)),t(f)}}function jC(s,t){s.column+=t,s.offset+=t,s._bufferIndex+=t}const zP={name:"autolink",tokenize:IP};function IP(s,t,e){let n=0;return r;function r(A){return s.enter("autolink"),s.enter("autolinkMarker"),s.consume(A),s.exit("autolinkMarker"),s.enter("autolinkProtocol"),l}function l(A){return Aa(A)?(s.consume(A),u):A===64?e(A):p(A)}function u(A){return A===43||A===45||A===46||ts(A)?(n=1,c(A)):p(A)}function c(A){return A===58?(s.consume(A),n=0,f):(A===43||A===45||A===46||ts(A))&&n++<32?(s.consume(A),c):(n=0,p(A))}function f(A){return A===62?(s.exit("autolinkProtocol"),s.enter("autolinkMarker"),s.consume(A),s.exit("autolinkMarker"),s.exit("autolink"),t):A===null||A===32||A===60||XA(A)?e(A):(s.consume(A),f)}function p(A){return A===64?(s.consume(A),g):EP(A)?(s.consume(A),p):e(A)}function g(A){return ts(A)?y(A):e(A)}function y(A){return A===46?(s.consume(A),n=0,g):A===62?(s.exit("autolinkProtocol").type="autolinkEmail",s.enter("autolinkMarker"),s.consume(A),s.exit("autolinkMarker"),s.exit("autolink"),t):b(A)}function b(A){if((A===45||ts(A))&&n++<63){const w=A===45?b:y;return s.consume(A),w}return e(A)}}const Ab={partial:!0,tokenize:jP};function jP(s,t,e){return n;function n(l){return le(l)?Te(s,r,"linePrefix")(l):r(l)}function r(l){return l===null||Lt(l)?t(l):e(l)}}const MD={continuation:{tokenize:BP},exit:HP,name:"blockQuote",tokenize:FP};function FP(s,t,e){const n=this;return r;function r(u){if(u===62){const c=n.containerState;return c.open||(s.enter("blockQuote",{_container:!0}),c.open=!0),s.enter("blockQuotePrefix"),s.enter("blockQuoteMarker"),s.consume(u),s.exit("blockQuoteMarker"),l}return e(u)}function l(u){return le(u)?(s.enter("blockQuotePrefixWhitespace"),s.consume(u),s.exit("blockQuotePrefixWhitespace"),s.exit("blockQuotePrefix"),t):(s.exit("blockQuotePrefix"),t(u))}}function BP(s,t,e){const n=this;return r;function r(u){return le(u)?Te(s,l,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):l(u)}function l(u){return s.attempt(MD,t,e)(u)}}function HP(s){s.exit("blockQuote")}const ND={name:"characterEscape",tokenize:UP};function UP(s,t,e){return n;function n(l){return s.enter("characterEscape"),s.enter("escapeMarker"),s.consume(l),s.exit("escapeMarker"),r}function r(l){return CP(l)?(s.enter("characterEscapeValue"),s.consume(l),s.exit("characterEscapeValue"),s.exit("characterEscape"),t):e(l)}}const OD={name:"characterReference",tokenize:GP};function GP(s,t,e){const n=this;let r=0,l,u;return c;function c(y){return s.enter("characterReference"),s.enter("characterReferenceMarker"),s.consume(y),s.exit("characterReferenceMarker"),f}function f(y){return y===35?(s.enter("characterReferenceMarkerNumeric"),s.consume(y),s.exit("characterReferenceMarkerNumeric"),p):(s.enter("characterReferenceValue"),l=31,u=ts,g(y))}function p(y){return y===88||y===120?(s.enter("characterReferenceMarkerHexadecimal"),s.consume(y),s.exit("characterReferenceMarkerHexadecimal"),s.enter("characterReferenceValue"),l=6,u=_P,g):(s.enter("characterReferenceValue"),l=7,u=$A,g(y))}function g(y){if(y===59&&r){const b=s.exit("characterReferenceValue");return u===ts&&!Iw(n.sliceSerialize(b))?e(y):(s.enter("characterReferenceMarker"),s.consume(y),s.exit("characterReferenceMarker"),s.exit("characterReference"),t)}return u(y)&&r++<l?(s.consume(y),g):e(y)}}const FC={partial:!0,tokenize:qP},BC={concrete:!0,name:"codeFenced",tokenize:VP};function VP(s,t,e){const n=this,r={partial:!0,tokenize:z};let l=0,u=0,c;return f;function f(L){return p(L)}function p(L){const B=n.events[n.events.length-1];return l=B&&B[1].type==="linePrefix"?B[2].sliceSerialize(B[1],!0).length:0,c=L,s.enter("codeFenced"),s.enter("codeFencedFence"),s.enter("codeFencedFenceSequence"),g(L)}function g(L){return L===c?(u++,s.consume(L),g):u<3?e(L):(s.exit("codeFencedFenceSequence"),le(L)?Te(s,y,"whitespace")(L):y(L))}function y(L){return L===null||Lt(L)?(s.exit("codeFencedFence"),n.interrupt?t(L):s.check(FC,S,I)(L)):(s.enter("codeFencedFenceInfo"),s.enter("chunkString",{contentType:"string"}),b(L))}function b(L){return L===null||Lt(L)?(s.exit("chunkString"),s.exit("codeFencedFenceInfo"),y(L)):le(L)?(s.exit("chunkString"),s.exit("codeFencedFenceInfo"),Te(s,A,"whitespace")(L)):L===96&&L===c?e(L):(s.consume(L),b)}function A(L){return L===null||Lt(L)?y(L):(s.enter("codeFencedFenceMeta"),s.enter("chunkString",{contentType:"string"}),w(L))}function w(L){return L===null||Lt(L)?(s.exit("chunkString"),s.exit("codeFencedFenceMeta"),y(L)):L===96&&L===c?e(L):(s.consume(L),w)}function S(L){return s.attempt(r,I,k)(L)}function k(L){return s.enter("lineEnding"),s.consume(L),s.exit("lineEnding"),C}function C(L){return l>0&&le(L)?Te(s,N,"linePrefix",l+1)(L):N(L)}function N(L){return L===null||Lt(L)?s.check(FC,S,I)(L):(s.enter("codeFlowValue"),O(L))}function O(L){return L===null||Lt(L)?(s.exit("codeFlowValue"),N(L)):(s.consume(L),O)}function I(L){return s.exit("codeFenced"),t(L)}function z(L,B,W){let Q=0;return st;function st(ht){return L.enter("lineEnding"),L.consume(ht),L.exit("lineEnding"),X}function X(ht){return L.enter("codeFencedFence"),le(ht)?Te(L,Z,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ht):Z(ht)}function Z(ht){return ht===c?(L.enter("codeFencedFenceSequence"),ct(ht)):W(ht)}function ct(ht){return ht===c?(Q++,L.consume(ht),ct):Q>=u?(L.exit("codeFencedFenceSequence"),le(ht)?Te(L,J,"whitespace")(ht):J(ht)):W(ht)}function J(ht){return ht===null||Lt(ht)?(L.exit("codeFencedFence"),B(ht)):W(ht)}}}function qP(s,t,e){const n=this;return r;function r(u){return u===null?e(u):(s.enter("lineEnding"),s.consume(u),s.exit("lineEnding"),l)}function l(u){return n.parser.lazy[n.now().line]?e(u):t(u)}}const lA={name:"codeIndented",tokenize:XP},YP={partial:!0,tokenize:$P};function XP(s,t,e){const n=this;return r;function r(p){return s.enter("codeIndented"),Te(s,l,"linePrefix",5)(p)}function l(p){const g=n.events[n.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?u(p):e(p)}function u(p){return p===null?f(p):Lt(p)?s.attempt(YP,u,f)(p):(s.enter("codeFlowValue"),c(p))}function c(p){return p===null||Lt(p)?(s.exit("codeFlowValue"),u(p)):(s.consume(p),c)}function f(p){return s.exit("codeIndented"),t(p)}}function $P(s,t,e){const n=this;return r;function r(u){return n.parser.lazy[n.now().line]?e(u):Lt(u)?(s.enter("lineEnding"),s.consume(u),s.exit("lineEnding"),r):Te(s,l,"linePrefix",5)(u)}function l(u){const c=n.events[n.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(u):Lt(u)?r(u):e(u)}}const WP={name:"codeText",previous:QP,resolve:KP,tokenize:ZP};function KP(s){let t=s.length-4,e=3,n,r;if((s[e][1].type==="lineEnding"||s[e][1].type==="space")&&(s[t][1].type==="lineEnding"||s[t][1].type==="space")){for(n=e;++n<t;)if(s[n][1].type==="codeTextData"){s[e][1].type="codeTextPadding",s[t][1].type="codeTextPadding",e+=2,t-=2;break}}for(n=e-1,t++;++n<=t;)r===void 0?n!==t&&s[n][1].type!=="lineEnding"&&(r=n):(n===t||s[n][1].type==="lineEnding")&&(s[r][1].type="codeTextData",n!==r+2&&(s[r][1].end=s[n-1][1].end,s.splice(r+2,n-r-2),t-=n-r-2,n=r+2),r=void 0);return s}function QP(s){return s!==96||this.events[this.events.length-1][1].type==="characterEscape"}function ZP(s,t,e){let n=0,r,l;return u;function u(y){return s.enter("codeText"),s.enter("codeTextSequence"),c(y)}function c(y){return y===96?(s.consume(y),n++,c):(s.exit("codeTextSequence"),f(y))}function f(y){return y===null?e(y):y===32?(s.enter("space"),s.consume(y),s.exit("space"),f):y===96?(l=s.enter("codeTextSequence"),r=0,g(y)):Lt(y)?(s.enter("lineEnding"),s.consume(y),s.exit("lineEnding"),f):(s.enter("codeTextData"),p(y))}function p(y){return y===null||y===32||y===96||Lt(y)?(s.exit("codeTextData"),f(y)):(s.consume(y),p)}function g(y){return y===96?(s.consume(y),r++,g):r===n?(s.exit("codeTextSequence"),s.exit("codeText"),t(y)):(l.type="codeTextData",p(y))}}class JP{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,e){const n=e??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,e,n){const r=e||0;this.setCursor(Math.trunc(t));const l=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&af(this.left,n),l.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),af(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),af(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const e=this.left.splice(t,Number.POSITIVE_INFINITY);af(this.right,e.reverse())}else{const e=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);af(this.left,e.reverse())}}}function af(s,t){let e=0;if(t.length<1e4)s.push(...t);else for(;e<t.length;)s.push(...t.slice(e,e+1e4)),e+=1e4}function LD(s){const t={};let e=-1,n,r,l,u,c,f,p;const g=new JP(s);for(;++e<g.length;){for(;e in t;)e=t[e];if(n=g.get(e),e&&n[1].type==="chunkFlow"&&g.get(e-1)[1].type==="listItemPrefix"&&(f=n[1]._tokenizer.events,l=0,l<f.length&&f[l][1].type==="lineEndingBlank"&&(l+=2),l<f.length&&f[l][1].type==="content"))for(;++l<f.length&&f[l][1].type!=="content";)f[l][1].type==="chunkText"&&(f[l][1]._isInFirstContentOfListItem=!0,l++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,tz(g,e)),e=t[e],p=!0);else if(n[1]._container){for(l=e,r=void 0;l--;)if(u=g.get(l),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(r&&(g.get(r)[1].type="lineEndingBlank"),u[1].type="lineEnding",r=l);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;r&&(n[1].end={...g.get(r)[1].start},c=g.slice(r,e),c.unshift(n),g.splice(r,e-r+1,c))}}return wa(s,0,Number.POSITIVE_INFINITY,g.slice(0)),!p}function tz(s,t){const e=s.get(t)[1],n=s.get(t)[2];let r=t-1;const l=[];let u=e._tokenizer;u||(u=n.parser[e.contentType](e.start),e._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const c=u.events,f=[],p={};let g,y,b=-1,A=e,w=0,S=0;const k=[S];for(;A;){for(;s.get(++r)[1]!==A;);l.push(r),A._tokenizer||(g=n.sliceStream(A),A.next||g.push(null),y&&u.defineSkip(A.start),A._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(g),A._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),y=A,A=A.next}for(A=e;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(S=b+1,k.push(S),A._tokenizer=void 0,A.previous=void 0,A=A.next);for(u.events=[],A?(A._tokenizer=void 0,A.previous=void 0):k.pop(),b=k.length;b--;){const C=c.slice(k[b],k[b+1]),N=l.pop();f.push([N,N+C.length-1]),s.splice(N,2,C)}for(f.reverse(),b=-1;++b<f.length;)p[w+f[b][0]]=w+f[b][1],w+=f[b][1]-f[b][0]-1;return p}const ez={resolve:iz,tokenize:sz},nz={partial:!0,tokenize:az};function iz(s){return LD(s),s}function sz(s,t){let e;return n;function n(c){return s.enter("content"),e=s.enter("chunkContent",{contentType:"content"}),r(c)}function r(c){return c===null?l(c):Lt(c)?s.check(nz,u,l)(c):(s.consume(c),r)}function l(c){return s.exit("chunkContent"),s.exit("content"),t(c)}function u(c){return s.consume(c),s.exit("chunkContent"),e.next=s.enter("chunkContent",{contentType:"content",previous:e}),e=e.next,r}}function az(s,t,e){const n=this;return r;function r(u){return s.exit("chunkContent"),s.enter("lineEnding"),s.consume(u),s.exit("lineEnding"),Te(s,l,"linePrefix")}function l(u){if(u===null||Lt(u))return e(u);const c=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(u):s.interrupt(n.parser.constructs.flow,e,t)(u)}}function PD(s,t,e,n,r,l,u,c,f){const p=f||Number.POSITIVE_INFINITY;let g=0;return y;function y(C){return C===60?(s.enter(n),s.enter(r),s.enter(l),s.consume(C),s.exit(l),b):C===null||C===32||C===41||XA(C)?e(C):(s.enter(n),s.enter(u),s.enter(c),s.enter("chunkString",{contentType:"string"}),S(C))}function b(C){return C===62?(s.enter(l),s.consume(C),s.exit(l),s.exit(r),s.exit(n),t):(s.enter(c),s.enter("chunkString",{contentType:"string"}),A(C))}function A(C){return C===62?(s.exit("chunkString"),s.exit(c),b(C)):C===null||C===60||Lt(C)?e(C):(s.consume(C),C===92?w:A)}function w(C){return C===60||C===62||C===92?(s.consume(C),A):A(C)}function S(C){return!g&&(C===null||C===41||_i(C))?(s.exit("chunkString"),s.exit(c),s.exit(u),s.exit(n),t(C)):g<p&&C===40?(s.consume(C),g++,S):C===41?(s.consume(C),g--,S):C===null||C===32||C===40||XA(C)?e(C):(s.consume(C),C===92?k:S)}function k(C){return C===40||C===41||C===92?(s.consume(C),S):S(C)}}function zD(s,t,e,n,r,l){const u=this;let c=0,f;return p;function p(A){return s.enter(n),s.enter(r),s.consume(A),s.exit(r),s.enter(l),g}function g(A){return c>999||A===null||A===91||A===93&&!f||A===94&&!c&&"_hiddenFootnoteSupport"in u.parser.constructs?e(A):A===93?(s.exit(l),s.enter(r),s.consume(A),s.exit(r),s.exit(n),t):Lt(A)?(s.enter("lineEnding"),s.consume(A),s.exit("lineEnding"),g):(s.enter("chunkString",{contentType:"string"}),y(A))}function y(A){return A===null||A===91||A===93||Lt(A)||c++>999?(s.exit("chunkString"),g(A)):(s.consume(A),f||(f=!le(A)),A===92?b:y)}function b(A){return A===91||A===92||A===93?(s.consume(A),c++,y):y(A)}}function ID(s,t,e,n,r,l){let u;return c;function c(b){return b===34||b===39||b===40?(s.enter(n),s.enter(r),s.consume(b),s.exit(r),u=b===40?41:b,f):e(b)}function f(b){return b===u?(s.enter(r),s.consume(b),s.exit(r),s.exit(n),t):(s.enter(l),p(b))}function p(b){return b===u?(s.exit(l),f(u)):b===null?e(b):Lt(b)?(s.enter("lineEnding"),s.consume(b),s.exit("lineEnding"),Te(s,p,"linePrefix")):(s.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===u||b===null||Lt(b)?(s.exit("chunkString"),p(b)):(s.consume(b),b===92?y:g)}function y(b){return b===u||b===92?(s.consume(b),g):g(b)}}function Of(s,t){let e;return n;function n(r){return Lt(r)?(s.enter("lineEnding"),s.consume(r),s.exit("lineEnding"),e=!0,n):le(r)?Te(s,n,e?"linePrefix":"lineSuffix")(r):t(r)}}const rz={name:"definition",tokenize:oz},lz={partial:!0,tokenize:uz};function oz(s,t,e){const n=this;let r;return l;function l(A){return s.enter("definition"),u(A)}function u(A){return zD.call(n,s,c,e,"definitionLabel","definitionLabelMarker","definitionLabelString")(A)}function c(A){return r=Fc(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),A===58?(s.enter("definitionMarker"),s.consume(A),s.exit("definitionMarker"),f):e(A)}function f(A){return _i(A)?Of(s,p)(A):p(A)}function p(A){return PD(s,g,e,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(A)}function g(A){return s.attempt(lz,y,y)(A)}function y(A){return le(A)?Te(s,b,"whitespace")(A):b(A)}function b(A){return A===null||Lt(A)?(s.exit("definition"),n.parser.defined.push(r),t(A)):e(A)}}function uz(s,t,e){return n;function n(c){return _i(c)?Of(s,r)(c):e(c)}function r(c){return ID(s,l,e,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function l(c){return le(c)?Te(s,u,"whitespace")(c):u(c)}function u(c){return c===null||Lt(c)?t(c):e(c)}}const cz={name:"hardBreakEscape",tokenize:hz};function hz(s,t,e){return n;function n(l){return s.enter("hardBreakEscape"),s.consume(l),r}function r(l){return Lt(l)?(s.exit("hardBreakEscape"),t(l)):e(l)}}const dz={name:"headingAtx",resolve:fz,tokenize:pz};function fz(s,t){let e=s.length-2,n=3,r,l;return s[n][1].type==="whitespace"&&(n+=2),e-2>n&&s[e][1].type==="whitespace"&&(e-=2),s[e][1].type==="atxHeadingSequence"&&(n===e-1||e-4>n&&s[e-2][1].type==="whitespace")&&(e-=n+1===e?2:4),e>n&&(r={type:"atxHeadingText",start:s[n][1].start,end:s[e][1].end},l={type:"chunkText",start:s[n][1].start,end:s[e][1].end,contentType:"text"},wa(s,n,e-n+1,[["enter",r,t],["enter",l,t],["exit",l,t],["exit",r,t]])),s}function pz(s,t,e){let n=0;return r;function r(g){return s.enter("atxHeading"),l(g)}function l(g){return s.enter("atxHeadingSequence"),u(g)}function u(g){return g===35&&n++<6?(s.consume(g),u):g===null||_i(g)?(s.exit("atxHeadingSequence"),c(g)):e(g)}function c(g){return g===35?(s.enter("atxHeadingSequence"),f(g)):g===null||Lt(g)?(s.exit("atxHeading"),t(g)):le(g)?Te(s,c,"whitespace")(g):(s.enter("atxHeadingText"),p(g))}function f(g){return g===35?(s.consume(g),f):(s.exit("atxHeadingSequence"),c(g))}function p(g){return g===null||g===35||_i(g)?(s.exit("atxHeadingText"),c(g)):(s.consume(g),p)}}const gz=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],HC=["pre","script","style","textarea"],mz={concrete:!0,name:"htmlFlow",resolveTo:vz,tokenize:Az},yz={partial:!0,tokenize:wz},bz={partial:!0,tokenize:Sz};function vz(s){let t=s.length;for(;t--&&!(s[t][0]==="enter"&&s[t][1].type==="htmlFlow"););return t>1&&s[t-2][1].type==="linePrefix"&&(s[t][1].start=s[t-2][1].start,s[t+1][1].start=s[t-2][1].start,s.splice(t-2,2)),s}function Az(s,t,e){const n=this;let r,l,u,c,f;return p;function p(R){return g(R)}function g(R){return s.enter("htmlFlow"),s.enter("htmlFlowData"),s.consume(R),y}function y(R){return R===33?(s.consume(R),b):R===47?(s.consume(R),l=!0,S):R===63?(s.consume(R),r=3,n.interrupt?t:_):Aa(R)?(s.consume(R),u=String.fromCharCode(R),k):e(R)}function b(R){return R===45?(s.consume(R),r=2,A):R===91?(s.consume(R),r=5,c=0,w):Aa(R)?(s.consume(R),r=4,n.interrupt?t:_):e(R)}function A(R){return R===45?(s.consume(R),n.interrupt?t:_):e(R)}function w(R){const at="CDATA[";return R===at.charCodeAt(c++)?(s.consume(R),c===at.length?n.interrupt?t:Z:w):e(R)}function S(R){return Aa(R)?(s.consume(R),u=String.fromCharCode(R),k):e(R)}function k(R){if(R===null||R===47||R===62||_i(R)){const at=R===47,ft=u.toLowerCase();return!at&&!l&&HC.includes(ft)?(r=1,n.interrupt?t(R):Z(R)):gz.includes(u.toLowerCase())?(r=6,at?(s.consume(R),C):n.interrupt?t(R):Z(R)):(r=7,n.interrupt&&!n.parser.lazy[n.now().line]?e(R):l?N(R):O(R))}return R===45||ts(R)?(s.consume(R),u+=String.fromCharCode(R),k):e(R)}function C(R){return R===62?(s.consume(R),n.interrupt?t:Z):e(R)}function N(R){return le(R)?(s.consume(R),N):st(R)}function O(R){return R===47?(s.consume(R),st):R===58||R===95||Aa(R)?(s.consume(R),I):le(R)?(s.consume(R),O):st(R)}function I(R){return R===45||R===46||R===58||R===95||ts(R)?(s.consume(R),I):z(R)}function z(R){return R===61?(s.consume(R),L):le(R)?(s.consume(R),z):O(R)}function L(R){return R===null||R===60||R===61||R===62||R===96?e(R):R===34||R===39?(s.consume(R),f=R,B):le(R)?(s.consume(R),L):W(R)}function B(R){return R===f?(s.consume(R),f=null,Q):R===null||Lt(R)?e(R):(s.consume(R),B)}function W(R){return R===null||R===34||R===39||R===47||R===60||R===61||R===62||R===96||_i(R)?z(R):(s.consume(R),W)}function Q(R){return R===47||R===62||le(R)?O(R):e(R)}function st(R){return R===62?(s.consume(R),X):e(R)}function X(R){return R===null||Lt(R)?Z(R):le(R)?(s.consume(R),X):e(R)}function Z(R){return R===45&&r===2?(s.consume(R),F):R===60&&r===1?(s.consume(R),q):R===62&&r===4?(s.consume(R),K):R===63&&r===3?(s.consume(R),_):R===93&&r===5?(s.consume(R),xt):Lt(R)&&(r===6||r===7)?(s.exit("htmlFlowData"),s.check(yz,ot,ct)(R)):R===null||Lt(R)?(s.exit("htmlFlowData"),ct(R)):(s.consume(R),Z)}function ct(R){return s.check(bz,J,ot)(R)}function J(R){return s.enter("lineEnding"),s.consume(R),s.exit("lineEnding"),ht}function ht(R){return R===null||Lt(R)?ct(R):(s.enter("htmlFlowData"),Z(R))}function F(R){return R===45?(s.consume(R),_):Z(R)}function q(R){return R===47?(s.consume(R),u="",yt):Z(R)}function yt(R){if(R===62){const at=u.toLowerCase();return HC.includes(at)?(s.consume(R),K):Z(R)}return Aa(R)&&u.length<8?(s.consume(R),u+=String.fromCharCode(R),yt):Z(R)}function xt(R){return R===93?(s.consume(R),_):Z(R)}function _(R){return R===62?(s.consume(R),K):R===45&&r===2?(s.consume(R),_):Z(R)}function K(R){return R===null||Lt(R)?(s.exit("htmlFlowData"),ot(R)):(s.consume(R),K)}function ot(R){return s.exit("htmlFlow"),t(R)}}function Sz(s,t,e){const n=this;return r;function r(u){return Lt(u)?(s.enter("lineEnding"),s.consume(u),s.exit("lineEnding"),l):e(u)}function l(u){return n.parser.lazy[n.now().line]?e(u):t(u)}}function wz(s,t,e){return n;function n(r){return s.enter("lineEnding"),s.consume(r),s.exit("lineEnding"),s.attempt(Ab,t,e)}}const xz={name:"htmlText",tokenize:Ez};function Ez(s,t,e){const n=this;let r,l,u;return c;function c(_){return s.enter("htmlText"),s.enter("htmlTextData"),s.consume(_),f}function f(_){return _===33?(s.consume(_),p):_===47?(s.consume(_),z):_===63?(s.consume(_),O):Aa(_)?(s.consume(_),W):e(_)}function p(_){return _===45?(s.consume(_),g):_===91?(s.consume(_),l=0,w):Aa(_)?(s.consume(_),N):e(_)}function g(_){return _===45?(s.consume(_),A):e(_)}function y(_){return _===null?e(_):_===45?(s.consume(_),b):Lt(_)?(u=y,q(_)):(s.consume(_),y)}function b(_){return _===45?(s.consume(_),A):y(_)}function A(_){return _===62?F(_):_===45?b(_):y(_)}function w(_){const K="CDATA[";return _===K.charCodeAt(l++)?(s.consume(_),l===K.length?S:w):e(_)}function S(_){return _===null?e(_):_===93?(s.consume(_),k):Lt(_)?(u=S,q(_)):(s.consume(_),S)}function k(_){return _===93?(s.consume(_),C):S(_)}function C(_){return _===62?F(_):_===93?(s.consume(_),C):S(_)}function N(_){return _===null||_===62?F(_):Lt(_)?(u=N,q(_)):(s.consume(_),N)}function O(_){return _===null?e(_):_===63?(s.consume(_),I):Lt(_)?(u=O,q(_)):(s.consume(_),O)}function I(_){return _===62?F(_):O(_)}function z(_){return Aa(_)?(s.consume(_),L):e(_)}function L(_){return _===45||ts(_)?(s.consume(_),L):B(_)}function B(_){return Lt(_)?(u=B,q(_)):le(_)?(s.consume(_),B):F(_)}function W(_){return _===45||ts(_)?(s.consume(_),W):_===47||_===62||_i(_)?Q(_):e(_)}function Q(_){return _===47?(s.consume(_),F):_===58||_===95||Aa(_)?(s.consume(_),st):Lt(_)?(u=Q,q(_)):le(_)?(s.consume(_),Q):F(_)}function st(_){return _===45||_===46||_===58||_===95||ts(_)?(s.consume(_),st):X(_)}function X(_){return _===61?(s.consume(_),Z):Lt(_)?(u=X,q(_)):le(_)?(s.consume(_),X):Q(_)}function Z(_){return _===null||_===60||_===61||_===62||_===96?e(_):_===34||_===39?(s.consume(_),r=_,ct):Lt(_)?(u=Z,q(_)):le(_)?(s.consume(_),Z):(s.consume(_),J)}function ct(_){return _===r?(s.consume(_),r=void 0,ht):_===null?e(_):Lt(_)?(u=ct,q(_)):(s.consume(_),ct)}function J(_){return _===null||_===34||_===39||_===60||_===61||_===96?e(_):_===47||_===62||_i(_)?Q(_):(s.consume(_),J)}function ht(_){return _===47||_===62||_i(_)?Q(_):e(_)}function F(_){return _===62?(s.consume(_),s.exit("htmlTextData"),s.exit("htmlText"),t):e(_)}function q(_){return s.exit("htmlTextData"),s.enter("lineEnding"),s.consume(_),s.exit("lineEnding"),yt}function yt(_){return le(_)?Te(s,xt,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_):xt(_)}function xt(_){return s.enter("htmlTextData"),u(_)}}const Fw={name:"labelEnd",resolveAll:Dz,resolveTo:kz,tokenize:Rz},_z={tokenize:Mz},Cz={tokenize:Nz},Tz={tokenize:Oz};function Dz(s){let t=-1;const e=[];for(;++t<s.length;){const n=s[t][1];if(e.push(s[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const r=n.type==="labelImage"?4:2;n.type="data",t+=r}}return s.length!==e.length&&wa(s,0,s.length,e),s}function kz(s,t){let e=s.length,n=0,r,l,u,c;for(;e--;)if(r=s[e][1],l){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;s[e][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(u){if(s[e][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(l=e,r.type!=="labelLink")){n=2;break}}else r.type==="labelEnd"&&(u=e);const f={type:s[l][1].type==="labelLink"?"link":"image",start:{...s[l][1].start},end:{...s[s.length-1][1].end}},p={type:"label",start:{...s[l][1].start},end:{...s[u][1].end}},g={type:"labelText",start:{...s[l+n+2][1].end},end:{...s[u-2][1].start}};return c=[["enter",f,t],["enter",p,t]],c=As(c,s.slice(l+1,l+n+3)),c=As(c,[["enter",g,t]]),c=As(c,jw(t.parser.constructs.insideSpan.null,s.slice(l+n+4,u-3),t)),c=As(c,[["exit",g,t],s[u-2],s[u-1],["exit",p,t]]),c=As(c,s.slice(u+1)),c=As(c,[["exit",f,t]]),wa(s,l,s.length,c),s}function Rz(s,t,e){const n=this;let r=n.events.length,l,u;for(;r--;)if((n.events[r][1].type==="labelImage"||n.events[r][1].type==="labelLink")&&!n.events[r][1]._balanced){l=n.events[r][1];break}return c;function c(b){return l?l._inactive?y(b):(u=n.parser.defined.includes(Fc(n.sliceSerialize({start:l.end,end:n.now()}))),s.enter("labelEnd"),s.enter("labelMarker"),s.consume(b),s.exit("labelMarker"),s.exit("labelEnd"),f):e(b)}function f(b){return b===40?s.attempt(_z,g,u?g:y)(b):b===91?s.attempt(Cz,g,u?p:y)(b):u?g(b):y(b)}function p(b){return s.attempt(Tz,g,y)(b)}function g(b){return t(b)}function y(b){return l._balanced=!0,e(b)}}function Mz(s,t,e){return n;function n(y){return s.enter("resource"),s.enter("resourceMarker"),s.consume(y),s.exit("resourceMarker"),r}function r(y){return _i(y)?Of(s,l)(y):l(y)}function l(y){return y===41?g(y):PD(s,u,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function u(y){return _i(y)?Of(s,f)(y):g(y)}function c(y){return e(y)}function f(y){return y===34||y===39||y===40?ID(s,p,e,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):g(y)}function p(y){return _i(y)?Of(s,g)(y):g(y)}function g(y){return y===41?(s.enter("resourceMarker"),s.consume(y),s.exit("resourceMarker"),s.exit("resource"),t):e(y)}}function Nz(s,t,e){const n=this;return r;function r(c){return zD.call(n,s,l,u,"reference","referenceMarker","referenceString")(c)}function l(c){return n.parser.defined.includes(Fc(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(c):e(c)}function u(c){return e(c)}}function Oz(s,t,e){return n;function n(l){return s.enter("reference"),s.enter("referenceMarker"),s.consume(l),s.exit("referenceMarker"),r}function r(l){return l===93?(s.enter("referenceMarker"),s.consume(l),s.exit("referenceMarker"),s.exit("reference"),t):e(l)}}const Lz={name:"labelStartImage",resolveAll:Fw.resolveAll,tokenize:Pz};function Pz(s,t,e){const n=this;return r;function r(c){return s.enter("labelImage"),s.enter("labelImageMarker"),s.consume(c),s.exit("labelImageMarker"),l}function l(c){return c===91?(s.enter("labelMarker"),s.consume(c),s.exit("labelMarker"),s.exit("labelImage"),u):e(c)}function u(c){return c===94&&"_hiddenFootnoteSupport"in n.parser.constructs?e(c):t(c)}}const zz={name:"labelStartLink",resolveAll:Fw.resolveAll,tokenize:Iz};function Iz(s,t,e){const n=this;return r;function r(u){return s.enter("labelLink"),s.enter("labelMarker"),s.consume(u),s.exit("labelMarker"),s.exit("labelLink"),l}function l(u){return u===94&&"_hiddenFootnoteSupport"in n.parser.constructs?e(u):t(u)}}const oA={name:"lineEnding",tokenize:jz};function jz(s,t){return e;function e(n){return s.enter("lineEnding"),s.consume(n),s.exit("lineEnding"),Te(s,t,"linePrefix")}}const ty={name:"thematicBreak",tokenize:Fz};function Fz(s,t,e){let n=0,r;return l;function l(p){return s.enter("thematicBreak"),u(p)}function u(p){return r=p,c(p)}function c(p){return p===r?(s.enter("thematicBreakSequence"),f(p)):n>=3&&(p===null||Lt(p))?(s.exit("thematicBreak"),t(p)):e(p)}function f(p){return p===r?(s.consume(p),n++,f):(s.exit("thematicBreakSequence"),le(p)?Te(s,c,"whitespace")(p):c(p))}}const bi={continuation:{tokenize:Gz},exit:qz,name:"list",tokenize:Uz},Bz={partial:!0,tokenize:Yz},Hz={partial:!0,tokenize:Vz};function Uz(s,t,e){const n=this,r=n.events[n.events.length-1];let l=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,u=0;return c;function c(A){const w=n.containerState.type||(A===42||A===43||A===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!n.containerState.marker||A===n.containerState.marker:$A(A)){if(n.containerState.type||(n.containerState.type=w,s.enter(w,{_container:!0})),w==="listUnordered")return s.enter("listItemPrefix"),A===42||A===45?s.check(ty,e,p)(A):p(A);if(!n.interrupt||A===49)return s.enter("listItemPrefix"),s.enter("listItemValue"),f(A)}return e(A)}function f(A){return $A(A)&&++u<10?(s.consume(A),f):(!n.interrupt||u<2)&&(n.containerState.marker?A===n.containerState.marker:A===41||A===46)?(s.exit("listItemValue"),p(A)):e(A)}function p(A){return s.enter("listItemMarker"),s.consume(A),s.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||A,s.check(Ab,n.interrupt?e:g,s.attempt(Bz,b,y))}function g(A){return n.containerState.initialBlankLine=!0,l++,b(A)}function y(A){return le(A)?(s.enter("listItemPrefixWhitespace"),s.consume(A),s.exit("listItemPrefixWhitespace"),b):e(A)}function b(A){return n.containerState.size=l+n.sliceSerialize(s.exit("listItemPrefix"),!0).length,t(A)}}function Gz(s,t,e){const n=this;return n.containerState._closeFlow=void 0,s.check(Ab,r,l);function r(c){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,Te(s,t,"listItemIndent",n.containerState.size+1)(c)}function l(c){return n.containerState.furtherBlankLines||!le(c)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,u(c)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,s.attempt(Hz,t,u)(c))}function u(c){return n.containerState._closeFlow=!0,n.interrupt=void 0,Te(s,s.attempt(bi,t,e),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function Vz(s,t,e){const n=this;return Te(s,r,"listItemIndent",n.containerState.size+1);function r(l){const u=n.events[n.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===n.containerState.size?t(l):e(l)}}function qz(s){s.exit(this.containerState.type)}function Yz(s,t,e){const n=this;return Te(s,r,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(l){const u=n.events[n.events.length-1];return!le(l)&&u&&u[1].type==="listItemPrefixWhitespace"?t(l):e(l)}}const UC={name:"setextUnderline",resolveTo:Xz,tokenize:$z};function Xz(s,t){let e=s.length,n,r,l;for(;e--;)if(s[e][0]==="enter"){if(s[e][1].type==="content"){n=e;break}s[e][1].type==="paragraph"&&(r=e)}else s[e][1].type==="content"&&s.splice(e,1),!l&&s[e][1].type==="definition"&&(l=e);const u={type:"setextHeading",start:{...s[n][1].start},end:{...s[s.length-1][1].end}};return s[r][1].type="setextHeadingText",l?(s.splice(r,0,["enter",u,t]),s.splice(l+1,0,["exit",s[n][1],t]),s[n][1].end={...s[l][1].end}):s[n][1]=u,s.push(["exit",u,t]),s}function $z(s,t,e){const n=this;let r;return l;function l(p){let g=n.events.length,y;for(;g--;)if(n.events[g][1].type!=="lineEnding"&&n.events[g][1].type!=="linePrefix"&&n.events[g][1].type!=="content"){y=n.events[g][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||y)?(s.enter("setextHeadingLine"),r=p,u(p)):e(p)}function u(p){return s.enter("setextHeadingLineSequence"),c(p)}function c(p){return p===r?(s.consume(p),c):(s.exit("setextHeadingLineSequence"),le(p)?Te(s,f,"lineSuffix")(p):f(p))}function f(p){return p===null||Lt(p)?(s.exit("setextHeadingLine"),t(p)):e(p)}}const Wz={tokenize:Kz};function Kz(s){const t=this,e=s.attempt(Ab,n,s.attempt(this.parser.constructs.flowInitial,r,Te(s,s.attempt(this.parser.constructs.flow,r,s.attempt(ez,r)),"linePrefix")));return e;function n(l){if(l===null){s.consume(l);return}return s.enter("lineEndingBlank"),s.consume(l),s.exit("lineEndingBlank"),t.currentConstruct=void 0,e}function r(l){if(l===null){s.consume(l);return}return s.enter("lineEnding"),s.consume(l),s.exit("lineEnding"),t.currentConstruct=void 0,e}}const Qz={resolveAll:FD()},Zz=jD("string"),Jz=jD("text");function jD(s){return{resolveAll:FD(s==="text"?tI:void 0),tokenize:t};function t(e){const n=this,r=this.parser.constructs[s],l=e.attempt(r,u,c);return u;function u(g){return p(g)?l(g):c(g)}function c(g){if(g===null){e.consume(g);return}return e.enter("data"),e.consume(g),f}function f(g){return p(g)?(e.exit("data"),l(g)):(e.consume(g),f)}function p(g){if(g===null)return!0;const y=r[g];let b=-1;if(y)for(;++b<y.length;){const A=y[b];if(!A.previous||A.previous.call(n,n.previous))return!0}return!1}}}function FD(s){return t;function t(e,n){let r=-1,l;for(;++r<=e.length;)l===void 0?e[r]&&e[r][1].type==="data"&&(l=r,r++):(!e[r]||e[r][1].type!=="data")&&(r!==l+2&&(e[l][1].end=e[r-1][1].end,e.splice(l+2,r-l-2),r=l+2),l=void 0);return s?s(e,n):e}}function tI(s,t){let e=0;for(;++e<=s.length;)if((e===s.length||s[e][1].type==="lineEnding")&&s[e-1][1].type==="data"){const n=s[e-1][1],r=t.sliceStream(n);let l=r.length,u=-1,c=0,f;for(;l--;){const p=r[l];if(typeof p=="string"){for(u=p.length;p.charCodeAt(u-1)===32;)c++,u--;if(u)break;u=-1}else if(p===-2)f=!0,c++;else if(p!==-1){l++;break}}if(t._contentTypeTextTrailing&&e===s.length&&(c=0),c){const p={type:e===s.length||f||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:l?u:n.start._bufferIndex+u,_index:n.start._index+l,line:n.end.line,column:n.end.column-c,offset:n.end.offset-c},end:{...n.end}};n.end={...p.start},n.start.offset===n.end.offset?Object.assign(n,p):(s.splice(e,0,["enter",p,t],["exit",p,t]),e+=2)}e++}return s}const eI={42:bi,43:bi,45:bi,48:bi,49:bi,50:bi,51:bi,52:bi,53:bi,54:bi,55:bi,56:bi,57:bi,62:MD},nI={91:rz},iI={[-2]:lA,[-1]:lA,32:lA},sI={35:dz,42:ty,45:[UC,ty],60:mz,61:UC,95:ty,96:BC,126:BC},aI={38:OD,92:ND},rI={[-5]:oA,[-4]:oA,[-3]:oA,33:Lz,38:OD,42:WA,60:[zP,xz],91:zz,92:[cz,ND],93:Fw,95:WA,96:WP},lI={null:[WA,Qz]},oI={null:[42,95]},uI={null:[]},cI=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:oI,contentInitial:nI,disable:uI,document:eI,flow:sI,flowInitial:iI,insideSpan:lI,string:aI,text:rI},Symbol.toStringTag,{value:"Module"}));function hI(s,t,e){let n={_bufferIndex:-1,_index:0,line:e&&e.line||1,column:e&&e.column||1,offset:e&&e.offset||0};const r={},l=[];let u=[],c=[];const f={attempt:B(z),check:B(L),consume:N,enter:O,exit:I,interrupt:B(L,{interrupt:!0})},p={code:null,containerState:{},defineSkip:S,events:[],now:w,parser:s,previous:null,sliceSerialize:b,sliceStream:A,write:y};let g=t.tokenize.call(p,f);return t.resolveAll&&l.push(t),p;function y(X){return u=As(u,X),k(),u[u.length-1]!==null?[]:(W(t,0),p.events=jw(l,p.events,p),p.events)}function b(X,Z){return fI(A(X),Z)}function A(X){return dI(u,X)}function w(){const{_bufferIndex:X,_index:Z,line:ct,column:J,offset:ht}=n;return{_bufferIndex:X,_index:Z,line:ct,column:J,offset:ht}}function S(X){r[X.line]=X.column,st()}function k(){let X;for(;n._index<u.length;){const Z=u[n._index];if(typeof Z=="string")for(X=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===X&&n._bufferIndex<Z.length;)C(Z.charCodeAt(n._bufferIndex));else C(Z)}}function C(X){g=g(X)}function N(X){Lt(X)?(n.line++,n.column=1,n.offset+=X===-3?2:1,st()):X!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===u[n._index].length&&(n._bufferIndex=-1,n._index++)),p.previous=X}function O(X,Z){const ct=Z||{};return ct.type=X,ct.start=w(),p.events.push(["enter",ct,p]),c.push(ct),ct}function I(X){const Z=c.pop();return Z.end=w(),p.events.push(["exit",Z,p]),Z}function z(X,Z){W(X,Z.from)}function L(X,Z){Z.restore()}function B(X,Z){return ct;function ct(J,ht,F){let q,yt,xt,_;return Array.isArray(J)?ot(J):"tokenize"in J?ot([J]):K(J);function K(it){return ut;function ut(mt){const Tt=mt!==null&&it[mt],Bt=mt!==null&&it.null,fe=[...Array.isArray(Tt)?Tt:Tt?[Tt]:[],...Array.isArray(Bt)?Bt:Bt?[Bt]:[]];return ot(fe)(mt)}}function ot(it){return q=it,yt=0,it.length===0?F:R(it[yt])}function R(it){return ut;function ut(mt){return _=Q(),xt=it,it.partial||(p.currentConstruct=it),it.name&&p.parser.constructs.disable.null.includes(it.name)?ft():it.tokenize.call(Z?Object.assign(Object.create(p),Z):p,f,at,ft)(mt)}}function at(it){return X(xt,_),ht}function ft(it){return _.restore(),++yt<q.length?R(q[yt]):F}}}function W(X,Z){X.resolveAll&&!l.includes(X)&&l.push(X),X.resolve&&wa(p.events,Z,p.events.length-Z,X.resolve(p.events.slice(Z),p)),X.resolveTo&&(p.events=X.resolveTo(p.events,p))}function Q(){const X=w(),Z=p.previous,ct=p.currentConstruct,J=p.events.length,ht=Array.from(c);return{from:J,restore:F};function F(){n=X,p.previous=Z,p.currentConstruct=ct,p.events.length=J,c=ht,st()}}function st(){n.line in r&&n.column<2&&(n.column=r[n.line],n.offset+=r[n.line]-1)}}function dI(s,t){const e=t.start._index,n=t.start._bufferIndex,r=t.end._index,l=t.end._bufferIndex;let u;if(e===r)u=[s[e].slice(n,l)];else{if(u=s.slice(e,r),n>-1){const c=u[0];typeof c=="string"?u[0]=c.slice(n):u.shift()}l>0&&u.push(s[r].slice(0,l))}return u}function fI(s,t){let e=-1;const n=[];let r;for(;++e<s.length;){const l=s[e];let u;if(typeof l=="string")u=l;else switch(l){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=t?" ":"	";break}case-1:{if(!t&&r)continue;u=" ";break}default:u=String.fromCharCode(l)}r=l===-2,n.push(u)}return n.join("")}function pI(s){const n={constructs:SP([cI,...(s||{}).extensions||[]]),content:r(kP),defined:[],document:r(MP),flow:r(Wz),lazy:{},string:r(Zz),text:r(Jz)};return n;function r(l){return u;function u(c){return hI(n,l,c)}}}function gI(s){for(;!LD(s););return s}const GC=/[\0\t\n\r]/g;function mI(){let s=1,t="",e=!0,n;return r;function r(l,u,c){const f=[];let p,g,y,b,A;for(l=t+(typeof l=="string"?l.toString():new TextDecoder(u||void 0).decode(l)),y=0,t="",e&&(l.charCodeAt(0)===65279&&y++,e=void 0);y<l.length;){if(GC.lastIndex=y,p=GC.exec(l),b=p&&p.index!==void 0?p.index:l.length,A=l.charCodeAt(b),!p){t=l.slice(y);break}if(A===10&&y===b&&n)f.push(-3),n=void 0;else switch(n&&(f.push(-5),n=void 0),y<b&&(f.push(l.slice(y,b)),s+=b-y),A){case 0:{f.push(65533),s++;break}case 9:{for(g=Math.ceil(s/4)*4,f.push(-2);s++<g;)f.push(-1);break}case 10:{f.push(-4),s=1;break}default:n=!0,s=1}y=b+1}return c&&(n&&f.push(-5),t&&f.push(t),f.push(null)),f}}const yI=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function bI(s){return s.replace(yI,vI)}function vI(s,t,e){if(t)return t;if(e.charCodeAt(0)===35){const r=e.charCodeAt(1),l=r===120||r===88;return RD(e.slice(l?2:1),l?16:10)}return Iw(e)||s}const BD={}.hasOwnProperty;function AI(s,t,e){return typeof t!="string"&&(e=t,t=void 0),SI(e)(gI(pI(e).document().write(mI()(s,t,!0))))}function SI(s){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(xs),autolinkProtocol:Q,autolinkEmail:Q,atxHeading:l(Fn),blockQuote:l(Bt),characterEscape:Q,characterReference:Q,codeFenced:l(fe),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:l(fe,u),codeText:l(pe,u),codeTextData:Q,data:Q,codeFlowValue:Q,definition:l(Zt),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:l(Vt),hardBreakEscape:l(je),hardBreakTrailing:l(je),htmlFlow:l(Fe,u),htmlFlowData:Q,htmlText:l(Fe,u),htmlTextData:Q,image:l(Ve),label:u,link:l(xs),listItem:l(ci),listItemValue:b,listOrdered:l(_a,y),listUnordered:l(_a),paragraph:l(kr),reference:R,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:l(Fn),strong:l(Ca),thematicBreak:l(ed)},exit:{atxHeading:f(),atxHeadingSequence:z,autolink:f(),autolinkEmail:Tt,autolinkProtocol:mt,blockQuote:f(),characterEscapeValue:st,characterReferenceMarkerHexadecimal:ft,characterReferenceMarkerNumeric:ft,characterReferenceValue:it,characterReference:ut,codeFenced:f(k),codeFencedFence:S,codeFencedFenceInfo:A,codeFencedFenceMeta:w,codeFlowValue:st,codeIndented:f(C),codeText:f(ht),codeTextData:st,data:st,definition:f(),definitionDestinationString:I,definitionLabelString:N,definitionTitleString:O,emphasis:f(),hardBreakEscape:f(Z),hardBreakTrailing:f(Z),htmlFlow:f(ct),htmlFlowData:st,htmlText:f(J),htmlTextData:st,image:f(q),label:xt,labelText:yt,lineEnding:X,link:f(F),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:at,resourceDestinationString:_,resourceTitleString:K,resource:ot,setextHeading:f(W),setextHeadingLineSequence:B,setextHeadingText:L,strong:f(),thematicBreak:f()}};HD(t,(s||{}).mdastExtensions||[]);const e={};return n;function n(tt){let dt={type:"root",children:[]};const Dt={stack:[dt],tokenStack:[],config:t,enter:c,exit:p,buffer:u,resume:g,data:e},kt=[];let ie=-1;for(;++ie<tt.length;)if(tt[ie][1].type==="listOrdered"||tt[ie][1].type==="listUnordered")if(tt[ie][0]==="enter")kt.push(ie);else{const Bn=kt.pop();ie=r(tt,Bn,ie)}for(ie=-1;++ie<tt.length;){const Bn=t[tt[ie][0]];BD.call(Bn,tt[ie][1].type)&&Bn[tt[ie][1].type].call(Object.assign({sliceSerialize:tt[ie][2].sliceSerialize},Dt),tt[ie][1])}if(Dt.tokenStack.length>0){const Bn=Dt.tokenStack[Dt.tokenStack.length-1];(Bn[1]||VC).call(Dt,void 0,Bn[0])}for(dt.position={start:nl(tt.length>0?tt[0][1].start:{line:1,column:1,offset:0}),end:nl(tt.length>0?tt[tt.length-2][1].end:{line:1,column:1,offset:0})},ie=-1;++ie<t.transforms.length;)dt=t.transforms[ie](dt)||dt;return dt}function r(tt,dt,Dt){let kt=dt-1,ie=-1,Bn=!1,Es,rn,Ti,Qn;for(;++kt<=Dt;){const qe=tt[kt];switch(qe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{qe[0]==="enter"?ie++:ie--,Qn=void 0;break}case"lineEndingBlank":{qe[0]==="enter"&&(Es&&!Qn&&!ie&&!Ti&&(Ti=kt),Qn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Qn=void 0}if(!ie&&qe[0]==="enter"&&qe[1].type==="listItemPrefix"||ie===-1&&qe[0]==="exit"&&(qe[1].type==="listUnordered"||qe[1].type==="listOrdered")){if(Es){let Zn=kt;for(rn=void 0;Zn--;){const Jn=tt[Zn];if(Jn[1].type==="lineEnding"||Jn[1].type==="lineEndingBlank"){if(Jn[0]==="exit")continue;rn&&(tt[rn][1].type="lineEndingBlank",Bn=!0),Jn[1].type="lineEnding",rn=Zn}else if(!(Jn[1].type==="linePrefix"||Jn[1].type==="blockQuotePrefix"||Jn[1].type==="blockQuotePrefixWhitespace"||Jn[1].type==="blockQuoteMarker"||Jn[1].type==="listItemIndent"))break}Ti&&(!rn||Ti<rn)&&(Es._spread=!0),Es.end=Object.assign({},rn?tt[rn][1].start:qe[1].end),tt.splice(rn||kt,0,["exit",Es,qe[2]]),kt++,Dt++}if(qe[1].type==="listItemPrefix"){const Zn={type:"listItem",_spread:!1,start:Object.assign({},qe[1].start),end:void 0};Es=Zn,tt.splice(kt,0,["enter",Zn,qe[2]]),kt++,Dt++,Ti=void 0,Qn=!0}}}return tt[dt][1]._spread=Bn,Dt}function l(tt,dt){return Dt;function Dt(kt){c.call(this,tt(kt),kt),dt&&dt.call(this,kt)}}function u(){this.stack.push({type:"fragment",children:[]})}function c(tt,dt,Dt){this.stack[this.stack.length-1].children.push(tt),this.stack.push(tt),this.tokenStack.push([dt,Dt||void 0]),tt.position={start:nl(dt.start),end:void 0}}function f(tt){return dt;function dt(Dt){tt&&tt.call(this,Dt),p.call(this,Dt)}}function p(tt,dt){const Dt=this.stack.pop(),kt=this.tokenStack.pop();if(kt)kt[0].type!==tt.type&&(dt?dt.call(this,tt,kt[0]):(kt[1]||VC).call(this,tt,kt[0]));else throw new Error("Cannot close `"+tt.type+"` ("+Nf({start:tt.start,end:tt.end})+"): it’s not open");Dt.position.end=nl(tt.end)}function g(){return vP(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function b(tt){if(this.data.expectingFirstListItemValue){const dt=this.stack[this.stack.length-2];dt.start=Number.parseInt(this.sliceSerialize(tt),10),this.data.expectingFirstListItemValue=void 0}}function A(){const tt=this.resume(),dt=this.stack[this.stack.length-1];dt.lang=tt}function w(){const tt=this.resume(),dt=this.stack[this.stack.length-1];dt.meta=tt}function S(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const tt=this.resume(),dt=this.stack[this.stack.length-1];dt.value=tt.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const tt=this.resume(),dt=this.stack[this.stack.length-1];dt.value=tt.replace(/(\r?\n|\r)$/g,"")}function N(tt){const dt=this.resume(),Dt=this.stack[this.stack.length-1];Dt.label=dt,Dt.identifier=Fc(this.sliceSerialize(tt)).toLowerCase()}function O(){const tt=this.resume(),dt=this.stack[this.stack.length-1];dt.title=tt}function I(){const tt=this.resume(),dt=this.stack[this.stack.length-1];dt.url=tt}function z(tt){const dt=this.stack[this.stack.length-1];if(!dt.depth){const Dt=this.sliceSerialize(tt).length;dt.depth=Dt}}function L(){this.data.setextHeadingSlurpLineEnding=!0}function B(tt){const dt=this.stack[this.stack.length-1];dt.depth=this.sliceSerialize(tt).codePointAt(0)===61?1:2}function W(){this.data.setextHeadingSlurpLineEnding=void 0}function Q(tt){const Dt=this.stack[this.stack.length-1].children;let kt=Dt[Dt.length-1];(!kt||kt.type!=="text")&&(kt=td(),kt.position={start:nl(tt.start),end:void 0},Dt.push(kt)),this.stack.push(kt)}function st(tt){const dt=this.stack.pop();dt.value+=this.sliceSerialize(tt),dt.position.end=nl(tt.end)}function X(tt){const dt=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Dt=dt.children[dt.children.length-1];Dt.position.end=nl(tt.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(dt.type)&&(Q.call(this,tt),st.call(this,tt))}function Z(){this.data.atHardBreak=!0}function ct(){const tt=this.resume(),dt=this.stack[this.stack.length-1];dt.value=tt}function J(){const tt=this.resume(),dt=this.stack[this.stack.length-1];dt.value=tt}function ht(){const tt=this.resume(),dt=this.stack[this.stack.length-1];dt.value=tt}function F(){const tt=this.stack[this.stack.length-1];if(this.data.inReference){const dt=this.data.referenceType||"shortcut";tt.type+="Reference",tt.referenceType=dt,delete tt.url,delete tt.title}else delete tt.identifier,delete tt.label;this.data.referenceType=void 0}function q(){const tt=this.stack[this.stack.length-1];if(this.data.inReference){const dt=this.data.referenceType||"shortcut";tt.type+="Reference",tt.referenceType=dt,delete tt.url,delete tt.title}else delete tt.identifier,delete tt.label;this.data.referenceType=void 0}function yt(tt){const dt=this.sliceSerialize(tt),Dt=this.stack[this.stack.length-2];Dt.label=bI(dt),Dt.identifier=Fc(dt).toLowerCase()}function xt(){const tt=this.stack[this.stack.length-1],dt=this.resume(),Dt=this.stack[this.stack.length-1];if(this.data.inReference=!0,Dt.type==="link"){const kt=tt.children;Dt.children=kt}else Dt.alt=dt}function _(){const tt=this.resume(),dt=this.stack[this.stack.length-1];dt.url=tt}function K(){const tt=this.resume(),dt=this.stack[this.stack.length-1];dt.title=tt}function ot(){this.data.inReference=void 0}function R(){this.data.referenceType="collapsed"}function at(tt){const dt=this.resume(),Dt=this.stack[this.stack.length-1];Dt.label=dt,Dt.identifier=Fc(this.sliceSerialize(tt)).toLowerCase(),this.data.referenceType="full"}function ft(tt){this.data.characterReferenceType=tt.type}function it(tt){const dt=this.sliceSerialize(tt),Dt=this.data.characterReferenceType;let kt;Dt?(kt=RD(dt,Dt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):kt=Iw(dt);const ie=this.stack[this.stack.length-1];ie.value+=kt}function ut(tt){const dt=this.stack.pop();dt.position.end=nl(tt.end)}function mt(tt){st.call(this,tt);const dt=this.stack[this.stack.length-1];dt.url=this.sliceSerialize(tt)}function Tt(tt){st.call(this,tt);const dt=this.stack[this.stack.length-1];dt.url="mailto:"+this.sliceSerialize(tt)}function Bt(){return{type:"blockquote",children:[]}}function fe(){return{type:"code",lang:null,meta:null,value:""}}function pe(){return{type:"inlineCode",value:""}}function Zt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Vt(){return{type:"emphasis",children:[]}}function Fn(){return{type:"heading",depth:0,children:[]}}function je(){return{type:"break"}}function Fe(){return{type:"html",value:""}}function Ve(){return{type:"image",title:null,url:"",alt:null}}function xs(){return{type:"link",title:null,url:"",children:[]}}function _a(tt){return{type:"list",ordered:tt.type==="listOrdered",start:null,spread:tt._spread,children:[]}}function ci(tt){return{type:"listItem",spread:tt._spread,checked:null,children:[]}}function kr(){return{type:"paragraph",children:[]}}function Ca(){return{type:"strong",children:[]}}function td(){return{type:"text",value:""}}function ed(){return{type:"thematicBreak"}}}function nl(s){return{line:s.line,column:s.column,offset:s.offset}}function HD(s,t){let e=-1;for(;++e<t.length;){const n=t[e];Array.isArray(n)?HD(s,n):wI(s,n)}}function wI(s,t){let e;for(e in t)if(BD.call(t,e))switch(e){case"canContainEols":{const n=t[e];n&&s[e].push(...n);break}case"transforms":{const n=t[e];n&&s[e].push(...n);break}case"enter":case"exit":{const n=t[e];n&&Object.assign(s[e],n);break}}}function VC(s,t){throw s?new Error("Cannot close `"+s.type+"` ("+Nf({start:s.start,end:s.end})+"): a different token (`"+t.type+"`, "+Nf({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Nf({start:t.start,end:t.end})+") is still open")}function xI(s){const t=this;t.parser=e;function e(n){return AI(n,{...t.data("settings"),...s,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function EI(s,t){const e={type:"element",tagName:"blockquote",properties:{},children:s.wrap(s.all(t),!0)};return s.patch(t,e),s.applyData(t,e)}function _I(s,t){const e={type:"element",tagName:"br",properties:{},children:[]};return s.patch(t,e),[s.applyData(t,e),{type:"text",value:`
`}]}function CI(s,t){const e=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let r={type:"element",tagName:"code",properties:n,children:[{type:"text",value:e}]};return t.meta&&(r.data={meta:t.meta}),s.patch(t,r),r=s.applyData(t,r),r={type:"element",tagName:"pre",properties:{},children:[r]},s.patch(t,r),r}function TI(s,t){const e={type:"element",tagName:"del",properties:{},children:s.all(t)};return s.patch(t,e),s.applyData(t,e)}function DI(s,t){const e={type:"element",tagName:"em",properties:{},children:s.all(t)};return s.patch(t,e),s.applyData(t,e)}function kI(s,t){const e=typeof s.options.clobberPrefix=="string"?s.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),r=Jh(n.toLowerCase()),l=s.footnoteOrder.indexOf(n);let u,c=s.footnoteCounts.get(n);c===void 0?(c=0,s.footnoteOrder.push(n),u=s.footnoteOrder.length):u=l+1,c+=1,s.footnoteCounts.set(n,c);const f={type:"element",tagName:"a",properties:{href:"#"+e+"fn-"+r,id:e+"fnref-"+r+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};s.patch(t,f);const p={type:"element",tagName:"sup",properties:{},children:[f]};return s.patch(t,p),s.applyData(t,p)}function RI(s,t){const e={type:"element",tagName:"h"+t.depth,properties:{},children:s.all(t)};return s.patch(t,e),s.applyData(t,e)}function MI(s,t){if(s.options.allowDangerousHtml){const e={type:"raw",value:t.value};return s.patch(t,e),s.applyData(t,e)}}function UD(s,t){const e=t.referenceType;let n="]";if(e==="collapsed"?n+="[]":e==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];const r=s.all(t),l=r[0];l&&l.type==="text"?l.value="["+l.value:r.unshift({type:"text",value:"["});const u=r[r.length-1];return u&&u.type==="text"?u.value+=n:r.push({type:"text",value:n}),r}function NI(s,t){const e=String(t.identifier).toUpperCase(),n=s.definitionById.get(e);if(!n)return UD(s,t);const r={src:Jh(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(r.title=n.title);const l={type:"element",tagName:"img",properties:r,children:[]};return s.patch(t,l),s.applyData(t,l)}function OI(s,t){const e={src:Jh(t.url)};t.alt!==null&&t.alt!==void 0&&(e.alt=t.alt),t.title!==null&&t.title!==void 0&&(e.title=t.title);const n={type:"element",tagName:"img",properties:e,children:[]};return s.patch(t,n),s.applyData(t,n)}function LI(s,t){const e={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};s.patch(t,e);const n={type:"element",tagName:"code",properties:{},children:[e]};return s.patch(t,n),s.applyData(t,n)}function PI(s,t){const e=String(t.identifier).toUpperCase(),n=s.definitionById.get(e);if(!n)return UD(s,t);const r={href:Jh(n.url||"")};n.title!==null&&n.title!==void 0&&(r.title=n.title);const l={type:"element",tagName:"a",properties:r,children:s.all(t)};return s.patch(t,l),s.applyData(t,l)}function zI(s,t){const e={href:Jh(t.url)};t.title!==null&&t.title!==void 0&&(e.title=t.title);const n={type:"element",tagName:"a",properties:e,children:s.all(t)};return s.patch(t,n),s.applyData(t,n)}function II(s,t,e){const n=s.all(t),r=e?jI(e):GD(t),l={},u=[];if(typeof t.checked=="boolean"){const g=n[0];let y;g&&g.type==="element"&&g.tagName==="p"?y=g:(y={type:"element",tagName:"p",properties:{},children:[]},n.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),l.className=["task-list-item"]}let c=-1;for(;++c<n.length;){const g=n[c];(r||c!==0||g.type!=="element"||g.tagName!=="p")&&u.push({type:"text",value:`
`}),g.type==="element"&&g.tagName==="p"&&!r?u.push(...g.children):u.push(g)}const f=n[n.length-1];f&&(r||f.type!=="element"||f.tagName!=="p")&&u.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:l,children:u};return s.patch(t,p),s.applyData(t,p)}function jI(s){let t=!1;if(s.type==="list"){t=s.spread||!1;const e=s.children;let n=-1;for(;!t&&++n<e.length;)t=GD(e[n])}return t}function GD(s){const t=s.spread;return t??s.children.length>1}function FI(s,t){const e={},n=s.all(t);let r=-1;for(typeof t.start=="number"&&t.start!==1&&(e.start=t.start);++r<n.length;){const u=n[r];if(u.type==="element"&&u.tagName==="li"&&u.properties&&Array.isArray(u.properties.className)&&u.properties.className.includes("task-list-item")){e.className=["contains-task-list"];break}}const l={type:"element",tagName:t.ordered?"ol":"ul",properties:e,children:s.wrap(n,!0)};return s.patch(t,l),s.applyData(t,l)}function BI(s,t){const e={type:"element",tagName:"p",properties:{},children:s.all(t)};return s.patch(t,e),s.applyData(t,e)}function HI(s,t){const e={type:"root",children:s.wrap(s.all(t))};return s.patch(t,e),s.applyData(t,e)}function UI(s,t){const e={type:"element",tagName:"strong",properties:{},children:s.all(t)};return s.patch(t,e),s.applyData(t,e)}function GI(s,t){const e=s.all(t),n=e.shift(),r=[];if(n){const u={type:"element",tagName:"thead",properties:{},children:s.wrap([n],!0)};s.patch(t.children[0],u),r.push(u)}if(e.length>0){const u={type:"element",tagName:"tbody",properties:{},children:s.wrap(e,!0)},c=Ow(t.children[1]),f=xD(t.children[t.children.length-1]);c&&f&&(u.position={start:c,end:f}),r.push(u)}const l={type:"element",tagName:"table",properties:{},children:s.wrap(r,!0)};return s.patch(t,l),s.applyData(t,l)}function VI(s,t,e){const n=e?e.children:void 0,l=(n?n.indexOf(t):1)===0?"th":"td",u=e&&e.type==="table"?e.align:void 0,c=u?u.length:t.children.length;let f=-1;const p=[];for(;++f<c;){const y=t.children[f],b={},A=u?u[f]:void 0;A&&(b.align=A);let w={type:"element",tagName:l,properties:b,children:[]};y&&(w.children=s.all(y),s.patch(y,w),w=s.applyData(y,w)),p.push(w)}const g={type:"element",tagName:"tr",properties:{},children:s.wrap(p,!0)};return s.patch(t,g),s.applyData(t,g)}function qI(s,t){const e={type:"element",tagName:"td",properties:{},children:s.all(t)};return s.patch(t,e),s.applyData(t,e)}const qC=9,YC=32;function YI(s){const t=String(s),e=/\r?\n|\r/g;let n=e.exec(t),r=0;const l=[];for(;n;)l.push(XC(t.slice(r,n.index),r>0,!0),n[0]),r=n.index+n[0].length,n=e.exec(t);return l.push(XC(t.slice(r),r>0,!1)),l.join("")}function XC(s,t,e){let n=0,r=s.length;if(t){let l=s.codePointAt(n);for(;l===qC||l===YC;)n++,l=s.codePointAt(n)}if(e){let l=s.codePointAt(r-1);for(;l===qC||l===YC;)r--,l=s.codePointAt(r-1)}return r>n?s.slice(n,r):""}function XI(s,t){const e={type:"text",value:YI(String(t.value))};return s.patch(t,e),s.applyData(t,e)}function $I(s,t){const e={type:"element",tagName:"hr",properties:{},children:[]};return s.patch(t,e),s.applyData(t,e)}const WI={blockquote:EI,break:_I,code:CI,delete:TI,emphasis:DI,footnoteReference:kI,heading:RI,html:MI,imageReference:NI,image:OI,inlineCode:LI,linkReference:PI,link:zI,listItem:II,list:FI,paragraph:BI,root:HI,strong:UI,table:GI,tableCell:qI,tableRow:VI,text:XI,thematicBreak:$I,toml:Um,yaml:Um,definition:Um,footnoteDefinition:Um};function Um(){}const VD=-1,Sb=0,Lf=1,Ly=2,Bw=3,Hw=4,Uw=5,Gw=6,qD=7,YD=8,$C=typeof self=="object"?self:globalThis,KI=(s,t)=>{const e=(r,l)=>(s.set(l,r),r),n=r=>{if(s.has(r))return s.get(r);const[l,u]=t[r];switch(l){case Sb:case VD:return e(u,r);case Lf:{const c=e([],r);for(const f of u)c.push(n(f));return c}case Ly:{const c=e({},r);for(const[f,p]of u)c[n(f)]=n(p);return c}case Bw:return e(new Date(u),r);case Hw:{const{source:c,flags:f}=u;return e(new RegExp(c,f),r)}case Uw:{const c=e(new Map,r);for(const[f,p]of u)c.set(n(f),n(p));return c}case Gw:{const c=e(new Set,r);for(const f of u)c.add(n(f));return c}case qD:{const{name:c,message:f}=u;return e(new $C[c](f),r)}case YD:return e(BigInt(u),r);case"BigInt":return e(Object(BigInt(u)),r);case"ArrayBuffer":return e(new Uint8Array(u).buffer,u);case"DataView":{const{buffer:c}=new Uint8Array(u);return e(new DataView(c),u)}}return e(new $C[l](u),r)};return n},WC=s=>KI(new Map,s)(0),Ac="",{toString:QI}={},{keys:ZI}=Object,rf=s=>{const t=typeof s;if(t!=="object"||!s)return[Sb,t];const e=QI.call(s).slice(8,-1);switch(e){case"Array":return[Lf,Ac];case"Object":return[Ly,Ac];case"Date":return[Bw,Ac];case"RegExp":return[Hw,Ac];case"Map":return[Uw,Ac];case"Set":return[Gw,Ac];case"DataView":return[Lf,e]}return e.includes("Array")?[Lf,e]:e.includes("Error")?[qD,e]:[Ly,e]},Gm=([s,t])=>s===Sb&&(t==="function"||t==="symbol"),JI=(s,t,e,n)=>{const r=(u,c)=>{const f=n.push(u)-1;return e.set(c,f),f},l=u=>{if(e.has(u))return e.get(u);let[c,f]=rf(u);switch(c){case Sb:{let g=u;switch(f){case"bigint":c=YD,g=u.toString();break;case"function":case"symbol":if(s)throw new TypeError("unable to serialize "+f);g=null;break;case"undefined":return r([VD],u)}return r([c,g],u)}case Lf:{if(f){let b=u;return f==="DataView"?b=new Uint8Array(u.buffer):f==="ArrayBuffer"&&(b=new Uint8Array(u)),r([f,[...b]],u)}const g=[],y=r([c,g],u);for(const b of u)g.push(l(b));return y}case Ly:{if(f)switch(f){case"BigInt":return r([f,u.toString()],u);case"Boolean":case"Number":case"String":return r([f,u.valueOf()],u)}if(t&&"toJSON"in u)return l(u.toJSON());const g=[],y=r([c,g],u);for(const b of ZI(u))(s||!Gm(rf(u[b])))&&g.push([l(b),l(u[b])]);return y}case Bw:return r([c,u.toISOString()],u);case Hw:{const{source:g,flags:y}=u;return r([c,{source:g,flags:y}],u)}case Uw:{const g=[],y=r([c,g],u);for(const[b,A]of u)(s||!(Gm(rf(b))||Gm(rf(A))))&&g.push([l(b),l(A)]);return y}case Gw:{const g=[],y=r([c,g],u);for(const b of u)(s||!Gm(rf(b)))&&g.push(l(b));return y}}const{message:p}=u;return r([c,{name:f,message:p}],u)};return l},KC=(s,{json:t,lossy:e}={})=>{const n=[];return JI(!(t||e),!!t,new Map,n)(s),n},Py=typeof structuredClone=="function"?(s,t)=>t&&("json"in t||"lossy"in t)?WC(KC(s,t)):structuredClone(s):(s,t)=>WC(KC(s,t));function t3(s,t){const e=[{type:"text",value:"↩"}];return t>1&&e.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),e}function e3(s,t){return"Back to reference "+(s+1)+(t>1?"-"+t:"")}function n3(s){const t=typeof s.options.clobberPrefix=="string"?s.options.clobberPrefix:"user-content-",e=s.options.footnoteBackContent||t3,n=s.options.footnoteBackLabel||e3,r=s.options.footnoteLabel||"Footnotes",l=s.options.footnoteLabelTagName||"h2",u=s.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let f=-1;for(;++f<s.footnoteOrder.length;){const p=s.footnoteById.get(s.footnoteOrder[f]);if(!p)continue;const g=s.all(p),y=String(p.identifier).toUpperCase(),b=Jh(y.toLowerCase());let A=0;const w=[],S=s.footnoteCounts.get(y);for(;S!==void 0&&++A<=S;){w.length>0&&w.push({type:"text",value:" "});let N=typeof e=="string"?e:e(f,A);typeof N=="string"&&(N={type:"text",value:N}),w.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+b+(A>1?"-"+A:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(f,A),className:["data-footnote-backref"]},children:Array.isArray(N)?N:[N]})}const k=g[g.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const N=k.children[k.children.length-1];N&&N.type==="text"?N.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...w)}else g.push(...w);const C={type:"element",tagName:"li",properties:{id:t+"fn-"+b},children:s.wrap(g,!0)};s.patch(p,C),c.push(C)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:l,properties:{...Py(u),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:s.wrap(c,!0)},{type:"text",value:`
`}]}}const XD=function(s){if(s==null)return r3;if(typeof s=="function")return wb(s);if(typeof s=="object")return Array.isArray(s)?i3(s):s3(s);if(typeof s=="string")return a3(s);throw new Error("Expected function, string, or object as test")};function i3(s){const t=[];let e=-1;for(;++e<s.length;)t[e]=XD(s[e]);return wb(n);function n(...r){let l=-1;for(;++l<t.length;)if(t[l].apply(this,r))return!0;return!1}}function s3(s){const t=s;return wb(e);function e(n){const r=n;let l;for(l in s)if(r[l]!==t[l])return!1;return!0}}function a3(s){return wb(t);function t(e){return e&&e.type===s}}function wb(s){return t;function t(e,n,r){return!!(l3(e)&&s.call(this,e,typeof n=="number"?n:void 0,r||void 0))}}function r3(){return!0}function l3(s){return s!==null&&typeof s=="object"&&"type"in s}const $D=[],o3=!0,QC=!1,u3="skip";function c3(s,t,e,n){let r;typeof t=="function"&&typeof e!="function"?(n=e,e=t):r=t;const l=XD(r),u=n?-1:1;c(s,void 0,[])();function c(f,p,g){const y=f&&typeof f=="object"?f:{};if(typeof y.type=="string"){const A=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(f.type+(A?"<"+A+">":""))+")"})}return b;function b(){let A=$D,w,S,k;if((!t||l(f,p,g[g.length-1]||void 0))&&(A=h3(e(f,g)),A[0]===QC))return A;if("children"in f&&f.children){const C=f;if(C.children&&A[0]!==u3)for(S=(n?C.children.length:-1)+u,k=g.concat(C);S>-1&&S<C.children.length;){const N=C.children[S];if(w=c(N,S,k)(),w[0]===QC)return w;S=typeof w[1]=="number"?w[1]:S+u}}return A}}}function h3(s){return Array.isArray(s)?s:typeof s=="number"?[o3,s]:s==null?$D:[s]}function WD(s,t,e,n){let r,l,u;typeof t=="function"?(l=void 0,u=t,r=e):(l=t,u=e,r=n),c3(s,l,c,r);function c(f,p){const g=p[p.length-1],y=g?g.children.indexOf(f):void 0;return u(f,y,g)}}const KA={}.hasOwnProperty,d3={};function f3(s,t){const e=t||d3,n=new Map,r=new Map,l=new Map,u={...WI,...e.handlers},c={all:p,applyData:g3,definitionById:n,footnoteById:r,footnoteCounts:l,footnoteOrder:[],handlers:u,one:f,options:e,patch:p3,wrap:y3};return WD(s,function(g){if(g.type==="definition"||g.type==="footnoteDefinition"){const y=g.type==="definition"?n:r,b=String(g.identifier).toUpperCase();y.has(b)||y.set(b,g)}}),c;function f(g,y){const b=g.type,A=c.handlers[b];if(KA.call(c.handlers,b)&&A)return A(c,g,y);if(c.options.passThrough&&c.options.passThrough.includes(b)){if("children"in g){const{children:S,...k}=g,C=Py(k);return C.children=c.all(g),C}return Py(g)}return(c.options.unknownHandler||m3)(c,g,y)}function p(g){const y=[];if("children"in g){const b=g.children;let A=-1;for(;++A<b.length;){const w=c.one(b[A],g);if(w){if(A&&b[A-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=ZC(w.value)),!Array.isArray(w)&&w.type==="element")){const S=w.children[0];S&&S.type==="text"&&(S.value=ZC(S.value))}Array.isArray(w)?y.push(...w):y.push(w)}}}return y}}function p3(s,t){s.position&&(t.position=QL(s))}function g3(s,t){let e=t;if(s&&s.data){const n=s.data.hName,r=s.data.hChildren,l=s.data.hProperties;if(typeof n=="string")if(e.type==="element")e.tagName=n;else{const u="children"in e?e.children:[e];e={type:"element",tagName:n,properties:{},children:u}}e.type==="element"&&l&&Object.assign(e.properties,Py(l)),"children"in e&&e.children&&r!==null&&r!==void 0&&(e.children=r)}return e}function m3(s,t){const e=t.data||{},n="value"in t&&!(KA.call(e,"hProperties")||KA.call(e,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:s.all(t)};return s.patch(t,n),s.applyData(t,n)}function y3(s,t){const e=[];let n=-1;for(t&&e.push({type:"text",value:`
`});++n<s.length;)n&&e.push({type:"text",value:`
`}),e.push(s[n]);return t&&s.length>0&&e.push({type:"text",value:`
`}),e}function ZC(s){let t=0,e=s.charCodeAt(t);for(;e===9||e===32;)t++,e=s.charCodeAt(t);return s.slice(t)}function JC(s,t){const e=f3(s,t),n=e.one(s,void 0),r=n3(e),l=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return r&&l.children.push({type:"text",value:`
`},r),l}function b3(s,t){return s&&"run"in s?async function(e,n){const r=JC(e,{file:n,...t});await s.run(r,n)}:function(e,n){return JC(e,{file:n,...s||t})}}function tT(s){if(s)throw s}var uA,eT;function v3(){if(eT)return uA;eT=1;var s=Object.prototype.hasOwnProperty,t=Object.prototype.toString,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=function(p){return typeof Array.isArray=="function"?Array.isArray(p):t.call(p)==="[object Array]"},l=function(p){if(!p||t.call(p)!=="[object Object]")return!1;var g=s.call(p,"constructor"),y=p.constructor&&p.constructor.prototype&&s.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!g&&!y)return!1;var b;for(b in p);return typeof b>"u"||s.call(p,b)},u=function(p,g){e&&g.name==="__proto__"?e(p,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):p[g.name]=g.newValue},c=function(p,g){if(g==="__proto__")if(s.call(p,g)){if(n)return n(p,g).value}else return;return p[g]};return uA=function f(){var p,g,y,b,A,w,S=arguments[0],k=1,C=arguments.length,N=!1;for(typeof S=="boolean"&&(N=S,S=arguments[1]||{},k=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});k<C;++k)if(p=arguments[k],p!=null)for(g in p)y=c(S,g),b=c(p,g),S!==b&&(N&&b&&(l(b)||(A=r(b)))?(A?(A=!1,w=y&&r(y)?y:[]):w=y&&l(y)?y:{},u(S,{name:g,newValue:f(N,w,b)})):typeof b<"u"&&u(S,{name:g,newValue:b}));return S},uA}var A3=v3();const cA=hg(A3);function QA(s){if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)}function S3(){const s=[],t={run:e,use:n};return t;function e(...r){let l=-1;const u=r.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);c(null,...r);function c(f,...p){const g=s[++l];let y=-1;if(f){u(f);return}for(;++y<r.length;)(p[y]===null||p[y]===void 0)&&(p[y]=r[y]);r=p,g?w3(g,c)(...p):u(null,...p)}}function n(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return s.push(r),t}}function w3(s,t){let e;return n;function n(...u){const c=s.length>u.length;let f;c&&u.push(r);try{f=s.apply(this,u)}catch(p){const g=p;if(c&&e)throw g;return r(g)}c||(f&&f.then&&typeof f.then=="function"?f.then(l,r):f instanceof Error?r(f):l(f))}function r(u,...c){e||(e=!0,t(u,...c))}function l(u){r(null,u)}}const ia={basename:x3,dirname:E3,extname:_3,join:C3,sep:"/"};function x3(s,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');yg(s);let e=0,n=-1,r=s.length,l;if(t===void 0||t.length===0||t.length>s.length){for(;r--;)if(s.codePointAt(r)===47){if(l){e=r+1;break}}else n<0&&(l=!0,n=r+1);return n<0?"":s.slice(e,n)}if(t===s)return"";let u=-1,c=t.length-1;for(;r--;)if(s.codePointAt(r)===47){if(l){e=r+1;break}}else u<0&&(l=!0,u=r+1),c>-1&&(s.codePointAt(r)===t.codePointAt(c--)?c<0&&(n=r):(c=-1,n=u));return e===n?n=u:n<0&&(n=s.length),s.slice(e,n)}function E3(s){if(yg(s),s.length===0)return".";let t=-1,e=s.length,n;for(;--e;)if(s.codePointAt(e)===47){if(n){t=e;break}}else n||(n=!0);return t<0?s.codePointAt(0)===47?"/":".":t===1&&s.codePointAt(0)===47?"//":s.slice(0,t)}function _3(s){yg(s);let t=s.length,e=-1,n=0,r=-1,l=0,u;for(;t--;){const c=s.codePointAt(t);if(c===47){if(u){n=t+1;break}continue}e<0&&(u=!0,e=t+1),c===46?r<0?r=t:l!==1&&(l=1):r>-1&&(l=-1)}return r<0||e<0||l===0||l===1&&r===e-1&&r===n+1?"":s.slice(r,e)}function C3(...s){let t=-1,e;for(;++t<s.length;)yg(s[t]),s[t]&&(e=e===void 0?s[t]:e+"/"+s[t]);return e===void 0?".":T3(e)}function T3(s){yg(s);const t=s.codePointAt(0)===47;let e=D3(s,!t);return e.length===0&&!t&&(e="."),e.length>0&&s.codePointAt(s.length-1)===47&&(e+="/"),t?"/"+e:e}function D3(s,t){let e="",n=0,r=-1,l=0,u=-1,c,f;for(;++u<=s.length;){if(u<s.length)c=s.codePointAt(u);else{if(c===47)break;c=47}if(c===47){if(!(r===u-1||l===1))if(r!==u-1&&l===2){if(e.length<2||n!==2||e.codePointAt(e.length-1)!==46||e.codePointAt(e.length-2)!==46){if(e.length>2){if(f=e.lastIndexOf("/"),f!==e.length-1){f<0?(e="",n=0):(e=e.slice(0,f),n=e.length-1-e.lastIndexOf("/")),r=u,l=0;continue}}else if(e.length>0){e="",n=0,r=u,l=0;continue}}t&&(e=e.length>0?e+"/..":"..",n=2)}else e.length>0?e+="/"+s.slice(r+1,u):e=s.slice(r+1,u),n=u-r-1;r=u,l=0}else c===46&&l>-1?l++:l=-1}return e}function yg(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}const k3={cwd:R3};function R3(){return"/"}function ZA(s){return!!(s!==null&&typeof s=="object"&&"href"in s&&s.href&&"protocol"in s&&s.protocol&&s.auth===void 0)}function M3(s){if(typeof s=="string")s=new URL(s);else if(!ZA(s)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+s+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(s.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return N3(s)}function N3(s){if(s.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=s.pathname;let e=-1;for(;++e<t.length;)if(t.codePointAt(e)===37&&t.codePointAt(e+1)===50){const n=t.codePointAt(e+2);if(n===70||n===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(t)}const hA=["history","path","basename","stem","extname","dirname"];class KD{constructor(t){let e;t?ZA(t)?e={path:t}:typeof t=="string"||O3(t)?e={value:t}:e=t:e={},this.cwd="cwd"in e?"":k3.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<hA.length;){const l=hA[n];l in e&&e[l]!==void 0&&e[l]!==null&&(this[l]=l==="history"?[...e[l]]:e[l])}let r;for(r in e)hA.includes(r)||(this[r]=e[r])}get basename(){return typeof this.path=="string"?ia.basename(this.path):void 0}set basename(t){fA(t,"basename"),dA(t,"basename"),this.path=ia.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?ia.dirname(this.path):void 0}set dirname(t){nT(this.basename,"dirname"),this.path=ia.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?ia.extname(this.path):void 0}set extname(t){if(dA(t,"extname"),nT(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ia.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){ZA(t)&&(t=M3(t)),fA(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?ia.basename(this.path,this.extname):void 0}set stem(t){fA(t,"stem"),dA(t,"stem"),this.path=ia.join(this.dirname||"",t+(this.extname||""))}fail(t,e,n){const r=this.message(t,e,n);throw r.fatal=!0,r}info(t,e,n){const r=this.message(t,e,n);return r.fatal=void 0,r}message(t,e,n){const r=new Kn(t,e,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function dA(s,t){if(s&&s.includes(ia.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ia.sep+"`")}function fA(s,t){if(!s)throw new Error("`"+t+"` cannot be empty")}function nT(s,t){if(!s)throw new Error("Setting `"+t+"` requires `path` to be set too")}function O3(s){return!!(s&&typeof s=="object"&&"byteLength"in s&&"byteOffset"in s)}const L3=function(s){const n=this.constructor.prototype,r=n[s],l=function(){return r.apply(l,arguments)};return Object.setPrototypeOf(l,n),l},P3={}.hasOwnProperty;class Vw extends L3{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=S3()}copy(){const t=new Vw;let e=-1;for(;++e<this.attachers.length;){const n=this.attachers[e];t.use(...n)}return t.data(cA(!0,{},this.namespace)),t}data(t,e){return typeof t=="string"?arguments.length===2?(mA("data",this.frozen),this.namespace[t]=e,this):P3.call(this.namespace,t)&&this.namespace[t]||void 0:t?(mA("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[e,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const r=e.call(t,...n);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const e=Vm(t),n=this.parser||this.Parser;return pA("parse",n),n(String(e),e)}process(t,e){const n=this;return this.freeze(),pA("process",this.parser||this.Parser),gA("process",this.compiler||this.Compiler),e?r(void 0,e):new Promise(r);function r(l,u){const c=Vm(t),f=n.parse(c);n.run(f,c,function(g,y,b){if(g||!y||!b)return p(g);const A=y,w=n.stringify(A,b);j3(w)?b.value=w:b.result=w,p(g,b)});function p(g,y){g||!y?u(g):l?l(y):e(void 0,y)}}}processSync(t){let e=!1,n;return this.freeze(),pA("processSync",this.parser||this.Parser),gA("processSync",this.compiler||this.Compiler),this.process(t,r),sT("processSync","process",e),n;function r(l,u){e=!0,tT(l),n=u}}run(t,e,n){iT(t),this.freeze();const r=this.transformers;return!n&&typeof e=="function"&&(n=e,e=void 0),n?l(void 0,n):new Promise(l);function l(u,c){const f=Vm(e);r.run(t,f,p);function p(g,y,b){const A=y||t;g?c(g):u?u(A):n(void 0,A,b)}}}runSync(t,e){let n=!1,r;return this.run(t,e,l),sT("runSync","run",n),r;function l(u,c){tT(u),r=c,n=!0}}stringify(t,e){this.freeze();const n=Vm(e),r=this.compiler||this.Compiler;return gA("stringify",r),iT(t),r(t,n)}use(t,...e){const n=this.attachers,r=this.namespace;if(mA("use",this.frozen),t!=null)if(typeof t=="function")f(t,e);else if(typeof t=="object")Array.isArray(t)?c(t):u(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function l(p){if(typeof p=="function")f(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[g,...y]=p;f(g,y)}else u(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function u(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(p.plugins),p.settings&&(r.settings=cA(!0,r.settings,p.settings))}function c(p){let g=-1;if(p!=null)if(Array.isArray(p))for(;++g<p.length;){const y=p[g];l(y)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function f(p,g){let y=-1,b=-1;for(;++y<n.length;)if(n[y][0]===p){b=y;break}if(b===-1)n.push([p,...g]);else if(g.length>0){let[A,...w]=g;const S=n[b][1];QA(S)&&QA(A)&&(A=cA(!0,S,A)),n[b]=[p,A,...w]}}}}const z3=new Vw().freeze();function pA(s,t){if(typeof t!="function")throw new TypeError("Cannot `"+s+"` without `parser`")}function gA(s,t){if(typeof t!="function")throw new TypeError("Cannot `"+s+"` without `compiler`")}function mA(s,t){if(t)throw new Error("Cannot call `"+s+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function iT(s){if(!QA(s)||typeof s.type!="string")throw new TypeError("Expected node, got `"+s+"`")}function sT(s,t,e){if(!e)throw new Error("`"+s+"` finished async. Use `"+t+"` instead")}function Vm(s){return I3(s)?s:new KD(s)}function I3(s){return!!(s&&typeof s=="object"&&"message"in s&&"messages"in s)}function j3(s){return typeof s=="string"||F3(s)}function F3(s){return!!(s&&typeof s=="object"&&"byteLength"in s&&"byteOffset"in s)}const B3="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",aT=[],rT={allowDangerousHtml:!0},H3=/^(https?|ircs?|mailto|xmpp)$/i,U3=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function G3(s){const t=V3(s),e=q3(s);return Y3(t.runSync(t.parse(e),e),s)}function V3(s){const t=s.rehypePlugins||aT,e=s.remarkPlugins||aT,n=s.remarkRehypeOptions?{...s.remarkRehypeOptions,...rT}:rT;return z3().use(xI).use(e).use(b3,n).use(t)}function q3(s){const t=s.children||"",e=new KD;return typeof t=="string"&&(e.value=t),e}function Y3(s,t){const e=t.allowedElements,n=t.allowElement,r=t.components,l=t.disallowedElements,u=t.skipHtml,c=t.unwrapDisallowed,f=t.urlTransform||X3;for(const g of U3)Object.hasOwn(t,g.from)&&(""+g.from+(g.to?"use `"+g.to+"` instead":"remove it")+B3+g.id,void 0);return WD(s,p),nP(s,{Fragment:P.Fragment,components:r,ignoreInvalidStyle:!0,jsx:P.jsx,jsxs:P.jsxs,passKeys:!0,passNode:!0});function p(g,y,b){if(g.type==="raw"&&b&&typeof y=="number")return u?b.children.splice(y,1):b.children[y]={type:"text",value:g.value},y;if(g.type==="element"){let A;for(A in rA)if(Object.hasOwn(rA,A)&&Object.hasOwn(g.properties,A)){const w=g.properties[A],S=rA[A];(S===null||S.includes(g.tagName))&&(g.properties[A]=f(String(w||""),A,g))}}if(g.type==="element"){let A=e?!e.includes(g.tagName):l?l.includes(g.tagName):!1;if(!A&&n&&typeof y=="number"&&(A=!n(g,y,b)),A&&b&&typeof y=="number")return c&&g.children?b.children.splice(y,1,...g.children):b.children.splice(y,1),y}}}function X3(s){const t=s.indexOf(":"),e=s.indexOf("?"),n=s.indexOf("#"),r=s.indexOf("/");return t===-1||r!==-1&&t>r||e!==-1&&t>e||n!==-1&&t>n||H3.test(s.slice(0,t))?s:""}function $3({quizList:s}){const[t,e]=et.useState(Array(s.length).fill(void 0)),[n,r]=et.useState(Array(s.length).fill(null)),l=(c,f)=>{const p=[...t];p[c]=f,e(p)},u=()=>{const c=s.map((f,p)=>{var g;return t[p]?((g=t[p])==null?void 0:g.trim().toLowerCase())===f.answer.trim().toLowerCase():null});r(c)};return P.jsxs("div",{children:[s.map((c,f)=>P.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded",children:[P.jsxs("div",{className:"font-bold mb-2",children:[f+1,". ",c.question]}),c.options?P.jsx("div",{children:c.options.map((p,g)=>P.jsxs("label",{className:"block",children:[P.jsx("input",{type:"radio",name:`quiz_${f}`,value:p,checked:t[f]===p,onChange:()=>l(f,p)})," ",p]},g))}):P.jsx("input",{type:"text",className:"border rounded p-1 mt-2",value:t[f]||"",onChange:p=>l(f,p.target.value),placeholder:"请输入答案"}),n[f]!==null&&P.jsx("div",{className:`mt-2 ${n[f]?"text-green-600":"text-red-600"}`,children:n[f]?`✅ 正确！解析：${c.explanation}`:`❌ 错误，正确答案是：${c.answer}。解析：${c.explanation}`})]},f)),P.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",onClick:u,children:"提交答案"})]})}function W3({filePath:s}){const t=Ea(),[e]=et.useState(null),[n,r]=et.useState(!1),[l]=et.useState(null),u=()=>{t&&(r(!0),t.postMessage({command:"generateSummary",filePath:s}))},c=()=>{t&&(r(!0),t.postMessage({command:"generateQuiz",filePath:s}))},f=e&&typeof e=="string"?e.replace(/\\n/g,`
`):"";return P.jsxs("div",{className:"bg-white shadow p-4 rounded-xl",children:[P.jsx("h2",{className:"text-xl font-semibold mb-4",children:"🤖 AI 生成助手"}),P.jsxs("div",{className:"flex gap-4",children:[P.jsx("button",{className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600",onClick:u,children:"📘 生成课程总结"}),P.jsx("button",{className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600",onClick:c,children:"📝 生成测试题"})]}),P.jsx("div",{className:"mt-4 bg-gray-100 rounded p-4",children:n?"⏳ 正在生成...":e?l==="summary"&&typeof e=="string"?P.jsx("div",{className:"prose max-w-none",children:P.jsx(G3,{children:f})}):l==="quiz"&&Array.isArray(e)?P.jsx($3,{quizList:e}):null:null})]})}function K3({selectedFile:s}){const[t,e]=et.useState({}),[n,r]=et.useState({}),[l,u]=et.useState({}),c=[{user:"Alice",time:"2025-04-11 14:22",content:"这个文件讲得很清楚👍",page:"Lecture1.pdf",location:"第3页"},{user:"Bob",time:"2025-04-11 16:05",content:"有个地方我没看懂，第三页第二段。",page:"Lecture1.pdf",location:"第3页"},{user:"Cathy",time:"2025-04-10 10:30",content:"建议补充一个例题会更好。",page:"Lecture2.pdf",location:"第5页"}],f=g=>{e(y=>({...y,[g]:(y[g]||0)+1}))},p=g=>{const y=l[g];y&&y.trim()&&(r(b=>({...b,[g]:[...b[g]||[],y.trim()]})),u(b=>({...b,[g]:""})))};return P.jsxs("div",{className:"bg-white shadow p-6 rounded-xl",children:[P.jsx("h2",{className:"text-xl font-bold mb-4",children:"💬 交流评论"}),P.jsxs("div",{className:"space-y-6",children:[c.filter(g=>g.page===s).map((g,y)=>P.jsxs("div",{className:"border-b pb-4",children:[P.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[P.jsxs("span",{children:[g.user," · ",g.location]}),P.jsx("span",{children:g.time})]}),P.jsx("p",{className:"mt-1 text-gray-800",children:g.content}),P.jsx("div",{className:"flex items-center gap-4 mt-2",children:P.jsxs("button",{onClick:()=>f(y),className:"text-sm text-blue-500 hover:underline",children:["👍 点赞 (",t[y]||0,")"]})}),P.jsxs("div",{className:"mt-2",children:[P.jsx("input",{type:"text",value:l[y]||"",onChange:b=>u(A=>({...A,[y]:b.target.value})),placeholder:"写下你的回复...",className:"w-full border rounded p-2 text-sm"}),P.jsx("button",{onClick:()=>p(y),className:"mt-1 text-sm text-green-600 hover:underline",children:"↩️ 回复"})]}),n[y]&&n[y].length>0&&P.jsx("ul",{className:"mt-2 pl-4 list-disc text-sm text-gray-700 space-y-1",children:n[y].map((b,A)=>P.jsx("li",{children:b},A))})]},y)),c.filter(g=>g.page===s).length===0&&P.jsx("p",{className:"text-gray-500",children:"暂无评论"})]})]})}function Q3(){const s=[{title:"算法笔记分享",link:"https://example.com/note"},{title:"课后习题答案",link:"https://example.com/answer"},{title:"推荐阅读资料",link:"https://example.com/resource"}];return P.jsxs("div",{className:"bg-white shadow p-6 rounded-xl",children:[P.jsx("h2",{className:"text-xl font-bold mb-4",children:"🔗 相关资源"}),P.jsx("ul",{className:"list-disc list-inside space-y-2 text-blue-600",children:s.map((t,e)=>P.jsx("li",{children:P.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:t.title})},e))})]})}function Z3({filePath:s}){console.log("Now loading FilePath:",s);const t=Ea(),e=["Lecture1.pdf","Lecture2.pdf","Lecture3.pdf"],[n,r]=et.useState(e[0]),[l,u]=et.useState(null);return et.useEffect(()=>{const c=f=>{const p=f.data;p.command==="fileDetails"?u(p.details):p.command==="error"&&console.error("出错：",p.error)};return window.addEventListener("message",c),t&&t.postMessage({command:"getFileDetails",filePath:s}),()=>window.removeEventListener("message",c)},[s,t]),t?P.jsxs("div",{className:"max-w-3xl mx-auto space-y-10",children:[P.jsx("h1",{className:"text-3xl font-bold text-center mt-6",children:"📄 文件详情"}),P.jsxs("div",{className:"flex flex-col items-center",children:[P.jsx("label",{className:"mb-2 font-medium",children:"当前文件："}),P.jsx("select",{value:n,onChange:c=>r(c.target.value),className:"border p-2 rounded-md w-full max-w-sm",children:e.map(c=>P.jsx("option",{value:c,children:c},c))}),l&&P.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["文件大小：",l.size,"，类型：",l.type,"，上传时间：",l.uploadedAt]})]}),P.jsx("div",{className:"flex justify-center",children:P.jsx("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-xl text-lg hover:bg-blue-700",onClick:()=>t.postMessage({command:"openFile",filePath:s}),children:"🔍 查看文件"})}),P.jsx(TL,{filePath:s}),P.jsx(W3,{filePath:s}),P.jsx(K3,{selectedFile:n}),P.jsx(Q3,{})]}):P.jsx("div",{className:"p-10 text-center text-red-500",children:"无法加载 VSCode API，请确认环境。"})}const QD=et.createContext(void 0),J3=({children:s})=>{const[t,e]=et.useState([]),l={openPanels:t,openPanel:u=>{e(c=>c.find(f=>f.id===u.id)?c:[...c,u])},closePanel:u=>{e(c=>c.filter(f=>f.id!==u))}};return P.jsx(QD.Provider,{value:l,children:s})},xb=()=>{const s=et.useContext(QD);if(!s)throw new Error("useSidePanel must be used within a SidePanelProvider");return s},li=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),JA=[.001,0,0,.001,0,0],yA=1.35,Ki={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},sl={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},tj="pdfjs_internal_editor_",Pt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Jt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},ej={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Vn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ey={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},tn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},xc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Eb={ERRORS:0,WARNINGS:1,INFOS:5},zy={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},qm={moveTo:0,lineTo:1,curveTo:2,closePath:3},nj={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let _b=Eb.WARNINGS;function ij(s){Number.isInteger(s)&&(_b=s)}function sj(){return _b}function Cb(s){_b>=Eb.INFOS&&console.log(`Info: ${s}`)}function zt(s){_b>=Eb.WARNINGS&&console.log(`Warning: ${s}`)}function Ae(s){throw new Error(s)}function sn(s,t){s||Ae(t)}function aj(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ZD(s,t=null,e=null){if(!s)return null;if(e&&typeof s=="string"){if(e.addDefaultProtocol&&s.startsWith("www.")){const r=s.match(/\./g);(r==null?void 0:r.length)>=2&&(s=`http://${s}`)}if(e.tryConvertEncoding)try{s=cj(s)}catch{}}const n=t?URL.parse(s,t):URL.parse(s);return aj(n)?n:null}function JD(s,t,e=!1){const n=URL.parse(s);return n?(n.hash=t,n.href):e&&ZD(s,"http://example.com")?s.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Qt(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const zu=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class lT extends zu{constructor(t,e){super(t,"PasswordException"),this.code=e}}class bA extends zu{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class tS extends zu{constructor(t){super(t,"InvalidPDFException")}}class Iy extends zu{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class rj extends zu{constructor(t){super(t,"FormatError")}}class Gl extends zu{constructor(t){super(t,"AbortException")}}function tk(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&Ae("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<t;r+=e){const l=Math.min(r+e,t),u=s.subarray(r,l);n.push(String.fromCharCode.apply(null,u))}return n.join("")}function bg(s){typeof s!="string"&&Ae("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function lj(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function oj(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function uj(){try{return new Function(""),!0}catch{return!1}}class jn{static get isLittleEndian(){return Qt(this,"isLittleEndian",oj())}static get isEvalSupported(){return Qt(this,"isEvalSupported",uj())}static get isOffscreenCanvasSupported(){return Qt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Qt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){if(typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"){const{platform:t,userAgent:e}=navigator;return Qt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}return Qt(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Qt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const vA=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var Er,ny,eS;class Et{static makeHexColor(t,e,n){return`#${vA[t]}${vA[e]}${vA[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,n=0){const r=t[n],l=t[n+1];t[n]=r*e[0]+l*e[2]+e[4],t[n+1]=r*e[1]+l*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const r=e[0],l=e[1],u=e[2],c=e[3],f=e[4],p=e[5];for(let g=0;g<6;g+=2){const y=t[n+g],b=t[n+g+1];t[n+g]=y*r+b*u+f,t[n+g+1]=y*l+b*c+p}}static applyInverseTransform(t,e){const n=t[0],r=t[1],l=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/l,t[1]=(-n*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/l}static axialAlignedBoundingBox(t,e,n){const r=e[0],l=e[1],u=e[2],c=e[3],f=e[4],p=e[5],g=t[0],y=t[1],b=t[2],A=t[3];let w=r*g+f,S=w,k=r*b+f,C=k,N=c*y+p,O=N,I=c*A+p,z=I;if(l!==0||u!==0){const L=l*g,B=l*b,W=u*y,Q=u*A;w+=W,C+=W,k+=Q,S+=Q,N+=L,z+=L,I+=B,O+=B}n[0]=Math.min(n[0],w,k,S,C),n[1]=Math.min(n[1],N,I,O,z),n[2]=Math.max(n[2],w,k,S,C),n[3]=Math.max(n[3],N,I,O,z)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],r=t[1],l=t[2],u=t[3],c=n**2+r**2,f=n*l+r*u,p=l**2+u**2,g=(c+p)/2,y=Math.sqrt(g**2-(c*p-f**2));e[0]=Math.sqrt(g+y||1),e[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),u=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>u?null:[n,l,r,u]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,r,l){l[0]=Math.min(l[0],t,n),l[1]=Math.min(l[1],e,r),l[2]=Math.max(l[2],t,n),l[3]=Math.max(l[3],e,r)}static bezierBoundingBox(t,e,n,r,l,u,c,f,p){p[0]=Math.min(p[0],t,c),p[1]=Math.min(p[1],e,f),p[2]=Math.max(p[2],t,c),p[3]=Math.max(p[3],e,f),D(this,Er,eS).call(this,t,n,l,c,e,r,u,f,3*(-t+3*(n-l)+c),6*(t-2*n+l),3*(n-t),p),D(this,Er,eS).call(this,t,n,l,c,e,r,u,f,3*(-e+3*(r-u)+f),6*(e-2*r+u),3*(r-e),p)}}Er=new WeakSet,ny=function(t,e,n,r,l,u,c,f,p,g){if(p<=0||p>=1)return;const y=1-p,b=p*p,A=b*p,w=y*(y*(y*t+3*p*e)+3*b*n)+A*r,S=y*(y*(y*l+3*p*u)+3*b*c)+A*f;g[0]=Math.min(g[0],w),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],w),g[3]=Math.max(g[3],S)},eS=function(t,e,n,r,l,u,c,f,p,g,y,b){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&D(this,Er,ny).call(this,t,e,n,r,l,u,c,f,-y/g,b);return}const A=g**2-4*y*p;if(A<0)return;const w=Math.sqrt(A),S=2*p;D(this,Er,ny).call(this,t,e,n,r,l,u,c,f,(-g+w)/S,b),D(this,Er,ny).call(this,t,e,n,r,l,u,c,f,(-g-w)/S,b)},T(Et,Er);function cj(s){return decodeURIComponent(escape(s))}let AA=null,oT=null;function hj(s){return AA||(AA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,oT=new Map([["ﬅ","ſt"]])),s.replaceAll(AA,(t,e,n)=>e?e.normalize("NFKC"):oT.get(n))}function ek(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),tk(s)}const qw="pdfjs_internal_id_";function dj(s,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,r,...l]=e;if(!s(n)&&!Number.isInteger(n)||!t(r))return!1;const u=l.length;let c=!0;switch(r.name){case"XYZ":if(u<2||u>3)return!1;break;case"Fit":case"FitB":return u===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(u>1)return!1;break;case"FitR":if(u!==4)return!1;c=!1;break;default:return!1}for(const f of l)if(!(typeof f=="number"||c&&f===null))return!1;return!0}function oi(s,t,e){return Math.min(Math.max(s,t),e)}function nk(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(tk(s))}function fj(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):bg(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...t){return new Promise(e=>{e(s(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((t,e)=>t+e,0)});const Ga="http://www.w3.org/2000/svg",So=class So{};gt(So,"CSS",96),gt(So,"PDF",72),gt(So,"PDF_TO_CSS_UNITS",So.CSS/So.PDF);let Vl=So;async function vg(s,t="text"){if(Ec(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Ag{constructor({viewBox:t,userUnit:e,scale:n,rotation:r,offsetX:l=0,offsetY:u=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=r,this.offsetX=l,this.offsetY=u,n*=e;const f=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let g,y,b,A;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,y=0,b=0,A=1;break;case 90:g=0,y=1,b=1,A=0;break;case 270:g=0,y=-1,b=-1,A=0;break;case 0:g=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(b=-b,A=-A);let w,S,k,C;g===0?(w=Math.abs(p-t[1])*n+l,S=Math.abs(f-t[0])*n+u,k=(t[3]-t[1])*n,C=(t[2]-t[0])*n):(w=Math.abs(f-t[0])*n+l,S=Math.abs(p-t[1])*n+u,k=(t[2]-t[0])*n,C=(t[3]-t[1])*n),this.transform=[g*n,y*n,b*n,A*n,w-g*n*f-b*n*p,S-y*n*f-A*n*p],this.width=k,this.height=C}get rawDims(){const t=this.viewBox;return Qt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:l=!1}={}){return new Ag({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:l})}convertToViewportPoint(t,e){const n=[t,e];return Et.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];Et.applyTransform(e,this.transform);const n=[t[2],t[3]];return Et.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return Et.applyInverseTransform(n,this.transform),n}}class Yw extends zu{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Tb(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function Xw(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function pj(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function gj(s,t="document.pdf"){if(typeof s!="string")return t;if(Tb(s))return zt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=e.exec(s);let l=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(l&&(l=l[0],l.includes("%")))try{l=n.exec(decodeURIComponent(l))[0]}catch{}return l||t}class uT{constructor(){gt(this,"started",Object.create(null));gt(this,"times",[])}time(t){t in this.started&&zt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||zt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:r,end:l}of this.times)t.push(`${n.padEnd(e)} ${l-r}ms
`);return t.join("")}}function Ec(s,t){const e=t?URL.parse(s,t):URL.parse(s);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Ys(s){s.preventDefault()}function nn(s){s.preventDefault(),s.stopPropagation()}var Uf;class $w{static toDateObject(t){if(!t||typeof t!="string")return null;d(this,Uf)||x(this,Uf,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=d(this,Uf).exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let u=parseInt(e[4],10);u=u>=0&&u<=23?u:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let f=parseInt(e[6],10);f=f>=0&&f<=59?f:0;const p=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(u+=g,c+=y):p==="+"&&(u-=g,c-=y),new Date(Date.UTC(n,r,l,u,c,f))}}Uf=new WeakMap,T($w,Uf);function mj(s,{scale:t=1,rotation:e=0}){const{width:n,height:r}=s.attributes.style,l=[0,0,parseInt(n),parseInt(r)];return new Ag({viewBox:l,userUnit:1,scale:t,rotation:e})}function Ww(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(zt(`Not a valid color format: "${s}"`),[0,0,0])}function yj(s){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,Ww(n))}t.remove()}function Ie(s){const{a:t,b:e,c:n,d:r,e:l,f:u}=s.getTransform();return[t,e,n,r,l,u]}function ta(s){const{a:t,b:e,c:n,d:r,e:l,f:u}=s.getTransform().invertSelf();return[t,e,n,r,l,u]}function ku(s,t,e=!1,n=!0){if(t instanceof Ag){const{pageWidth:r,pageHeight:l}=t.rawDims,{style:u}=s,c=jn.isCSSRoundSupported,f=`var(--total-scale-factor) * ${r}px`,p=`var(--total-scale-factor) * ${l}px`,g=c?`round(down, ${f}, var(--scale-round-x))`:`calc(${f})`,y=c?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!e||t.rotation%180===0?(u.width=g,u.height=y):(u.width=y,u.height=g)}n&&s.setAttribute("data-main-rotation",t.rotation)}class Cr{constructor(){const{pixelRatio:t}=Cr;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,r){let l=1/0,u=1/0,c=1/0;n>0&&(l=Math.sqrt(n/(t*e))),r!==-1&&(u=r/t,c=r/e);const f=Math.min(l,u,c);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}}const nS=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var ll,xo,ds,ol,Gf,Gc,Vf,Xy,ik,In,sk,ak,ff,rk,iy;const Ya=class Ya{constructor(t){T(this,In);T(this,ll,null);T(this,xo,null);T(this,ds);T(this,ol,null);T(this,Gf,null);T(this,Gc,null);x(this,ds,t),d(Ya,Vf)||x(Ya,Vf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=x(this,ll,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=d(this,ds)._uiManager._signal;t.addEventListener("contextmenu",Ys,{signal:e}),t.addEventListener("pointerdown",D(Ya,Xy,ik),{signal:e});const n=x(this,ol,document.createElement("div"));n.className="buttons",t.append(n);const r=d(this,ds).toolbarPosition;if(r){const{style:l}=t,u=d(this,ds)._uiManager.direction==="ltr"?1-r[0]:r[0];l.insetInlineEnd=`${100*u}%`,l.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return D(this,In,rk).call(this),t}get div(){return d(this,ll)}hide(){var t;d(this,ll).classList.add("hidden"),(t=d(this,xo))==null||t.hideDropdown()}show(){var t;d(this,ll).classList.remove("hidden"),(t=d(this,Gf))==null||t.shown()}async addAltText(t){const e=await t.render();D(this,In,ff).call(this,e),d(this,ol).prepend(e,d(this,In,iy)),x(this,Gf,t)}addColorPicker(t){x(this,xo,t);const e=t.renderButton();D(this,In,ff).call(this,e),d(this,ol).prepend(e,d(this,In,iy))}async addEditSignatureButton(t){const e=x(this,Gc,await t.renderEditButton(d(this,ds)));D(this,In,ff).call(this,e),d(this,ol).prepend(e,d(this,In,iy))}updateEditSignatureButton(t){d(this,Gc)&&(d(this,Gc).title=t)}remove(){var t;d(this,ll).remove(),(t=d(this,xo))==null||t.destroy(),x(this,xo,null)}};ll=new WeakMap,xo=new WeakMap,ds=new WeakMap,ol=new WeakMap,Gf=new WeakMap,Gc=new WeakMap,Vf=new WeakMap,Xy=new WeakSet,ik=function(t){t.stopPropagation()},In=new WeakSet,sk=function(t){d(this,ds)._focusEventsAllowed=!1,nn(t)},ak=function(t){d(this,ds)._focusEventsAllowed=!0,nn(t)},ff=function(t){const e=d(this,ds)._uiManager._signal;t.addEventListener("focusin",D(this,In,sk).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",D(this,In,ak).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ys,{signal:e})},rk=function(){const{editorType:t,_uiManager:e}=d(this,ds),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",d(Ya,Vf)[t]),D(this,In,ff).call(this,n),n.addEventListener("click",r=>{e.delete()},{signal:e._signal}),d(this,ol).append(n)},iy=function(){const t=document.createElement("div");return t.className="divider",t},T(Ya,Xy),T(Ya,Vf,null);let iS=Ya;var qf,Eo,_o,ql,lk,ok,uk;class bj{constructor(t){T(this,ql);T(this,qf,null);T(this,Eo,null);T(this,_o);x(this,_o,t)}show(t,e,n){const[r,l]=D(this,ql,ok).call(this,e,n),{style:u}=d(this,Eo)||x(this,Eo,D(this,ql,lk).call(this));t.append(d(this,Eo)),u.insetInlineEnd=`${100*r}%`,u.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,Eo).remove()}}qf=new WeakMap,Eo=new WeakMap,_o=new WeakMap,ql=new WeakSet,lk=function(){const t=x(this,Eo,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Ys,{signal:d(this,_o)._signal});const e=x(this,qf,document.createElement("div"));return e.className="buttons",t.append(e),D(this,ql,uk).call(this),t},ok=function(t,e){let n=0,r=0;for(const l of t){const u=l.y+l.height;if(u<n)continue;const c=l.x+(e?l.width:0);if(u>n){r=c,n=u;continue}e?c>r&&(r=c):c<r&&(r=c)}return[e?1-r:r,n]},uk=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=d(this,_o)._signal;t.addEventListener("contextmenu",Ys,{signal:n}),t.addEventListener("click",()=>{d(this,_o).highlightSelection("floating_button")},{signal:n}),d(this,qf).append(t)};function Kw(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}var $y;class vj{constructor(){T(this,$y,0)}get id(){return`${tj}${ei(this,$y)._++}`}}$y=new WeakMap;var Vc,Yf,Yn,qc,sy;const lx=class lx{constructor(){T(this,qc);T(this,Vc,ek());T(this,Yf,0);T(this,Yn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const l=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Qt(this,"_isSVGFittingCanvas",l)}async getFromFile(t){const{lastModified:e,name:n,size:r,type:l}=t;return D(this,qc,sy).call(this,`${e}_${n}_${r}_${l}`,t)}async getFromUrl(t){return D(this,qc,sy).call(this,t,t)}async getFromBlob(t,e){const n=await e;return D(this,qc,sy).call(this,t,n)}async getFromId(t){d(this,Yn)||x(this,Yn,new Map);const e=d(this,Yn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){d(this,Yn)||x(this,Yn,new Map);let n=d(this,Yn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${d(this,Vc)}_${ei(this,Yf)._++}`,refCounter:1,isSvg:!1},d(this,Yn).set(t,n),d(this,Yn).set(n.id,n),n}getSvgUrl(t){const e=d(this,Yn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;d(this,Yn)||x(this,Yn,new Map);const e=d(this,Yn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const l=new OffscreenCanvas(n.width,n.height);l.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=l.convertToBlob()}(r=n.close)==null||r.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${d(this,Vc)}_`)}};Vc=new WeakMap,Yf=new WeakMap,Yn=new WeakMap,qc=new WeakSet,sy=async function(t,e){d(this,Yn)||x(this,Yn,new Map);let n=d(this,Yn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${d(this,Vc)}_${ei(this,Yf)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(n.url=e,r=await vg(e,"blob")):e instanceof File?r=n.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const l=lx._isSVGFittingCanvas,u=new FileReader,c=new Image,f=new Promise((p,g)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,p()},u.onload=async()=>{const y=n.svgUrl=u.result;c.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},c.onerror=u.onerror=g});u.readAsDataURL(r),await f}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){zt(r),n=null}return d(this,Yn).set(t,n),n&&d(this,Yn).set(n.id,n),n};let sS=lx;var $e,ul,Xf,ze;class Aj{constructor(t=128){T(this,$e,[]);T(this,ul,!1);T(this,Xf);T(this,ze,-1);x(this,Xf,t)}add({cmd:t,undo:e,post:n,mustExec:r,type:l=NaN,overwriteIfSameType:u=!1,keepUndo:c=!1}){if(r&&t(),d(this,ul))return;const f={cmd:t,undo:e,post:n,type:l};if(d(this,ze)===-1){d(this,$e).length>0&&(d(this,$e).length=0),x(this,ze,0),d(this,$e).push(f);return}if(u&&d(this,$e)[d(this,ze)].type===l){c&&(f.undo=d(this,$e)[d(this,ze)].undo),d(this,$e)[d(this,ze)]=f;return}const p=d(this,ze)+1;p===d(this,Xf)?d(this,$e).splice(0,1):(x(this,ze,p),p<d(this,$e).length&&d(this,$e).splice(p)),d(this,$e).push(f)}undo(){if(d(this,ze)===-1)return;x(this,ul,!0);const{undo:t,post:e}=d(this,$e)[d(this,ze)];t(),e==null||e(),x(this,ul,!1),x(this,ze,d(this,ze)-1)}redo(){if(d(this,ze)<d(this,$e).length-1){x(this,ze,d(this,ze)+1),x(this,ul,!0);const{cmd:t,post:e}=d(this,$e)[d(this,ze)];t(),e==null||e(),x(this,ul,!1)}}hasSomethingToUndo(){return d(this,ze)!==-1}hasSomethingToRedo(){return d(this,ze)<d(this,$e).length-1}cleanType(t){if(d(this,ze)!==-1){for(let e=d(this,ze);e>=0;e--)if(d(this,$e)[e].type!==t){d(this,$e).splice(e+1,d(this,ze)-e),x(this,ze,e);return}d(this,$e).length=0,x(this,ze,-1)}}destroy(){x(this,$e,null)}}$e=new WeakMap,ul=new WeakMap,Xf=new WeakMap,ze=new WeakMap;var Wy,ck;class Sg{constructor(t){T(this,Wy);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=jn.platform;for(const[n,r,l={}]of t)for(const u of n){const c=u.startsWith("mac+");e&&c?(this.callbacks.set(u.slice(4),{callback:r,options:l}),this.allKeys.add(u.split("+").at(-1))):!e&&!c&&(this.callbacks.set(u,{callback:r,options:l}),this.allKeys.add(u.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(D(this,Wy,ck).call(this,e));if(!n)return;const{callback:r,options:{bubbles:l=!1,args:u=[],checker:c=null}}=n;c&&!c(t,e)||(r.bind(t,...u,e)(),l||nn(e))}}Wy=new WeakSet,ck=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Ky=class Ky{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return yj(t),Qt(this,"_colors",t)}convert(t){const e=Ww(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,r]of this._colors)if(r.every((l,u)=>l===e[u]))return Ky._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Et.makeHexColor(...e):t}};gt(Ky,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let aS=Ky;var Yc,Ii,dn,kn,Xc,$a,$c,fs,cl,hl,Wc,Co,sa,Ns,To,$f,Wf,Kc,Kf,aa,dl,Qc,fl,ra,Qy,pl,Qf,gl,Do,ko,ml,Zf,vn,de,Wa,yl,Ro,Jf,tp,bl,la,Ka,ep,ps,bt,ay,rS,hk,dk,ry,fk,pk,gk,lS,mk,oS,uS,yk,ni,Va,bk,vk,cS,Ak,pf,hS;const zc=class zc{constructor(t,e,n,r,l,u,c,f,p,g,y,b,A,w){T(this,bt);T(this,Yc,new AbortController);T(this,Ii,null);T(this,dn,new Map);T(this,kn,new Map);T(this,Xc,null);T(this,$a,null);T(this,$c,null);T(this,fs,new Aj);T(this,cl,null);T(this,hl,null);T(this,Wc,0);T(this,Co,new Set);T(this,sa,null);T(this,Ns,null);T(this,To,new Set);gt(this,"_editorUndoBar",null);T(this,$f,!1);T(this,Wf,!1);T(this,Kc,!1);T(this,Kf,null);T(this,aa,null);T(this,dl,null);T(this,Qc,null);T(this,fl,!1);T(this,ra,null);T(this,Qy,new vj);T(this,pl,!1);T(this,Qf,!1);T(this,gl,null);T(this,Do,null);T(this,ko,null);T(this,ml,null);T(this,Zf,null);T(this,vn,Pt.NONE);T(this,de,new Set);T(this,Wa,null);T(this,yl,null);T(this,Ro,null);T(this,Jf,null);T(this,tp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});T(this,bl,[0,0]);T(this,la,null);T(this,Ka,null);T(this,ep,null);T(this,ps,null);const S=this._signal=d(this,Yc).signal;x(this,Ka,t),x(this,ep,e),x(this,Xc,n),x(this,yl,r),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:S}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),l._on("setpreference",this.onSetPreference.bind(this),{signal:S}),l._on("switchannotationeditorparams",k=>this.updateParams(k.type,k.value),{signal:S}),D(this,bt,fk).call(this),D(this,bt,yk).call(this),D(this,bt,lS).call(this),x(this,$a,u.annotationStorage),x(this,Kf,u.filterFactory),x(this,Ro,c),x(this,Qc,f||null),x(this,$f,p),x(this,Wf,g),x(this,Kc,y),x(this,Zf,b||null),this.viewParameters={realScale:Vl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=A||null,this._supportsPinchToZoom=w!==!1}static get _keyboardManager(){const t=zc.prototype,e=u=>d(u,Ka).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&u.hasSomethingToControl(),n=(u,{target:c})=>{if(c instanceof HTMLInputElement){const{type:f}=c;return f!=="text"&&f!=="number"}return!0},r=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return Qt(this,"_keyboardManager",new Sg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&d(u,Ka).contains(c)&&!u.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(u,{target:c})=>!(c instanceof HTMLButtonElement)&&d(u,Ka).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}destroy(){var t,e,n,r,l,u,c,f;(t=d(this,ps))==null||t.resolve(),x(this,ps,null),(e=d(this,Yc))==null||e.abort(),x(this,Yc,null),this._signal=null;for(const p of d(this,kn).values())p.destroy();d(this,kn).clear(),d(this,dn).clear(),d(this,To).clear(),(n=d(this,ml))==null||n.clear(),x(this,Ii,null),d(this,de).clear(),d(this,fs).destroy(),(r=d(this,Xc))==null||r.destroy(),(l=d(this,yl))==null||l.destroy(),(u=d(this,ra))==null||u.hide(),x(this,ra,null),(c=d(this,ko))==null||c.destroy(),x(this,ko,null),d(this,aa)&&(clearTimeout(d(this,aa)),x(this,aa,null)),d(this,la)&&(clearTimeout(d(this,la)),x(this,la,null)),(f=this._editorUndoBar)==null||f.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return d(this,Zf)}get useNewAltTextFlow(){return d(this,Wf)}get useNewAltTextWhenAddingImage(){return d(this,Kc)}get hcmFilter(){return Qt(this,"hcmFilter",d(this,Ro)?d(this,Kf).addHCMFilter(d(this,Ro).foreground,d(this,Ro).background):"none")}get direction(){return Qt(this,"direction",getComputedStyle(d(this,Ka)).direction)}get highlightColors(){return Qt(this,"highlightColors",d(this,Qc)?new Map(d(this,Qc).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Qt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),x(this,hl,t)}setMainHighlightColorPicker(t){x(this,ko,t)}editAltText(t,e=!1){var n;(n=d(this,Xc))==null||n.editAltText(this,t,e)}getSignature(t){var e;(e=d(this,yl))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return d(this,yl)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":x(this,Kc,e);break}}onPageChanging({pageNumber:t}){x(this,Wc,t-1)}focusMainContainer(){d(this,Ka).focus()}findParent(t,e){for(const n of d(this,kn).values()){const{x:r,y:l,width:u,height:c}=n.div.getBoundingClientRect();if(t>=r&&t<=r+u&&e>=l&&e<=l+c)return n}return null}disableUserSelect(t=!1){d(this,ep).classList.toggle("noUserSelect",t)}addShouldRescale(t){d(this,To).add(t)}removeShouldRescale(t){d(this,To).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Vl.PDF_TO_CSS_UNITS;for(const n of d(this,To))n.onScaleChanging();(e=d(this,hl))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:l,focusOffset:u}=e,c=e.toString(),p=D(this,bt,ay).call(this,e).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;e.empty();const y=D(this,bt,rS).call(this,p),b=d(this,vn)===Pt.NONE,A=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:n,anchorOffset:r,focusNode:l,focusOffset:u,text:c}),b&&this.showAllEditors("highlight",!0,!0)};if(b){this.switchToMode(Pt.HIGHLIGHT,A);return}A()}addToAnnotationStorage(t){!t.isEmpty()&&d(this,$a)&&!d(this,$a).has(t.id)&&d(this,$a).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,d(this,fl)&&(x(this,fl,!1),D(this,bt,ry).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of d(this,de))if(e.div.contains(t)){x(this,Do,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!d(this,Do))return;const[t,e]=d(this,Do);x(this,Do,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){D(this,bt,lS).call(this),D(this,bt,oS).call(this)}removeEditListeners(){D(this,bt,mk).call(this),D(this,bt,uS).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of d(this,Ns))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of d(this,Ns))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=d(this,Ii))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of d(this,de)){const l=r.serialize(!0);l&&e.push(l)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const u of d(this,Ns))if(u.isHandlingMimeForPasting(l.type)){u.paste(l,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(l){zt(`paste: "${l.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const l=[];for(const f of n){const p=await r.deserialize(f);if(!p)return;l.push(p)}const u=()=>{for(const f of l)D(this,bt,cS).call(this,f);D(this,bt,hS).call(this,l)},c=()=>{for(const f of l)f.remove()};this.addCommands({cmd:u,undo:c,mustExec:!0})}catch(l){zt(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,vn)!==Pt.NONE&&!this.isEditorHandlingKeyboard&&zc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,fl)&&(x(this,fl,!1),D(this,bt,ry).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(D(this,bt,pk).call(this),D(this,bt,oS).call(this),D(this,bt,ni).call(this,{isEditing:d(this,vn)!==Pt.NONE,isEmpty:D(this,bt,pf).call(this),hasSomethingToUndo:d(this,fs).hasSomethingToUndo(),hasSomethingToRedo:d(this,fs).hasSomethingToRedo(),hasSelectedEditor:!1})):(D(this,bt,gk).call(this),D(this,bt,uS).call(this),D(this,bt,ni).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!d(this,Ns)){x(this,Ns,t);for(const e of d(this,Ns))D(this,bt,Va).call(this,e.defaultPropertiesToUpdate)}}getId(){return d(this,Qy).id}get currentLayer(){return d(this,kn).get(d(this,Wc))}getLayer(t){return d(this,kn).get(t)}get currentPageIndex(){return d(this,Wc)}addLayer(t){d(this,kn).set(t.pageIndex,t),d(this,pl)?t.enable():t.disable()}removeLayer(t){d(this,kn).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){var r,l,u;if(d(this,vn)!==t&&!(d(this,ps)&&(await d(this,ps).promise,!d(this,ps)))){if(x(this,ps,Promise.withResolvers()),(r=d(this,hl))==null||r.commitOrRemove(),x(this,vn,t),t===Pt.NONE){this.setEditingState(!1),D(this,bt,vk).call(this),(l=this._editorUndoBar)==null||l.hide(),d(this,ps).resolve();return}t===Pt.SIGNATURE&&await((u=d(this,yl))==null?void 0:u.loadSignatures()),this.setEditingState(!0),await D(this,bt,bk).call(this),this.unselectAll();for(const c of d(this,kn).values())c.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),d(this,ps).resolve();return}for(const c of d(this,dn).values())c.annotationElementId===e?(this.setSelected(c),c.enterInEditMode()):c.unselect();d(this,ps).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==d(this,vn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(d(this,Ns)){switch(t){case Jt.CREATE:this.currentLayer.addNewEditor(e);return;case Jt.HIGHLIGHT_DEFAULT_COLOR:(n=d(this,ko))==null||n.updateColor(e);break;case Jt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,Jf)||x(this,Jf,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const r of d(this,de))r.updateParams(t,e);for(const r of d(this,Ns))r.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var l;for(const u of d(this,dn).values())u.editorType===t&&u.show(e);(((l=d(this,Jf))==null?void 0:l.get(Jt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&D(this,bt,Va).call(this,[[Jt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(d(this,Qf)!==t){x(this,Qf,t);for(const e of d(this,kn).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of d(this,dn).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return d(this,dn).get(t)}addEditor(t){d(this,dn).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(d(this,aa)&&clearTimeout(d(this,aa)),x(this,aa,setTimeout(()=>{this.focusMainContainer(),x(this,aa,null)},0))),d(this,dn).delete(t.id),t.annotationElementId&&((e=d(this,ml))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!d(this,Co).has(t.annotationElementId))&&((n=d(this,$a))==null||n.remove(t.id))}addDeletedAnnotationElement(t){d(this,Co).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return d(this,Co).has(t)}removeDeletedAnnotationElement(t){d(this,Co).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){d(this,Ii)!==t&&(x(this,Ii,t),t&&D(this,bt,Va).call(this,t.propertiesToUpdate))}updateUI(t){d(this,bt,Ak)===t&&D(this,bt,Va).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){D(this,bt,Va).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(d(this,de).has(t)){d(this,de).delete(t),t.unselect(),D(this,bt,ni).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,de).add(t),t.select(),D(this,bt,Va).call(this,t.propertiesToUpdate),D(this,bt,ni).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=d(this,hl))==null||e.commitOrRemove();for(const n of d(this,de))n!==t&&n.unselect();d(this,de).clear(),d(this,de).add(t),t.select(),D(this,bt,Va).call(this,t.propertiesToUpdate),D(this,bt,ni).call(this,{hasSelectedEditor:!0})}isSelected(t){return d(this,de).has(t)}get firstSelectedEditor(){return d(this,de).values().next().value}unselect(t){t.unselect(),d(this,de).delete(t),D(this,bt,ni).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,de).size!==0}get isEnterHandled(){return d(this,de).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;d(this,fs).undo(),D(this,bt,ni).call(this,{hasSomethingToUndo:d(this,fs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:D(this,bt,pf).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){d(this,fs).redo(),D(this,bt,ni).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,fs).hasSomethingToRedo(),isEmpty:D(this,bt,pf).call(this)})}addCommands(t){d(this,fs).add(t),D(this,bt,ni).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:D(this,bt,pf).call(this)})}cleanUndoStack(t){d(this,fs).cleanType(t)}delete(){var l;this.commitOrRemove();const t=(l=this.currentLayer)==null?void 0:l.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...d(this,de)],n=()=>{var u;(u=this._editorUndoBar)==null||u.show(r,e.length===1?e[0].editorType:e.length);for(const c of e)c.remove()},r=()=>{for(const u of e)D(this,bt,cS).call(this,u)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=d(this,Ii))==null||t.commitOrRemove()}hasSomethingToControl(){return d(this,Ii)||this.hasSelection}selectAll(){for(const t of d(this,de))t.commit();D(this,bt,hS).call(this,d(this,dn).values())}unselectAll(){var t;if(!(d(this,Ii)&&(d(this,Ii).commitOrRemove(),d(this,vn)!==Pt.NONE))&&!((t=d(this,hl))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of d(this,de))e.unselect();d(this,de).clear(),D(this,bt,ni).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;d(this,bl)[0]+=t,d(this,bl)[1]+=e;const[r,l]=d(this,bl),u=[...d(this,de)],c=1e3;d(this,la)&&clearTimeout(d(this,la)),x(this,la,setTimeout(()=>{x(this,la,null),d(this,bl)[0]=d(this,bl)[1]=0,this.addCommands({cmd:()=>{for(const f of u)d(this,dn).has(f.id)&&(f.translateInPage(r,l),f.translationDone())},undo:()=>{for(const f of u)d(this,dn).has(f.id)&&(f.translateInPage(-r,-l),f.translationDone())},mustExec:!1})},c));for(const f of u)f.translateInPage(t,e),f.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,sa,new Map);for(const t of d(this,de))d(this,sa).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,sa))return!1;this.disableUserSelect(!1);const t=d(this,sa);x(this,sa,null);let e=!1;for(const[{x:r,y:l,pageIndex:u},c]of t)c.newX=r,c.newY=l,c.newPageIndex=u,e||(e=r!==c.savedX||l!==c.savedY||u!==c.savedPageIndex);if(!e)return!1;const n=(r,l,u,c)=>{if(d(this,dn).has(r.id)){const f=d(this,kn).get(c);f?r._setParentAndPosition(f,l,u):(r.pageIndex=c,r.x=l,r.y=u)}};return this.addCommands({cmd:()=>{for(const[r,{newX:l,newY:u,newPageIndex:c}]of t)n(r,l,u,c)},undo:()=>{for(const[r,{savedX:l,savedY:u,savedPageIndex:c}]of t)n(r,l,u,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(d(this,sa))for(const n of d(this,sa).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||d(this,de).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return d(this,Ii)===t}getActive(){return d(this,Ii)}getMode(){return d(this,vn)}get imageManager(){return Qt(this,"imageManager",new sS)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,g=e.rangeCount;p<g;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:r,width:l,height:u}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(p,g,y,b)=>({x:(g-r)/u,y:1-(p+y-n)/l,width:b/u,height:y/l});break;case"180":c=(p,g,y,b)=>({x:1-(p+y-n)/l,y:1-(g+b-r)/u,width:y/l,height:b/u});break;case"270":c=(p,g,y,b)=>({x:1-(g+b-r)/u,y:(p-n)/l,width:b/u,height:y/l});break;default:c=(p,g,y,b)=>({x:(p-n)/l,y:(g-r)/u,width:y/l,height:b/u});break}const f=[];for(let p=0,g=e.rangeCount;p<g;p++){const y=e.getRangeAt(p);if(!y.collapsed)for(const{x:b,y:A,width:w,height:S}of y.getClientRects())w===0||S===0||f.push(c(b,A,w,S))}return f.length===0?null:f}addChangedExistingAnnotation({annotationElementId:t,id:e}){(d(this,$c)||x(this,$c,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=d(this,$c))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=d(this,$c))==null?void 0:r.get(t.data.id);if(!e)return;const n=d(this,$a).getRawValue(e);n&&(d(this,vn)===Pt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var l;const r=(l=d(this,ml))==null?void 0:l.get(t);r&&(r.setCanvas(e,n),d(this,ml).delete(t))}addMissingCanvas(t,e){(d(this,ml)||x(this,ml,new Map)).set(t,e)}};Yc=new WeakMap,Ii=new WeakMap,dn=new WeakMap,kn=new WeakMap,Xc=new WeakMap,$a=new WeakMap,$c=new WeakMap,fs=new WeakMap,cl=new WeakMap,hl=new WeakMap,Wc=new WeakMap,Co=new WeakMap,sa=new WeakMap,Ns=new WeakMap,To=new WeakMap,$f=new WeakMap,Wf=new WeakMap,Kc=new WeakMap,Kf=new WeakMap,aa=new WeakMap,dl=new WeakMap,Qc=new WeakMap,fl=new WeakMap,ra=new WeakMap,Qy=new WeakMap,pl=new WeakMap,Qf=new WeakMap,gl=new WeakMap,Do=new WeakMap,ko=new WeakMap,ml=new WeakMap,Zf=new WeakMap,vn=new WeakMap,de=new WeakMap,Wa=new WeakMap,yl=new WeakMap,Ro=new WeakMap,Jf=new WeakMap,tp=new WeakMap,bl=new WeakMap,la=new WeakMap,Ka=new WeakMap,ep=new WeakMap,ps=new WeakMap,bt=new WeakSet,ay=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},rS=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of d(this,kn).values())if(n.hasTextLayer(t))return n;return null},hk=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=D(this,bt,ay).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(d(this,ra)||x(this,ra,new bj(this)),d(this,ra).show(n,r,this.direction==="ltr"))},dk=function(){var l,u,c;const t=document.getSelection();if(!t||t.isCollapsed){d(this,Wa)&&((l=d(this,ra))==null||l.hide(),x(this,Wa,null),D(this,bt,ni).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===d(this,Wa))return;const r=D(this,bt,ay).call(this,t).closest(".textLayer");if(!r){d(this,Wa)&&((u=d(this,ra))==null||u.hide(),x(this,Wa,null),D(this,bt,ni).call(this,{hasSelectedText:!1}));return}if((c=d(this,ra))==null||c.hide(),x(this,Wa,e),D(this,bt,ni).call(this,{hasSelectedText:!0}),!(d(this,vn)!==Pt.HIGHLIGHT&&d(this,vn)!==Pt.NONE)&&(d(this,vn)===Pt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,fl,this.isShiftKeyDown),!this.isShiftKeyDown)){const f=d(this,vn)===Pt.HIGHLIGHT?D(this,bt,rS).call(this,r):null;f==null||f.toggleDrawing();const p=new AbortController,g=this.combinedSignal(p),y=b=>{b.type==="pointerup"&&b.button!==0||(p.abort(),f==null||f.toggleDrawing(!0),b.type==="pointerup"&&D(this,bt,ry).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("blur",y,{signal:g})}},ry=function(t=""){d(this,vn)===Pt.HIGHLIGHT?this.highlightSelection(t):d(this,$f)&&D(this,bt,hk).call(this)},fk=function(){document.addEventListener("selectionchange",D(this,bt,dk).bind(this),{signal:this._signal})},pk=function(){if(d(this,dl))return;x(this,dl,new AbortController);const t=this.combinedSignal(d(this,dl));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},gk=function(){var t;(t=d(this,dl))==null||t.abort(),x(this,dl,null)},lS=function(){if(d(this,gl))return;x(this,gl,new AbortController);const t=this.combinedSignal(d(this,gl));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},mk=function(){var t;(t=d(this,gl))==null||t.abort(),x(this,gl,null)},oS=function(){if(d(this,cl))return;x(this,cl,new AbortController);const t=this.combinedSignal(d(this,cl));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},uS=function(){var t;(t=d(this,cl))==null||t.abort(),x(this,cl,null)},yk=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},ni=function(t){Object.entries(t).some(([n,r])=>d(this,tp)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,tp),t)}),d(this,vn)===Pt.HIGHLIGHT&&t.hasSelectedEditor===!1&&D(this,bt,Va).call(this,[[Jt.HIGHLIGHT_FREE,!0]]))},Va=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},bk=async function(){if(!d(this,pl)){x(this,pl,!0);const t=[];for(const e of d(this,kn).values())t.push(e.enable());await Promise.all(t);for(const e of d(this,dn).values())e.enable()}},vk=function(){if(this.unselectAll(),d(this,pl)){x(this,pl,!1);for(const t of d(this,kn).values())t.disable();for(const t of d(this,dn).values())t.disable()}},cS=function(t){const e=d(this,kn).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},Ak=function(){let t=null;for(t of d(this,de));return t},pf=function(){if(d(this,dn).size===0)return!0;if(d(this,dn).size===1)for(const t of d(this,dn).values())return t.isEmpty();return!1},hS=function(t){for(const e of d(this,de))e.unselect();d(this,de).clear();for(const e of t)e.isEmpty()||(d(this,de).add(e),e.select());D(this,bt,ni).call(this,{hasSelectedEditor:this.hasSelection})},gt(zc,"TRANSLATE_SMALL",1),gt(zc,"TRANSLATE_BIG",10);let Ru=zc;var An,oa,Os,Zc,ua,ji,Jc,ca,Si,Qa,Mo,ha,vl,Vs,gf,ly;const ii=class ii{constructor(t){T(this,Vs);T(this,An,null);T(this,oa,!1);T(this,Os,null);T(this,Zc,null);T(this,ua,null);T(this,ji,null);T(this,Jc,!1);T(this,ca,null);T(this,Si,null);T(this,Qa,null);T(this,Mo,null);T(this,ha,!1);x(this,Si,t),x(this,ha,t._uiManager.useNewAltTextFlow),d(ii,vl)||x(ii,vl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){ii._l10n??(ii._l10n=t)}async render(){const t=x(this,Os,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=x(this,Zc,document.createElement("span"));t.append(e),d(this,ha)?(t.classList.add("new"),t.setAttribute("data-l10n-id",d(ii,vl).missing),e.setAttribute("data-l10n-id",d(ii,vl)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=d(this,Si)._uiManager._signal;t.addEventListener("contextmenu",Ys,{signal:n}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:n});const r=l=>{l.preventDefault(),d(this,Si)._uiManager.editAltText(d(this,Si)),d(this,ha)&&d(this,Si)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,Vs,gf)}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(x(this,Jc,!0),r(l))},{signal:n}),await D(this,Vs,ly).call(this),t}finish(){d(this,Os)&&(d(this,Os).focus({focusVisible:d(this,Jc)}),x(this,Jc,!1))}isEmpty(){return d(this,ha)?d(this,An)===null:!d(this,An)&&!d(this,oa)}hasData(){return d(this,ha)?d(this,An)!==null||!!d(this,Qa):this.isEmpty()}get guessedText(){return d(this,Qa)}async setGuessedText(t){d(this,An)===null&&(x(this,Qa,t),x(this,Mo,await ii._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),D(this,Vs,ly).call(this))}toggleAltTextBadge(t=!1){var e;if(!d(this,ha)||d(this,An)){(e=d(this,ca))==null||e.remove(),x(this,ca,null);return}if(!d(this,ca)){const n=x(this,ca,document.createElement("div"));n.className="noAltTextBadge",d(this,Si).div.append(n)}d(this,ca).classList.toggle("hidden",!t)}serialize(t){let e=d(this,An);return!t&&d(this,Qa)===e&&(e=d(this,Mo)),{altText:e,decorative:d(this,oa),guessedText:d(this,Qa),textWithDisclaimer:d(this,Mo)}}get data(){return{altText:d(this,An),decorative:d(this,oa)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:r,cancel:l=!1}){n&&(x(this,Qa,n),x(this,Mo,r)),!(d(this,An)===t&&d(this,oa)===e)&&(l||(x(this,An,t),x(this,oa,e)),D(this,Vs,ly).call(this))}toggle(t=!1){d(this,Os)&&(!t&&d(this,ji)&&(clearTimeout(d(this,ji)),x(this,ji,null)),d(this,Os).disabled=!t)}shown(){d(this,Si)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,Vs,gf)}})}destroy(){var t,e;(t=d(this,Os))==null||t.remove(),x(this,Os,null),x(this,Zc,null),x(this,ua,null),(e=d(this,ca))==null||e.remove(),x(this,ca,null)}};An=new WeakMap,oa=new WeakMap,Os=new WeakMap,Zc=new WeakMap,ua=new WeakMap,ji=new WeakMap,Jc=new WeakMap,ca=new WeakMap,Si=new WeakMap,Qa=new WeakMap,Mo=new WeakMap,ha=new WeakMap,vl=new WeakMap,Vs=new WeakSet,gf=function(){return d(this,An)&&"added"||d(this,An)===null&&this.guessedText&&"review"||"missing"},ly=async function(){var r,l,u;const t=d(this,Os);if(!t)return;if(d(this,ha)){if(t.classList.toggle("done",!!d(this,An)),t.setAttribute("data-l10n-id",d(ii,vl)[d(this,Vs,gf)]),(r=d(this,Zc))==null||r.setAttribute("data-l10n-id",d(ii,vl)[`${d(this,Vs,gf)}-label`]),!d(this,An)){(l=d(this,ua))==null||l.remove();return}}else{if(!d(this,An)&&!d(this,oa)){t.classList.remove("done"),(u=d(this,ua))==null||u.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=d(this,ua);if(!e){x(this,ua,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${d(this,Si).id}`;const c=100,f=d(this,Si)._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(d(this,ji)),x(this,ji,null)},{once:!0}),t.addEventListener("mouseenter",()=>{x(this,ji,setTimeout(()=>{x(this,ji,null),d(this,ua).classList.add("show"),d(this,Si)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:f}),t.addEventListener("mouseleave",()=>{var p;d(this,ji)&&(clearTimeout(d(this,ji)),x(this,ji,null)),(p=d(this,ua))==null||p.classList.remove("show")},{signal:f})}d(this,oa)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=d(this,An)),e.parentNode||t.append(e);const n=d(this,Si).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},T(ii,vl,null),gt(ii,"_l10n",null);let jy=ii;var th,No,np,ip,sp,ap,rp,Za,Oo,Ja,Lo,tr,Yl,Sk,wk,xk;const ox=class ox{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:l=null,onPinchEnd:u=null,signal:c}){T(this,Yl);T(this,th);T(this,No,!1);T(this,np,null);T(this,ip);T(this,sp);T(this,ap);T(this,rp);T(this,Za,null);T(this,Oo);T(this,Ja,null);T(this,Lo);T(this,tr,null);x(this,th,t),x(this,np,n),x(this,ip,e),x(this,sp,r),x(this,ap,l),x(this,rp,u),x(this,Lo,new AbortController),x(this,Oo,AbortSignal.any([c,d(this,Lo).signal])),t.addEventListener("touchstart",D(this,Yl,Sk).bind(this),{passive:!1,signal:d(this,Oo)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Cr.pixelRatio}destroy(){var t,e;(t=d(this,Lo))==null||t.abort(),x(this,Lo,null),(e=d(this,Za))==null||e.abort(),x(this,Za,null)}};th=new WeakMap,No=new WeakMap,np=new WeakMap,ip=new WeakMap,sp=new WeakMap,ap=new WeakMap,rp=new WeakMap,Za=new WeakMap,Oo=new WeakMap,Ja=new WeakMap,Lo=new WeakMap,tr=new WeakMap,Yl=new WeakSet,Sk=function(t){var r,l,u;if((r=d(this,ip))!=null&&r.call(this))return;if(t.touches.length===1){if(d(this,Za))return;const c=x(this,Za,new AbortController),f=AbortSignal.any([d(this,Oo),c.signal]),p=d(this,th),g={capture:!0,signal:f,passive:!1},y=b=>{var A;b.pointerType==="touch"&&((A=d(this,Za))==null||A.abort(),x(this,Za,null))};p.addEventListener("pointerdown",b=>{b.pointerType==="touch"&&(nn(b),y(b))},g),p.addEventListener("pointerup",y,g),p.addEventListener("pointercancel",y,g);return}if(!d(this,tr)){x(this,tr,new AbortController);const c=AbortSignal.any([d(this,Oo),d(this,tr).signal]),f=d(this,th),p={signal:c,capture:!1,passive:!1};f.addEventListener("touchmove",D(this,Yl,wk).bind(this),p);const g=D(this,Yl,xk).bind(this);f.addEventListener("touchend",g,p),f.addEventListener("touchcancel",g,p),p.capture=!0,f.addEventListener("pointerdown",nn,p),f.addEventListener("pointermove",nn,p),f.addEventListener("pointercancel",nn,p),f.addEventListener("pointerup",nn,p),(l=d(this,sp))==null||l.call(this)}if(nn(t),t.touches.length!==2||(u=d(this,np))!=null&&u.call(this)){x(this,Ja,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),x(this,Ja,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},wk=function(t){var I;if(!d(this,Ja)||t.touches.length!==2)return;nn(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:r,screenY:l}=e,{screenX:u,screenY:c}=n,f=d(this,Ja),{touch0X:p,touch0Y:g,touch1X:y,touch1Y:b}=f,A=y-p,w=b-g,S=u-r,k=c-l,C=Math.hypot(S,k)||1,N=Math.hypot(A,w)||1;if(!d(this,No)&&Math.abs(N-C)<=ox.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(f.touch0X=r,f.touch0Y=l,f.touch1X=u,f.touch1Y=c,!d(this,No)){x(this,No,!0);return}const O=[(r+u)/2,(l+c)/2];(I=d(this,ap))==null||I.call(this,O,N,C)},xk=function(t){var e;t.touches.length>=2||(d(this,tr)&&(d(this,tr).abort(),x(this,tr,null),(e=d(this,rp))==null||e.call(this)),d(this,Ja)&&(nn(t),x(this,Ja,null),x(this,No,!1)))};let Fy=ox;var Po,Ls,ke,eh,Al,lp,zo,Rn,Io,er,Sl,op,jo,Fi,up,Fo,nr,da,nh,ih,gs,Bo,cp,Zy,Mt,dS,hp,fS,oy,Ek,_k,pS,uy,gS,Ck,Tk,Dk,mS,kk,yS,Rk,Mk,Nk,bS,mf;const Ut=class Ut{constructor(t){T(this,Mt);T(this,Po,null);T(this,Ls,null);T(this,ke,null);T(this,eh,!1);T(this,Al,null);T(this,lp,"");T(this,zo,!1);T(this,Rn,null);T(this,Io,null);T(this,er,null);T(this,Sl,null);T(this,op,"");T(this,jo,!1);T(this,Fi,null);T(this,up,!1);T(this,Fo,!1);T(this,nr,!1);T(this,da,null);T(this,nh,0);T(this,ih,0);T(this,gs,null);T(this,Bo,null);gt(this,"_isCopy",!1);gt(this,"_editToolbar",null);gt(this,"_initialOptions",Object.create(null));gt(this,"_initialData",null);gt(this,"_isVisible",!0);gt(this,"_uiManager",null);gt(this,"_focusEventsAllowed",!0);T(this,cp,!1);T(this,Zy,Ut._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:r,pageX:l,pageY:u}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[l,u];const[c,f]=this.parentDimensions;this.x=t.x/c,this.y=t.y/f,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Ut.prototype._resizeWithKeyboard,e=Ru.TRANSLATE_SMALL,n=Ru.TRANSLATE_BIG;return Qt(this,"_resizerKeyboardManager",new Sg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Ut.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Qt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Sj({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Ut._l10n??(Ut._l10n=t),Ut._l10nResizer||(Ut._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ut._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Ut._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ae("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,cp)}set _isDraggable(t){var e;x(this,cp,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,Zy)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):D(this,Mt,mf).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(d(this,jo)?x(this,jo,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,r){const[l,u]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/l,this.y=(e+r)/u,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,r]=this.parentDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r),this._onTranslated()}translate(t,e){D(this,Mt,dS).call(this,this.parentDimensions,t,e)}translateInPage(t,e){d(this,Fi)||x(this,Fi,[this.x,this.y,this.width,this.height]),D(this,Mt,dS).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){d(this,Fi)||x(this,Fi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,l]}=this;if(this.x+=t/r,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:u,y:c}=this;const[f,p]=this.getBaseTranslation();u+=f,c+=p;const{style:g}=n;g.left=`${(100*u).toFixed(2)}%`,g.top=`${(100*c).toFixed(2)}%`,this._onTranslating(u,c),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!d(this,Fi)&&(d(this,Fi)[0]!==this.x||d(this,Fi)[1]!==this.y)}get _hasBeenResized(){return!!d(this,Fi)&&(d(this,Fi)[2]!==this.width||d(this,Fi)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Ut,r=n/t,l=n/e;switch(this.rotation){case 90:return[-r,l];case 180:return[r,l];case 270:return[r,-l];default:return[-r,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,r]}=this;let{x:l,y:u,width:c,height:f}=this;if(c*=n,f*=r,l*=n,u*=r,this._mustFixPosition)switch(t){case 0:l=oi(l,0,n-c),u=oi(u,0,r-f);break;case 90:l=oi(l,0,n-f),u=oi(u,c,r);break;case 180:l=oi(l,c,n),u=oi(u,f,r);break;case 270:l=oi(l,f,n),u=oi(u,0,r-c);break}this.x=l/=n,this.y=u/=r;const[p,g]=this.getBaseTranslation();l+=p,u+=g,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*u).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return D(n=Ut,hp,fS).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return D(n=Ut,hp,fS).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,r]=this.parentDimensions,{style:l}=this.div;l.width=`${(100*t/n).toFixed(2)}%`,d(this,zo)||(l.height=`${(100*e/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,r=n.endsWith("%"),l=!d(this,zo)&&e.endsWith("%");if(r&&l)return;const[u,c]=this.parentDimensions;r||(t.width=`${(100*parseFloat(n)/u).toFixed(2)}%`),!d(this,zo)&&!l&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=d(this,ke))==null||t.finish()}async addEditToolbar(){return this._editToolbar||d(this,Fo)?this._editToolbar:(this._editToolbar=new iS(this),this.div.append(this._editToolbar.render()),d(this,ke)&&await this._editToolbar.addAltText(d(this,ke)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=d(this,ke))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){d(this,ke)||(jy.initialize(Ut._l10n),x(this,ke,new jy(this)),d(this,Po)&&(d(this,ke).data=d(this,Po),x(this,Po,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=d(this,ke))==null?void 0:t.data}set altTextData(t){d(this,ke)&&(d(this,ke).data=t)}get guessedAltText(){var t;return(t=d(this,ke))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=d(this,ke))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=d(this,ke))==null?void 0:e.serialize(t)}hasAltText(){return!!d(this,ke)&&!d(this,ke).isEmpty()}hasAltTextData(){var t;return((t=d(this,ke))==null?void 0:t.hasData())??!1}render(){var u;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=d(this,eh)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),D(this,Mt,yS).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[r,l]=this.getInitialTranslation();return this.translate(r,l),Kw(this,t,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,Bo)||x(this,Bo,new Fy({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:D(this,Mt,Ck).bind(this),onPinching:D(this,Mt,Tk).bind(this),onPinchEnd:D(this,Mt,Dk).bind(this),signal:this._uiManager._signal}))),(u=this._uiManager._editorUndoBar)==null||u.hide(),t}pointerdown(t){const{isMac:e}=jn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(x(this,jo,!0),this._isDraggable){D(this,Mt,kk).call(this,t);return}D(this,Mt,mS).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,da)&&clearTimeout(d(this,da)),x(this,da,setTimeout(()=>{var t;x(this,da,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const r=this.parentScale,[l,u]=this.pageDimensions,[c,f]=this.pageTranslation,p=t/r,g=e/r,y=this.x*l,b=this.y*u,A=this.width*l,w=this.height*u;switch(n){case 0:return[y+p+c,u-b-g-w+f,y+p+A+c,u-b-g+f];case 90:return[y+g+c,u-b+p+f,y+g+w+c,u-b+p+A+f];case 180:return[y-p-A+c,u-b+g+f,y-p+c,u-b+g+w+f];case 270:return[y-g-w+c,u-b-p-A+f,y-g+c,u-b-p+f];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,r,l,u]=t,c=l-n,f=u-r;switch(this.rotation){case 0:return[n,e-u,c,f];case 90:return[n,e-r,f,c];case 180:return[l,e-r,c,f];case 270:return[l,e-u,f,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){x(this,Fo,!0)}disableEditMode(){x(this,Fo,!1)}isInEditMode(){return d(this,Fo)}shouldGetKeyboardEvents(){return d(this,nr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:l,innerWidth:u}=window;return e<u&&r>0&&t<l&&n>0}rebuild(){D(this,Mt,yS).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Ae("An editor must be serializable")}static async deserialize(t,e,n){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});r.rotation=t.rotation,x(r,Po,t.accessibilityData),r._isCopy=t.isCopy||!1;const[l,u]=r.pageDimensions,[c,f,p,g]=r.getRectInCurrentCoords(t.rect,u);return r.x=c/l,r.y=f/u,r.width=p/l,r.height=g/u,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=d(this,Sl))==null||t.abort(),x(this,Sl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,da)&&(clearTimeout(d(this,da)),x(this,da,null)),D(this,Mt,mf).call(this),this.removeEditToolbar(),d(this,gs)){for(const n of d(this,gs).values())clearTimeout(n);x(this,gs,null)}this.parent=null,(e=d(this,Bo))==null||e.destroy(),x(this,Bo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(D(this,Mt,Ek).call(this),d(this,Rn).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),x(this,er,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=d(this,Rn).children;if(!d(this,Ls)){x(this,Ls,Array.from(e));const u=D(this,Mt,Rk).bind(this),c=D(this,Mt,Mk).bind(this),f=this._uiManager._signal;for(const p of d(this,Ls)){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",u,{signal:f}),p.addEventListener("blur",c,{signal:f}),p.addEventListener("focus",D(this,Mt,Nk).bind(this,g),{signal:f}),p.setAttribute("data-l10n-id",Ut._l10nResizer[g])}}const n=d(this,Ls)[0];let r=0;for(const u of e){if(u===n)break;r++}const l=(360-this.rotation+this.parentRotation)%360/90*(d(this,Ls).length/4);if(l!==r){if(l<r)for(let c=0;c<r-l;c++)d(this,Rn).append(d(this,Rn).firstChild);else if(l>r)for(let c=0;c<l-r;c++)d(this,Rn).firstChild.before(d(this,Rn).lastChild);let u=0;for(const c of e){const p=d(this,Ls)[u++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Ut._l10nResizer[p])}}D(this,Mt,bS).call(this,0),x(this,nr,!0),d(this,Rn).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){d(this,nr)&&D(this,Mt,gS).call(this,d(this,op),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){D(this,Mt,mf).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,l;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((l=this._editToolbar)==null||l.show())});return}(e=this._editToolbar)==null||e.show(),(n=d(this,ke))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,r,l;(t=d(this,Rn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(l=d(this,ke))==null||l.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return d(this,up)}set isEditing(t){x(this,up,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){x(this,zo,!0);const n=t/e,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){d(this,gs)||x(this,gs,new Map);const{action:n}=t;let r=d(this,gs).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),d(this,gs).delete(n),d(this,gs).size===0&&x(this,gs,null)},Ut._telemetryTimeout),d(this,gs).set(n,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),x(this,eh,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,eh,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Po=new WeakMap,Ls=new WeakMap,ke=new WeakMap,eh=new WeakMap,Al=new WeakMap,lp=new WeakMap,zo=new WeakMap,Rn=new WeakMap,Io=new WeakMap,er=new WeakMap,Sl=new WeakMap,op=new WeakMap,jo=new WeakMap,Fi=new WeakMap,up=new WeakMap,Fo=new WeakMap,nr=new WeakMap,da=new WeakMap,nh=new WeakMap,ih=new WeakMap,gs=new WeakMap,Bo=new WeakMap,cp=new WeakMap,Zy=new WeakMap,Mt=new WeakSet,dS=function([t,e],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},hp=new WeakSet,fS=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},oy=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},Ek=function(){if(d(this,Rn))return;x(this,Rn,document.createElement("div")),d(this,Rn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const r=document.createElement("div");d(this,Rn).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",D(this,Mt,_k).bind(this,n),{signal:e}),r.addEventListener("contextmenu",Ys,{signal:e}),r.tabIndex=-1}this.div.prepend(d(this,Rn))},_k=function(t,e){var g;e.preventDefault();const{isMac:n}=jn.platform;if(e.button!==0||e.ctrlKey&&n)return;(g=d(this,ke))==null||g.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,x(this,Io,[e.screenX,e.screenY]);const l=new AbortController,u=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",D(this,Mt,gS).bind(this,t),{passive:!0,capture:!0,signal:u}),window.addEventListener("touchmove",nn,{passive:!1,signal:u}),window.addEventListener("contextmenu",Ys,{signal:u}),x(this,er,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const c=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var y;l.abort(),this.parent.togglePointerEvents(!0),(y=d(this,ke))==null||y.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=c,this.div.style.cursor=f,D(this,Mt,uy).call(this)};window.addEventListener("pointerup",p,{signal:u}),window.addEventListener("blur",p,{signal:u})},pS=function(t,e,n,r){this.width=n,this.height=r,this.x=t,this.y=e;const[l,u]=this.parentDimensions;this.setDims(l*n,u*r),this.fixAndSetPosition(),this._onResized()},uy=function(){if(!d(this,er))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:r}=d(this,er);x(this,er,null);const l=this.x,u=this.y,c=this.width,f=this.height;l===t&&u===e&&c===n&&f===r||this.addCommands({cmd:D(this,Mt,pS).bind(this,l,u,c,f),undo:D(this,Mt,pS).bind(this,t,e,n,r),mustExec:!0})},gS=function(t,e){const[n,r]=this.parentDimensions,l=this.x,u=this.y,c=this.width,f=this.height,p=Ut.MIN_SIZE/n,g=Ut.MIN_SIZE/r,y=D(this,Mt,oy).call(this,this.rotation),b=(F,q)=>[y[0]*F+y[2]*q,y[1]*F+y[3]*q],A=D(this,Mt,oy).call(this,360-this.rotation),w=(F,q)=>[A[0]*F+A[2]*q,A[1]*F+A[3]*q];let S,k,C=!1,N=!1;switch(t){case"topLeft":C=!0,S=(F,q)=>[0,0],k=(F,q)=>[F,q];break;case"topMiddle":S=(F,q)=>[F/2,0],k=(F,q)=>[F/2,q];break;case"topRight":C=!0,S=(F,q)=>[F,0],k=(F,q)=>[0,q];break;case"middleRight":N=!0,S=(F,q)=>[F,q/2],k=(F,q)=>[0,q/2];break;case"bottomRight":C=!0,S=(F,q)=>[F,q],k=(F,q)=>[0,0];break;case"bottomMiddle":S=(F,q)=>[F/2,q],k=(F,q)=>[F/2,0];break;case"bottomLeft":C=!0,S=(F,q)=>[0,q],k=(F,q)=>[F,0];break;case"middleLeft":N=!0,S=(F,q)=>[0,q/2],k=(F,q)=>[F,q/2];break}const O=S(c,f),I=k(c,f);let z=b(...I);const L=Ut._round(l+z[0]),B=Ut._round(u+z[1]);let W=1,Q=1,st,X;if(e.fromKeyboard)({deltaX:st,deltaY:X}=e);else{const{screenX:F,screenY:q}=e,[yt,xt]=d(this,Io);[st,X]=this.screenToPageTranslation(F-yt,q-xt),d(this,Io)[0]=F,d(this,Io)[1]=q}if([st,X]=w(st/n,X/r),C){const F=Math.hypot(c,f);W=Q=Math.max(Math.min(Math.hypot(I[0]-O[0]-st,I[1]-O[1]-X)/F,1/c,1/f),p/c,g/f)}else N?W=oi(Math.abs(I[0]-O[0]-st),p,1)/c:Q=oi(Math.abs(I[1]-O[1]-X),g,1)/f;const Z=Ut._round(c*W),ct=Ut._round(f*Q);z=b(...k(Z,ct));const J=L-z[0],ht=B-z[1];d(this,Fi)||x(this,Fi,[this.x,this.y,this.width,this.height]),this.width=Z,this.height=ct,this.x=J,this.y=ht,this.setDims(n*Z,r*ct),this.fixAndSetPosition(),this._onResizing()},Ck=function(){var t;x(this,er,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=d(this,ke))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},Tk=function(t,e,n){let l=.7*(n/e)+1-.7;if(l===1)return;const u=D(this,Mt,oy).call(this,this.rotation),c=(L,B)=>[u[0]*L+u[2]*B,u[1]*L+u[3]*B],[f,p]=this.parentDimensions,g=this.x,y=this.y,b=this.width,A=this.height,w=Ut.MIN_SIZE/f,S=Ut.MIN_SIZE/p;l=Math.max(Math.min(l,1/b,1/A),w/b,S/A);const k=Ut._round(b*l),C=Ut._round(A*l);if(k===b&&C===A)return;d(this,Fi)||x(this,Fi,[g,y,b,A]);const N=c(b/2,A/2),O=Ut._round(g+N[0]),I=Ut._round(y+N[1]),z=c(k/2,C/2);this.x=O-z[0],this.y=I-z[1],this.width=k,this.height=C,this.setDims(f*k,p*C),this.fixAndSetPosition(),this._onResizing()},Dk=function(){var t;(t=d(this,ke))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),D(this,Mt,uy).call(this)},mS=function(t){const{isMac:e}=jn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},kk=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,l=this._uiManager.combinedSignal(r),u={capture:!0,passive:!1,signal:l},c=p=>{r.abort(),x(this,Al,null),x(this,jo,!1),this._uiManager.endDragSession()||D(this,Mt,mS).call(this,p),n&&this._onStopDragging()};e&&(x(this,nh,t.clientX),x(this,ih,t.clientY),x(this,Al,t.pointerId),x(this,lp,t.pointerType),window.addEventListener("pointermove",p=>{n||(n=!0,this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=p;if(b!==d(this,Al)){nn(p);return}const[A,w]=this.screenToPageTranslation(g-d(this,nh),y-d(this,ih));x(this,nh,g),x(this,ih,y),this._uiManager.dragSelectedEditors(A,w)},u),window.addEventListener("touchmove",nn,u),window.addEventListener("pointerdown",p=>{p.pointerType===d(this,lp)&&(d(this,Bo)||p.isPrimary)&&c(p),nn(p)},u));const f=p=>{if(!d(this,Al)||d(this,Al)===p.pointerId){c(p);return}nn(p)};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})},yS=function(){if(d(this,Sl)||!this.div)return;x(this,Sl,new AbortController);const t=this._uiManager.combinedSignal(d(this,Sl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},Rk=function(t){Ut._resizerKeyboardManager.exec(this,t)},Mk=function(t){var e;d(this,nr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==d(this,Rn)&&D(this,Mt,mf).call(this)},Nk=function(t){x(this,op,d(this,nr)?t:"")},bS=function(t){if(d(this,Ls))for(const e of d(this,Ls))e.tabIndex=t},mf=function(){x(this,nr,!1),D(this,Mt,bS).call(this,-1),D(this,Mt,uy).call(this)},T(Ut,hp),gt(Ut,"_l10n",null),gt(Ut,"_l10nResizer",null),gt(Ut,"_borderLineWidth",-1),gt(Ut,"_colorManager",new aS),gt(Ut,"_zIndex",1),gt(Ut,"_telemetryTimeout",1e3);let De=Ut;class Sj extends De{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const cT=3285377520,hs=4294901760,ea=65535;class Ok{constructor(t){this.h1=t?t&4294967295:cT,this.h2=t?t&4294967295:cT}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let S=0,k=t.length;S<k;S++){const C=t.charCodeAt(S);C<=255?e[n++]=C:(e[n++]=C>>>8,e[n++]=C&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,l=n-r*4,u=new Uint32Array(e.buffer,0,r);let c=0,f=0,p=this.h1,g=this.h2;const y=3432918353,b=461845907,A=y&ea,w=b&ea;for(let S=0;S<r;S++)S&1?(c=u[S],c=c*y&hs|c*A&ea,c=c<<15|c>>>17,c=c*b&hs|c*w&ea,p^=c,p=p<<13|p>>>19,p=p*5+3864292196):(f=u[S],f=f*y&hs|f*A&ea,f=f<<15|f>>>17,f=f*b&hs|f*w&ea,g^=f,g=g<<13|g>>>19,g=g*5+3864292196);switch(c=0,l){case 3:c^=e[r*4+2]<<16;case 2:c^=e[r*4+1]<<8;case 1:c^=e[r*4],c=c*y&hs|c*A&ea,c=c<<15|c>>>17,c=c*b&hs|c*w&ea,r&1?p^=c:g^=c}this.h1=p,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&hs|t*36045&ea,e=e*4283543511&hs|((e<<16|t>>>16)*2950163797&hs)>>>16,t^=e>>>1,t=t*444984403&hs|t*60499&ea,e=e*3301882366&hs|((e<<16|t>>>16)*3120437893&hs)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const vS=Object.freeze({map:null,hash:"",transfer:void 0});var Ho,Uo,Mn,Jy,Lk;class Qw{constructor(){T(this,Jy);T(this,Ho,!1);T(this,Uo,null);T(this,Mn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=d(this,Mn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return d(this,Mn).get(t)}remove(t){if(d(this,Mn).delete(t),d(this,Mn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of d(this,Mn).values())if(e instanceof De)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=d(this,Mn).get(t);let r=!1;if(n!==void 0)for(const[l,u]of Object.entries(e))n[l]!==u&&(r=!0,n[l]=u);else r=!0,d(this,Mn).set(t,e);r&&D(this,Jy,Lk).call(this),e instanceof De&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return d(this,Mn).has(t)}get size(){return d(this,Mn).size}resetModified(){d(this,Ho)&&(x(this,Ho,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Pk(this)}get serializable(){if(d(this,Mn).size===0)return vS;const t=new Map,e=new Ok,n=[],r=Object.create(null);let l=!1;for(const[u,c]of d(this,Mn)){const f=c instanceof De?c.serialize(!1,r):c;f&&(t.set(u,f),e.update(`${u}:${JSON.stringify(f)}`),l||(l=!!f.bitmap))}if(l)for(const u of t.values())u.bitmap&&n.push(u.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:vS}get editorStats(){let t=null;const e=new Map;for(const n of d(this,Mn).values()){if(!(n instanceof De))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:l}=r;e.has(l)||e.set(l,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const u=t[l]||(t[l]=new Map);for(const[c,f]of Object.entries(r)){if(c==="type")continue;let p=u.get(c);p||(p=new Map,u.set(c,p));const g=p.get(f)??0;p.set(f,g+1)}}for(const[n,r]of e)t[n]=r.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){x(this,Uo,null)}get modifiedIds(){if(d(this,Uo))return d(this,Uo);const t=[];for(const e of d(this,Mn).values())!(e instanceof De)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return x(this,Uo,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return d(this,Mn).entries()}}Ho=new WeakMap,Uo=new WeakMap,Mn=new WeakMap,Jy=new WeakSet,Lk=function(){d(this,Ho)||(x(this,Ho,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var dp;class Pk extends Qw{constructor(e){super();T(this,dp);const{map:n,hash:r,transfer:l}=e.serializable,u=structuredClone(n,l?{transfer:l}:null);x(this,dp,{map:u,hash:r,transfer:l})}get print(){Ae("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,dp)}get modifiedIds(){return Qt(this,"modifiedIds",{ids:new Set,hash:""})}}dp=new WeakMap;var sh;class wj{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){T(this,sh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),d(this,sh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||d(this,sh).has(t.loadedName))){if(sn(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:l,style:u}=t,c=new FontFace(r,l,u);this.addNativeFontFace(c);try{await c.load(),d(this,sh).add(r),n==null||n(t)}catch{zt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}Ae("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw zt(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Qt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Qt(this,"isSyncFontLoadingSupported",li||jn.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(sn(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const l=n.shift();setTimeout(l.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:e,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Qt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(I,z){return I.charCodeAt(z)<<24|I.charCodeAt(z+1)<<16|I.charCodeAt(z+2)<<8|I.charCodeAt(z+3)&255}function r(I,z,L,B){const W=I.substring(0,z),Q=I.substring(z+L);return W+B+Q}let l,u;const c=this._document.createElement("canvas");c.width=1,c.height=1;const f=c.getContext("2d");let p=0;function g(I,z){if(++p>30){zt("Load test font never loaded."),z();return}if(f.font="30px "+I,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(g.bind(null,I,z))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const w=16,S=1482184792;let k=n(b,w);for(l=0,u=y.length-3;l<u;l+=4)k=k-S+n(y,l)|0;l<y.length&&(k=k-S+n(y+"XXX",l)|0),b=r(b,w,4,lj(k));const C=`url(data:font/opentype;base64,${btoa(b)});`,N=`@font-face {font-family:"${y}";src:${C}}`;this.insertRule(N);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const I of[t.loadedName,y]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=I,O.append(z)}this._document.body.append(O),g(y,()=>{O.remove(),e.complete()})}}sh=new WeakMap;class xj{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${nk(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let r;try{r=t.get(n)}catch(u){zt(`getPathGenerator - ignoring character: "${u}".`)}const l=new Path2D(r||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=l}}const Ym={DATA:1,ERROR:2},Je={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function hT(){}function vi(s){if(s instanceof Gl||s instanceof tS||s instanceof lT||s instanceof Iy||s instanceof bA)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||Ae('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Gl(s.message);case"InvalidPDFException":return new tS(s.message);case"PasswordException":return new lT(s.message,s.code);case"ResponseException":return new Iy(s.message,s.status,s.missing);case"UnknownErrorException":return new bA(s.message,s.details)}return new bA(s.message,s.toString())}var ah,ws,zk,Ik,jk,cy;class yf{constructor(t,e,n){T(this,ws);T(this,ah,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",D(this,ws,zk).bind(this),{signal:d(this,ah).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[r]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(u){l.reject(u)}return l.promise}sendWithStream(t,e,n,r){const l=this.streamId++,u=this.sourceName,c=this.targetName,f=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[l]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},f.postMessage({sourceName:u,targetName:c,action:t,streamId:l,data:e,desiredSize:p.desiredSize},r),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[l].pullCall=g,f.postMessage({sourceName:u,targetName:c,stream:Je.PULL,streamId:l,desiredSize:p.desiredSize}),g.promise},cancel:p=>{sn(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[l].cancelCall=g,this.streamControllers[l].isClosed=!0,f.postMessage({sourceName:u,targetName:c,stream:Je.CANCEL,streamId:l,reason:vi(p)}),g.promise}},n)}destroy(){var t;(t=d(this,ah))==null||t.abort(),x(this,ah,null)}}ah=new WeakMap,ws=new WeakSet,zk=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){D(this,ws,jk).call(this,t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Ym.DATA)r.resolve(t.data);else if(t.callback===Ym.ERROR)r.reject(vi(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(u){l.postMessage({sourceName:n,targetName:r,callback:Ym.DATA,callbackId:t.callbackId,data:u})},function(u){l.postMessage({sourceName:n,targetName:r,callback:Ym.ERROR,callbackId:t.callbackId,reason:vi(u)})});return}if(t.streamId){D(this,ws,Ik).call(this,t);return}e(t.data)},Ik=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,l=this.comObj,u=this,c=this.actionHandler[t.action],f={enqueue(p,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:n,targetName:r,stream:Je.ENQUEUE,streamId:e,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:r,stream:Je.CLOSE,streamId:e}),delete u.streamSinks[e])},error(p){sn(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:r,stream:Je.ERROR,streamId:e,reason:vi(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};f.sinkCapability.resolve(),f.ready=f.sinkCapability.promise,this.streamSinks[e]=f,Promise.try(c,t.data,f).then(function(){l.postMessage({sourceName:n,targetName:r,stream:Je.START_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:n,targetName:r,stream:Je.START_COMPLETE,streamId:e,reason:vi(p)})})},jk=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,l=this.comObj,u=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case Je.START_COMPLETE:t.success?u.startCall.resolve():u.startCall.reject(vi(t.reason));break;case Je.PULL_COMPLETE:t.success?u.pullCall.resolve():u.pullCall.reject(vi(t.reason));break;case Je.PULL:if(!c){l.postMessage({sourceName:n,targetName:r,stream:Je.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||hT).then(function(){l.postMessage({sourceName:n,targetName:r,stream:Je.PULL_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:n,targetName:r,stream:Je.PULL_COMPLETE,streamId:e,reason:vi(p)})});break;case Je.ENQUEUE:if(sn(u,"enqueue should have stream controller"),u.isClosed)break;u.controller.enqueue(t.chunk);break;case Je.CLOSE:if(sn(u,"close should have stream controller"),u.isClosed)break;u.isClosed=!0,u.controller.close(),D(this,ws,cy).call(this,u,e);break;case Je.ERROR:sn(u,"error should have stream controller"),u.controller.error(vi(t.reason)),D(this,ws,cy).call(this,u,e);break;case Je.CANCEL_COMPLETE:t.success?u.cancelCall.resolve():u.cancelCall.reject(vi(t.reason)),D(this,ws,cy).call(this,u,e);break;case Je.CANCEL:if(!c)break;const f=vi(t.reason);Promise.try(c.onCancel||hT,f).then(function(){l.postMessage({sourceName:n,targetName:r,stream:Je.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:n,targetName:r,stream:Je.CANCEL_COMPLETE,streamId:e,reason:vi(p)})}),c.sinkCapability.reject(f),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},cy=async function(t,e){var n,r,l;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(r=t.pullCall)==null?void 0:r.promise,(l=t.cancelCall)==null?void 0:l.promise]),delete this.streamControllers[e]};var fp;class Fk{constructor({enableHWA:t=!1}){T(this,fp,!1);x(this,fp,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!d(this,fp)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ae("Abstract method `_createCanvas` called.")}}fp=new WeakMap;class Ej extends Fk{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class Bk{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Ae("Abstract method `_fetch` called.")}}class dT extends Bk{async _fetch(t){const e=await vg(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):bg(e)}}class Hk{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,r,l){return"none"}destroy(t=!1){}}var Go,rh,ir,sr,Xn,Vo,qo,vt,qn,bf,_c,hy,Cc,Uk,AS,Tc,vf,Af,SS,Sf;class _j extends Hk{constructor({docId:e,ownerDocument:n=globalThis.document}){super();T(this,vt);T(this,Go);T(this,rh);T(this,ir);T(this,sr);T(this,Xn);T(this,Vo);T(this,qo,0);x(this,sr,e),x(this,Xn,n)}addFilter(e){if(!e)return"none";let n=d(this,vt,qn).get(e);if(n)return n;const[r,l,u]=D(this,vt,hy).call(this,e),c=e.length===1?r:`${r}${l}${u}`;if(n=d(this,vt,qn).get(c),n)return d(this,vt,qn).set(e,n),n;const f=`g_${d(this,sr)}_transfer_map_${ei(this,qo)._++}`,p=D(this,vt,Cc).call(this,f);d(this,vt,qn).set(e,p),d(this,vt,qn).set(c,p);const g=D(this,vt,Tc).call(this,f);return D(this,vt,Af).call(this,r,l,u,g),p}addHCMFilter(e,n){var w;const r=`${e}-${n}`,l="base";let u=d(this,vt,bf).get(l);if((u==null?void 0:u.key)===r||(u?((w=u.filter)==null||w.remove(),u.key=r,u.url="none",u.filter=null):(u={key:r,url:"none",filter:null},d(this,vt,bf).set(l,u)),!e||!n))return u.url;const c=D(this,vt,Sf).call(this,e);e=Et.makeHexColor(...c);const f=D(this,vt,Sf).call(this,n);if(n=Et.makeHexColor(...f),d(this,vt,_c).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return u.url;const p=new Array(256);for(let S=0;S<=255;S++){const k=S/255;p[S]=k<=.03928?k/12.92:((k+.055)/1.055)**2.4}const g=p.join(","),y=`g_${d(this,sr)}_hcm_filter`,b=u.filter=D(this,vt,Tc).call(this,y);D(this,vt,Af).call(this,g,g,g,b),D(this,vt,AS).call(this,b);const A=(S,k)=>{const C=c[S]/255,N=f[S]/255,O=new Array(k+1);for(let I=0;I<=k;I++)O[I]=C+I/k*(N-C);return O.join(",")};return D(this,vt,Af).call(this,A(0,5),A(1,5),A(2,5),b),u.url=D(this,vt,Cc).call(this,y),u.url}addAlphaFilter(e){let n=d(this,vt,qn).get(e);if(n)return n;const[r]=D(this,vt,hy).call(this,[e]),l=`alpha_${r}`;if(n=d(this,vt,qn).get(l),n)return d(this,vt,qn).set(e,n),n;const u=`g_${d(this,sr)}_alpha_map_${ei(this,qo)._++}`,c=D(this,vt,Cc).call(this,u);d(this,vt,qn).set(e,c),d(this,vt,qn).set(l,c);const f=D(this,vt,Tc).call(this,u);return D(this,vt,SS).call(this,r,f),c}addLuminosityFilter(e){let n=d(this,vt,qn).get(e||"luminosity");if(n)return n;let r,l;if(e?([r]=D(this,vt,hy).call(this,[e]),l=`luminosity_${r}`):l="luminosity",n=d(this,vt,qn).get(l),n)return d(this,vt,qn).set(e,n),n;const u=`g_${d(this,sr)}_luminosity_map_${ei(this,qo)._++}`,c=D(this,vt,Cc).call(this,u);d(this,vt,qn).set(e,c),d(this,vt,qn).set(l,c);const f=D(this,vt,Tc).call(this,u);return D(this,vt,Uk).call(this,f),e&&D(this,vt,SS).call(this,r,f),c}addHighlightHCMFilter(e,n,r,l,u){var N;const c=`${n}-${r}-${l}-${u}`;let f=d(this,vt,bf).get(e);if((f==null?void 0:f.key)===c||(f?((N=f.filter)==null||N.remove(),f.key=c,f.url="none",f.filter=null):(f={key:c,url:"none",filter:null},d(this,vt,bf).set(e,f)),!n||!r))return f.url;const[p,g]=[n,r].map(D(this,vt,Sf).bind(this));let y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),b=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[A,w]=[l,u].map(D(this,vt,Sf).bind(this));b<y&&([y,b,A,w]=[b,y,w,A]),d(this,vt,_c).style.color="";const S=(O,I,z)=>{const L=new Array(256),B=(b-y)/z,W=O/255,Q=(I-O)/(255*z);let st=0;for(let X=0;X<=z;X++){const Z=Math.round(y+X*B),ct=W+X*Q;for(let J=st;J<=Z;J++)L[J]=ct;st=Z+1}for(let X=st;X<256;X++)L[X]=L[st-1];return L.join(",")},k=`g_${d(this,sr)}_hcm_${e}_filter`,C=f.filter=D(this,vt,Tc).call(this,k);return D(this,vt,AS).call(this,C),D(this,vt,Af).call(this,S(A[0],w[0],5),S(A[1],w[1],5),S(A[2],w[2],5),C),f.url=D(this,vt,Cc).call(this,k),f.url}destroy(e=!1){var n,r,l,u;e&&((n=d(this,Vo))!=null&&n.size)||((r=d(this,ir))==null||r.parentNode.parentNode.remove(),x(this,ir,null),(l=d(this,rh))==null||l.clear(),x(this,rh,null),(u=d(this,Vo))==null||u.clear(),x(this,Vo,null),x(this,qo,0))}}Go=new WeakMap,rh=new WeakMap,ir=new WeakMap,sr=new WeakMap,Xn=new WeakMap,Vo=new WeakMap,qo=new WeakMap,vt=new WeakSet,qn=function(){return d(this,rh)||x(this,rh,new Map)},bf=function(){return d(this,Vo)||x(this,Vo,new Map)},_c=function(){if(!d(this,ir)){const e=d(this,Xn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=d(this,Xn).createElementNS(Ga,"svg");r.setAttribute("width",0),r.setAttribute("height",0),x(this,ir,d(this,Xn).createElementNS(Ga,"defs")),e.append(r),r.append(d(this,ir)),d(this,Xn).body.append(e)}return d(this,ir)},hy=function(e){if(e.length===1){const p=e[0],g=new Array(256);for(let b=0;b<256;b++)g[b]=p[b]/255;const y=g.join(",");return[y,y,y]}const[n,r,l]=e,u=new Array(256),c=new Array(256),f=new Array(256);for(let p=0;p<256;p++)u[p]=n[p]/255,c[p]=r[p]/255,f[p]=l[p]/255;return[u.join(","),c.join(","),f.join(",")]},Cc=function(e){if(d(this,Go)===void 0){x(this,Go,"");const n=d(this,Xn).URL;n!==d(this,Xn).baseURI&&(Tb(n)?zt('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,Go,JD(n,"")))}return`url(${d(this,Go)}#${e})`},Uk=function(e){const n=d(this,Xn).createElementNS(Ga,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},AS=function(e){const n=d(this,Xn).createElementNS(Ga,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Tc=function(e){const n=d(this,Xn).createElementNS(Ga,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),d(this,vt,_c).append(n),n},vf=function(e,n,r){const l=d(this,Xn).createElementNS(Ga,n);l.setAttribute("type","discrete"),l.setAttribute("tableValues",r),e.append(l)},Af=function(e,n,r,l){const u=d(this,Xn).createElementNS(Ga,"feComponentTransfer");l.append(u),D(this,vt,vf).call(this,u,"feFuncR",e),D(this,vt,vf).call(this,u,"feFuncG",n),D(this,vt,vf).call(this,u,"feFuncB",r)},SS=function(e,n){const r=d(this,Xn).createElementNS(Ga,"feComponentTransfer");n.append(r),D(this,vt,vf).call(this,r,"feFuncA",e)},Sf=function(e){return d(this,vt,_c).style.color=e,Ww(getComputedStyle(d(this,vt,_c)).getPropertyValue("color"))};class Gk{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Ae("Abstract method `_fetch` called.")}}class fT extends Gk{async _fetch(t){const e=await vg(t,"arraybuffer");return new Uint8Array(e)}}class Vk{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Ae("Abstract method `_fetch` called.")}}class pT extends Vk{async _fetch(t){const e=await vg(t,"arraybuffer");return new Uint8Array(e)}}li&&zt("Please use the `legacy` build in Node.js environments.");async function Zw(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class Cj extends Hk{}class Tj extends Fk{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class Dj extends Bk{async _fetch(t){return Zw(t)}}class kj extends Gk{async _fetch(t){return Zw(t)}}class Rj extends Vk{async _fetch(t){return Zw(t)}}const Ln={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function wS(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,n),s.clip(r)}class Jw{isModifyingCurrentTransform(){return!1}getPattern(){Ae("Abstract method `getPattern` called.")}}class Mj extends Jw{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,r){let l;if(r===Ln.STROKE||r===Ln.FILL){const u=e.current.getClippedPathBoundingBox(r,Ie(t))||[0,0,0,0],c=Math.ceil(u[2]-u[0])||1,f=Math.ceil(u[3]-u[1])||1,p=e.cachedCanvases.getCanvas("pattern",c,f),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-u[0],-u[1]),n=Et.transform(n,[1,0,0,1,u[0],u[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),wS(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),l=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(n);l.setTransform(y)}else wS(t,this._bbox),l=this._createGradient(t);return l}}function SA(s,t,e,n,r,l,u,c){const f=t.coords,p=t.colors,g=s.data,y=s.width*4;let b;f[e+1]>f[n+1]&&(b=e,e=n,n=b,b=l,l=u,u=b),f[n+1]>f[r+1]&&(b=n,n=r,r=b,b=u,u=c,c=b),f[e+1]>f[n+1]&&(b=e,e=n,n=b,b=l,l=u,u=b);const A=(f[e]+t.offsetX)*t.scaleX,w=(f[e+1]+t.offsetY)*t.scaleY,S=(f[n]+t.offsetX)*t.scaleX,k=(f[n+1]+t.offsetY)*t.scaleY,C=(f[r]+t.offsetX)*t.scaleX,N=(f[r+1]+t.offsetY)*t.scaleY;if(w>=N)return;const O=p[l],I=p[l+1],z=p[l+2],L=p[u],B=p[u+1],W=p[u+2],Q=p[c],st=p[c+1],X=p[c+2],Z=Math.round(w),ct=Math.round(N);let J,ht,F,q,yt,xt,_,K;for(let ot=Z;ot<=ct;ot++){if(ot<k){const ut=ot<w?0:(w-ot)/(w-k);J=A-(A-S)*ut,ht=O-(O-L)*ut,F=I-(I-B)*ut,q=z-(z-W)*ut}else{let ut;ot>N?ut=1:k===N?ut=0:ut=(k-ot)/(k-N),J=S-(S-C)*ut,ht=L-(L-Q)*ut,F=B-(B-st)*ut,q=W-(W-X)*ut}let R;ot<w?R=0:ot>N?R=1:R=(w-ot)/(w-N),yt=A-(A-C)*R,xt=O-(O-Q)*R,_=I-(I-st)*R,K=z-(z-X)*R;const at=Math.round(Math.min(J,yt)),ft=Math.round(Math.max(J,yt));let it=y*ot+at*4;for(let ut=at;ut<=ft;ut++)R=(J-ut)/(J-yt),R<0?R=0:R>1&&(R=1),g[it++]=ht-(ht-xt)*R|0,g[it++]=F-(F-_)*R|0,g[it++]=q-(q-K)*R|0,g[it++]=255}}function Nj(s,t,e){const n=t.coords,r=t.colors;let l,u;switch(t.type){case"lattice":const c=t.verticesPerRow,f=Math.floor(n.length/c)-1,p=c-1;for(l=0;l<f;l++){let g=l*c;for(let y=0;y<p;y++,g++)SA(s,e,n[g],n[g+1],n[g+c],r[g],r[g+1],r[g+c]),SA(s,e,n[g+c+1],n[g+1],n[g+c],r[g+c+1],r[g+1],r[g+c])}break;case"triangles":for(l=0,u=n.length;l<u;l+=3)SA(s,e,n[l],n[l+1],n[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class Oj extends Jw{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const c=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-c,g=Math.ceil(this._bounds[3])-f,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=p/y,w=g/b,S={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-f,scaleX:1/A,scaleY:1/w},k=y+2*2,C=b+2*2,N=n.getCanvas("mesh",k,C),O=N.context,I=O.createImageData(y,b);if(e){const L=I.data;for(let B=0,W=L.length;B<W;B+=4)L[B]=e[0],L[B+1]=e[1],L[B+2]=e[2],L[B+3]=255}for(const L of this._figures)Nj(I,L,S);return O.putImageData(I,2,2),{canvas:N.canvas,offsetX:c-2*A,offsetY:f-2*w,scaleX:A,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,r){wS(t,this._bbox);const l=new Float32Array(2);if(r===Ln.SHADING)Et.singularValueDecompose2dScale(Ie(t),l);else if(this.matrix){Et.singularValueDecompose2dScale(this.matrix,l);const[c,f]=l;Et.singularValueDecompose2dScale(e.baseTransform,l),l[0]*=c,l[1]*=f}else Et.singularValueDecompose2dScale(e.baseTransform,l);const u=this._createMeshCanvas(l,r===Ln.SHADING?null:this._background,e.cachedCanvases);return r!==Ln.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(u.offsetX,u.offsetY),t.scale(u.scaleX,u.scaleY),t.createPattern(u.canvas,"no-repeat")}}class Lj extends Jw{getPattern(){return"hotpink"}}function Pj(s){switch(s[0]){case"RadialAxial":return new Mj(s);case"Mesh":return new Oj(s);case"Dummy":return new Lj}throw new Error(`Unknown IR type: ${s[0]}`)}const gT={COLORED:1,UNCOLORED:2},tb=class tb{constructor(t,e,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:r,tilingType:l,color:u,canvasGraphicsFactory:c}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),Cb("TilingType: "+l);const g=e[0],y=e[1],b=e[2],A=e[3],w=b-g,S=A-y,k=new Float32Array(2);Et.singularValueDecompose2dScale(this.matrix,k);const[C,N]=k;Et.singularValueDecompose2dScale(this.baseTransform,k);const O=C*k[0],I=N*k[1];let z=w,L=S,B=!1,W=!1;const Q=Math.ceil(f*O),st=Math.ceil(p*I),X=Math.ceil(w*O),Z=Math.ceil(S*I);Q>=X?z=f:B=!0,st>=Z?L=p:W=!0;const ct=this.getSizeAndScale(z,this.ctx.canvas.width,O),J=this.getSizeAndScale(L,this.ctx.canvas.height,I),ht=t.cachedCanvases.getCanvas("pattern",ct.size,J.size),F=ht.context,q=c.createCanvasGraphics(F);if(q.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(q,r,u),F.translate(-ct.scale*g,-J.scale*y),q.transform(ct.scale,0,0,J.scale,0,0),F.save(),this.clipBbox(q,g,y,b,A),q.baseTransform=Ie(q.ctx),q.executeOperatorList(n),q.endDrawing(),F.restore(),B||W){const yt=ht.canvas;B&&(z=f),W&&(L=p);const xt=this.getSizeAndScale(z,this.ctx.canvas.width,O),_=this.getSizeAndScale(L,this.ctx.canvas.height,I),K=xt.size,ot=_.size,R=t.cachedCanvases.getCanvas("pattern-workaround",K,ot),at=R.context,ft=B?Math.floor(w/f):0,it=W?Math.floor(S/p):0;for(let ut=0;ut<=ft;ut++)for(let mt=0;mt<=it;mt++)at.drawImage(yt,K*ut,ot*mt,K,ot,0,0,K,ot);return{canvas:R.canvas,scaleX:xt.scale,scaleY:_.scale,offsetX:g,offsetY:y}}return{canvas:ht.canvas,scaleX:ct.scale,scaleY:J.scale,offsetX:g,offsetY:y}}getSizeAndScale(t,e,n){const r=Math.max(tb.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*n);return l>=r?l=r:n=l/t,{scale:n,size:l}}clipBbox(t,e,n,r,l){const u=r-e,c=l-n;t.ctx.rect(e,n,u,c),Et.axialAlignedBoundingBox([e,n,r,l],Ie(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const r=t.ctx,l=t.current;switch(e){case gT.COLORED:const u=this.ctx;r.fillStyle=u.fillStyle,r.strokeStyle=u.strokeStyle,l.fillColor=u.fillStyle,l.strokeColor=u.strokeStyle;break;case gT.UNCOLORED:const c=Et.makeHexColor(n[0],n[1],n[2]);r.fillStyle=c,r.strokeStyle=c,l.fillColor=c,l.strokeColor=c;break;default:throw new rj(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,r){let l=n;r!==Ln.SHADING&&(l=Et.transform(l,e.baseTransform),this.matrix&&(l=Et.transform(l,this.matrix)));const u=this.createPatternCanvas(e);let c=new DOMMatrix(l);c=c.translate(u.offsetX,u.offsetY),c=c.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(c),f}};gt(tb,"MAX_PATTERN_SIZE",3e3);let xS=tb;function zj({src:s,srcPos:t=0,dest:e,width:n,height:r,nonBlackColor:l=4294967295,inverseDecode:u=!1}){const c=jn.isLittleEndian?4278190080:255,[f,p]=u?[l,c]:[c,l],g=n>>3,y=n&7,b=s.length;e=new Uint32Array(e.buffer);let A=0;for(let w=0;w<r;w++){for(const k=t+g;t<k;t++){const C=t<b?s[t]:255;e[A++]=C&128?p:f,e[A++]=C&64?p:f,e[A++]=C&32?p:f,e[A++]=C&16?p:f,e[A++]=C&8?p:f,e[A++]=C&4?p:f,e[A++]=C&2?p:f,e[A++]=C&1?p:f}if(y===0)continue;const S=t<b?s[t++]:255;for(let k=0;k<y;k++)e[A++]=S&1<<7-k?p:f}return{srcPos:t,destPos:A}}const mT=16,yT=100,Ij=15,bT=10,Ei=16,wA=new DOMMatrix,Zi=new Float32Array(2),Lc=new Float32Array([1/0,1/0,-1/0,-1/0]);function jj(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,r,l,u,c){t.transform(e,n,r,l,u,c),this.__originalTransform(e,n,r,l,u,c)},s.setTransform=function(e,n,r,l,u,c){t.setTransform(e,n,r,l,u,c),this.__originalSetTransform(e,n,r,l,u,c)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,r,l,u,c){t.bezierCurveTo(e,n,r,l,u,c),this.__originalBezierCurveTo(e,n,r,l,u,c)},s.rect=function(e,n,r,l){t.rect(e,n,r,l),this.__originalRect(e,n,r,l)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Fj{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Xm(s,t,e,n,r,l,u,c,f,p){const[g,y,b,A,w,S]=Ie(s);if(y===0&&b===0){const N=u*g+w,O=Math.round(N),I=c*A+S,z=Math.round(I),L=(u+f)*g+w,B=Math.abs(Math.round(L)-O)||1,W=(c+p)*A+S,Q=Math.abs(Math.round(W)-z)||1;return s.setTransform(Math.sign(g),0,0,Math.sign(A),O,z),s.drawImage(t,e,n,r,l,0,0,B,Q),s.setTransform(g,y,b,A,w,S),[B,Q]}if(g===0&&A===0){const N=c*b+w,O=Math.round(N),I=u*y+S,z=Math.round(I),L=(c+p)*b+w,B=Math.abs(Math.round(L)-O)||1,W=(u+f)*y+S,Q=Math.abs(Math.round(W)-z)||1;return s.setTransform(0,Math.sign(y),Math.sign(b),0,O,z),s.drawImage(t,e,n,r,l,0,0,Q,B),s.setTransform(g,y,b,A,w,S),[Q,B]}s.drawImage(t,e,n,r,l,u,c,f,p);const k=Math.hypot(g,y),C=Math.hypot(b,A);return[k*f,C*p]}class vT{constructor(t,e){gt(this,"alphaIsShape",!1);gt(this,"fontSize",0);gt(this,"fontSizeScale",1);gt(this,"textMatrix",null);gt(this,"textMatrixScale",1);gt(this,"fontMatrix",JA);gt(this,"leading",0);gt(this,"x",0);gt(this,"y",0);gt(this,"lineX",0);gt(this,"lineY",0);gt(this,"charSpacing",0);gt(this,"wordSpacing",0);gt(this,"textHScale",1);gt(this,"textRenderingMode",Vn.FILL);gt(this,"textRise",0);gt(this,"fillColor","#000000");gt(this,"strokeColor","#000000");gt(this,"patternFill",!1);gt(this,"patternStroke",!1);gt(this,"fillAlpha",1);gt(this,"strokeAlpha",1);gt(this,"lineWidth",1);gt(this,"activeSMask",null);gt(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Lc.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ln.FILL,e=null){const n=this.minMax.slice();if(t===Ln.STROKE){e||Ae("Stroke bounding box must include transform."),Et.singularValueDecompose2dScale(e,Zi);const r=Zi[0]*this.lineWidth/2,l=Zi[1]*this.lineWidth/2;n[0]-=r,n[1]-=l,n[2]+=r,n[3]+=l}return n}updateClipFromPath(){const t=Et.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Lc,0)}getClippedPathBoundingBox(t=Ln.FILL,e=null){return Et.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function AT(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,r=e%Ei,l=(e-r)/Ei,u=r===0?l:l+1,c=s.createImageData(n,Ei);let f=0,p;const g=t.data,y=c.data;let b,A,w,S;if(t.kind===ey.GRAYSCALE_1BPP){const k=g.byteLength,C=new Uint32Array(y.buffer,0,y.byteLength>>2),N=C.length,O=n+7>>3,I=4294967295,z=jn.isLittleEndian?4278190080:255;for(b=0;b<u;b++){for(w=b<l?Ei:r,p=0,A=0;A<w;A++){const L=k-f;let B=0;const W=L>O?n:L*8-7,Q=W&-8;let st=0,X=0;for(;B<Q;B+=8)X=g[f++],C[p++]=X&128?I:z,C[p++]=X&64?I:z,C[p++]=X&32?I:z,C[p++]=X&16?I:z,C[p++]=X&8?I:z,C[p++]=X&4?I:z,C[p++]=X&2?I:z,C[p++]=X&1?I:z;for(;B<W;B++)st===0&&(X=g[f++],st=128),C[p++]=X&st?I:z,st>>=1}for(;p<N;)C[p++]=0;s.putImageData(c,0,b*Ei)}}else if(t.kind===ey.RGBA_32BPP){for(A=0,S=n*Ei*4,b=0;b<l;b++)y.set(g.subarray(f,f+S)),f+=S,s.putImageData(c,0,A),A+=Ei;b<u&&(S=n*r*4,y.set(g.subarray(f,f+S)),s.putImageData(c,0,A))}else if(t.kind===ey.RGB_24BPP)for(w=Ei,S=n*w,b=0;b<u;b++){for(b>=l&&(w=r,S=n*w),p=0,A=S;A--;)y[p++]=g[f++],y[p++]=g[f++],y[p++]=g[f++],y[p++]=255;s.putImageData(c,0,b*Ei)}else throw new Error(`bad image kind: ${t.kind}`)}function ST(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,r=e%Ei,l=(e-r)/Ei,u=r===0?l:l+1,c=s.createImageData(n,Ei);let f=0;const p=t.data,g=c.data;for(let y=0;y<u;y++){const b=y<l?Ei:r;({srcPos:f}=zj({src:p,srcPos:f,dest:g,width:n,height:b,nonBlackColor:0})),s.putImageData(c,0,y*Ei)}}function lf(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function $m(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}function wT(s,t){if(t)return!0;Et.singularValueDecompose2dScale(s,Zi);const e=Math.fround(Cr.pixelRatio*Vl.PDF_TO_CSS_UNITS);return Zi[0]<=e&&Zi[1]<=e}const Bj=["butt","round","square"],Hj=["miter","round","bevel"],Uj={},xT={};var Xs,ES,_S,CS;const ux=class ux{constructor(t,e,n,r,l,{optionalContentConfig:u,markedContentStack:c=null},f,p){T(this,Xs);this.ctx=t,this.current=new vT(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=u,this.cachedCanvases=new Fj(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=f,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:r=null}){const l=this.ctx.canvas.width,u=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,l,u),this.ctx.fillStyle=c,n){const f=this.cachedCanvases.getCanvas("transparent",l,u);this.compositeCtx=this.ctx,this.transparentCanvas=f.canvas,this.ctx=f.context,this.ctx.save(),this.ctx.transform(...Ie(this.compositeCtx))}this.ctx.save(),$m(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ie(this.ctx)}executeOperatorList(t,e,n,r){const l=t.argsArray,u=t.fnArray;let c=e||0;const f=l.length;if(f===c)return c;const p=f-c>bT&&typeof n=="function",g=p?Date.now()+Ij:0;let y=0;const b=this.commonObjs,A=this.objs;let w;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,n),c;if(w=u[c],w!==zy.dependency)this[w].apply(this,l[c]);else for(const S of l[c]){const k=S.startsWith("g_")?b:A;if(!k.has(S))return k.get(S,n),c}if(c++,c===f)return c;if(p&&++y>bT){if(Date.now()>g)return n(),c;y=0}}}endDrawing(){D(this,Xs,ES).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),D(this,Xs,_S).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),u=Math.max(Math.hypot(e[2],e[3]),1),c=n,f=r,p="prescale1",g,y;for(;l>2&&c>1||u>2&&f>1;){let b=c,A=f;l>2&&c>1&&(b=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),l/=c/b),u>2&&f>1&&(A=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f)/2,u/=f/A),g=this.cachedCanvases.getCanvas(p,b,A),y=g.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,c,f,0,0,b,A),t=g.canvas,c=b,f=A,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:f}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:r}=t,l=this.current.fillColor,u=this.current.patternFill,c=Ie(e);let f,p,g,y;if((t.bitmap||t.data)&&t.count>1){const Q=t.bitmap||t.data.buffer;p=JSON.stringify(u?c:[c.slice(0,4),l]),f=this._cachedBitmapsMap.get(Q),f||(f=new Map,this._cachedBitmapsMap.set(Q,f));const st=f.get(p);if(st&&!u){const X=Math.round(Math.min(c[0],c[2])+c[4]),Z=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:st,offsetX:X,offsetY:Z}}g=st}g||(y=this.cachedCanvases.getCanvas("maskCanvas",n,r),ST(y.context,t));let b=Et.transform(c,[1/n,0,0,-1/r,0,0]);b=Et.transform(b,[1,0,0,1,0,-r]);const A=Lc.slice();Et.axialAlignedBoundingBox([0,0,n,r],b,A);const[w,S,k,C]=A,N=Math.round(k-w)||1,O=Math.round(C-S)||1,I=this.cachedCanvases.getCanvas("fillCanvas",N,O),z=I.context,L=w,B=S;z.translate(-L,-B),z.transform(...b),g||(g=this._scaleImage(y.canvas,ta(z)),g=g.img,f&&u&&f.set(p,g)),z.imageSmoothingEnabled=wT(Ie(z),t.interpolate),Xm(z,g,0,0,g.width,g.height,0,0,n,r),z.globalCompositeOperation="source-in";const W=Et.transform(ta(z),[1,0,0,1,-L,-B]);return z.fillStyle=u?l.getPattern(e,this,W,Ln.FILL):l,z.fillRect(0,0,n,r),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,I.canvas)),{canvas:I.canvas,offsetX:Math.round(L),offsetY:Math.round(B)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=Bj[t]}setLineJoin(t){this.ctx.lineJoin=Hj[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx;const l=this.ctx=r.context;l.setTransform(this.suspendedCtx.getTransform()),lf(this.suspendedCtx,l),jj(l,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),lf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,r){const l=r[0],u=r[1],c=r[2]-l,f=r[3]-u;c===0||f===0||(this.genericComposeSMask(e.context,n,c,f,e.subtype,e.backdrop,e.transferMap,l,u,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,r,l,u,c,f,p,g,y){let b=t.canvas,A=f-g,w=p-y;if(u){const k=Et.makeHexColor(...u);if(A<0||w<0||A+n>b.width||w+r>b.height){const C=this.cachedCanvases.getCanvas("maskExtension",n,r),N=C.context;N.drawImage(b,-A,-w),N.globalCompositeOperation="destination-atop",N.fillStyle=k,N.fillRect(0,0,n,r),N.globalCompositeOperation="source-over",b=C.canvas,A=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(A,w,n,r),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=k,t.fillRect(A,w,n,r),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const S=new Path2D;S.rect(f,p,n,r),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(b,A,w,n,r,f,p,n,r),e.restore()}save(){this.inSMaskMode&&lf(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&lf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,r,l,u){this.ctx.transform(t,e,n,r,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let[r]=e;if(!n){r||(r=e[0]=new Path2D),this[t](r);return}if(!(r instanceof Path2D)){const l=e[0]=new Path2D;for(let u=0,c=r.length;u<c;)switch(r[u++]){case qm.moveTo:l.moveTo(r[u++],r[u++]);break;case qm.lineTo:l.lineTo(r[u++],r[u++]);break;case qm.curveTo:l.bezierCurveTo(r[u++],r[u++],r[u++],r[u++],r[u++],r[u++]);break;case qm.closePath:l.closePath();break;default:zt(`Unrecognized drawing path operator: ${r[u-1]}`);break}r=l}Et.axialAlignedBoundingBox(n,Ie(this.ctx),this.current.minMax),this[t](r)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const n=this.ctx,r=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const l=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=r.getPattern(n,this,ta(n),Ln.STROKE),l){const u=new Path2D;u.addPath(t,n.getTransform().invertSelf().multiplySelf(l)),t=u}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Ln.STROKE,Ie(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const n=this.ctx,r=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const f=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=r.getPattern(n,this,ta(n),Ln.FILL),f){const p=new Path2D;p.addPath(t,n.getTransform().invertSelf().multiplySelf(f)),t=p}u=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),u&&n.restore(),e&&this.consumePath(t,c)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=Uj}eoClip(){this.pendingClip=xT}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const n=new Path2D,r=e.getTransform().invertSelf();for(const{transform:l,x:u,y:c,fontSize:f,path:p}of t)n.addPath(p,new DOMMatrix(l).preMultiplySelf(r).translate(u,c).scale(f,-f));e.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var g;const n=this.commonObjs.get(t),r=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=n.fontMatrix||JA,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&zt("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const l=n.loadedName||"sans-serif",u=((g=n.systemFontInfo)==null?void 0:g.css)||`"${l}", ${n.fallbackName}`;let c="normal";n.black?c="900":n.bold&&(c="bold");const f=n.italic?"italic":"normal";let p=e;e<mT?p=mT:e>yT&&(p=yT),this.current.fontSizeScale=e/p,this.ctx.font=`${f} ${c} ${p}px ${u}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,r,l){const u=this.ctx,c=this.current,f=c.font,p=c.textRenderingMode,g=c.fontSize/c.fontSizeScale,y=p&Vn.FILL_STROKE_MASK,b=!!(p&Vn.ADD_TO_PATH_FLAG),A=c.patternFill&&!f.missingFile,w=c.patternStroke&&!f.missingFile;let S;if((f.disableFontFace||b||A||w)&&(S=f.getPathGenerator(this.commonObjs,t)),f.disableFontFace||A||w){u.save(),u.translate(e,n),u.scale(g,-g);let k;if((y===Vn.FILL||y===Vn.FILL_STROKE)&&(r?(k=u.getTransform(),u.setTransform(...r),u.fill(D(this,Xs,CS).call(this,S,k,r))):u.fill(S)),y===Vn.STROKE||y===Vn.FILL_STROKE)if(l){k||(k=u.getTransform()),u.setTransform(...l);const{a:C,b:N,c:O,d:I}=k,z=Et.inverseTransform(l),L=Et.transform([C,N,O,I,0,0],z);Et.singularValueDecompose2dScale(L,Zi),u.lineWidth*=Math.max(Zi[0],Zi[1])/g,u.stroke(D(this,Xs,CS).call(this,S,k,l))}else u.lineWidth/=g,u.stroke(S);u.restore()}else(y===Vn.FILL||y===Vn.FILL_STROKE)&&u.fillText(t,e,n),(y===Vn.STROKE||y===Vn.FILL_STROKE)&&u.strokeText(t,e,n);b&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ie(u),x:e,y:n,fontSize:g,path:S})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return Qt(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const r=e.fontSize;if(r===0)return;const l=this.ctx,u=e.fontSizeScale,c=e.charSpacing,f=e.wordSpacing,p=e.fontDirection,g=e.textHScale*p,y=t.length,b=n.vertical,A=b?1:-1,w=n.defaultVMetrics,S=r*e.fontMatrix[0],k=e.textRenderingMode===Vn.FILL&&!n.disableFontFace&&!e.patternFill;l.save(),e.textMatrix&&l.transform(...e.textMatrix),l.translate(e.x,e.y+e.textRise),p>0?l.scale(g,-1):l.scale(g,1);let C,N;if(e.patternFill){l.save();const B=e.fillColor.getPattern(l,this,ta(l),Ln.FILL);C=Ie(l),l.restore(),l.fillStyle=B}if(e.patternStroke){l.save();const B=e.strokeColor.getPattern(l,this,ta(l),Ln.STROKE);N=Ie(l),l.restore(),l.strokeStyle=B}let O=e.lineWidth;const I=e.textMatrixScale;if(I===0||O===0){const B=e.textRenderingMode&Vn.FILL_STROKE_MASK;(B===Vn.STROKE||B===Vn.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=I;if(u!==1&&(l.scale(u,u),O/=u),l.lineWidth=O,n.isInvalidPDFjsFont){const B=[];let W=0;for(const Q of t)B.push(Q.unicode),W+=Q.width;l.fillText(B.join(""),0,0),e.x+=W*S*g,l.restore(),this.compose();return}let z=0,L;for(L=0;L<y;++L){const B=t[L];if(typeof B=="number"){z+=A*B*r/1e3;continue}let W=!1;const Q=(B.isSpace?f:0)+c,st=B.fontChar,X=B.accent;let Z,ct,J=B.width;if(b){const F=B.vmetric||w,q=-(B.vmetric?F[1]:J*.5)*S,yt=F[2]*S;J=F?-F[0]:J,Z=q/u,ct=(z+yt)/u}else Z=z/u,ct=0;if(n.remeasure&&J>0){const F=l.measureText(st).width*1e3/r*u;if(J<F&&this.isFontSubpixelAAEnabled){const q=J/F;W=!0,l.save(),l.scale(q,1),Z/=q}else J!==F&&(Z+=(J-F)/2e3*r/u)}if(this.contentVisible&&(B.isInFont||n.missingFile)){if(k&&!X)l.fillText(st,Z,ct);else if(this.paintChar(st,Z,ct,C,N),X){const F=Z+r*X.offset.x/u,q=ct-r*X.offset.y/u;this.paintChar(X.fontChar,F,q,C,N)}}const ht=b?J*S-Q*p:J*S+Q*p;z+=ht,W&&l.restore()}b?e.y-=z:e.x+=z*g,l.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,r=n.font,l=n.fontSize,u=n.fontDirection,c=r.vertical?1:-1,f=n.charSpacing,p=n.wordSpacing,g=n.textHScale*u,y=n.fontMatrix||JA,b=t.length,A=n.textRenderingMode===Vn.INVISIBLE;let w,S,k,C;if(!(A||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),n.textMatrix&&e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(g,u),w=0;w<b;++w){if(S=t[w],typeof S=="number"){C=c*S*l/1e3,this.ctx.translate(C,0),n.x+=C*g;continue}const N=(S.isSpace?p:0)+f,O=r.charProcOperatorList[S.operatorListId];O?this.contentVisible&&(this.save(),e.scale(l,l),e.transform(...y),this.executeOperatorList(O),this.restore()):zt(`Type3 character "${S.operatorListId}" is not available.`);const I=[S.width,0];Et.applyTransform(I,y),k=I[0]*l+N,e.translate(k,0),n.x+=k*g}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,r,l,u){const c=new Path2D;c.rect(n,r,l-n,u-r),this.ctx.clip(c),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=this.baseTransform||Ie(this.ctx),r={createCanvasGraphics:l=>new ux(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new xS(t,this.ctx,r,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=Et.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=Et.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=Pj(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,ta(e),Ln.SHADING);const r=ta(e);if(r){const{width:l,height:u}=e.canvas,c=Lc.slice();Et.axialAlignedBoundingBox([0,0,l,u],r,c);const[f,p,g,y]=c;this.ctx.fillRect(f,p,g-f,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ae("Should not call beginInlineImage")}beginImageData(){Ae("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Ie(this.ctx),e)){Et.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[n,r,l,u]=e,c=new Path2D;c.rect(n,r,l-n,u-r),this.ctx.clip(c),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Cb("TODO: Support non-isolated groups."),t.knockout&&zt("Knockout groups not supported.");const n=Ie(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Lc.slice();Et.axialAlignedBoundingBox(t.bbox,Ie(e),r);const l=[0,0,e.canvas.width,e.canvas.height];r=Et.intersect(r,l)||[0,0,0,0];const u=Math.floor(r[0]),c=Math.floor(r[1]),f=Math.max(Math.ceil(r[2])-u,1),p=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,f,p]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,f,p),b=y.context;b.translate(-u,-c),b.transform(...n);let A=new Path2D;const[w,S,k,C]=t.bbox;if(A.rect(w,S,k-w,C-S),t.matrix){const N=new Path2D;N.addPath(A,new DOMMatrix(t.matrix)),A=N}b.clip(A),t.smask?this.smaskStack.push({canvas:y.canvas,context:b,offsetX:u,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(u,c),e.save()),lf(e,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Ie(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const l=Lc.slice();Et.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],r,l),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,n,r,l){if(D(this,Xs,ES).call(this),$m(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const u=e[2]-e[0],c=e[3]-e[1];if(l&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=u,e[3]=c,Et.singularValueDecompose2dScale(Ie(this.ctx),Zi);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),g=Math.ceil(c*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:y,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(Zi[0],0,0,-Zi[1],0,c*Zi[1]),$m(this.ctx)}else{$m(this.ctx),this.endPath();const f=new Path2D;f.rect(e[0],e[1],u,c),this.ctx.clip(f)}}this.current=new vT(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),D(this,Xs,_S).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,r=this._createMaskCanvas(t),l=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,r=0,l,u){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const f=Ie(c);c.transform(e,n,r,l,0,0);const p=this._createMaskCanvas(t);c.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]);for(let g=0,y=u.length;g<y;g+=2){const b=Et.transform(f,[e,n,r,l,u[g],u[g+1]]);c.drawImage(p.canvas,b[4],b[5])}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const l of t){const{data:u,width:c,height:f,transform:p}=l,g=this.cachedCanvases.getCanvas("maskCanvas",c,f),y=g.context;y.save();const b=this.getObject(u,l);ST(y,b),y.globalCompositeOperation="source-in",y.fillStyle=r?n.getPattern(y,this,ta(e),Ln.FILL):n,y.fillRect(0,0,c,f),y.restore(),e.save(),e.transform(...p),e.scale(1,-1),Xm(e,g.canvas,0,0,c,f,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){zt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,r){if(!this.contentVisible)return;const l=this.getObject(t);if(!l){zt("Dependent image isn't ready yet");return}const u=l.width,c=l.height,f=[];for(let p=0,g=r.length;p<g;p+=2)f.push({transform:[e,0,0,n,r[p],r[p+1]],x:0,y:0,w:u,h:c});this.paintInlineImageXObjectGroup(l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:r}=t,l=this.cachedCanvases.getCanvas("inlineImage",n,r),u=l.context;return u.filter=this.current.transferMaps,u.drawImage(e,0,0),u.filter="none",l.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,r=this.ctx;this.save();const{filter:l}=r;l!=="none"&&l!==""&&(r.filter="none"),r.scale(1/e,-1/n);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",e,n).context;AT(p,t),u=this.applyTransferMapsToCanvas(p)}const c=this._scaleImage(u,ta(r));r.imageSmoothingEnabled=wT(Ie(r),t.interpolate),Xm(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const l=t.width,u=t.height,f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;AT(f,t),r=this.applyTransferMapsToCanvas(f)}for(const l of e)n.save(),n.transform(...l.transform),n.scale(1,-1),Xm(n,r,l.x,l.y,l.w,l.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(n||(this.pendingClip===xT?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ie(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:r,d:l}=this.ctx.getTransform();let u,c;if(n===0&&r===0){const f=Math.abs(e),p=Math.abs(l);if(f===p)if(t===0)u=c=1/f;else{const g=f*t;u=c=g<1?1/g:1}else if(t===0)u=1/f,c=1/p;else{const g=f*t,y=p*t;u=g<1?1/g:1,c=y<1?1/y:1}}else{const f=Math.abs(e*l-n*r),p=Math.hypot(e,n),g=Math.hypot(r,l);if(t===0)u=g/f,c=p/f;else{const y=t*f;u=g>y?g/y:1,c=p>y?p/y:1}}this._cachedScaleForStroking[0]=u,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:r}}=this,[l,u]=this.getScaleForStroking();if(l===u){n.lineWidth=(r||1)*l,n.stroke(t);return}const c=n.getLineDash();e&&n.save(),n.scale(l,u),wA.a=1/l,wA.d=1/u;const f=new Path2D;if(f.addPath(t,wA),c.length>0){const p=Math.max(l,u);n.setLineDash(c.map(g=>g/p)),n.lineDashOffset/=p}n.lineWidth=r||1,n.stroke(f),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Xs=new WeakSet,ES=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},_S=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},CS=function(t,e,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),r};let Bc=ux;for(const s in zy)Bc.prototype[s]!==void 0&&(Bc.prototype[zy[s]]=Bc.prototype[s]);var pp,gp;class Sa{static get workerPort(){return d(this,pp)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");x(this,pp,t)}static get workerSrc(){return d(this,gp)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");x(this,gp,t)}}pp=new WeakMap,gp=new WeakMap,T(Sa,pp,null),T(Sa,gp,"");var lh,mp;class Gj{constructor({parsedData:t,rawData:e}){T(this,lh);T(this,mp);x(this,lh,t),x(this,mp,e)}getRaw(){return d(this,mp)}get(t){return d(this,lh).get(t)??null}[Symbol.iterator](){return d(this,lh).entries()}}lh=new WeakMap,mp=new WeakMap;const Dc=Symbol("INTERNAL");var yp,bp,vp,oh;class Vj{constructor(t,{name:e,intent:n,usage:r,rbGroups:l}){T(this,yp,!1);T(this,bp,!1);T(this,vp,!1);T(this,oh,!0);x(this,yp,!!(t&Ki.DISPLAY)),x(this,bp,!!(t&Ki.PRINT)),this.name=e,this.intent=n,this.usage=r,this.rbGroups=l}get visible(){if(d(this,vp))return d(this,oh);if(!d(this,oh))return!1;const{print:t,view:e}=this.usage;return d(this,yp)?(e==null?void 0:e.viewState)!=="OFF":d(this,bp)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Dc&&Ae("Internal method `_setVisible` called."),x(this,vp,n),x(this,oh,e)}}yp=new WeakMap,bp=new WeakMap,vp=new WeakMap,oh=new WeakMap;var wl,be,uh,ch,Ap,TS;class qj{constructor(t,e=Ki.DISPLAY){T(this,Ap);T(this,wl,null);T(this,be,new Map);T(this,uh,null);T(this,ch,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,x(this,ch,t.order);for(const n of t.groups)d(this,be).set(n.id,new Vj(e,n));if(t.baseState==="OFF")for(const n of d(this,be).values())n._setVisible(Dc,!1);for(const n of t.on)d(this,be).get(n)._setVisible(Dc,!0);for(const n of t.off)d(this,be).get(n)._setVisible(Dc,!1);x(this,uh,this.getHash())}}isVisible(t){if(d(this,be).size===0)return!0;if(!t)return Cb("Optional content group not defined."),!0;if(t.type==="OCG")return d(this,be).has(t.id)?d(this,be).get(t.id).visible:(zt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return D(this,Ap,TS).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!d(this,be).has(e))return zt(`Optional content group not found: ${e}`),!0;if(d(this,be).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!d(this,be).has(e))return zt(`Optional content group not found: ${e}`),!0;if(!d(this,be).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!d(this,be).has(e))return zt(`Optional content group not found: ${e}`),!0;if(!d(this,be).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!d(this,be).has(e))return zt(`Optional content group not found: ${e}`),!0;if(d(this,be).get(e).visible)return!1}return!0}return zt(`Unknown optional content policy ${t.policy}.`),!0}return zt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var l;const r=d(this,be).get(t);if(!r){zt(`Optional content group not found: ${t}`);return}if(n&&e&&r.rbGroups.length)for(const u of r.rbGroups)for(const c of u)c!==t&&((l=d(this,be).get(c))==null||l._setVisible(Dc,!1,!0));r._setVisible(Dc,!!e,!0),x(this,wl,null)}setOCGState({state:t,preserveRB:e}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const l=d(this,be).get(r);if(l)switch(n){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!l.visible,e);break}}x(this,wl,null)}get hasInitialVisibility(){return d(this,uh)===null||this.getHash()===d(this,uh)}getOrder(){return d(this,be).size?d(this,ch)?d(this,ch).slice():[...d(this,be).keys()]:null}getGroup(t){return d(this,be).get(t)||null}getHash(){if(d(this,wl)!==null)return d(this,wl);const t=new Ok;for(const[e,n]of d(this,be))t.update(`${e}:${n.visible}`);return x(this,wl,t.hexdigest())}[Symbol.iterator](){return d(this,be).entries()}}wl=new WeakMap,be=new WeakMap,uh=new WeakMap,ch=new WeakMap,Ap=new WeakSet,TS=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let r=1;r<e;r++){const l=t[r];let u;if(Array.isArray(l))u=D(this,Ap,TS).call(this,l);else if(d(this,be).has(l))u=d(this,be).get(l).visible;else return zt(`Optional content group not found: ${l}`),!0;switch(n){case"And":if(!u)return!1;break;case"Or":if(u)return!0;break;case"Not":return!u;default:return!0}}return n==="And"};class Yj{constructor(t,{disableRange:e=!1,disableStream:n=!1}){sn(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:l,progressiveDone:u,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=u,this._contentDispositionFilename=c,(l==null?void 0:l.length)>0){const f=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((f,p)=>{this._onReceiveData({begin:f,chunk:p})}),t.addProgressListener((f,p)=>{this._onProgress({loaded:f,total:p})}),t.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(n),!0)});sn(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,r,l;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(l=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||l.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){sn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Xj(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new $j(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class Xj{constructor(t,e,n=!1,r=null){this._stream=t,this._done=n||!1,this._filename=Xw(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class $j{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Wj(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let g=c(e);return g=unescape(g),g=f(g),g=p(g),l(g)}if(e=u(s),e){const g=p(e);return l(g)}if(e=n("filename","i").exec(s),e){e=e[1];let g=c(e);return g=p(g),l(g)}function n(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),A=bg(y);y=b.decode(A),t=!1}catch{}}return y}function l(g){return t&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),t&&(g=r("iso-8859-1",g))),g}function u(g){const y=[];let b;const A=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(g))!==null;){let[,S,k,C]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[k,C]}const w=[];for(let S=0;S<y.length&&S in y;++S){let[k,C]=y[S];C=c(C),k&&(C=unescape(C),S===0&&(C=f(C))),w.push(C)}return w.join("")}function c(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function f(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),w=g.slice(y+1).replace(/^[^']*'/,"");return r(b,w)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,w){if(A==="q"||A==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,k){return String.fromCharCode(parseInt(k,16))}),r(b,w);try{w=atob(w)}catch{}return r(b,w)})}return""}function qk(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const r=t[n];r!==void 0&&e.append(n,r)}return e}function Db(s){var t;return((t=URL.parse(s))==null?void 0:t.origin)??null}function Yk({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(s.get("Content-Length"),10);return!Number.isInteger(l)||(r.suggestedLength=l,l<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Xk(s){const t=s.get("Content-Disposition");if(t){let e=Wj(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Xw(e))return e}return null}function wg(s,t){return new Iy(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s,s===404||s===0&&t.startsWith("file:"))}function $k(s){return s===200||s===206}function Wk(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Kk(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(zt(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class ET{constructor(t){gt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=qk(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return sn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Kj(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Qj(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Kj{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),r=e.url;fetch(r,Wk(n,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=Db(l.url),!$k(l.status))throw wg(l.status,r);this._reader=l.body.getReader(),this._headersCapability.resolve();const u=l.headers,{allowRangeRequests:c,suggestedLength:f}=Yk({responseHeaders:u,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=f||this._contentLength,this._filename=Xk(u),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Gl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Kk(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Qj{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${e}-${n-1}`);const u=r.url;fetch(u,Wk(l,this._withCredentials,this._abortController)).then(c=>{const f=Db(c.url);if(f!==t._responseOrigin)throw new Error(`Expected range response-origin "${f}" to match "${t._responseOrigin}".`);if(!$k(c.status))throw wg(c.status,u);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:Kk(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const xA=200,EA=206;function Zj(s){const t=s.response;return typeof t!="string"?t:bg(t).buffer}class Jj{constructor({url:t,httpHeaders:e,withCredentials:n}){gt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=qk(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[l,u]of this.headers)e.setRequestHeader(l,u);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=EA):r.expectedStatus=xA,e.responseType="arraybuffer",sn(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var r;const n=this.pendingRequests[t];n&&((r=n.onProgress)==null||r.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){n.onError(r.status);return}const l=r.status||xA;if(!(l===xA&&n.expectedStatus===EA)&&l!==n.expectedStatus){n.onError(r.status);return}const c=Zj(r);if(l===EA){const f=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(f);p?n.onDone({begin:parseInt(p[1],10),chunk:c}):(zt('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class tF{constructor(t){this._source=t,this._manager=new Jj(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return sn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new eF(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new nF(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class eF{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Db(e.responseURL);const n=e.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[f,...p]=c.split(": ");return[f,p.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:u}=Yk({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=Xk(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=wg(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class nF{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Db((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=wg(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const iF=/^[a-z][a-z0-9\-+.]+:/i;function sF(s){if(iF.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}class aF{constructor(t){this.source=t,this.url=sF(t.url),sn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return sn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new rF(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new lF(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class rF{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=wg(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Gl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class lF{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const oF=1e5,_T=30;var UT,xl,wi,Sp,wp,Yo,ar,xp,Ep,Xo,hh,dh,El,fh,_p,ph,$o,Cp,Tp,gh,Wo,Dp,_l,mh,Tr,Qk,Zk,DS,es,dy,kS,Jk,tR;const cn=class cn{constructor({textContentSource:t,container:e,viewport:n}){T(this,Tr);T(this,xl,Promise.withResolvers());T(this,wi,null);T(this,Sp,!1);T(this,wp,!!((UT=globalThis.FontInspector)!=null&&UT.enabled));T(this,Yo,null);T(this,ar,null);T(this,xp,0);T(this,Ep,0);T(this,Xo,null);T(this,hh,null);T(this,dh,0);T(this,El,0);T(this,fh,Object.create(null));T(this,_p,[]);T(this,ph,null);T(this,$o,[]);T(this,Cp,new WeakMap);T(this,Tp,null);var f;if(t instanceof ReadableStream)x(this,ph,t);else if(typeof t=="object")x(this,ph,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,wi,x(this,hh,e)),x(this,El,n.scale*Cr.pixelRatio),x(this,dh,n.rotation),x(this,ar,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:l,pageX:u,pageY:c}=n.rawDims;x(this,Tp,[1,0,0,-1,-u,c+l]),x(this,Ep,r),x(this,xp,l),D(f=cn,es,Jk).call(f),ku(e,n),d(this,xl).promise.finally(()=>{d(cn,mh).delete(this),x(this,ar,null),x(this,fh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=jn.platform;return Qt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{d(this,Xo).read().then(({value:e,done:n})=>{if(n){d(this,xl).resolve();return}d(this,Yo)??x(this,Yo,e.lang),Object.assign(d(this,fh),e.styles),D(this,Tr,Qk).call(this,e.items),t()},d(this,xl).reject)};return x(this,Xo,d(this,ph).getReader()),d(cn,mh).add(this),t(),d(this,xl).promise}update({viewport:t,onBefore:e=null}){var l;const n=t.scale*Cr.pixelRatio,r=t.rotation;if(r!==d(this,dh)&&(e==null||e(),x(this,dh,r),ku(d(this,hh),{rotation:r})),n!==d(this,El)){e==null||e(),x(this,El,n);const u={div:null,properties:null,ctx:D(l=cn,es,dy).call(l,d(this,Yo))};for(const c of d(this,$o))u.properties=d(this,Cp).get(c),u.div=c,D(this,Tr,DS).call(this,u)}}cancel(){var e;const t=new Gl("TextLayer task cancelled.");(e=d(this,Xo))==null||e.cancel(t).catch(()=>{}),x(this,Xo,null),d(this,xl).reject(t)}get textDivs(){return d(this,$o)}get textContentItemsStr(){return d(this,_p)}static cleanup(){if(!(d(this,mh).size>0)){d(this,gh).clear();for(const{canvas:t}of d(this,Wo).values())t.remove();d(this,Wo).clear()}}};xl=new WeakMap,wi=new WeakMap,Sp=new WeakMap,wp=new WeakMap,Yo=new WeakMap,ar=new WeakMap,xp=new WeakMap,Ep=new WeakMap,Xo=new WeakMap,hh=new WeakMap,dh=new WeakMap,El=new WeakMap,fh=new WeakMap,_p=new WeakMap,ph=new WeakMap,$o=new WeakMap,Cp=new WeakMap,Tp=new WeakMap,gh=new WeakMap,Wo=new WeakMap,Dp=new WeakMap,_l=new WeakMap,mh=new WeakMap,Tr=new WeakSet,Qk=function(t){var r,l;if(d(this,Sp))return;(l=d(this,ar)).ctx??(l.ctx=D(r=cn,es,dy).call(r,d(this,Yo)));const e=d(this,$o),n=d(this,_p);for(const u of t){if(e.length>oF){zt("Ignoring additional textDivs for performance reasons."),x(this,Sp,!0);return}if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){const c=d(this,wi);x(this,wi,document.createElement("span")),d(this,wi).classList.add("markedContent"),u.id!==null&&d(this,wi).setAttribute("id",`${u.id}`),c.append(d(this,wi))}else u.type==="endMarkedContent"&&x(this,wi,d(this,wi).parentNode);continue}n.push(u.str),D(this,Tr,Zk).call(this,u)}},Zk=function(t){var S;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};d(this,$o).push(e);const r=Et.transform(d(this,Tp),t.transform);let l=Math.atan2(r[1],r[0]);const u=d(this,fh)[t.fontName];u.vertical&&(l+=Math.PI/2);let c=d(this,wp)&&u.fontSubstitution||u.fontFamily;c=cn.fontFamilyMap.get(c)||c;const f=Math.hypot(r[2],r[3]),p=f*D(S=cn,es,tR).call(S,c,u,d(this,Yo));let g,y;l===0?(g=r[4],y=r[5]-p):(g=r[4]+p*Math.sin(l),y=r[5]-p*Math.cos(l));const b="calc(var(--total-scale-factor) *",A=e.style;d(this,wi)===d(this,hh)?(A.left=`${(100*g/d(this,Ep)).toFixed(2)}%`,A.top=`${(100*y/d(this,xp)).toFixed(2)}%`):(A.left=`${b}${g.toFixed(2)}px)`,A.top=`${b}${y.toFixed(2)}px)`),A.fontSize=`${b}${(d(cn,_l)*f).toFixed(2)}px)`,A.fontFamily=c,n.fontSize=f,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,d(this,wp)&&(e.dataset.fontName=u.fontSubstitutionLoadedName||t.fontName),l!==0&&(n.angle=l*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const k=Math.abs(t.transform[0]),C=Math.abs(t.transform[3]);k!==C&&Math.max(k,C)/Math.min(k,C)>1.5&&(w=!0)}if(w&&(n.canvasWidth=u.vertical?t.height:t.width),d(this,Cp).set(e,n),d(this,ar).div=e,d(this,ar).properties=n,D(this,Tr,DS).call(this,d(this,ar)),n.hasText&&d(this,wi).append(e),n.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),d(this,wi).append(k)}},DS=function(t){var c;const{div:e,properties:n,ctx:r}=t,{style:l}=e;let u="";if(d(cn,_l)>1&&(u=`scale(${1/d(cn,_l)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:f}=l,{canvasWidth:p,fontSize:g}=n;D(c=cn,es,kS).call(c,r,g*d(this,El),f);const{width:y}=r.measureText(e.textContent);y>0&&(u=`scaleX(${p*d(this,El)/y}) ${u}`)}n.angle!==0&&(u=`rotate(${n.angle}deg) ${u}`),u.length>0&&(l.transform=u)},es=new WeakSet,dy=function(t=null){let e=d(this,Wo).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,Wo).set(t,e),d(this,Dp).set(e,{size:0,family:""})}return e},kS=function(t,e,n){const r=d(this,Dp).get(t);e===r.size&&n===r.family||(t.font=`${e}px ${n}`,r.size=e,r.family=n)},Jk=function(){if(d(this,_l)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),x(this,_l,t.getBoundingClientRect().height),t.remove()},tR=function(t,e,n){const r=d(this,gh).get(t);if(r)return r;const l=D(this,es,dy).call(this,n);l.canvas.width=l.canvas.height=_T,D(this,es,kS).call(this,l,_T,t);const u=l.measureText(""),c=u.fontBoundingBoxAscent,f=Math.abs(u.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let p=.8;return c?p=c/(c+f):(jn.platform.isFirefox&&zt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?p=e.ascent:e.descent&&(p=1+e.descent)),d(this,gh).set(t,p),p},T(cn,es),T(cn,gh,new Map),T(cn,Wo,new Map),T(cn,Dp,new WeakMap),T(cn,_l,null),T(cn,mh,new Set);let jf=cn;class Ff{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function r(l){var f;if(!l)return;let u=null;const c=l.name;if(c==="#text")u=l.value;else if(Ff.shouldBuildText(c))(f=l==null?void 0:l.attributes)!=null&&f.textContent?u=l.attributes.textContent:l.value&&(u=l.value);else return;if(u!==null&&e.push({str:u}),!!l.children)for(const p of l.children)r(p)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const uF=65536,cF=100;function eR(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new MS,{docId:e}=t,n=s.url?hF(s.url):null,r=s.data?dF(s.data):null,l=s.httpHeaders||null,u=s.withCredentials===!0,c=s.password??null,f=s.range instanceof nR?s.range:null,p=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:uF;let g=s.worker instanceof Hc?s.worker:null;const y=s.verbosity,b=typeof s.docBaseUrl=="string"&&!Tb(s.docBaseUrl)?s.docBaseUrl:null,A=Wm(s.cMapUrl),w=s.cMapPacked!==!1,S=s.CMapReaderFactory||(li?Dj:dT),k=Wm(s.iccUrl),C=Wm(s.standardFontDataUrl),N=s.StandardFontDataFactory||(li?kj:fT),O=Wm(s.wasmUrl),I=s.WasmFactory||(li?Rj:pT),z=s.stopAtErrors!==!0,L=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,B=s.isEvalSupported!==!1,W=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!li,Q=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!li&&(jn.platform.isFirefox||!globalThis.chrome),st=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,X=typeof s.disableFontFace=="boolean"?s.disableFontFace:li,Z=s.fontExtraProperties===!0,ct=s.enableXfa===!0,J=s.ownerDocument||globalThis.document,ht=s.disableRange===!0,F=s.disableStream===!0,q=s.disableAutoFetch===!0,yt=s.pdfBug===!0,xt=s.CanvasFactory||(li?Tj:Ej),_=s.FilterFactory||(li?Cj:_j),K=s.enableHWA===!0,ot=s.useWasm!==!1,R=f?f.length:s.length??NaN,at=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!li&&!X,ft=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(S===dT&&N===fT&&I===pT&&A&&C&&O&&Ec(A,document.baseURI)&&Ec(C,document.baseURI)&&Ec(O,document.baseURI)),it=null;ij(y);const ut={canvasFactory:new xt({ownerDocument:J,enableHWA:K}),filterFactory:new _({docId:e,ownerDocument:J}),cMapReaderFactory:ft?null:new S({baseUrl:A,isCompressed:w}),standardFontDataFactory:ft?null:new N({baseUrl:C}),wasmFactory:ft?null:new I({baseUrl:O})};if(!g){const Bt={verbosity:y,port:Sa.workerPort};g=Bt.port?Hc.fromPort(Bt):new Hc(Bt),t._worker=g}const mt={docId:e,apiVersion:"5.2.133",data:r,password:c,disableAutoFetch:q,rangeChunkSize:p,length:R,docBaseUrl:b,enableXfa:ct,evaluatorOptions:{maxImageSize:L,disableFontFace:X,ignoreErrors:z,isEvalSupported:B,isOffscreenCanvasSupported:W,isImageDecoderSupported:Q,canvasMaxAreaInBytes:st,fontExtraProperties:Z,useSystemFonts:at,useWasm:ot,useWorkerFetch:ft,cMapUrl:A,iccUrl:k,standardFontDataUrl:C,wasmUrl:O}},Tt={ownerDocument:J,pdfBug:yt,styleElement:it,loadingParams:{disableAutoFetch:q,enableXfa:ct}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Bt=g.messageHandler.sendWithPromise("GetDocRequest",mt,r?[r.buffer]:null);let fe;if(f)fe=new Yj(f,{disableRange:ht,disableStream:F});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let pe;if(li)if(Ec(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");pe=ET}else pe=aF;else pe=Ec(n)?ET:tF;fe=new pe({url:n,length:R,httpHeaders:l,withCredentials:u,rangeChunkSize:p,disableRange:ht,disableStream:F})}return Bt.then(pe=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Zt=new yf(e,pe,g.port),Vt=new bF(Zt,t,fe,Tt,ut);t._transport=Vt,Zt.send("Ready",null)})}).catch(t._capability.reject),t}function hF(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(li)return s;const t=URL.parse(s,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function dF(s){if(li&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return bg(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Wm(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const RS=s=>typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0,fF=s=>typeof s=="object"&&typeof(s==null?void 0:s.name)=="string",pF=dj.bind(null,RS,fF);var eb;const nb=class nb{constructor(){gt(this,"_capability",Promise.withResolvers());gt(this,"_transport",null);gt(this,"_worker",null);gt(this,"docId",`d${ei(nb,eb)._++}`);gt(this,"destroyed",!1);gt(this,"onPassword",null);gt(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(l){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,l}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};eb=new WeakMap,T(nb,eb,0);let MS=nb;class nR{constructor(t,e,n=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Ae("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class gF{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Qt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var rr,Ko,wf;class mF{constructor(t,e,n,r=!1){T(this,Ko);T(this,rr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=r?new uT:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new iR,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:l=!1}={}){return new Ag({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Qt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:r=sl.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:c=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1}){var I,z;(I=this._stats)==null||I.time("Overall");const b=this._transport.getRenderingIntent(n,r,g,y),{renderingIntent:A,cacheKey:w}=b;x(this,rr,!1),c||(c=this._transport.getOptionalContentConfig(A));let S=this._intentStates.get(w);S||(S=Object.create(null),this._intentStates.set(w,S)),S.streamReaderCancelTimeout&&(clearTimeout(S.streamReaderCancelTimeout),S.streamReaderCancelTimeout=null);const k=!!(A&Ki.PRINT);S.displayReadyCapability||(S.displayReadyCapability=Promise.withResolvers(),S.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(z=this._stats)==null||z.time("Page Request"),this._pumpOperatorList(b));const C=L=>{var B;S.renderTasks.delete(N),k&&x(this,rr,!0),D(this,Ko,wf).call(this),L?(N.capability.reject(L),this._abortOperatorList({intentState:S,reason:L instanceof Error?L:new Error(L)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(B=globalThis.Stats)!=null&&B.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new OS({callback:C,params:{canvasContext:t,viewport:e,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:S.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!k,pdfBug:this._pdfBug,pageColors:p});(S.renderTasks||(S.renderTasks=new Set)).add(N);const O=N.task;return Promise.all([S.displayReadyCapability.promise,c]).then(([L,B])=>{var W;if(this.destroyed){C();return}if((W=this._stats)==null||W.time("Rendering"),!(B.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:L,optionalContentConfig:B}),N.operatorListChanged()}).catch(C),O}getOperatorList({intent:t="display",annotationMode:e=sl.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var p;function l(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(f))}const u=this._transport.getRenderingIntent(t,e,n,r,!0);let c=this._intentStates.get(u.cacheKey);c||(c=Object.create(null),this._intentStates.set(u.cacheKey,c));let f;return c.opListReadCapability||(f=Object.create(null),f.operatorListChanged=l,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(f),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(u)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Ff.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,r){function l(){u.read().then(function({value:f,done:p}){if(p){n(c);return}c.lang??(c.lang=f.lang),Object.assign(c.styles,f.styles),c.items.push(...f.items),l()},r)}const u=e.getReader(),c={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),x(this,rr,!1),Promise.all(t)}cleanup(t=!1){x(this,rr,!0);const e=D(this,Ko,wf).call(this);return t&&e&&this._stats&&(this._stats=new uT),e}_startRenderPage(t,e){var r,l;const n=this._intentStates.get(e);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(l=n.displayReadyCapability)==null||l.resolve(t))}_renderPageChunk(t,e){for(let n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&D(this,Ko,wf).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:r}){const{map:l,transfer:u}=n,f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:r},u).getReader(),p=this._intentStates.get(e);p.streamReader=f;const g=()=>{f.read().then(({value:y,done:b})=>{if(b){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),g())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const b of p.renderTasks)b.operatorListChanged();D(this,Ko,wf).call(this)}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Yw){let r=cF;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new Gl(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,l]of this._intentStates)if(l===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}rr=new WeakMap,Ko=new WeakSet,wf=function(){if(!d(this,rr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,rr,!1),!0};var lr,ib;class yF{constructor(){T(this,lr,new Map);T(this,ib,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};d(this,ib).then(()=>{for(const[r]of d(this,lr))r.call(this,n)})}addEventListener(t,e,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:l}=n;if(l.aborted){zt("LoopbackPort - cannot use an `aborted` signal.");return}const u=()=>this.removeEventListener(t,e);r=()=>l.removeEventListener("abort",u),l.addEventListener("abort",u)}d(this,lr).set(e,r)}removeEventListener(t,e){const n=d(this,lr).get(e);n==null||n(),d(this,lr).delete(e)}terminate(){for(const[,t]of d(this,lr))t==null||t();d(this,lr).clear()}}lr=new WeakMap,ib=new WeakMap;var sb,Qo,Zo,yh,fy,bh,py;const Me=class Me{constructor({name:t=null,port:e=null,verbosity:n=sj()}={}){T(this,yh);var r;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((r=d(Me,Zo))!=null&&r.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(d(Me,Zo)||x(Me,Zo,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new yf("main","worker",t),this._messageHandler.on("ready",function(){}),D(this,yh,fy).call(this)}_initialize(){if(d(Me,Qo)||d(Me,bh,py)){this._setupFakeWorker();return}let{workerSrc:t}=Me;try{Me._isSameOrigin(window.location,t)||(t=Me._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new yf("main","worker",e),r=()=>{l.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},l=new AbortController;e.addEventListener("error",()=>{this._webWorker||r()},{signal:l.signal}),n.on("test",c=>{if(l.abort(),this.destroyed||!c){r();return}this._messageHandler=n,this._port=e,this._webWorker=e,D(this,yh,fy).call(this)}),n.on("ready",c=>{if(l.abort(),this.destroyed){r();return}try{u()}catch{this._setupFakeWorker()}});const u=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};u();return}catch{Cb("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){d(Me,Qo)||(zt("Setting up fake worker."),x(Me,Qo,!0)),Me._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new yF;this._port=e;const n=`fake${ei(Me,sb)._++}`,r=new yf(n+"_worker",n,e);t.setup(r,e),this._messageHandler=new yf(n,n+"_worker",e),D(this,yh,fy).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,n;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=d(Me,Zo))==null||e.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=d(this,Zo))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Me(t)}static get workerSrc(){if(Sa.workerSrc)return Sa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Qt(this,"_setupFakeWorkerGlobal",(async()=>d(this,bh,py)?d(this,bh,py):(await import(this.workerSrc)).WorkerMessageHandler)())}};sb=new WeakMap,Qo=new WeakMap,Zo=new WeakMap,yh=new WeakSet,fy=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},bh=new WeakSet,py=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},T(Me,bh),T(Me,sb,0),T(Me,Qo,!1),T(Me,Zo),li&&(x(Me,Qo,!0),Sa.workerSrc||(Sa.workerSrc="./pdf.worker.mjs")),Me._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(e,n);return n.origin===r.origin},Me._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Hc=Me;var or,fa,vh,Ah,ur,Jo,xf;class bF{constructor(t,e,n,r,l){T(this,Jo);T(this,or,new Map);T(this,fa,new Map);T(this,vh,new Map);T(this,Ah,new Map);T(this,ur,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new iR,this.fontLoader=new wj({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Qt(this,"annotationStorage",new Qw)}getRenderingIntent(t,e=sl.ENABLE,n=null,r=!1,l=!1){let u=Ki.DISPLAY,c=vS;switch(t){case"any":u=Ki.ANY;break;case"display":break;case"print":u=Ki.PRINT;break;default:zt(`getRenderingIntent - invalid intent: ${t}`)}const f=u&Ki.PRINT&&n instanceof Pk?n:this.annotationStorage;switch(e){case sl.DISABLE:u+=Ki.ANNOTATIONS_DISABLE;break;case sl.ENABLE:break;case sl.ENABLE_FORMS:u+=Ki.ANNOTATIONS_FORMS;break;case sl.ENABLE_STORAGE:u+=Ki.ANNOTATIONS_STORAGE,c=f.serializable;break;default:zt(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(u+=Ki.IS_EDITING),l&&(u+=Ki.OPLIST);const{ids:p,hash:g}=f.modifiedIds,y=[u,c.hash,g];return{renderingIntent:u,cacheKey:y.join("_"),annotationStorageSerializable:c,modifiedIds:p}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=d(this,ur))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of d(this,fa).values())t.push(r._destroy());d(this,fa).clear(),d(this,vh).clear(),d(this,Ah).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,l;this.commonObjs.clear(),this.fontLoader.clear(),d(this,or).clear(),this.filterFactory.destroy(),jf.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Gl("Worker was terminated.")),(l=this.messageHandler)==null||l.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,r)=>{sn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},r.onPull=()=>{this._fullReader.read().then(function({value:l,done:u}){if(u){r.close();return}sn(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{this._fullReader.cancel(l),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("ReaderHeadersReady",async n=>{var c;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:l,contentLength:u}=this._fullReader;return(!r||!l)&&(this._lastProgress&&((c=e.onProgress)==null||c.call(e,this._lastProgress)),this._fullReader.onProgress=f=>{var p;(p=e.onProgress)==null||p.call(e,{loaded:f.loaded,total:f.total})}),{isStreamingSupported:r,isRangeSupported:l,contentLength:u}}),t.on("GetRangeReader",(n,r)=>{sn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(n.begin,n.end);if(!l){r.close();return}r.onPull=()=>{l.read().then(function({value:u,done:c}){if(c){r.close();return}sn(u instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(u),1,[u])}).catch(u=>{r.error(u)})},r.onCancel=u=>{l.cancel(u),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new gF(n,this))}),t.on("DocException",n=>{e._capability.reject(vi(n))}),t.on("PasswordRequest",n=>{x(this,ur,Promise.withResolvers());try{if(!e.onPassword)throw vi(n);const r=l=>{l instanceof Error?d(this,ur).reject(l):d(this,ur).resolve({password:l})};e.onPassword(r,n.code)}catch(r){d(this,ur).reject(r)}return d(this,ur).promise}),t.on("DataLoaded",n=>{var r;(r=e.onProgress)==null||r.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;d(this,fa).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,l])=>{var u;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in l){const g=l.error;zt(`Error during font loading: ${g}`),this.commonObjs.resolve(n,g);break}const c=this._params.pdfBug&&((u=globalThis.FontInspector)!=null&&u.enabled)?(g,y)=>globalThis.FontInspector.fontAdded(g,y):null,f=new xj(l,c);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f.fontExtraProperties&&f.data&&(f.data=null),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:p}=l;sn(p,"The imageRef must be defined.");for(const g of d(this,fa).values())for(const[,y]of g.objs)if((y==null?void 0:y.ref)===p)return y.dataLen?(this.commonObjs.resolve(n,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,l);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,l,u])=>{var f;if(this.destroyed)return;const c=d(this,fa).get(r);if(!c.objs.has(n)){if(c._intentStates.size===0){(f=u==null?void 0:u.bitmap)==null||f.close();return}switch(l){case"Image":case"Pattern":c.objs.resolve(n,u);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",n=>{var r;this.destroyed||(r=e.onProgress)==null||r.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&zt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=d(this,vh).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&d(this,Ah).set(l.refStr,t);const u=new mF(e,l,this,this._params.pdfBug);return d(this,fa).set(e,u),u});return d(this,vh).set(e,r),r}getPageIndex(t){return RS(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return D(this,Jo,xf).call(this,"GetFieldObjects")}hasJSActions(){return D(this,Jo,xf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return D(this,Jo,xf).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return D(this,Jo,xf).call(this,"GetOptionalContentConfig").then(e=>new qj(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=d(this,or).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(r=>{var l,u;return{info:r[0],metadata:r[1]?new Gj(r[1]):null,contentDispositionFilename:((l=this._fullReader)==null?void 0:l.filename)??null,contentLength:((u=this._fullReader)==null?void 0:u.contentLength)??null}});return d(this,or).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of d(this,fa).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),d(this,or).clear(),this.filterFactory.destroy(!0),jf.cleanup()}}cachedPageNumber(t){if(!RS(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return d(this,Ah).get(e)??null}}or=new WeakMap,fa=new WeakMap,vh=new WeakMap,Ah=new WeakMap,ur=new WeakMap,Jo=new WeakSet,xf=function(t,e=null){const n=d(this,or).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,e);return d(this,or).set(t,r),r};const of=Symbol("INITIAL_DATA");var Bi,kp,NS;class iR{constructor(){T(this,kp);T(this,Bi,Object.create(null))}get(t,e=null){if(e){const r=D(this,kp,NS).call(this,t);return r.promise.then(()=>e(r.data)),null}const n=d(this,Bi)[t];if(!n||n.data===of)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=d(this,Bi)[t];return!!e&&e.data!==of}delete(t){const e=d(this,Bi)[t];return!e||e.data===of?!1:(delete d(this,Bi)[t],!0)}resolve(t,e=null){const n=D(this,kp,NS).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in d(this,Bi)){const{data:n}=d(this,Bi)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}x(this,Bi,Object.create(null))}*[Symbol.iterator](){for(const t in d(this,Bi)){const{data:e}=d(this,Bi)[t];e!==of&&(yield[t,e])}}}Bi=new WeakMap,kp=new WeakSet,NS=function(t){var e;return(e=d(this,Bi))[t]||(e[t]={...Promise.withResolvers(),data:of})};var Cl;class vF{constructor(t){T(this,Cl,null);gt(this,"onContinue",null);gt(this,"onError",null);x(this,Cl,t)}get promise(){return d(this,Cl).capability.promise}cancel(t=0){d(this,Cl).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=d(this,Cl).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=d(this,Cl);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Cl=new WeakMap;var Tl,tu;const wo=class wo{constructor({callback:t,params:e,objs:n,commonObjs:r,annotationCanvasMap:l,operatorList:u,pageIndex:c,canvasFactory:f,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null}){T(this,Tl,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=u,this._pageIndex=c,this.canvasFactory=f,this.filterFactory=p,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new vF(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,f;if(this.cancelled)return;if(this._canvas){if(d(wo,tu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(wo,tu).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:l,background:u}=this.params;this.gfx=new Bc(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:r,transparency:t,background:u}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var n,r,l;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),d(this,Tl)&&(window.cancelAnimationFrame(d(this,Tl)),x(this,Tl,null)),d(wo,tu).delete(this._canvas),t||(t=new Yw(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(l=(r=this.task).onError)==null||l.call(r,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,Tl,window.requestAnimationFrame(()=>{x(this,Tl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(wo,tu).delete(this._canvas),this.callback())))}};Tl=new WeakMap,tu=new WeakMap,T(wo,tu,new WeakSet);let OS=wo;const AF="5.2.133",SF="4f7761353";function CT(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function uf(s){return Math.max(0,Math.min(255,255*s))}class TT{static CMYK_G([t,e,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=uf(t),[t,t,t]}static G_HTML([t]){const e=CT(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(uf)}static RGB_HTML(t){return`#${t.map(CT).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,n,r]){return[uf(1-Math.min(1,t+r)),uf(1-Math.min(1,n+r)),uf(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const r=1-t,l=1-e,u=1-n,c=Math.min(r,l,u);return["CMYK",r,l,u,c]}}class wF{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ae("Abstract method `_createSVG` called.")}}class By extends wF{_createSVG(t){return document.createElementNS(Ga,t)}}class sR{static setupStorage(t,e,n,r,l){const u=r.getValue(e,{value:null});switch(n.name){case"textarea":if(u.value!==null&&(t.textContent=u.value),l==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(u.value===n.attributes.xfaOn?t.setAttribute("checked",!0):u.value===n.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",c=>{r.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(u.value!==null&&t.setAttribute("value",u.value),l==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})})}break;case"select":if(u.value!==null){t.setAttribute("value",u.value);for(const c of n.children)c.attributes.value===u.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const f=c.target.options,p=f.selectedIndex===-1?"":f[f.selectedIndex].value;r.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:r,linkService:l}){const{attributes:u}=e,c=t instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${r}`);for(const[f,p]of Object.entries(u))if(p!=null)switch(f){case"class":p.length&&t.setAttribute(f,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!c||f!=="href"&&f!=="newWindow")&&t.setAttribute(f,p)}c&&l.addLinkAttributes(t,u.href,u.newWindow),n&&u.dataId&&this.setupStorage(t,u.dataId,e,n)}static render(t){var y,b;const e=t.annotationStorage,n=t.linkService,r=t.xfaHtml,l=t.intent||"display",u=document.createElement(r.name);r.attributes&&this.setAttributes({html:u,element:r,intent:l,linkService:n});const c=l!=="richText",f=t.div;if(f.append(u),t.viewport){const A=`matrix(${t.viewport.transform.join(",")})`;f.style.transform=A}c&&f.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const A=document.createTextNode(r.value);u.append(A),c&&Ff.shouldBuildText(r.name)&&p.push(A)}return{textDivs:p}}const g=[[r,-1,u]];for(;g.length>0;){const[A,w,S]=g.at(-1);if(w+1===A.children.length){g.pop();continue}const k=A.children[++g.at(-1)[1]];if(k===null)continue;const{name:C}=k;if(C==="#text"){const O=document.createTextNode(k.value);p.push(O),S.append(O);continue}const N=(y=k==null?void 0:k.attributes)!=null&&y.xmlns?document.createElementNS(k.attributes.xmlns,C):document.createElement(C);if(S.append(N),k.attributes&&this.setAttributes({html:N,element:k,storage:e,intent:l,linkService:n}),((b=k.children)==null?void 0:b.length)>0)g.push([k,-1,N]);else if(k.value){const O=document.createTextNode(k.value);c&&Ff.shouldBuildText(C)&&p.push(O),N.append(O)}}for(const A of f.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const xg=1e3,xF=9,Mu=new WeakSet;class DT{static create(t){switch(t.data.annotationType){case tn.LINK:return new aR(t);case tn.TEXT:return new EF(t);case tn.WIDGET:switch(t.data.fieldType){case"Tx":return new _F(t);case"Btn":return t.data.radioButton?new oR(t):t.data.checkBox?new TF(t):new DF(t);case"Ch":return new kF(t);case"Sig":return new CF(t)}return new Iu(t);case tn.POPUP:return new PS(t);case tn.FREETEXT:return new fR(t);case tn.LINE:return new MF(t);case tn.SQUARE:return new NF(t);case tn.CIRCLE:return new OF(t);case tn.POLYLINE:return new pR(t);case tn.CARET:return new PF(t);case tn.INK:return new tx(t);case tn.POLYGON:return new LF(t);case tn.HIGHLIGHT:return new gR(t);case tn.UNDERLINE:return new zF(t);case tn.SQUIGGLY:return new IF(t);case tn.STRIKEOUT:return new jF(t);case tn.STAMP:return new mR(t);case tn.FILEATTACHMENT:return new FF(t);default:return new Ke(t)}}}var eu,Sh,wh,Rp,LS;const cx=class cx{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){T(this,Rp);T(this,eu,null);T(this,Sh,!1);T(this,wh,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return cx._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;d(this,eu)||x(this,eu,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&D(this,Rp,LS).call(this,e),(n=d(this,wh))==null||n.popup.updateEdited(t)}resetEdited(){var t;d(this,eu)&&(D(this,Rp,LS).call(this,d(this,eu).rect),(t=d(this,wh))==null||t.popup.resetEdited(),x(this,eu,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:r}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),this instanceof Iu||(l.tabIndex=xg);const{style:u}=l;if(u.zIndex=this.parent.zIndex++,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof PS){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,l),l}const{width:c,height:f}=this;if(!t&&e.borderStyle.width>0){u.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,k=e.borderStyle.verticalCornerRadius;if(S>0||k>0){const N=`calc(${S}px * var(--total-scale-factor)) / calc(${k}px * var(--total-scale-factor))`;u.borderRadius=N}else if(this instanceof oR){const N=`calc(${c}px * var(--total-scale-factor)) / calc(${f}px * var(--total-scale-factor))`;u.borderRadius=N}switch(e.borderStyle.style){case xc.SOLID:u.borderStyle="solid";break;case xc.DASHED:u.borderStyle="dashed";break;case xc.BEVELED:zt("Unimplemented border style: beveled");break;case xc.INSET:zt("Unimplemented border style: inset");break;case xc.UNDERLINE:u.borderBottomStyle="solid";break}const C=e.borderColor||null;C?(x(this,Sh,!0),u.borderColor=Et.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):u.borderWidth=0}const p=Et.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:A}=r.rawDims;u.left=`${100*(p[0]-b)/g}%`,u.top=`${100*(p[1]-A)/y}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(u.width=`${100*c/g}%`,u.height=`${100*f/y}%`):this.setRotation(w,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:l,height:u}=this;t%180!==0&&([l,u]=[u,l]),e.style.width=`${100*l/n}%`,e.style.height=`${100*u/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,r)=>{const l=r.detail[e],u=l[0],c=l.slice(1);r.target.style[n]=TT[`${u}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:TT[`${u}_rgb`](c)})};return Qt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const r of Object.keys(e.detail)){const l=t[r]||n[r];l==null||l(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[r,l]of Object.entries(e)){const u=n[r];if(u){const c={detail:{[r]:l},target:t};u(c),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,r,l]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,k,C,N]=t.subarray(2,6);if(r===S&&l===k&&e===C&&n===N)return}const{style:u}=this.container;let c;if(d(this,Sh)){const{borderColor:S,borderWidth:k}=u;u.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${k}">`],this.container.classList.add("hasBorder")}const f=r-e,p=l-n,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const b=g.createElement("defs");y.append(b);const A=g.createElement("clipPath"),w=`clippath_${this.data.id}`;A.setAttribute("id",w),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let S=2,k=t.length;S<k;S+=8){const C=t[S],N=t[S+1],O=t[S+2],I=t[S+3],z=g.createElement("rect"),L=(O-e)/f,B=(l-N)/p,W=(C-O)/f,Q=(N-I)/p;z.setAttribute("x",L),z.setAttribute("y",B),z.setAttribute("width",W),z.setAttribute("height",Q),A.append(z),c==null||c.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${B}" width="${W}" height="${Q}"/>`)}d(this,Sh)&&(c.push("</g></svg>')"),u.backgroundImage=c.join("")),this.container.append(y),this.container.style.clipPath=`url(#${w})`}_createPopup(){const{data:t}=this,e=x(this,wh,new PS({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Ae("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:l,id:u,exportValues:c}of r){if(l===-1||u===e)continue;const f=typeof c=="string"?c:null,p=document.querySelector(`[data-element-id="${u}"]`);if(p&&!Mu.has(p)){zt(`_getElementsByName - element not allowed: ${u}`);continue}n.push({id:u,exportValue:f,domElement:p})}return n}for(const r of document.getElementsByName(t)){const{exportValue:l}=r,u=r.getAttribute("data-element-id");u!==e&&Mu.has(r)&&n.push({id:u,exportValue:l,domElement:r})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};eu=new WeakMap,Sh=new WeakMap,wh=new WeakMap,Rp=new WeakSet,LS=function(t){const{container:{style:e},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:u,pageX:c,pageY:f}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-c)/l}%`,e.top=`${100*(u-t[3]+f)/u}%`,r===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/u}%`):this.setRotation(r)};let Ke=cx;var Ji,bo,rR,lR;class aR extends Ke{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});T(this,Ji);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let l=!1;return e.url?(n.addLinkAttributes(r,e.url,e.newWindow),l=!0):e.action?(this._bindNamedAction(r,e.action),l=!0):e.attachment?(D(this,Ji,rR).call(this,r,e.attachment,e.attachmentDest),l=!0):e.setOCGState?(D(this,Ji,lR).call(this,r,e.setOCGState),l=!0):e.dest?(this._bindLink(r,e.dest),l=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),l=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),l=!0):this.isTooltipOnly&&!l&&(this._bindLink(r,""),l=!0)),this.container.classList.add("linkAnnotation"),l&&this.container.append(r),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&D(this,Ji,bo).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),D(this,Ji,bo).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const l of Object.keys(n.actions)){const u=r.get(l);u&&(e[u]=()=>{var c;return(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:l}}),!1})}e.onclick||(e.onclick=()=>!1),D(this,Ji,bo).call(this)}_bindResetFormAction(e,n){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),D(this,Ji,bo).call(this),!this._fieldObjects){zt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var y;r==null||r();const{fields:l,refs:u,include:c}=n,f=[];if(l.length!==0||u.length!==0){const b=new Set(u);for(const A of l){const w=this._fieldObjects[A]||[];for(const{id:S}of w)b.add(S)}for(const A of Object.values(this._fieldObjects))for(const w of A)b.has(w.id)===c&&f.push(w)}else for(const b of Object.values(this._fieldObjects))f.push(...b);const p=this.annotationStorage,g=[];for(const b of f){const{id:A}=b;switch(g.push(A),b.type){case"text":{const S=b.defaultValue||"";p.setValue(A,{value:S});break}case"checkbox":case"radiobutton":{const S=b.defaultValue===b.exportValues;p.setValue(A,{value:S});break}case"combobox":case"listbox":{const S=b.defaultValue||"";p.setValue(A,{value:S});break}default:continue}const w=document.querySelector(`[data-element-id="${A}"]`);if(w){if(!Mu.has(w)){zt(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;w.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}Ji=new WeakSet,bo=function(){this.container.setAttribute("data-internal-link","")},rR=function(e,n,r=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var l;return(l=this.downloadManager)==null||l.openOrDownloadData(n.content,n.filename,r),!1},D(this,Ji,bo).call(this)},lR=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),D(this,Ji,bo).call(this)};class EF extends Ke{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Iu extends Ke{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return jn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,r,l){n.includes("mouse")?t.addEventListener(n,u=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(u),shift:u.shiftKey,modifier:this._getKeyModifier(u)}})}):t.addEventListener(n,u=>{var c;if(n==="blur"){if(!e.focused||!u.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}l&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(u)}}))})}_setEventListeners(t,e,n,r){var l,u,c;for(const[f,p]of n)(p==="Action"||(l=this.data.actions)!=null&&l[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,f,p,r),p==="Focus"&&!((u=this.data.actions)!=null&&u.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Et.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||xF,l=t.style;let u;const c=2,f=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c),g=Math.round(p/(yA*r))||1,y=p/g;u=Math.min(r,f(y/yA))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c);u=Math.min(r,f(p/yA))}l.fontSize=`calc(${u}px * var(--total-scale-factor))`,l.color=Et.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class _F extends Iu{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,r){const l=this.annotationStorage;for(const u of this._getElementsByName(t.name,t.id))u.domElement&&(u.domElement[e]=n),l.setValue(u.id,{[r]:n})}render(){var r,l;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const u=t.getValue(e,{value:this.data.fieldValue});let c=u.value||"";const f=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;f&&c.length>f&&(c=c.slice(0,f));let p=u.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const g={userValue:c,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p??c,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",p??c),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Mu.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=xg,this._setRequired(n,this.data.required),f&&(n.maxLength=f),n.addEventListener("input",b=>{t.setValue(e,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),g.formattedValue=null}),n.addEventListener("resetform",b=>{const A=this.data.defaultFieldValue??"";n.value=g.userValue=A,g.formattedValue=null});let y=b=>{const{formattedValue:A}=g;A!=null&&(b.target.value=A),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",A=>{var S;if(g.focused)return;const{target:w}=A;g.userValue&&(w.value=g.userValue),g.lastCommittedValue=w.value,g.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(g.focused=!0)}),n.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const w={value(S){g.userValue=S.detail.value??"",t.setValue(e,{value:g.userValue.toString()}),S.target.value=g.userValue},formattedValue(S){const{formattedValue:k}=S.detail;g.formattedValue=k,k!=null&&S.target!==document.activeElement&&(S.target.value=k),t.setValue(e,{formattedValue:k})},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var O;const{charLimit:k}=S.detail,{target:C}=S;if(k===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",k);let N=g.userValue;!N||N.length<=k||(N=N.slice(0,k),C.value=g.userValue=N,t.setValue(e,{value:N}),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(w,A)}),n.addEventListener("keydown",A=>{var k;g.commitKey=1;let w=-1;if(A.key==="Escape"?w=0:A.key==="Enter"&&!this.data.multiLine?w=2:A.key==="Tab"&&(g.commitKey=3),w===-1)return;const{value:S}=A.target;g.lastCommittedValue!==S&&(g.lastCommittedValue=S,g.userValue=S,(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:w,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const b=y;y=null,n.addEventListener("blur",A=>{var S,k;if(!g.focused||!A.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(g.focused=!1);const{value:w}=A.target;g.userValue=w,g.lastCommittedValue!==w&&((k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:g.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}})),b(A)}),(l=this.data.actions)!=null&&l.Keystroke&&n.addEventListener("beforeinput",A=>{var z;g.lastCommittedValue=null;const{data:w,target:S}=A,{value:k,selectionStart:C,selectionEnd:N}=S;let O=C,I=N;switch(A.inputType){case"deleteWordBackward":{const L=k.substring(0,C).match(/\w*[^\w]*$/);L&&(O-=L[0].length);break}case"deleteWordForward":{const L=k.substring(C).match(/^[^\w]*\w*/);L&&(I+=L[0].length);break}case"deleteContentBackward":C===N&&(O-=1);break;case"deleteContentForward":C===N&&(I+=1);break}A.preventDefault(),(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,change:w||"",willCommit:!1,selStart:O,selEnd:I}})}),this._setEventListeners(n,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/f;n.classList.add("comb"),n.style.letterSpacing=`calc(${A}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class CF extends Iu{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class TF extends Iu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return Mu.add(l),l.setAttribute("data-element-id",n),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,r&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=xg,l.addEventListener("change",u=>{const{name:c,checked:f}=u.target;for(const p of this._getElementsByName(c,n)){const g=f&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=g),t.setValue(p.id,{value:g})}t.setValue(n,{value:f})}),l.addEventListener("resetform",u=>{const c=e.defaultFieldValue||"Off";u.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",u=>{const c={value(f){f.target.checked=f.detail.value!=="Off",t.setValue(n,{value:f.target.checked})}};this._dispatchEventFromSandbox(c,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class oR extends Iu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(n,{value:r})),r)for(const u of this._getElementsByName(e.fieldName,n))t.setValue(u.id,{value:!1});const l=document.createElement("input");if(Mu.add(l),l.setAttribute("data-element-id",n),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=xg,l.addEventListener("change",u=>{const{name:c,checked:f}=u.target;for(const p of this._getElementsByName(c,n))t.setValue(p.id,{value:!1});t.setValue(n,{value:f})}),l.addEventListener("resetform",u=>{const c=e.defaultFieldValue;u.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const u=e.buttonValue;l.addEventListener("updatefromsandbox",c=>{const f={value:p=>{const g=u===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const b=g&&y.id===n;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(f,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class DF extends aR{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class kF extends Iu{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Mu.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=xg;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,n.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),l=!1),r.append(y)}let u=null;if(l){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),u=()=>{g.remove(),r.removeEventListener("input",u),u=null},r.addEventListener("input",u)}const c=g=>{const y=g?"value":"textContent",{options:b,multiple:A}=r;return A?Array.prototype.filter.call(b,w=>w.selected).map(w=>w[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let f=c(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const y={value(b){u==null||u();const A=b.detail.value,w=new Set(Array.isArray(A)?A:[A]);for(const S of r.options)S.selected=w.has(S.value);t.setValue(e,{value:c(!0)}),f=c(!1)},multipleSelection(b){r.multiple=!0},remove(b){const A=r.options,w=b.detail.remove;A[w].selected=!1,r.remove(w),A.length>0&&Array.prototype.findIndex.call(A,k=>k.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:c(!0),items:p(b)}),f=c(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),f=c(!1)},insert(b){const{index:A,displayValue:w,exportValue:S}=b.detail.insert,k=r.children[A],C=document.createElement("option");C.textContent=w,C.value=S,k?k.before(C):r.append(C),t.setValue(e,{value:c(!0),items:p(b)}),f=c(!1)},items(b){const{items:A}=b.detail;for(;r.length!==0;)r.remove(0);for(const w of A){const{displayValue:S,exportValue:k}=w,C=document.createElement("option");C.textContent=S,C.value=k,r.append(C)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:c(!0),items:p(b)}),f=c(!1)},indices(b){const A=new Set(b.detail.indices);for(const w of b.target.options)w.selected=A.has(w.index);t.setValue(e,{value:c(!0)}),f=c(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),r.addEventListener("input",g=>{var A;const y=c(!0),b=c(!1);t.setValue(e,{value:y}),g.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:f,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class PS extends Ke{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Ke._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new RF({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${qw}${n}`).join(",")),this.container}}var xh,ab,rb,Eh,_h,Ue,cr,Ch,Mp,Np,Th,hr,Ps,dr,Op,fr,Lp,nu,iu,Se,gy,zS,uR,cR,hR,dR,my,yy,IS;class RF{constructor({container:t,color:e,elements:n,titleObj:r,modificationDate:l,contentsObj:u,richText:c,parent:f,rect:p,parentRect:g,open:y}){T(this,Se);T(this,xh,D(this,Se,hR).bind(this));T(this,ab,D(this,Se,IS).bind(this));T(this,rb,D(this,Se,yy).bind(this));T(this,Eh,D(this,Se,my).bind(this));T(this,_h,null);T(this,Ue,null);T(this,cr,null);T(this,Ch,null);T(this,Mp,null);T(this,Np,null);T(this,Th,null);T(this,hr,!1);T(this,Ps,null);T(this,dr,null);T(this,Op,null);T(this,fr,null);T(this,Lp,null);T(this,nu,null);T(this,iu,!1);var b;x(this,Ue,t),x(this,Lp,r),x(this,cr,u),x(this,fr,c),x(this,Np,f),x(this,_h,e),x(this,Op,p),x(this,Th,g),x(this,Mp,n),x(this,Ch,$w.toDateObject(l)),this.trigger=n.flatMap(A=>A.getElementsToTriggerPopup());for(const A of this.trigger)A.addEventListener("click",d(this,Eh)),A.addEventListener("mouseenter",d(this,rb)),A.addEventListener("mouseleave",d(this,ab)),A.classList.add("popupTriggerArea");for(const A of n)(b=A.container)==null||b.addEventListener("keydown",d(this,xh));d(this,Ue).hidden=!0,y&&D(this,Se,my).call(this)}render(){if(d(this,Ps))return;const t=x(this,Ps,document.createElement("div"));if(t.className="popup",d(this,_h)){const l=t.style.outlineColor=Et.makeHexColor(...d(this,_h));t.style.backgroundColor=`color-mix(in srgb, ${l} 30%, white)`}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=d(this,Lp),t.append(e),d(this,Ch)){const l=document.createElement("span");l.classList.add("popupDate"),l.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),l.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,Ch).valueOf()})),e.append(l)}const r=d(this,Se,gy);if(r)sR.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const l=this._formatContents(d(this,cr));t.append(l)}d(this,Ue).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const r=t.split(/(?:\r\n?|\n)/);for(let l=0,u=r.length;l<u;++l){const c=r[l];n.append(document.createTextNode(c)),l<u-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;d(this,nu)||x(this,nu,{contentsObj:d(this,cr),richText:d(this,fr)}),t&&x(this,dr,null),e&&(x(this,fr,D(this,Se,cR).call(this,e)),x(this,cr,null)),(n=d(this,Ps))==null||n.remove(),x(this,Ps,null)}resetEdited(){var t;d(this,nu)&&({contentsObj:ei(this,cr)._,richText:ei(this,fr)._}=d(this,nu),x(this,nu,null),(t=d(this,Ps))==null||t.remove(),x(this,Ps,null),x(this,dr,null))}forceHide(){x(this,iu,this.isVisible),d(this,iu)&&(d(this,Ue).hidden=!0)}maybeShow(){d(this,iu)&&(d(this,Ps)||D(this,Se,yy).call(this),x(this,iu,!1),d(this,Ue).hidden=!1)}get isVisible(){return d(this,Ue).hidden===!1}}xh=new WeakMap,ab=new WeakMap,rb=new WeakMap,Eh=new WeakMap,_h=new WeakMap,Ue=new WeakMap,cr=new WeakMap,Ch=new WeakMap,Mp=new WeakMap,Np=new WeakMap,Th=new WeakMap,hr=new WeakMap,Ps=new WeakMap,dr=new WeakMap,Op=new WeakMap,fr=new WeakMap,Lp=new WeakMap,nu=new WeakMap,iu=new WeakMap,Se=new WeakSet,gy=function(){const t=d(this,fr),e=d(this,cr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&d(this,fr).html||null},zS=function(){var t,e,n;return((n=(e=(t=d(this,Se,gy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},uR=function(){var t,e,n;return((n=(e=(t=d(this,Se,gy))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},cR=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:d(this,Se,uR),fontSize:d(this,Se,zS)?`calc(${d(this,Se,zS)}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:r});return n},hR=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&d(this,hr))&&D(this,Se,my).call(this)},dR=function(){if(d(this,dr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:r,pageY:l}}}=d(this,Np);let u=!!d(this,Th),c=u?d(this,Th):d(this,Op);for(const w of d(this,Mp))if(!c||Et.intersect(w.data.rect,c)!==null){c=w.data.rect,u=!0;break}const f=Et.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),g=u?c[2]-c[0]+5:0,y=f[0]+g,b=f[1];x(this,dr,[100*(y-r)/e,100*(b-l)/n]);const{style:A}=d(this,Ue);A.left=`${d(this,dr)[0]}%`,A.top=`${d(this,dr)[1]}%`},my=function(){x(this,hr,!d(this,hr)),d(this,hr)?(D(this,Se,yy).call(this),d(this,Ue).addEventListener("click",d(this,Eh)),d(this,Ue).addEventListener("keydown",d(this,xh))):(D(this,Se,IS).call(this),d(this,Ue).removeEventListener("click",d(this,Eh)),d(this,Ue).removeEventListener("keydown",d(this,xh)))},yy=function(){d(this,Ps)||this.render(),this.isVisible?d(this,hr)&&d(this,Ue).classList.add("focused"):(D(this,Se,dR).call(this),d(this,Ue).hidden=!1,d(this,Ue).style.zIndex=parseInt(d(this,Ue).style.zIndex)+1e3)},IS=function(){d(this,Ue).classList.remove("focused"),!(d(this,hr)||!this.isVisible)&&(d(this,Ue).hidden=!0,d(this,Ue).style.zIndex=parseInt(d(this,Ue).style.zIndex)-1e3)};class fR extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Pt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Pp;class MF extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});T(this,Pp,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:r}=this,l=this.svgFactory.create(n,r,!0),u=x(this,Pp,this.svgFactory.createElement("svg:line"));return u.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),u.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),u.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),u.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),u.setAttribute("stroke-width",e.borderStyle.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Pp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pp=new WeakMap;var zp;class NF extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});T(this,zp,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:r}=this,l=this.svgFactory.create(n,r,!0),u=e.borderStyle.width,c=x(this,zp,this.svgFactory.createElement("svg:rect"));return c.setAttribute("x",u/2),c.setAttribute("y",u/2),c.setAttribute("width",n-u),c.setAttribute("height",r-u),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,zp)}addHighlightArea(){this.container.classList.add("highlightArea")}}zp=new WeakMap;var Ip;class OF extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});T(this,Ip,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:r}=this,l=this.svgFactory.create(n,r,!0),u=e.borderStyle.width,c=x(this,Ip,this.svgFactory.createElement("svg:ellipse"));return c.setAttribute("cx",n/2),c.setAttribute("cy",r/2),c.setAttribute("rx",n/2-u/2),c.setAttribute("ry",r/2-u/2),c.setAttribute("stroke-width",u||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Ip)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ip=new WeakMap;var jp;class pR extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});T(this,jp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:r,popupRef:l},width:u,height:c}=this;if(!n)return this.container;const f=this.svgFactory.create(u,c,!0);let p=[];for(let y=0,b=n.length;y<b;y+=2){const A=n[y]-e[0],w=e[3]-n[y+1];p.push(`${A},${w}`)}p=p.join(" ");const g=x(this,jp,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",p),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),f.append(g),this.container.append(f),!l&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,jp)}addHighlightArea(){this.container.classList.add("highlightArea")}}jp=new WeakMap;class LF extends pR{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class PF extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Fp,su,Bp,jS;class tx extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});T(this,Bp);T(this,Fp,null);T(this,su,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Pt.HIGHLIGHT:Pt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:r,borderStyle:l,popupRef:u}}=this,{transform:c,width:f,height:p}=D(this,Bp,jS).call(this,n,e),g=this.svgFactory.create(f,p,!0),y=x(this,Fp,this.svgFactory.createElement("svg:g"));g.append(y),y.setAttribute("stroke-width",l.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",c);for(let b=0,A=r.length;b<A;b++){const w=this.svgFactory.createElement(this.svgElementName);d(this,su).push(w),w.setAttribute("points",r[b].join(",")),y.append(w)}return!u&&this.hasPopupData&&this._createPopup(),this.container.append(g),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:r,rect:l}=e,u=d(this,Fp);if(n>=0&&u.setAttribute("stroke-width",n||1),r)for(let c=0,f=d(this,su).length;c<f;c++)d(this,su)[c].setAttribute("points",r[c].join(","));if(l){const{transform:c,width:f,height:p}=D(this,Bp,jS).call(this,this.data.rotation,l);u.parentElement.setAttribute("viewBox",`0 0 ${f} ${p}`),u.setAttribute("transform",c)}}getElementsToTriggerPopup(){return d(this,su)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fp=new WeakMap,su=new WeakMap,Bp=new WeakSet,jS=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class gR extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Pt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class zF extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class IF extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class jF extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class mR extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Pt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Hp,Up,FS;class FF extends Ke{constructor(e){var r;super(e,{isRenderable:!0});T(this,Up);T(this,Hp,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",D(this,Up,FS).bind(this)),x(this,Hp,r);const{isMac:l}=jn.platform;return e.addEventListener("keydown",u=>{u.key==="Enter"&&(l?u.metaKey:u.ctrlKey)&&D(this,Up,FS).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return d(this,Hp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hp=new WeakMap,Up=new WeakSet,FS=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Gp,au,Dl,Vp,Xl,HS,US;const hx=class hx{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:r,page:l,viewport:u,structTreeLayer:c}){T(this,Xl);T(this,Gp,null);T(this,au,null);T(this,Dl,new Map);T(this,Vp,null);this.div=t,x(this,Gp,e),x(this,au,n),x(this,Vp,c||null),this.page=l,this.viewport=u,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return d(this,Dl).size>0}async render(t){var u;const{annotations:e}=t,n=this.div;ku(n,this.viewport);const r=new Map,l={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new By,annotationStorage:t.annotationStorage||new Qw,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const f=c.annotationType===tn.POPUP;if(f){const y=r.get(c.id);if(!y)continue;l.elements=y}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;l.data=c;const p=DT.create(l);if(!p.isRenderable)continue;if(!f&&c.popupRef){const y=r.get(c.popupRef);y?y.push(p):r.set(c.popupRef,[p])}const g=p.render();c.hidden&&(g.style.visibility="hidden"),await D(this,Xl,HS).call(this,g,c.id),p._isEditable&&(d(this,Dl).set(p.data.id,p),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(p))}D(this,Xl,US).call(this)}async addLinkAnnotations(t,e){const n={data:null,layer:this.div,linkService:e,svgFactory:new By,parent:this};for(const r of t){r.borderStyle||(r.borderStyle=hx._defaultBorderStyle),n.data=r;const l=DT.create(n);if(!l.isRenderable)continue;const u=l.render();await D(this,Xl,HS).call(this,u,r.id)}}update({viewport:t}){const e=this.div;this.viewport=t,ku(e,{rotation:t.rotation}),D(this,Xl,US).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(d(this,Dl).values())}getEditableAnnotation(t){return d(this,Dl).get(t)}static get _defaultBorderStyle(){return Qt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:xc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Gp=new WeakMap,au=new WeakMap,Dl=new WeakMap,Vp=new WeakMap,Xl=new WeakSet,HS=async function(t,e){var u,c;const n=t.firstChild||t,r=n.id=`${qw}${e}`,l=await((u=d(this,Vp))==null?void 0:u.getAriaAttributes(r));if(l)for(const[f,p]of l)n.setAttribute(f,p);this.div.append(t),(c=d(this,Gp))==null||c.moveElementInDOM(this.div,t,n,!1)},US=function(){var e;if(!d(this,au))return;const t=this.div;for(const[n,r]of d(this,au)){const l=t.querySelector(`[data-annotation-id="${n}"]`);if(!l)continue;r.className="annotationContent";const{firstChild:u}=l;u?u.nodeName==="CANVAS"?u.replaceWith(r):u.classList.contains("annotationContent")?u.after(r):u.before(r):l.append(r);const c=d(this,Dl).get(n);c&&(c._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,l.id,r),c._hasNoCanvas=!1):c.canvas=r)}d(this,au).clear()};let BS=hx;const Km=/\r\n?|\n/g;var zs,Hi,qp,ru,Ui,an,yR,bR,vR,by,_r,vy,Ay,AR,VS,SR;const _e=class _e extends De{constructor(e){super({...e,name:"freeTextEditor"});T(this,an);T(this,zs);T(this,Hi,"");T(this,qp,`${this.id}-editor`);T(this,ru,null);T(this,Ui);x(this,zs,e.color||_e._defaultColor||De._defaultLineColor),x(this,Ui,e.fontSize||_e._defaultFontSize)}static get _keyboardManager(){const e=_e.prototype,n=u=>u.isEmpty(),r=Ru.TRANSLATE_SMALL,l=Ru.TRANSLATE_BIG;return Qt(this,"_keyboardManager",new Sg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-l,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[l,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-l],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,l],checker:n}]]))}static initialize(e,n){De.initialize(e,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Jt.FREETEXT_SIZE:_e._defaultFontSize=n;break;case Jt.FREETEXT_COLOR:_e._defaultColor=n;break}}updateParams(e,n){switch(e){case Jt.FREETEXT_SIZE:D(this,an,yR).call(this,n);break;case Jt.FREETEXT_COLOR:D(this,an,bR).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Jt.FREETEXT_SIZE,_e._defaultFontSize],[Jt.FREETEXT_COLOR,_e._defaultColor||De._defaultLineColor]]}get propertiesToUpdate(){return[[Jt.FREETEXT_SIZE,d(this,Ui)],[Jt.FREETEXT_COLOR,d(this,zs)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-_e._internalPadding*e,-(_e._internalPadding+d(this,Ui))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Pt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,ru,new AbortController);const e=this._uiManager.combinedSignal(d(this,ru));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,qp)),this._isDraggable=!0,(e=d(this,ru))==null||e.abort(),x(this,ru,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=d(this,Hi),n=x(this,Hi,D(this,an,vR).call(this).trimEnd());if(e===n)return;const r=l=>{if(x(this,Hi,l),!l){this.remove();return}D(this,an,Ay).call(this),this._uiManager.rebuild(this),D(this,an,by).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(e)},mustExec:!1}),D(this,an,by).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){_e._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,qp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${d(this,Ui)}px * var(--total-scale-factor))`,r.color=d(this,zs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Kw(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){const[l,u]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[f,p]=this.getInitialTranslation();[f,p]=this.pageTranslationToScreen(f,p);const[g,y]=this.pageDimensions,[b,A]=this.pageTranslation;let w,S;switch(this.rotation){case 0:w=e+(c[0]-b)/g,S=n+this.height-(c[1]-A)/y;break;case 90:w=e+(c[0]-b)/g,S=n-(c[1]-A)/y,[f,p]=[p,-f];break;case 180:w=e-this.width+(c[0]-b)/g,S=n-(c[1]-A)/y,[f,p]=[-f,-p];break;case 270:w=e+(c[0]-b-this.height*y)/g,S=n+(c[1]-A-this.width*g)/y,[f,p]=[-p,f];break}this.setAt(w*l,S*u,f,p)}else this._moveAfterPaste(e,n);D(this,an,Ay).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var w,S,k;const n=e.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const l=D(w=_e,_r,VS).call(w,n.getData("text")||"").replaceAll(Km,`
`);if(!l)return;const u=window.getSelection();if(!u.rangeCount)return;this.editorDiv.normalize(),u.deleteFromDocument();const c=u.getRangeAt(0);if(!l.includes(`
`)){c.insertNode(document.createTextNode(l)),this.editorDiv.normalize(),u.collapseToStart();return}const{startContainer:f,startOffset:p}=c,g=[],y=[];if(f.nodeType===Node.TEXT_NODE){const C=f.parentElement;if(y.push(f.nodeValue.slice(p).replaceAll(Km,"")),C!==this.editorDiv){let N=g;for(const O of this.editorDiv.childNodes){if(O===C){N=y;continue}N.push(D(S=_e,_r,vy).call(S,O))}}g.push(f.nodeValue.slice(0,p).replaceAll(Km,""))}else if(f===this.editorDiv){let C=g,N=0;for(const O of this.editorDiv.childNodes)N++===p&&(C=y),C.push(D(k=_e,_r,vy).call(k,O))}x(this,Hi,`${g.join(`
`)}${l}${y.join(`
`)}`),D(this,an,Ay).call(this);const b=new Range;let A=Math.sumPrecise(g.map(C=>C.length));for(const{firstChild:C}of this.editorDiv.childNodes)if(C.nodeType===Node.TEXT_NODE){const N=C.nodeValue.length;if(A<=N){b.setStart(C,A),b.setEnd(C,A);break}A-=N}u.removeAllRanges(),u.addRange(b)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,r){var c;let l=null;if(e instanceof fR){const{data:{defaultAppearanceData:{fontSize:f,fontColor:p},rect:g,rotation:y,id:b,popupRef:A},textContent:w,textPosition:S,parent:{page:{pageNumber:k}}}=e;if(!w||w.length===0)return null;l=e={annotationType:Pt.FREETEXT,color:Array.from(p),fontSize:f,value:w.join(`
`),position:S,pageIndex:k-1,rect:g.slice(0),rotation:y,id:b,deleted:!1,popupRef:A}}const u=await super.deserialize(e,n,r);return x(u,Ui,e.fontSize),x(u,zs,Et.makeHexColor(...e.color)),x(u,Hi,D(c=_e,_r,VS).call(c,e.value)),u.annotationElementId=e.id||null,u._initialData=l,u}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=_e._internalPadding*this.parentScale,r=this.getRect(n,n),l=De._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,zs)),u={annotationType:Pt.FREETEXT,color:l,fontSize:d(this,Ui),value:D(this,an,AR).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(u.isCopy=!0,u):this.annotationElementId&&!D(this,an,SR).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:r}=n;r.fontSize=`calc(${d(this,Ui)}px * var(--total-scale-factor))`,r.color=d(this,zs),n.replaceChildren();for(const u of d(this,Hi).split(`
`)){const c=document.createElement("div");c.append(u?document.createTextNode(u):document.createElement("br")),n.append(c)}const l=_e._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(l,l),popupContent:d(this,Hi)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};zs=new WeakMap,Hi=new WeakMap,qp=new WeakMap,ru=new WeakMap,Ui=new WeakMap,an=new WeakSet,yR=function(e){const n=l=>{this.editorDiv.style.fontSize=`calc(${l}px * var(--total-scale-factor))`,this.translate(0,-(l-d(this,Ui))*this.parentScale),x(this,Ui,l),D(this,an,by).call(this)},r=d(this,Ui);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},bR=function(e){const n=l=>{x(this,zs,this.editorDiv.style.color=l)},r=d(this,zs);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},vR=function(){var r;const e=[];this.editorDiv.normalize();let n=null;for(const l of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&l.nodeName==="BR"||(e.push(D(r=_e,_r,vy).call(r,l)),n=l);return e.join(`
`)},by=function(){const[e,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:l,div:u}=this,c=u.style.display,f=u.classList.contains("hidden");u.classList.remove("hidden"),u.style.display="hidden",l.div.append(this.div),r=u.getBoundingClientRect(),u.remove(),u.style.display=c,u.classList.toggle("hidden",f)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/n):(this.width=r.height/e,this.height=r.width/n),this.fixAndSetPosition()},_r=new WeakSet,vy=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Km,"")},Ay=function(){if(this.editorDiv.replaceChildren(),!!d(this,Hi))for(const e of d(this,Hi).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},AR=function(){return d(this,Hi).replaceAll(" "," ")},VS=function(e){return e.replaceAll(" "," ")},SR=function(e){const{value:n,fontSize:r,color:l,pageIndex:u}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==r||e.color.some((c,f)=>c!==l[f])||e.pageIndex!==u},T(_e,_r),gt(_e,"_freeTextDefaultContent",""),gt(_e,"_internalPadding",0),gt(_e,"_defaultColor",null),gt(_e,"_defaultFontSize",10),gt(_e,"_type","freetext"),gt(_e,"_editorType",Pt.FREETEXT);let GS=_e;class At{toSVGPath(){Ae("Abstract method `toSVGPath` must be implemented.")}get box(){Ae("Abstract getter `box` must be implemented.")}serialize(t,e){Ae("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,r,l,u){u||(u=new Float32Array(t.length));for(let c=0,f=t.length;c<f;c+=2)u[c]=e+t[c]*r,u[c+1]=n+t[c+1]*l;return u}static _rescaleAndSwap(t,e,n,r,l,u){u||(u=new Float32Array(t.length));for(let c=0,f=t.length;c<f;c+=2)u[c]=e+t[c+1]*r,u[c+1]=n+t[c]*l;return u}static _translate(t,e,n,r){r||(r=new Float32Array(t.length));for(let l=0,u=t.length;l<u;l+=2)r[l]=e+t[l],r[l+1]=n+t[l+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,r,l){switch(l){case 90:return[1-e/n,t/r];case 180:return[1-t/n,1-e/r];case 270:return[e/n,1-t/r];default:return[t/n,e/r]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,r,l,u){return[(t+5*n)/6,(e+5*r)/6,(5*n+l)/6,(5*r+u)/6,(n+l)/2,(r+u)/2]}}gt(At,"PRECISION",1e-4);var Gi,Is,Dh,kh,pa,$t,lu,ou,Yp,Xp,Rh,Mh,kl,$p,lb,ob,pn,Ef,wR,xR,ER,_R,CR,TR;const Xa=class Xa{constructor({x:t,y:e},n,r,l,u,c=0){T(this,pn);T(this,Gi);T(this,Is,[]);T(this,Dh);T(this,kh);T(this,pa,[]);T(this,$t,new Float32Array(18));T(this,lu);T(this,ou);T(this,Yp);T(this,Xp);T(this,Rh);T(this,Mh);T(this,kl,[]);x(this,Gi,n),x(this,Mh,l*r),x(this,kh,u),d(this,$t).set([NaN,NaN,NaN,NaN,t,e],6),x(this,Dh,c),x(this,Xp,d(Xa,$p)*r),x(this,Yp,d(Xa,ob)*r),x(this,Rh,r),d(this,kl).push(t,e)}isEmpty(){return isNaN(d(this,$t)[8])}add({x:t,y:e}){var Q;x(this,lu,t),x(this,ou,e);const[n,r,l,u]=d(this,Gi);let[c,f,p,g]=d(this,$t).subarray(8,12);const y=t-p,b=e-g,A=Math.hypot(y,b);if(A<d(this,Yp))return!1;const w=A-d(this,Xp),S=w/A,k=S*y,C=S*b;let N=c,O=f;c=p,f=g,p+=k,g+=C,(Q=d(this,kl))==null||Q.push(t,e);const I=-C/w,z=k/w,L=I*d(this,Mh),B=z*d(this,Mh);return d(this,$t).set(d(this,$t).subarray(2,8),0),d(this,$t).set([p+L,g+B],4),d(this,$t).set(d(this,$t).subarray(14,18),12),d(this,$t).set([p-L,g-B],16),isNaN(d(this,$t)[6])?(d(this,pa).length===0&&(d(this,$t).set([c+L,f+B],2),d(this,pa).push(NaN,NaN,NaN,NaN,(c+L-n)/l,(f+B-r)/u),d(this,$t).set([c-L,f-B],14),d(this,Is).push(NaN,NaN,NaN,NaN,(c-L-n)/l,(f-B-r)/u)),d(this,$t).set([N,O,c,f,p,g],6),!this.isEmpty()):(d(this,$t).set([N,O,c,f,p,g],6),Math.abs(Math.atan2(O-f,N-c)-Math.atan2(C,k))<Math.PI/2?([c,f,p,g]=d(this,$t).subarray(2,6),d(this,pa).push(NaN,NaN,NaN,NaN,((c+p)/2-n)/l,((f+g)/2-r)/u),[c,f,N,O]=d(this,$t).subarray(14,18),d(this,Is).push(NaN,NaN,NaN,NaN,((N+c)/2-n)/l,((O+f)/2-r)/u),!0):([N,O,c,f,p,g]=d(this,$t).subarray(0,6),d(this,pa).push(((N+5*c)/6-n)/l,((O+5*f)/6-r)/u,((5*c+p)/6-n)/l,((5*f+g)/6-r)/u,((c+p)/2-n)/l,((f+g)/2-r)/u),[p,g,c,f,N,O]=d(this,$t).subarray(12,18),d(this,Is).push(((N+5*c)/6-n)/l,((O+5*f)/6-r)/u,((5*c+p)/6-n)/l,((5*f+g)/6-r)/u,((c+p)/2-n)/l,((f+g)/2-r)/u),!0))}toSVGPath(){if(this.isEmpty())return"";const t=d(this,pa),e=d(this,Is);if(isNaN(d(this,$t)[6])&&!this.isEmpty())return D(this,pn,wR).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);D(this,pn,ER).call(this,n);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return D(this,pn,xR).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,r,l,u){return new DR(t,e,n,r,l,u)}getOutlines(){var y;const t=d(this,pa),e=d(this,Is),n=d(this,$t),[r,l,u,c]=d(this,Gi),f=new Float32Array((((y=d(this,kl))==null?void 0:y.length)??0)+2);for(let b=0,A=f.length-2;b<A;b+=2)f[b]=(d(this,kl)[b]-r)/u,f[b+1]=(d(this,kl)[b+1]-l)/c;if(f[f.length-2]=(d(this,lu)-r)/u,f[f.length-1]=(d(this,ou)-l)/c,isNaN(n[6])&&!this.isEmpty())return D(this,pn,_R).call(this,f);const p=new Float32Array(d(this,pa).length+24+d(this,Is).length);let g=t.length;for(let b=0;b<g;b+=2){if(isNaN(t[b])){p[b]=p[b+1]=NaN;continue}p[b]=t[b],p[b+1]=t[b+1]}g=D(this,pn,TR).call(this,p,g);for(let b=e.length-6;b>=6;b-=6)for(let A=0;A<6;A+=2){if(isNaN(e[b+A])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=e[b+A],p[g+1]=e[b+A+1],g+=2}return D(this,pn,CR).call(this,p,g),this.newFreeDrawOutline(p,f,d(this,Gi),d(this,Rh),d(this,Dh),d(this,kh))}};Gi=new WeakMap,Is=new WeakMap,Dh=new WeakMap,kh=new WeakMap,pa=new WeakMap,$t=new WeakMap,lu=new WeakMap,ou=new WeakMap,Yp=new WeakMap,Xp=new WeakMap,Rh=new WeakMap,Mh=new WeakMap,kl=new WeakMap,$p=new WeakMap,lb=new WeakMap,ob=new WeakMap,pn=new WeakSet,Ef=function(){const t=d(this,$t).subarray(4,6),e=d(this,$t).subarray(16,18),[n,r,l,u]=d(this,Gi);return[(d(this,lu)+(t[0]-e[0])/2-n)/l,(d(this,ou)+(t[1]-e[1])/2-r)/u,(d(this,lu)+(e[0]-t[0])/2-n)/l,(d(this,ou)+(e[1]-t[1])/2-r)/u]},wR=function(){const[t,e,n,r]=d(this,Gi),[l,u,c,f]=D(this,pn,Ef).call(this);return`M${(d(this,$t)[2]-t)/n} ${(d(this,$t)[3]-e)/r} L${(d(this,$t)[4]-t)/n} ${(d(this,$t)[5]-e)/r} L${l} ${u} L${c} ${f} L${(d(this,$t)[16]-t)/n} ${(d(this,$t)[17]-e)/r} L${(d(this,$t)[14]-t)/n} ${(d(this,$t)[15]-e)/r} Z`},xR=function(t){const e=d(this,Is);t.push(`L${e[4]} ${e[5]} Z`)},ER=function(t){const[e,n,r,l]=d(this,Gi),u=d(this,$t).subarray(4,6),c=d(this,$t).subarray(16,18),[f,p,g,y]=D(this,pn,Ef).call(this);t.push(`L${(u[0]-e)/r} ${(u[1]-n)/l} L${f} ${p} L${g} ${y} L${(c[0]-e)/r} ${(c[1]-n)/l}`)},_R=function(t){const e=d(this,$t),[n,r,l,u]=d(this,Gi),[c,f,p,g]=D(this,pn,Ef).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-n)/l,(e[3]-r)/u,NaN,NaN,NaN,NaN,(e[4]-n)/l,(e[5]-r)/u,NaN,NaN,NaN,NaN,c,f,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(e[16]-n)/l,(e[17]-r)/u,NaN,NaN,NaN,NaN,(e[14]-n)/l,(e[15]-r)/u],0),this.newFreeDrawOutline(y,t,d(this,Gi),d(this,Rh),d(this,Dh),d(this,kh))},CR=function(t,e){const n=d(this,Is);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},TR=function(t,e){const n=d(this,$t).subarray(4,6),r=d(this,$t).subarray(16,18),[l,u,c,f]=d(this,Gi),[p,g,y,b]=D(this,pn,Ef).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-l)/c,(n[1]-u)/f,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-l)/c,(r[1]-u)/f],e),e+=24},T(Xa,$p,8),T(Xa,lb,2),T(Xa,ob,d(Xa,$p)+d(Xa,lb));let Hy=Xa;var Nh,uu,pr,Wp,Vi,Kp,We,ub,kR;class DR extends At{constructor(e,n,r,l,u,c){super();T(this,ub);T(this,Nh);T(this,uu,new Float32Array(4));T(this,pr);T(this,Wp);T(this,Vi);T(this,Kp);T(this,We);x(this,We,e),x(this,Vi,n),x(this,Nh,r),x(this,Kp,l),x(this,pr,u),x(this,Wp,c),this.lastPoint=[NaN,NaN],D(this,ub,kR).call(this,c);const[f,p,g,y]=d(this,uu);for(let b=0,A=e.length;b<A;b+=2)e[b]=(e[b]-f)/g,e[b+1]=(e[b+1]-p)/y;for(let b=0,A=n.length;b<A;b+=2)n[b]=(n[b]-f)/g,n[b+1]=(n[b+1]-p)/y}toSVGPath(){const e=[`M${d(this,We)[4]} ${d(this,We)[5]}`];for(let n=6,r=d(this,We).length;n<r;n+=6){if(isNaN(d(this,We)[n])){e.push(`L${d(this,We)[n+4]} ${d(this,We)[n+5]}`);continue}e.push(`C${d(this,We)[n]} ${d(this,We)[n+1]} ${d(this,We)[n+2]} ${d(this,We)[n+3]} ${d(this,We)[n+4]} ${d(this,We)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,r,l],u){const c=r-e,f=l-n;let p,g;switch(u){case 0:p=At._rescale(d(this,We),e,l,c,-f),g=At._rescale(d(this,Vi),e,l,c,-f);break;case 90:p=At._rescaleAndSwap(d(this,We),e,n,c,f),g=At._rescaleAndSwap(d(this,Vi),e,n,c,f);break;case 180:p=At._rescale(d(this,We),r,n,-c,f),g=At._rescale(d(this,Vi),r,n,-c,f);break;case 270:p=At._rescaleAndSwap(d(this,We),r,l,-c,-f),g=At._rescaleAndSwap(d(this,Vi),r,l,-c,-f);break}return{outline:Array.from(p),points:[Array.from(g)]}}get box(){return d(this,uu)}newOutliner(e,n,r,l,u,c=0){return new Hy(e,n,r,l,u,c)}getNewOutline(e,n){const[r,l,u,c]=d(this,uu),[f,p,g,y]=d(this,Nh),b=u*g,A=c*y,w=r*g+f,S=l*y+p,k=this.newOutliner({x:d(this,Vi)[0]*b+w,y:d(this,Vi)[1]*A+S},d(this,Nh),d(this,Kp),e,d(this,Wp),n??d(this,pr));for(let C=2;C<d(this,Vi).length;C+=2)k.add({x:d(this,Vi)[C]*b+w,y:d(this,Vi)[C+1]*A+S});return k.getOutlines()}}Nh=new WeakMap,uu=new WeakMap,pr=new WeakMap,Wp=new WeakMap,Vi=new WeakMap,Kp=new WeakMap,We=new WeakMap,ub=new WeakSet,kR=function(e){const n=d(this,We);let r=n[4],l=n[5];const u=[r,l,r,l];let c=r,f=l;const p=e?Math.max:Math.min;for(let y=6,b=n.length;y<b;y+=6){const A=n[y+4],w=n[y+5];if(isNaN(n[y]))Et.pointBoundingBox(A,w,u),f<w?(c=A,f=w):f===w&&(c=p(c,A));else{const S=[1/0,1/0,-1/0,-1/0];Et.bezierBoundingBox(r,l,...n.slice(y,y+6),S),Et.rectBoundingBox(...S,u),f<S[3]?(c=S[2],f=S[3]):f===S[3]&&(c=p(c,S[2]))}r=A,l=w}const g=d(this,uu);g[0]=u[0]-d(this,pr),g[1]=u[1]-d(this,pr),g[2]=u[2]-u[0]+2*d(this,pr),g[3]=u[3]-u[1]+2*d(this,pr),this.lastPoint=[c,f]};var Qp,Zp,Rl,js,ui,RR,Sy,MR,NR,YS;class qS{constructor(t,e=0,n=0,r=!0){T(this,ui);T(this,Qp);T(this,Zp);T(this,Rl,[]);T(this,js,[]);const l=[1/0,1/0,-1/0,-1/0],u=10**-4;for(const{x:A,y:w,width:S,height:k}of t){const C=Math.floor((A-e)/u)*u,N=Math.ceil((A+S+e)/u)*u,O=Math.floor((w-e)/u)*u,I=Math.ceil((w+k+e)/u)*u,z=[C,O,I,!0],L=[N,O,I,!1];d(this,Rl).push(z,L),Et.rectBoundingBox(C,O,N,I,l)}const c=l[2]-l[0]+2*n,f=l[3]-l[1]+2*n,p=l[0]-n,g=l[1]-n,y=d(this,Rl).at(r?-1:-2),b=[y[0],y[2]];for(const A of d(this,Rl)){const[w,S,k]=A;A[0]=(w-p)/c,A[1]=(S-g)/f,A[2]=(k-g)/f}x(this,Qp,new Float32Array([p,g,c,f])),x(this,Zp,b)}getOutlines(){d(this,Rl).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of d(this,Rl))e[3]?(t.push(...D(this,ui,YS).call(this,e)),D(this,ui,MR).call(this,e)):(D(this,ui,NR).call(this,e),t.push(...D(this,ui,YS).call(this,e)));return D(this,ui,RR).call(this,t)}}Qp=new WeakMap,Zp=new WeakMap,Rl=new WeakMap,js=new WeakMap,ui=new WeakSet,RR=function(t){const e=[],n=new Set;for(const u of t){const[c,f,p]=u;e.push([c,f,u],[c,p,u])}e.sort((u,c)=>u[1]-c[1]||u[0]-c[0]);for(let u=0,c=e.length;u<c;u+=2){const f=e[u][2],p=e[u+1][2];f.push(p),p.push(f),n.add(f),n.add(p)}const r=[];let l;for(;n.size>0;){const u=n.values().next().value;let[c,f,p,g,y]=u;n.delete(u);let b=c,A=f;for(l=[c,p],r.push(l);;){let w;if(n.has(g))w=g;else if(n.has(y))w=y;else break;n.delete(w),[c,f,p,g,y]=w,b!==c&&(l.push(b,A,c,A===f?f:p),b=c),A=A===f?p:f}l.push(b,A)}return new BF(r,d(this,Qp),d(this,Zp))},Sy=function(t){const e=d(this,js);let n=0,r=e.length-1;for(;n<=r;){const l=n+r>>1,u=e[l][0];if(u===t)return l;u<t?n=l+1:r=l-1}return r+1},MR=function([,t,e]){const n=D(this,ui,Sy).call(this,t);d(this,js).splice(n,0,[t,e])},NR=function([,t,e]){const n=D(this,ui,Sy).call(this,t);for(let r=n;r<d(this,js).length;r++){const[l,u]=d(this,js)[r];if(l!==t)break;if(l===t&&u===e){d(this,js).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[l,u]=d(this,js)[r];if(l!==t)break;if(l===t&&u===e){d(this,js).splice(r,1);return}}},YS=function(t){const[e,n,r]=t,l=[[e,n,r]],u=D(this,ui,Sy).call(this,r);for(let c=0;c<u;c++){const[f,p]=d(this,js)[c];for(let g=0,y=l.length;g<y;g++){const[,b,A]=l[g];if(!(p<=b||A<=f)){if(b>=f){if(A>p)l[g][1]=p;else{if(y===1)return[];l.splice(g,1),g--,y--}continue}l[g][2]=f,A>p&&l.push([e,p,A])}}}return l};var Jp,Oh;class BF extends At{constructor(e,n,r){super();T(this,Jp);T(this,Oh);x(this,Oh,e),x(this,Jp,n),this.lastPoint=r}toSVGPath(){const e=[];for(const n of d(this,Oh)){let[r,l]=n;e.push(`M${r} ${l}`);for(let u=2;u<n.length;u+=2){const c=n[u],f=n[u+1];c===r?(e.push(`V${f}`),l=f):f===l&&(e.push(`H${c}`),r=c)}e.push("Z")}return e.join(" ")}serialize([e,n,r,l],u){const c=[],f=r-e,p=l-n;for(const g of d(this,Oh)){const y=new Array(g.length);for(let b=0;b<g.length;b+=2)y[b]=e+g[b]*f,y[b+1]=l-g[b+1]*p;c.push(y)}return c}get box(){return d(this,Jp)}get classNamesForOutlining(){return["highlightOutline"]}}Jp=new WeakMap,Oh=new WeakMap;class XS extends Hy{newFreeDrawOutline(t,e,n,r,l,u){return new HF(t,e,n,r,l,u)}}class HF extends DR{newOutliner(t,e,n,r,l,u=0){return new XS(t,e,n,r,l,u)}}var Fs,cu,Lh,fn,tg,Ph,eg,ng,Ml,Bs,zh,ig,ve,$S,WS,KS,vo,OR,il;const Ai=class Ai{constructor({editor:t=null,uiManager:e=null}){T(this,ve);T(this,Fs,null);T(this,cu,null);T(this,Lh);T(this,fn,null);T(this,tg,!1);T(this,Ph,!1);T(this,eg,null);T(this,ng);T(this,Ml,null);T(this,Bs,null);T(this,zh);var n;t?(x(this,Ph,!1),x(this,zh,Jt.HIGHLIGHT_COLOR),x(this,eg,t)):(x(this,Ph,!0),x(this,zh,Jt.HIGHLIGHT_DEFAULT_COLOR)),x(this,Bs,(t==null?void 0:t._uiManager)||e),x(this,ng,d(this,Bs)._eventBus),x(this,Lh,(t==null?void 0:t.color)||((n=d(this,Bs))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),d(Ai,ig)||x(Ai,ig,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Qt(this,"_keyboardManager",new Sg([[["Escape","mac+Escape"],Ai.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ai.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ai.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ai.prototype._moveToPrevious],[["Home","mac+Home"],Ai.prototype._moveToBeginning],[["End","mac+End"],Ai.prototype._moveToEnd]]))}renderButton(){const t=x(this,Fs,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=d(this,Bs)._signal;t.addEventListener("click",D(this,ve,vo).bind(this),{signal:e}),t.addEventListener("keydown",D(this,ve,KS).bind(this),{signal:e});const n=x(this,cu,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=d(this,Lh),t.append(n),t}renderMainDropdown(){const t=x(this,fn,D(this,ve,$S).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===d(this,Fs)){D(this,ve,vo).call(this,t);return}const e=t.target.getAttribute("data-color");e&&D(this,ve,WS).call(this,e,t)}_moveToNext(t){var e,n;if(!d(this,ve,il)){D(this,ve,vo).call(this,t);return}if(t.target===d(this,Fs)){(e=d(this,fn).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=d(this,fn))==null?void 0:e.firstChild)||t.target===d(this,Fs)){d(this,ve,il)&&this._hideDropdownFromKeyboard();return}d(this,ve,il)||D(this,ve,vo).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!d(this,ve,il)){D(this,ve,vo).call(this,t);return}(e=d(this,fn).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!d(this,ve,il)){D(this,ve,vo).call(this,t);return}(e=d(this,fn).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=d(this,fn))==null||t.classList.add("hidden"),(e=d(this,Ml))==null||e.abort(),x(this,Ml,null)}_hideDropdownFromKeyboard(){var t;if(!d(this,Ph)){if(!d(this,ve,il)){(t=d(this,eg))==null||t.unselect();return}this.hideDropdown(),d(this,Fs).focus({preventScroll:!0,focusVisible:d(this,tg)})}}updateColor(t){if(d(this,cu)&&(d(this,cu).style.backgroundColor=t),!d(this,fn))return;const e=d(this,Bs).highlightColors.values();for(const n of d(this,fn).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=d(this,Fs))==null||t.remove(),x(this,Fs,null),x(this,cu,null),(e=d(this,fn))==null||e.remove(),x(this,fn,null)}};Fs=new WeakMap,cu=new WeakMap,Lh=new WeakMap,fn=new WeakMap,tg=new WeakMap,Ph=new WeakMap,eg=new WeakMap,ng=new WeakMap,Ml=new WeakMap,Bs=new WeakMap,zh=new WeakMap,ig=new WeakMap,ve=new WeakSet,$S=function(){const t=document.createElement("div"),e=d(this,Bs)._signal;t.addEventListener("contextmenu",Ys,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of d(this,Bs).highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",r),l.title=n,l.setAttribute("data-l10n-id",d(Ai,ig)[n]);const u=document.createElement("span");l.append(u),u.className="swatch",u.style.backgroundColor=r,l.setAttribute("aria-selected",r===d(this,Lh)),l.addEventListener("click",D(this,ve,WS).bind(this,r),{signal:e}),t.append(l)}return t.addEventListener("keydown",D(this,ve,KS).bind(this),{signal:e}),t},WS=function(t,e){e.stopPropagation(),d(this,ng).dispatch("switchannotationeditorparams",{source:this,type:d(this,zh),value:t})},KS=function(t){Ai._keyboardManager.exec(this,t)},vo=function(t){if(d(this,ve,il)){this.hideDropdown();return}if(x(this,tg,t.detail===0),d(this,Ml)||(x(this,Ml,new AbortController),window.addEventListener("pointerdown",D(this,ve,OR).bind(this),{signal:d(this,Bs).combinedSignal(d(this,Ml))})),d(this,fn)){d(this,fn).classList.remove("hidden");return}const e=x(this,fn,D(this,ve,$S).call(this));d(this,Fs).append(e)},OR=function(t){var e;(e=d(this,fn))!=null&&e.contains(t.target)||this.hideDropdown()},il=function(){return d(this,fn)&&!d(this,fn).classList.contains("hidden")},T(Ai,ig,null);let Uy=Ai;var Ih,sg,gr,hu,jh,xi,ag,rg,du,ms,qi,Nn,Fh,mr,$n,Bh,ys,lg,Ft,QS,wy,LR,PR,zR,ZS,Ao,Ss,kc,IR,xy,_f,jR,FR,BR,HR,UR;const re=class re extends De{constructor(e){super({...e,name:"highlightEditor"});T(this,Ft);T(this,Ih,null);T(this,sg,0);T(this,gr);T(this,hu,null);T(this,jh,null);T(this,xi,null);T(this,ag,null);T(this,rg,0);T(this,du,null);T(this,ms,null);T(this,qi,null);T(this,Nn,!1);T(this,Fh,null);T(this,mr);T(this,$n,null);T(this,Bh,"");T(this,ys);T(this,lg,"");this.color=e.color||re._defaultColor,x(this,ys,e.thickness||re._defaultThickness),x(this,mr,e.opacity||re._defaultOpacity),x(this,gr,e.boxes||null),x(this,lg,e.methodOfCreation||""),x(this,Bh,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(x(this,Nn,!0),D(this,Ft,wy).call(this,e),D(this,Ft,Ao).call(this)):d(this,gr)&&(x(this,Ih,e.anchorNode),x(this,sg,e.anchorOffset),x(this,ag,e.focusNode),x(this,rg,e.focusOffset),D(this,Ft,QS).call(this),D(this,Ft,Ao).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=re.prototype;return Qt(this,"_keyboardManager",new Sg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,Nn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:d(this,ys),methodOfCreation:d(this,lg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var r;De.initialize(e,n),re._defaultColor||(re._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Jt.HIGHLIGHT_DEFAULT_COLOR:re._defaultColor=n;break;case Jt.HIGHLIGHT_THICKNESS:re._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return d(this,Fh)}updateParams(e,n){switch(e){case Jt.HIGHLIGHT_COLOR:D(this,Ft,LR).call(this,n);break;case Jt.HIGHLIGHT_THICKNESS:D(this,Ft,PR).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Jt.HIGHLIGHT_DEFAULT_COLOR,re._defaultColor],[Jt.HIGHLIGHT_THICKNESS,re._defaultThickness]]}get propertiesToUpdate(){return[[Jt.HIGHLIGHT_COLOR,this.color||re._defaultColor],[Jt.HIGHLIGHT_THICKNESS,d(this,ys)||re._defaultThickness],[Jt.HIGHLIGHT_FREE,d(this,Nn)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(x(this,jh,new Uy({editor:this})),e.addColorPicker(d(this,jh))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(D(this,Ft,_f).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,D(this,Ft,_f).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){D(this,Ft,ZS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,Ft,Ao).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?D(this,Ft,ZS).call(this):e&&(D(this,Ft,Ao).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var l,u,c;const{drawLayer:n}=this.parent;let r;d(this,Nn)?(e=(e-this.rotation+360)%360,r=D(l=re,Ss,kc).call(l,d(this,ms).box,e)):r=D(u=re,Ss,kc).call(u,[this.x,this.y,this.width,this.height],e),n.updateProperties(d(this,qi),{bbox:r,root:{"data-main-rotation":e}}),n.updateProperties(d(this,$n),{bbox:D(c=re,Ss,kc).call(c,d(this,xi).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();d(this,Bh)&&(e.setAttribute("aria-label",d(this,Bh)),e.setAttribute("role","mark")),d(this,Nn)?e.classList.add("free"):this.div.addEventListener("keydown",D(this,Ft,IR).bind(this),{signal:this._uiManager._signal});const n=x(this,du,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=d(this,hu);const[r,l]=this.parentDimensions;return this.setDims(this.width*r,this.height*l),Kw(this,d(this,du),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(d(this,$n),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(d(this,$n),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:D(this,Ft,xy).call(this,!0);break;case 1:case 3:D(this,Ft,xy).call(this,!1);break}}select(){var e;super.select(),d(this,$n)&&((e=this.parent)==null||e.drawLayer.updateProperties(d(this,$n),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),d(this,$n)&&((e=this.parent)==null||e.drawLayer.updateProperties(d(this,$n),{rootClass:{selected:!1}}),d(this,Nn)||D(this,Ft,xy).call(this,!1))}get _mustFixPosition(){return!d(this,Nn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(d(this,qi),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(d(this,$n),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:r,x:l,y:u}){const{x:c,y:f,width:p,height:g}=r.getBoundingClientRect(),y=new AbortController,b=e.combinedSignal(y),A=w=>{y.abort(),D(this,Ss,HR).call(this,e,w)};window.addEventListener("blur",A,{signal:b}),window.addEventListener("pointerup",A,{signal:b}),window.addEventListener("pointerdown",nn,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Ys,{signal:b}),r.addEventListener("pointermove",D(this,Ss,BR).bind(this,e),{signal:b}),this._freeHighlight=new XS({x:l,y:u},[c,f,p,g],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,r){var S,k,C,N;let l=null;if(e instanceof gR){const{data:{quadPoints:O,rect:I,rotation:z,id:L,color:B,opacity:W,popupRef:Q},parent:{page:{pageNumber:st}}}=e;l=e={annotationType:Pt.HIGHLIGHT,color:Array.from(B),opacity:W,quadPoints:O,boxes:null,pageIndex:st-1,rect:I.slice(0),rotation:z,id:L,deleted:!1,popupRef:Q}}else if(e instanceof tx){const{data:{inkLists:O,rect:I,rotation:z,id:L,color:B,borderStyle:{rawWidth:W},popupRef:Q},parent:{page:{pageNumber:st}}}=e;l=e={annotationType:Pt.HIGHLIGHT,color:Array.from(B),thickness:W,inkLists:O,boxes:null,pageIndex:st-1,rect:I.slice(0),rotation:z,id:L,deleted:!1,popupRef:Q}}const{color:u,quadPoints:c,inkLists:f,opacity:p}=e,g=await super.deserialize(e,n,r);g.color=Et.makeHexColor(...u),x(g,mr,p||1),f&&x(g,ys,e.thickness),g.annotationElementId=e.id||null,g._initialData=l;const[y,b]=g.pageDimensions,[A,w]=g.pageTranslation;if(c){const O=x(g,gr,[]);for(let I=0;I<c.length;I+=8)O.push({x:(c[I]-A)/y,y:1-(c[I+1]-w)/b,width:(c[I+2]-c[I])/y,height:(c[I+1]-c[I+5])/b});D(S=g,Ft,QS).call(S),D(k=g,Ft,Ao).call(k),g.rotate(g.rotation)}else if(f){x(g,Nn,!0);const O=f[0],I={x:O[0]-A,y:b-(O[1]-w)},z=new XS(I,[0,0,y,b],1,d(g,ys)/2,!0,.001);for(let W=0,Q=O.length;W<Q;W+=2)I.x=O[W]-A,I.y=b-(O[W+1]-w),z.add(I);const{id:L,clipPathId:B}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:g.color,"fill-opacity":g._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:z.toSVGPath()}},!0,!0);D(C=g,Ft,wy).call(C,{highlightOutlines:z.getOutlines(),highlightId:L,clipPathId:B}),D(N=g,Ft,Ao).call(N),g.rotate(g.parentRotation)}return g}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),r=De._colorManager.convert(this.color),l={annotationType:Pt.HIGHLIGHT,color:r,opacity:d(this,mr),thickness:d(this,ys),quadPoints:D(this,Ft,jR).call(this),outlines:D(this,Ft,FR).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:D(this,Ft,_f).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!D(this,Ft,UR).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Ih=new WeakMap,sg=new WeakMap,gr=new WeakMap,hu=new WeakMap,jh=new WeakMap,xi=new WeakMap,ag=new WeakMap,rg=new WeakMap,du=new WeakMap,ms=new WeakMap,qi=new WeakMap,Nn=new WeakMap,Fh=new WeakMap,mr=new WeakMap,$n=new WeakMap,Bh=new WeakMap,ys=new WeakMap,lg=new WeakMap,Ft=new WeakSet,QS=function(){const e=new qS(d(this,gr),.001);x(this,ms,e.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,ms).box;const n=new qS(d(this,gr),.0025,.001,this._uiManager.direction==="ltr");x(this,xi,n.getOutlines());const{lastPoint:r}=d(this,xi);x(this,Fh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},wy=function({highlightOutlines:e,highlightId:n,clipPathId:r}){var y,b;if(x(this,ms,e),x(this,xi,e.getNewOutline(d(this,ys)/2+1.5,.0025)),n>=0)x(this,qi,n),x(this,hu,r),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),x(this,$n,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,xi).box,path:{d:d(this,xi).toSVGPath()}},!0));else if(this.parent){const A=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,qi),{bbox:D(y=re,Ss,kc).call(y,d(this,ms).box,(A-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,$n),{bbox:D(b=re,Ss,kc).call(b,d(this,xi).box,A),path:{d:d(this,xi).toSVGPath()}})}const[u,c,f,p]=e.box;switch(this.rotation){case 0:this.x=u,this.y=c,this.width=f,this.height=p;break;case 90:{const[A,w]=this.parentDimensions;this.x=c,this.y=1-u,this.width=f*w/A,this.height=p*A/w;break}case 180:this.x=1-u,this.y=1-c,this.width=f,this.height=p;break;case 270:{const[A,w]=this.parentDimensions;this.x=1-c,this.y=u,this.width=f*w/A,this.height=p*A/w;break}}const{lastPoint:g}=d(this,xi);x(this,Fh,[(g[0]-u)/f,(g[1]-c)/p])},LR=function(e){const n=(u,c)=>{var f,p;this.color=u,x(this,mr,c),(f=this.parent)==null||f.drawLayer.updateProperties(d(this,qi),{root:{fill:u,"fill-opacity":c}}),(p=d(this,jh))==null||p.updateColor(u)},r=this.color,l=d(this,mr);this.addCommands({cmd:n.bind(this,e,re._defaultOpacity),undo:n.bind(this,r,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},PR=function(e){const n=d(this,ys),r=l=>{x(this,ys,l),D(this,Ft,zR).call(this,l)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Jt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},zR=function(e){if(!d(this,Nn))return;D(this,Ft,wy).call(this,{highlightOutlines:d(this,ms).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},ZS=function(){d(this,qi)===null||!this.parent||(this.parent.drawLayer.remove(d(this,qi)),x(this,qi,null),this.parent.drawLayer.remove(d(this,$n)),x(this,$n,null))},Ao=function(e=this.parent){d(this,qi)===null&&({id:ei(this,qi)._,clipPathId:ei(this,hu)._}=e.drawLayer.draw({bbox:d(this,ms).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":d(this,mr)},rootClass:{highlight:!0,free:d(this,Nn)},path:{d:d(this,ms).toSVGPath()}},!1,!0),x(this,$n,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,Nn)},bbox:d(this,xi).box,path:{d:d(this,xi).toSVGPath()}},d(this,Nn))),d(this,du)&&(d(this,du).style.clipPath=d(this,hu)))},Ss=new WeakSet,kc=function([e,n,r,l],u){switch(u){case 90:return[1-n-l,e,l,r];case 180:return[1-e-r,1-n-l,r,l];case 270:return[n,1-e-r,l,r]}return[e,n,r,l]},IR=function(e){re._keyboardManager.exec(this,e)},xy=function(e){if(!d(this,Ih))return;const n=window.getSelection();e?n.setPosition(d(this,Ih),d(this,sg)):n.setPosition(d(this,ag),d(this,rg))},_f=function(){return d(this,Nn)?this.rotation:0},jR=function(){if(d(this,Nn))return null;const[e,n]=this.pageDimensions,[r,l]=this.pageTranslation,u=d(this,gr),c=new Float32Array(u.length*8);let f=0;for(const{x:p,y:g,width:y,height:b}of u){const A=p*e+r,w=(1-g)*n+l;c[f]=c[f+4]=A,c[f+1]=c[f+3]=w,c[f+2]=c[f+6]=A+y*e,c[f+5]=c[f+7]=w-b*n,f+=8}return c},FR=function(e){return d(this,ms).serialize(e,D(this,Ft,_f).call(this))},BR=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},HR=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},UR=function(e){const{color:n}=this._initialData;return e.color.some((r,l)=>r!==n[l])},T(re,Ss),gt(re,"_defaultColor",null),gt(re,"_defaultOpacity",1),gt(re,"_defaultThickness",12),gt(re,"_type","highlight"),gt(re,"_editorType",Pt.HIGHLIGHT),gt(re,"_freeHighlightId",-1),gt(re,"_freeHighlight",null),gt(re,"_freeHighlightClipId","");let Gy=re;var fu;class GR{constructor(){T(this,fu,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){d(this,fu)[t]=e}toSVGProperties(){const t=d(this,fu);return x(this,fu,Object.create(null)),{root:t}}reset(){x(this,fu,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Ae("Not implemented")}}fu=new WeakMap;var Yi,Hh,Sn,pu,gu,Nl,Ol,Ll,mu,ee,JS,tw,ew,Cf,VR,Ey,Tf,Rc;const St=class St extends De{constructor(e){super(e);T(this,ee);T(this,Yi,null);T(this,Hh);gt(this,"_drawId",null);x(this,Hh,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(D(this,ee,JS).call(this,e),D(this,ee,Cf).call(this))}static _mergeSVGProperties(e,n){const r=new Set(Object.keys(e));for(const[l,u]of Object.entries(n))r.has(l)?Object.assign(e[l],u):e[l]=u;return e}static getDefaultDrawingOptions(e){Ae("Not implemented")}static get typesMap(){Ae("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(d(St,Sn).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[r,l]of this.typesMap)e.push([r,n[l]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[r,l]of this.constructor.typesMap)e.push([r,n[l]]);return e}_updateProperty(e,n,r){const l=this._drawingOptions,u=l[n],c=f=>{var g;l.updateProperty(n,f);const p=d(this,Yi).updateProperty(n,f);p&&D(this,ee,Tf).call(this,p),(g=this.parent)==null||g.drawLayer.updateProperties(this._drawId,l.toSVGProperties())};this.addCommands({cmd:c.bind(this,r),undo:c.bind(this,u),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,St._mergeSVGProperties(d(this,Yi).getPathResizingSVGProperties(D(this,ee,Ey).call(this)),{bbox:D(this,ee,Rc).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,St._mergeSVGProperties(d(this,Yi).getPathResizedSVGProperties(D(this,ee,Ey).call(this)),{bbox:D(this,ee,Rc).call(this)}))}_onTranslating(e,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:D(this,ee,Rc).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,St._mergeSVGProperties(d(this,Yi).getPathTranslatedSVGProperties(D(this,ee,Ey).call(this),this.parentDimensions),{bbox:D(this,ee,Rc).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,Hh)&&(x(this,Hh,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){D(this,ee,ew).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,ee,Cf).call(this),D(this,ee,Tf).call(this,d(this,Yi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),D(this,ee,ew).call(this)):e&&(this._uiManager.addShouldRescale(this),D(this,ee,Cf).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,St._mergeSVGProperties({bbox:D(this,ee,Rc).call(this)},d(this,Yi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&D(this,ee,Tf).call(this,d(this,Yi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const r=super.render();r.classList.add("draw");const l=document.createElement("div");r.append(l),l.setAttribute("aria-hidden","true"),l.className="internal";const[u,c]=this.parentDimensions;return this.setDims(this.width*u,this.height*c),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),r}static createDrawerInstance(e,n,r,l,u){Ae("Not implemented")}static startDrawing(e,n,r,l){var k;const{target:u,offsetX:c,offsetY:f,pointerId:p,pointerType:g}=l;if(d(St,Ol)&&d(St,Ol)!==g)return;const{viewport:{rotation:y}}=e,{width:b,height:A}=u.getBoundingClientRect(),w=x(St,pu,new AbortController),S=e.combinedSignal(w);if(d(St,Nl)||x(St,Nl,p),d(St,Ol)??x(St,Ol,g),window.addEventListener("pointerup",C=>{var N;d(St,Nl)===C.pointerId?this._endDraw(C):(N=d(St,Ll))==null||N.delete(C.pointerId)},{signal:S}),window.addEventListener("pointercancel",C=>{var N;d(St,Nl)===C.pointerId?this._currentParent.endDrawingSession():(N=d(St,Ll))==null||N.delete(C.pointerId)},{signal:S}),window.addEventListener("pointerdown",C=>{d(St,Ol)===C.pointerType&&((d(St,Ll)||x(St,Ll,new Set)).add(C.pointerId),d(St,Sn).isCancellable()&&(d(St,Sn).removeLastElement(),d(St,Sn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",Ys,{signal:S}),u.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),u.addEventListener("touchmove",C=>{C.timeStamp===d(St,mu)&&nn(C)},{signal:S}),e.toggleDrawing(),(k=n._editorUndoBar)==null||k.hide(),d(St,Sn)){e.drawLayer.updateProperties(this._currentDrawId,d(St,Sn).startNew(c,f,b,A,y));return}n.updateUIForDefaultProperties(this),x(St,Sn,this.createDrawerInstance(c,f,b,A,y)),x(St,gu,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(d(St,gu).toSVGProperties(),d(St,Sn).defaultSVGProperties),!0,!1)}static _drawMove(e){var u;if(x(St,mu,-1),!d(St,Sn))return;const{offsetX:n,offsetY:r,pointerId:l}=e;if(d(St,Nl)===l){if(((u=d(St,Ll))==null?void 0:u.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d(St,Sn).add(n,r)),x(St,mu,e.timeStamp),nn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,x(St,Sn,null),x(St,gu,null),x(St,Ol,null),x(St,mu,NaN)),d(St,pu)&&(d(St,pu).abort(),x(St,pu,null),x(St,Nl,NaN),x(St,Ll,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,d(St,Sn).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=d(St,Sn),l=this._currentDrawId,u=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(l,r.setLastElement(u))},undo:()=>{n.drawLayer.updateProperties(l,r.removeLastElement())},mustExec:!1,type:Jt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Jt.DRAW_STEP),!d(St,Sn).isEmpty()){const{pageDimensions:[r,l],scale:u}=n,c=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d(St,Sn).getOutlines(r*u,l*u,u,this._INNER_MARGIN),drawingOptions:d(St,gu),mustBeCommitted:!e});return this._cleanup(!0),c}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,r,l,u,c){Ae("Not implemented")}static async deserialize(e,n,r){var y,b;const{rawDims:{pageWidth:l,pageHeight:u,pageX:c,pageY:f}}=n.viewport,p=this.deserializeDraw(c,f,l,u,this._INNER_MARGIN,e),g=await super.deserialize(e,n,r);return g.createDrawingOptions(e),D(y=g,ee,JS).call(y,{drawOutlines:p}),D(b=g,ee,Cf).call(b),g.onScaleChanging(),g.rotate(),g}serializeDraw(e){const[n,r]=this.pageTranslation,[l,u]=this.pageDimensions;return d(this,Yi).serialize([n,r,l,u],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Yi=new WeakMap,Hh=new WeakMap,Sn=new WeakMap,pu=new WeakMap,gu=new WeakMap,Nl=new WeakMap,Ol=new WeakMap,Ll=new WeakMap,mu=new WeakMap,ee=new WeakSet,JS=function({drawOutlines:e,drawId:n,drawingOptions:r}){x(this,Yi,e),this._drawingOptions||(this._drawingOptions=r),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=D(this,ee,tw).call(this,e,this.parent),D(this,ee,Tf).call(this,e.box)},tw=function(e,n){const{id:r}=n.drawLayer.draw(St._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},ew=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Cf=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=D(this,ee,tw).call(this,d(this,Yi),e)}},VR=function([e,n,r,l]){const{parentDimensions:[u,c],rotation:f}=this;switch(f){case 90:return[n,1-e,r*(c/u),l*(u/c)];case 180:return[1-e,1-n,r,l];case 270:return[1-n,e,r*(c/u),l*(u/c)];default:return[e,n,r,l]}},Ey=function(){const{x:e,y:n,width:r,height:l,parentDimensions:[u,c],rotation:f}=this;switch(f){case 90:return[1-n,e,r*(u/c),l*(c/u)];case 180:return[1-e,1-n,r,l];case 270:return[n,1-e,r*(u/c),l*(c/u)];default:return[e,n,r,l]}},Tf=function(e){if([this.x,this.y,this.width,this.height]=D(this,ee,VR).call(this,e),this.div){this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)}this._onResized()},Rc=function(){const{x:e,y:n,width:r,height:l,rotation:u,parentRotation:c,parentDimensions:[f,p]}=this;switch((u*4+c)/90){case 1:return[1-n-l,e,l,r];case 2:return[1-e-r,1-n-l,r,l];case 3:return[n,1-e-r,l,r];case 4:return[e,n-r*(f/p),l*(p/f),r*(f/p)];case 5:return[1-n,e,r*(f/p),l*(p/f)];case 6:return[1-e-l*(p/f),1-n,l*(p/f),r*(f/p)];case 7:return[n-r*(f/p),1-e-l*(p/f),r*(f/p),l*(p/f)];case 8:return[e-r,n-l,r,l];case 9:return[1-n,e-r,l,r];case 10:return[1-e,1-n,r,l];case 11:return[n-l,1-e,l,r];case 12:return[e-l*(p/f),n,l*(p/f),r*(f/p)];case 13:return[1-n-r*(f/p),e-l*(p/f),r*(f/p),l*(p/f)];case 14:return[1-e,1-n-r*(f/p),l*(p/f),r*(f/p)];case 15:return[n,1-e,r*(f/p),l*(p/f)];default:return[e,n,r,l]}},gt(St,"_currentDrawId",-1),gt(St,"_currentParent",null),T(St,Sn,null),T(St,pu,null),T(St,gu,null),T(St,Nl,NaN),T(St,Ol,null),T(St,Ll,null),T(St,mu,NaN),gt(St,"_INNER_MARGIN",3);let Vy=St;var ga,wn,xn,yu,Uh,si,On,bs,bu,vu,Au,Gh,_y;class UF{constructor(t,e,n,r,l,u){T(this,Gh);T(this,ga,new Float64Array(6));T(this,wn);T(this,xn);T(this,yu);T(this,Uh);T(this,si);T(this,On,"");T(this,bs,0);T(this,bu,new Eg);T(this,vu);T(this,Au);x(this,vu,n),x(this,Au,r),x(this,yu,l),x(this,Uh,u),[t,e]=D(this,Gh,_y).call(this,t,e);const c=x(this,wn,[NaN,NaN,NaN,NaN,t,e]);x(this,si,[t,e]),x(this,xn,[{line:c,points:d(this,si)}]),d(this,ga).set(c,0)}updateProperty(t,e){t==="stroke-width"&&x(this,Uh,e)}isEmpty(){return!d(this,xn)||d(this,xn).length===0}isCancellable(){return d(this,si).length<=10}add(t,e){[t,e]=D(this,Gh,_y).call(this,t,e);const[n,r,l,u]=d(this,ga).subarray(2,6),c=t-l,f=e-u;return Math.hypot(d(this,vu)*c,d(this,Au)*f)<=2?null:(d(this,si).push(t,e),isNaN(n)?(d(this,ga).set([l,u,t,e],2),d(this,wn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(d(this,ga)[0])&&d(this,wn).splice(6,6),d(this,ga).set([n,r,l,u,t,e],0),d(this,wn).push(...At.createBezierPoints(n,r,l,u,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(d(this,si).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,r,l){x(this,vu,n),x(this,Au,r),x(this,yu,l),[t,e]=D(this,Gh,_y).call(this,t,e);const u=x(this,wn,[NaN,NaN,NaN,NaN,t,e]);x(this,si,[t,e]);const c=d(this,xn).at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),d(this,xn).push({line:u,points:d(this,si)}),d(this,ga).set(u,0),x(this,bs,0),this.toSVGPath(),null}getLastElement(){return d(this,xn).at(-1)}setLastElement(t){return d(this,xn)?(d(this,xn).push(t),x(this,wn,t.line),x(this,si,t.points),x(this,bs,0),{path:{d:this.toSVGPath()}}):d(this,bu).setLastElement(t)}removeLastElement(){if(!d(this,xn))return d(this,bu).removeLastElement();d(this,xn).pop(),x(this,On,"");for(let t=0,e=d(this,xn).length;t<e;t++){const{line:n,points:r}=d(this,xn)[t];x(this,wn,n),x(this,si,r),x(this,bs,0),this.toSVGPath()}return{path:{d:d(this,On)}}}toSVGPath(){const t=At.svgRound(d(this,wn)[4]),e=At.svgRound(d(this,wn)[5]);if(d(this,si).length===2)return x(this,On,`${d(this,On)} M ${t} ${e} Z`),d(this,On);if(d(this,si).length<=6){const r=d(this,On).lastIndexOf("M");x(this,On,`${d(this,On).slice(0,r)} M ${t} ${e}`),x(this,bs,6)}if(d(this,si).length===4){const r=At.svgRound(d(this,wn)[10]),l=At.svgRound(d(this,wn)[11]);return x(this,On,`${d(this,On)} L ${r} ${l}`),x(this,bs,12),d(this,On)}const n=[];d(this,bs)===0&&(n.push(`M ${t} ${e}`),x(this,bs,6));for(let r=d(this,bs),l=d(this,wn).length;r<l;r+=6){const[u,c,f,p,g,y]=d(this,wn).slice(r,r+6).map(At.svgRound);n.push(`C${u} ${c} ${f} ${p} ${g} ${y}`)}return x(this,On,d(this,On)+n.join(" ")),x(this,bs,d(this,wn).length),d(this,On)}getOutlines(t,e,n,r){const l=d(this,xn).at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),d(this,bu).build(d(this,xn),t,e,n,d(this,yu),d(this,Uh),r),x(this,ga,null),x(this,wn,null),x(this,xn,null),x(this,On,null),d(this,bu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ga=new WeakMap,wn=new WeakMap,xn=new WeakMap,yu=new WeakMap,Uh=new WeakMap,si=new WeakMap,On=new WeakMap,bs=new WeakMap,bu=new WeakMap,vu=new WeakMap,Au=new WeakMap,Gh=new WeakSet,_y=function(t,e){return At._normalizePoint(t,e,d(this,vu),d(this,Au),d(this,yu))};var ai,og,ug,Xi,ma,ya,Vh,qh,Su,Pn,qa,qR,YR,XR;class Eg extends At{constructor(){super(...arguments);T(this,Pn);T(this,ai);T(this,og,0);T(this,ug);T(this,Xi);T(this,ma);T(this,ya);T(this,Vh);T(this,qh);T(this,Su)}build(e,n,r,l,u,c,f){x(this,ma,n),x(this,ya,r),x(this,Vh,l),x(this,qh,u),x(this,Su,c),x(this,ug,f??0),x(this,Xi,e),D(this,Pn,YR).call(this)}get thickness(){return d(this,Su)}setLastElement(e){return d(this,Xi).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,Xi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of d(this,Xi)){if(e.push(`M${At.svgRound(n[4])} ${At.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${At.svgRound(n[10])} ${At.svgRound(n[11])}`);continue}for(let r=6,l=n.length;r<l;r+=6){const[u,c,f,p,g,y]=n.subarray(r,r+6).map(At.svgRound);e.push(`C${u} ${c} ${f} ${p} ${g} ${y}`)}}return e.join("")}serialize([e,n,r,l],u){const c=[],f=[],[p,g,y,b]=D(this,Pn,qR).call(this);let A,w,S,k,C,N,O,I,z;switch(d(this,qh)){case 0:z=At._rescale,A=e,w=n+l,S=r,k=-l,C=e+p*r,N=n+(1-g-b)*l,O=e+(p+y)*r,I=n+(1-g)*l;break;case 90:z=At._rescaleAndSwap,A=e,w=n,S=r,k=l,C=e+g*r,N=n+p*l,O=e+(g+b)*r,I=n+(p+y)*l;break;case 180:z=At._rescale,A=e+r,w=n,S=-r,k=l,C=e+(1-p-y)*r,N=n+g*l,O=e+(1-p)*r,I=n+(g+b)*l;break;case 270:z=At._rescaleAndSwap,A=e+r,w=n+l,S=-r,k=-l,C=e+(1-g-b)*r,N=n+(1-p-y)*l,O=e+(1-g)*r,I=n+(1-p)*l;break}for(const{line:L,points:B}of d(this,Xi))c.push(z(L,A,w,S,k,u?new Array(L.length):null)),f.push(z(B,A,w,S,k,u?new Array(B.length):null));return{lines:c,points:f,rect:[C,N,O,I]}}static deserialize(e,n,r,l,u,{paths:{lines:c,points:f},rotation:p,thickness:g}){const y=[];let b,A,w,S,k;switch(p){case 0:k=At._rescale,b=-e/r,A=n/l+1,w=1/r,S=-1/l;break;case 90:k=At._rescaleAndSwap,b=-n/l,A=-e/r,w=1/l,S=1/r;break;case 180:k=At._rescale,b=e/r+1,A=-n/l,w=-1/r,S=1/l;break;case 270:k=At._rescaleAndSwap,b=n/l+1,A=e/r+1,w=-1/l,S=-1/r;break}if(!c){c=[];for(const N of f){const O=N.length;if(O===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1]]));continue}if(O===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1],NaN,NaN,NaN,NaN,N[2],N[3]]));continue}const I=new Float32Array(3*(O-2));c.push(I);let[z,L,B,W]=N.subarray(0,4);I.set([NaN,NaN,NaN,NaN,z,L],0);for(let Q=4;Q<O;Q+=2){const st=N[Q],X=N[Q+1];I.set(At.createBezierPoints(z,L,B,W,st,X),(Q-2)*3),[z,L,B,W]=[B,W,st,X]}}}for(let N=0,O=c.length;N<O;N++)y.push({line:k(c[N].map(I=>I??NaN),b,A,w,S),points:k(f[N].map(I=>I??NaN),b,A,w,S)});const C=new this.prototype.constructor;return C.build(y,r,l,1,p,g,u),C}get box(){return d(this,ai)}updateProperty(e,n){return e==="stroke-width"?D(this,Pn,XR).call(this,n):null}updateParentDimensions([e,n],r){const[l,u]=D(this,Pn,qa).call(this);x(this,ma,e),x(this,ya,n),x(this,Vh,r);const[c,f]=D(this,Pn,qa).call(this),p=c-l,g=f-u,y=d(this,ai);return y[0]-=p,y[1]-=g,y[2]+=2*p,y[3]+=2*g,y}updateRotation(e){return x(this,og,e),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,ai).map(At.svgRound).join(" ")}get defaultProperties(){const[e,n]=d(this,ai);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${At.svgRound(e)} ${At.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=d(this,ai);let r=0,l=0,u=0,c=0,f=0,p=0;switch(d(this,og)){case 90:l=n/e,u=-e/n,f=e;break;case 180:r=-1,c=-1,f=e,p=n;break;case 270:l=-n/e,u=e/n,p=n;break;default:return""}return`matrix(${r} ${l} ${u} ${c} ${At.svgRound(f)} ${At.svgRound(p)})`}getPathResizingSVGProperties([e,n,r,l]){const[u,c]=D(this,Pn,qa).call(this),[f,p,g,y]=d(this,ai);if(Math.abs(g-u)<=At.PRECISION||Math.abs(y-c)<=At.PRECISION){const k=e+r/2-(f+g/2),C=n+l/2-(p+y/2);return{path:{"transform-origin":`${At.svgRound(e)} ${At.svgRound(n)}`,transform:`${this.rotationTransform} translate(${k} ${C})`}}}const b=(r-2*u)/(g-2*u),A=(l-2*c)/(y-2*c),w=g/r,S=y/l;return{path:{"transform-origin":`${At.svgRound(f)} ${At.svgRound(p)}`,transform:`${this.rotationTransform} scale(${w} ${S}) translate(${At.svgRound(u)} ${At.svgRound(c)}) scale(${b} ${A}) translate(${At.svgRound(-u)} ${At.svgRound(-c)})`}}}getPathResizedSVGProperties([e,n,r,l]){const[u,c]=D(this,Pn,qa).call(this),f=d(this,ai),[p,g,y,b]=f;if(f[0]=e,f[1]=n,f[2]=r,f[3]=l,Math.abs(y-u)<=At.PRECISION||Math.abs(b-c)<=At.PRECISION){const C=e+r/2-(p+y/2),N=n+l/2-(g+b/2);for(const{line:O,points:I}of d(this,Xi))At._translate(O,C,N,O),At._translate(I,C,N,I);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${At.svgRound(e)} ${At.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const A=(r-2*u)/(y-2*u),w=(l-2*c)/(b-2*c),S=-A*(p+u)+e+u,k=-w*(g+c)+n+c;if(A!==1||w!==1||S!==0||k!==0)for(const{line:C,points:N}of d(this,Xi))At._rescale(C,S,k,A,w,C),At._rescale(N,S,k,A,w,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${At.svgRound(e)} ${At.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],r){const[l,u]=r,c=d(this,ai),f=e-c[0],p=n-c[1];if(d(this,ma)===l&&d(this,ya)===u)for(const{line:g,points:y}of d(this,Xi))At._translate(g,f,p,g),At._translate(y,f,p,y);else{const g=d(this,ma)/l,y=d(this,ya)/u;x(this,ma,l),x(this,ya,u);for(const{line:b,points:A}of d(this,Xi))At._rescale(b,f,p,g,y,b),At._rescale(A,f,p,g,y,A);c[2]*=g,c[3]*=y}return c[0]=e,c[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${At.svgRound(e)} ${At.svgRound(n)}`}}}get defaultSVGProperties(){const e=d(this,ai);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${At.svgRound(e[0])} ${At.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}ai=new WeakMap,og=new WeakMap,ug=new WeakMap,Xi=new WeakMap,ma=new WeakMap,ya=new WeakMap,Vh=new WeakMap,qh=new WeakMap,Su=new WeakMap,Pn=new WeakSet,qa=function(e=d(this,Su)){const n=d(this,ug)+e/2*d(this,Vh);return d(this,qh)%180===0?[n/d(this,ma),n/d(this,ya)]:[n/d(this,ya),n/d(this,ma)]},qR=function(){const[e,n,r,l]=d(this,ai),[u,c]=D(this,Pn,qa).call(this,0);return[e+u,n+c,r-2*u,l-2*c]},YR=function(){const e=x(this,ai,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:l}of d(this,Xi)){if(l.length<=12){for(let f=4,p=l.length;f<p;f+=6)Et.pointBoundingBox(l[f],l[f+1],e);continue}let u=l[4],c=l[5];for(let f=6,p=l.length;f<p;f+=6){const[g,y,b,A,w,S]=l.subarray(f,f+6);Et.bezierBoundingBox(u,c,g,y,b,A,w,S,e),u=w,c=S}}const[n,r]=D(this,Pn,qa).call(this);e[0]=oi(e[0]-n,0,1),e[1]=oi(e[1]-r,0,1),e[2]=oi(e[2]+n,0,1),e[3]=oi(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]},XR=function(e){const[n,r]=D(this,Pn,qa).call(this);x(this,Su,e);const[l,u]=D(this,Pn,qa).call(this),[c,f]=[l-n,u-r],p=d(this,ai);return p[0]-=c,p[1]-=f,p[2]+=2*c,p[3]+=2*f,p};class kb extends GR{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:De._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new kb(this._viewParameters);return t.updateAll(this),t}}var cb,$R;const Ic=class Ic extends Vy{constructor(e){super({...e,name:"inkEditor"});T(this,cb);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){De.initialize(e,n),this._defaultDrawingOptions=new kb(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Qt(this,"typesMap",new Map([[Jt.INK_THICKNESS,"stroke-width"],[Jt.INK_COLOR,"stroke"],[Jt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,r,l,u){return new UF(e,n,r,l,u,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,r,l,u,c){return Eg.deserialize(e,n,r,l,u,c)}static async deserialize(e,n,r){let l=null;if(e instanceof tx){const{data:{inkLists:c,rect:f,rotation:p,id:g,color:y,opacity:b,borderStyle:{rawWidth:A},popupRef:w},parent:{page:{pageNumber:S}}}=e;l=e={annotationType:Pt.INK,color:Array.from(y),thickness:A,opacity:b,paths:{points:c},boxes:null,pageIndex:S-1,rect:f.slice(0),rotation:p,id:g,deleted:!1,popupRef:w}}const u=await super.deserialize(e,n,r);return u.annotationElementId=e.id||null,u._initialData=l,u}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:r}){this._drawingOptions=Ic.getDefaultDrawingOptions({stroke:Et.makeHexColor(...e),"stroke-width":n,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r,rect:l}=this.serializeDraw(e),{_drawingOptions:{stroke:u,"stroke-opacity":c,"stroke-width":f}}=this,p={annotationType:Pt.INK,color:De._colorManager.convert(u),opacity:c,thickness:f,paths:{lines:n,points:r},pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(p.isCopy=!0,p):this.annotationElementId&&!D(this,cb,$R).call(this,p)?null:(p.id=this.annotationElementId,p)}renderAnnotationElement(e){const{points:n,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n}),null}};cb=new WeakSet,$R=function(e){const{color:n,thickness:r,opacity:l,pageIndex:u}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((c,f)=>c!==n[f])||e.thickness!==r||e.opacity!==l||e.pageIndex!==u},gt(Ic,"_type","ink"),gt(Ic,"_editorType",Pt.INK),gt(Ic,"_defaultDrawingOptions",null);let nw=Ic;class iw extends Eg{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Qm=8,cf=3;var wu,oe,sw,Hs,WR,KR,aw,Cy,QR,ZR,JR,rw,lw,tM;class wr{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:r},l,u,c,f){let p=new OffscreenCanvas(1,1),g=p.getContext("2d",{alpha:!1});const y=200,b=g.font=`${n} ${r} ${y}px ${e}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:k,fontBoundingBoxAscent:C,fontBoundingBoxDescent:N,width:O}=g.measureText(t),I=1.5,z=Math.ceil(Math.max(Math.abs(A)+Math.abs(w)||0,O)*I),L=Math.ceil(Math.max(Math.abs(S)+Math.abs(k)||y,Math.abs(C)+Math.abs(N)||y)*I);p=new OffscreenCanvas(z,L),g=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,z,L),g.fillStyle="black",g.fillText(t,z*(I-1)/2,L*(3-I)/2);const B=D(this,oe,rw).call(this,g.getImageData(0,0,z,L).data),W=D(this,oe,JR).call(this,B),Q=D(this,oe,lw).call(this,W),st=D(this,oe,aw).call(this,B,z,L,Q);return this.processDrawnLines({lines:{curves:st,width:z,height:L},pageWidth:l,pageHeight:u,rotation:c,innerMargin:f,mustSmooth:!0,areContours:!0})}static process(t,e,n,r,l){const[u,c,f]=D(this,oe,tM).call(this,t),[p,g]=D(this,oe,ZR).call(this,u,c,f,Math.hypot(c,f)*d(this,wu).sigmaSFactor,d(this,wu).sigmaR,d(this,wu).kernelSize),y=D(this,oe,lw).call(this,g),b=D(this,oe,aw).call(this,p,c,f,y);return this.processDrawnLines({lines:{curves:b,width:c,height:f},pageWidth:e,pageHeight:n,rotation:r,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:l,mustSmooth:u,areContours:c}){r%180!==0&&([e,n]=[n,e]);const{curves:f,width:p,height:g}=t,y=t.thickness??0,b=[],A=Math.min(e/p,n/g),w=A/e,S=A/n,k=[];for(const{points:N}of f){const O=u?D(this,oe,QR).call(this,N):N;if(!O)continue;k.push(O);const I=O.length,z=new Float32Array(I),L=new Float32Array(3*(I===2?2:I-2));if(b.push({line:L,points:z}),I===2){z[0]=O[0]*w,z[1]=O[1]*S,L.set([NaN,NaN,NaN,NaN,z[0],z[1]],0);continue}let[B,W,Q,st]=O;B*=w,W*=S,Q*=w,st*=S,z.set([B,W,Q,st],0),L.set([NaN,NaN,NaN,NaN,B,W],0);for(let X=4;X<I;X+=2){const Z=z[X]=O[X]*w,ct=z[X+1]=O[X+1]*S;L.set(At.createBezierPoints(B,W,Q,st,Z,ct),(X-2)*3),[B,W,Q,st]=[Q,st,Z,ct]}}if(b.length===0)return null;const C=c?new iw:new Eg;return C.build(b,e,n,1,r,c?0:y,l),{outline:C,newCurves:k,areContours:c,thickness:y,width:p,height:g}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:r,height:l}){let u=1/0,c=-1/0,f=0;for(const O of t){f+=O.length;for(let I=2,z=O.length;I<z;I++){const L=O[I]-O[I-2];u=Math.min(u,L),c=Math.max(c,L)}}let p;u>=-128&&c<=127?p=Int8Array:u>=-32768&&c<=32767?p=Int16Array:p=Int32Array;const g=t.length,y=Qm+cf*g,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(f-2*g)*p.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=r,b[A++]=l,b[A++]=e?0:1,b[A++]=Math.max(0,Math.floor(n??0)),b[A++]=g,b[A++]=p.BYTES_PER_ELEMENT;for(const O of t)b[A++]=O.length-2,b[A++]=O[0],b[A++]=O[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(b);const k=p.prototype.constructor;for(const O of t){const I=new k(O.length-2);for(let z=2,L=O.length;z<L;z++)I[z-2]=O[z]-O[z-2];S.write(I)}S.close();const C=await new Response(w.readable).arrayBuffer(),N=new Uint8Array(C);return nk(N)}static async decompressSignature(t){try{const e=fj(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),l=r.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let u=null,c=0;for await(const O of n)u||(u=new Uint8Array(new Uint32Array(O.buffer,0,4)[0])),u.set(O,c),c+=O.length;const f=new Uint32Array(u.buffer,0,u.length>>2),p=f[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const g=f[2],y=f[3],b=f[4]===0,A=f[5],w=f[6],S=f[7],k=[],C=(Qm+cf*w)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(S){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(u.buffer,C);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(u.buffer,C);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(u.buffer,C);break}c=0;for(let O=0;O<w;O++){const I=f[cf*O+Qm],z=new Float32Array(I+2);k.push(z);for(let L=0;L<cf-1;L++)z[L]=f[cf*O+Qm+L+1];for(let L=0;L<I;L++)z[L+2]=z[L]+N[c++]}return{areContours:b,thickness:A,outlines:k,width:g,height:y}}catch(e){return zt(`decompressSignature: ${e}`),null}}}wu=new WeakMap,oe=new WeakSet,sw=function(t,e,n,r){return n-=t,r-=e,n===0?r>0?0:4:n===1?r+6:2-r},Hs=new WeakMap,WR=function(t,e,n,r,l,u,c){const f=D(this,oe,sw).call(this,n,r,l,u);for(let p=0;p<8;p++){const g=(-p+f-c+16)%8,y=d(this,Hs)[2*g],b=d(this,Hs)[2*g+1];if(t[(n+y)*e+(r+b)]!==0)return g}return-1},KR=function(t,e,n,r,l,u,c){const f=D(this,oe,sw).call(this,n,r,l,u);for(let p=0;p<8;p++){const g=(p+f+c+16)%8,y=d(this,Hs)[2*g],b=d(this,Hs)[2*g+1];if(t[(n+y)*e+(r+b)]!==0)return g}return-1},aw=function(t,e,n,r){const l=t.length,u=new Int32Array(l);for(let g=0;g<l;g++)u[g]=t[g]<=r?1:0;for(let g=1;g<n-1;g++)u[g*e]=u[g*e+e-1]=0;for(let g=0;g<e;g++)u[g]=u[e*n-1-g]=0;let c=1,f;const p=[];for(let g=1;g<n-1;g++){f=1;for(let y=1;y<e-1;y++){const b=g*e+y,A=u[b];if(A===0)continue;let w=g,S=y;if(A===1&&u[b-1]===0)c+=1,S-=1;else if(A>=1&&u[b+1]===0)c+=1,S+=1,A>1&&(f=A);else{A!==1&&(f=Math.abs(A));continue}const k=[y,g],C=S===y+1,N={isHole:C,points:k,id:c,parent:0};p.push(N);let O;for(const X of p)if(X.id===f){O=X;break}O?O.isHole?N.parent=C?O.parent:f:N.parent=C?f:O.parent:N.parent=C?f:0;const I=D(this,oe,WR).call(this,u,e,g,y,w,S,0);if(I===-1){u[b]=-c,u[b]!==1&&(f=Math.abs(u[b]));continue}let z=d(this,Hs)[2*I],L=d(this,Hs)[2*I+1];const B=g+z,W=y+L;w=B,S=W;let Q=g,st=y;for(;;){const X=D(this,oe,KR).call(this,u,e,Q,st,w,S,1);z=d(this,Hs)[2*X],L=d(this,Hs)[2*X+1];const Z=Q+z,ct=st+L;k.push(ct,Z);const J=Q*e+st;if(u[J+1]===0?u[J]=-c:u[J]===1&&(u[J]=c),Z===g&&ct===y&&Q===B&&st===W){u[b]!==1&&(f=Math.abs(u[b]));break}else w=Q,S=st,Q=Z,st=ct}}}return p},Cy=function(t,e,n,r){if(n-e<=4){for(let B=e;B<n-2;B+=2)r.push(t[B],t[B+1]);return}const l=t[e],u=t[e+1],c=t[n-4]-l,f=t[n-3]-u,p=Math.hypot(c,f),g=c/p,y=f/p,b=g*u-y*l,A=f/c,w=1/p,S=Math.atan(A),k=Math.cos(S),C=Math.sin(S),N=w*(Math.abs(k)+Math.abs(C)),O=w*(1-N+N**2),I=Math.max(Math.atan(Math.abs(C+k)*O),Math.atan(Math.abs(C-k)*O));let z=0,L=e;for(let B=e+2;B<n-2;B+=2){const W=Math.abs(b-g*t[B+1]+y*t[B]);W>z&&(L=B,z=W)}z>(p*I)**2?(D(this,oe,Cy).call(this,t,e,L+2,r),D(this,oe,Cy).call(this,t,L,n,r)):r.push(l,u)},QR=function(t){const e=[],n=t.length;return D(this,oe,Cy).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},ZR=function(t,e,n,r,l,u){const c=new Float32Array(u**2),f=-2*r**2,p=u>>1;for(let S=0;S<u;S++){const k=(S-p)**2;for(let C=0;C<u;C++)c[S*u+C]=Math.exp((k+(C-p)**2)/f)}const g=new Float32Array(256),y=-2*l**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const b=t.length,A=new Uint8Array(b),w=new Uint32Array(256);for(let S=0;S<n;S++)for(let k=0;k<e;k++){const C=S*e+k,N=t[C];let O=0,I=0;for(let L=0;L<u;L++){const B=S+L-p;if(!(B<0||B>=n))for(let W=0;W<u;W++){const Q=k+W-p;if(Q<0||Q>=e)continue;const st=t[B*e+Q],X=c[L*u+W]*g[Math.abs(st-N)];O+=st*X,I+=X}}const z=A[C]=Math.round(O/I);w[z]++}return[A,w]},JR=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},rw=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let r=-1/0,l=1/0;for(let c=0,f=n.length;c<f;c++){if(t[(c<<2)+3]===0){r=n[c]=255;continue}const g=n[c]=t[c<<2];g>r&&(r=g),g<l&&(l=g)}const u=255/(r-l);for(let c=0;c<e;c++)n[c]=(n[c]-l)*u;return n},lw=function(t){let e,n=-1/0,r=-1/0;const l=t.findIndex(f=>f!==0);let u=l,c=l;for(e=l;e<256;e++){const f=t[e];f>n&&(e-u>r&&(r=e-u,c=e-1),n=f,u=e)}for(e=c-1;e>=0&&!(t[e]>t[e+1]);e--);return e},tM=function(t){const e=t,{width:n,height:r}=t,{maxDim:l}=d(this,wu);let u=n,c=r;if(n>l||r>l){let b=n,A=r,w=Math.log2(Math.max(n,r)/l);const S=Math.floor(w);w=w===S?S-1:S;for(let C=0;C<w;C++){u=b,c=A,u>l&&(u=Math.ceil(u/2)),c>l&&(c=Math.ceil(c/2));const N=new OffscreenCanvas(u,c);N.getContext("2d").drawImage(t,0,0,b,A,0,0,u,c),b=u,A=c,t!==e&&t.close(),t=N.transferToImageBitmap()}const k=Math.min(l/u,l/c);u=Math.round(u*k),c=Math.round(c*k)}const p=new OffscreenCanvas(u,c).getContext("2d",{willReadFrequently:!0});p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,u,c);const g=p.getImageData(0,0,u,c).data;return[D(this,oe,rw).call(this,g),u,c]},T(wr,oe),T(wr,wu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),T(wr,Hs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class ex extends GR{constructor(){super(),super.updateProperties({fill:De._defaultLineColor,"stroke-width":0})}clone(){const t=new ex;return t.updateAll(this),t}}class nx extends kb{constructor(t){super(t),super.updateProperties({stroke:De._defaultLineColor,"stroke-width":1})}clone(){const t=new nx(this._viewParameters);return t.updateAll(this),t}}var Pl,$i,zl,Il;const zi=class zi extends Vy{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});T(this,Pl,!1);T(this,$i,null);T(this,zl,null);T(this,Il,null);this._willKeepAspectRatio=!0,x(this,zl,e.signatureData||null),x(this,$i,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){De.initialize(e,n),this._defaultDrawingOptions=new ex,this._defaultDrawnSignatureOptions=new nx(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Qt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!d(this,$i)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(d(this,zl)){const{lines:l,mustSmooth:u,areContours:c,description:f,uuid:p,heightInPage:g}=d(this,zl),{rawDims:{pageWidth:y,pageHeight:b},rotation:A}=this.parent.viewport,w=wr.processDrawnLines({lines:l,pageWidth:y,pageHeight:b,rotation:A,innerMargin:zi._INNER_MARGIN,mustSmooth:u,areContours:c});this.addSignature(w,g,f,p)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return r&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){x(this,Il,e),this.addEditToolbar()}getUuid(){return d(this,Il)}get description(){return d(this,$i)}set description(e){x(this,$i,e),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:r,width:l,height:u}=d(this,zl),c=Math.max(l,u),f=wr.processDrawnLines({lines:{curves:e.map(p=>({points:p})),thickness:r,width:l,height:u},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:f.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&d(this,$i)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,d(this,Il),d(this,$i)),e.show()),e):null}addSignature(e,n,r,l){const{x:u,y:c}=this,{outline:f}=x(this,zl,e);x(this,Pl,f instanceof iw),x(this,$i,r),this.div.setAttribute("data-l10n-args",JSON.stringify({description:r}));let p;d(this,Pl)?p=zi.getDefaultDrawingOptions():(p=zi._defaultDrawnSignatureOptions.clone(),p.updateProperties({"stroke-width":f.thickness})),this._addOutlines({drawOutlines:f,drawingOptions:p});const[g,y]=this.parentDimensions,[,b]=this.pageDimensions;let A=n/b;A=A>=1?.5:A,this.width*=A/this.height,this.width>=1&&(A*=.9/this.width,this.width=.9),this.height=A,this.setDims(g*this.width,y*this.height),this.x=u,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(l),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!l,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:l}=this.parent.viewport;return wr.process(e,n,r,l,zi._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:r,pageHeight:l},rotation:u}=this.parent.viewport;return wr.extractContoursFromText(e,n,r,l,u,zi._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:l}=this.parent.viewport;return wr.processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:l,innerMargin:zi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=zi.getDefaultDrawingOptions():(this._drawingOptions=zi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:r,rect:l}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":u}}=this,c={annotationType:Pt.SIGNATURE,isSignature:!0,areContours:d(this,Pl),color:[0,0,0],thickness:d(this,Pl)?0:u,pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(c.paths={lines:n,points:r},c.uuid=d(this,Il),c.isCopy=!0):c.lines=n,d(this,$i)&&(c.accessibilityData={type:"Figure",alt:d(this,$i)}),c}static deserializeDraw(e,n,r,l,u,c){return c.areContours?iw.deserialize(e,n,r,l,u,c):Eg.deserialize(e,n,r,l,u,c)}static async deserialize(e,n,r){var u;const l=await super.deserialize(e,n,r);return x(l,Pl,e.areContours),x(l,$i,((u=e.accessibilityData)==null?void 0:u.alt)||""),x(l,Il,e.uuid),l}};Pl=new WeakMap,$i=new WeakMap,zl=new WeakMap,Il=new WeakMap,gt(zi,"_type","signature"),gt(zi,"_editorType",Pt.SIGNATURE),gt(zi,"_defaultDrawingOptions",null);let ow=zi;var Ne,En,jl,yr,Fl,Yh,br,xu,ba,Wi,Xh,ne,Df,kf,Ty,Dy,ky,cw,Ry,eM;class uw extends De{constructor(e){super({...e,name:"stampEditor"});T(this,ne);T(this,Ne,null);T(this,En,null);T(this,jl,null);T(this,yr,null);T(this,Fl,null);T(this,Yh,"");T(this,br,null);T(this,xu,!1);T(this,ba,null);T(this,Wi,!1);T(this,Xh,!1);x(this,yr,e.bitmapUrl),x(this,Fl,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){De.initialize(e,n)}static isHandlingMimeForPasting(e){return nS.includes(e)}static paste(e,n){n.pasteEditor(Pt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:l,width:u,height:c}=e||this.copyCanvas(null,null,!0).imageData,f=await r.guess({name:"altText",request:{data:l,width:u,height:c,channels:l.length/(u*c)}});if(!f)throw new Error("No response from the AI service.");if(f.error)throw new Error("Error from the AI service.");if(f.cancel)return null;if(!f.output)throw new Error("No valid response from the AI service.");const p=f.output;return await this.setGuessedAltText(p),n&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e;d(this,En)&&(x(this,Ne,null),this._uiManager.imageManager.deleteId(d(this,En)),(e=d(this,br))==null||e.remove(),x(this,br,null),d(this,ba)&&(clearTimeout(d(this,ba)),x(this,ba,null))),super.remove()}rebuild(){if(!this.parent){d(this,En)&&D(this,ne,Ty).call(this);return}super.rebuild(),this.div!==null&&(d(this,En)&&d(this,br)===null&&D(this,ne,Ty).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(d(this,jl)||d(this,Ne)||d(this,yr)||d(this,Fl)||d(this,En)||d(this,xu))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),d(this,xu)||(d(this,Ne)?D(this,ne,Dy).call(this):D(this,ne,Ty).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:r,bitmap:l}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(x(this,En,r),l&&x(this,Ne,l),x(this,xu,!1),D(this,ne,Dy).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,ba)!==null&&clearTimeout(d(this,ba)),x(this,ba,setTimeout(()=>{x(this,ba,null),D(this,ne,cw).call(this)},200))}copyCanvas(e,n,r=!1){var A;e||(e=224);const{width:l,height:u}=d(this,Ne),c=new Cr;let f=d(this,Ne),p=l,g=u,y=null;if(n){if(l>n||u>n){const W=Math.min(n/l,n/u);p=Math.floor(l*W),g=Math.floor(u*W)}y=document.createElement("canvas");const w=y.width=Math.ceil(p*c.sx),S=y.height=Math.ceil(g*c.sy);d(this,Wi)||(f=D(this,ne,ky).call(this,w,S));const k=y.getContext("2d");k.filter=this._uiManager.hcmFilter;let C="white",N="#cfcfd8";this._uiManager.hcmFilter!=="none"?N="black":(A=window.matchMedia)!=null&&A.call(window,"(prefers-color-scheme: dark)").matches&&(C="#8f8f9d",N="#42414d");const O=15,I=O*c.sx,z=O*c.sy,L=new OffscreenCanvas(I*2,z*2),B=L.getContext("2d");B.fillStyle=C,B.fillRect(0,0,I*2,z*2),B.fillStyle=N,B.fillRect(0,0,I,z),B.fillRect(I,z,I,z),k.fillStyle=k.createPattern(L,"repeat"),k.fillRect(0,0,w,S),k.drawImage(f,0,0,f.width,f.height,0,0,w,S)}let b=null;if(r){let w,S;if(c.symmetric&&f.width<e&&f.height<e)w=f.width,S=f.height;else if(f=d(this,Ne),l>e||u>e){const N=Math.min(e/l,e/u);w=Math.floor(l*N),S=Math.floor(u*N),d(this,Wi)||(f=D(this,ne,ky).call(this,w,S))}const C=new OffscreenCanvas(w,S).getContext("2d",{willReadFrequently:!0});C.drawImage(f,0,0,f.width,f.height,0,0,w,S),b={width:w,height:S,data:C.getImageData(0,0,w,S).data}}return{canvas:y,width:p,height:g,imageData:b}}static async deserialize(e,n,r){var k;let l=null,u=!1;if(e instanceof mR){const{data:{rect:C,rotation:N,id:O,structParent:I,popupRef:z},container:L,parent:{page:{pageNumber:B}},canvas:W}=e;let Q,st;W?(delete e.canvas,{id:Q,bitmap:st}=r.imageManager.getFromCanvas(L.id,W),W.remove()):(u=!0,e._hasNoCanvas=!0);const X=((k=await n._structTree.getAriaAttributes(`${qw}${O}`))==null?void 0:k.get("aria-label"))||"";l=e={annotationType:Pt.STAMP,bitmapId:Q,bitmap:st,pageIndex:B-1,rect:C.slice(0),rotation:N,id:O,deleted:!1,accessibilityData:{decorative:!1,altText:X},isSvg:!1,structParent:I,popupRef:z}}const c=await super.deserialize(e,n,r),{rect:f,bitmap:p,bitmapUrl:g,bitmapId:y,isSvg:b,accessibilityData:A}=e;u?(r.addMissingCanvas(e.id,c),x(c,xu,!0)):y&&r.imageManager.isValidId(y)?(x(c,En,y),p&&x(c,Ne,p)):x(c,yr,g),x(c,Wi,b);const[w,S]=c.pageDimensions;return c.width=(f[2]-f[0])/w,c.height=(f[3]-f[1])/S,c.annotationElementId=e.id||null,A&&(c.altTextData=A),c._initialData=l,x(c,Xh,!!l),c}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Pt.STAMP,bitmapId:d(this,En),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:d(this,Wi),structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=D(this,ne,Ry).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:l,altText:u}=this.serializeAltText(!1);if(!l&&u&&(r.accessibilityData={type:"Figure",alt:u}),this.annotationElementId){const f=D(this,ne,eM).call(this,r);if(f.isSame)return null;f.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const c=d(this,Wi)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(d(this,En)))n.stamps.set(d(this,En),{area:c,serialized:r}),r.bitmap=D(this,ne,Ry).call(this,!1);else if(d(this,Wi)){const f=n.stamps.get(d(this,En));c>f.area&&(f.area=c,f.serialized.bitmap.close(),f.serialized.bitmap=D(this,ne,Ry).call(this,!1))}return r}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}Ne=new WeakMap,En=new WeakMap,jl=new WeakMap,yr=new WeakMap,Fl=new WeakMap,Yh=new WeakMap,br=new WeakMap,xu=new WeakMap,ba=new WeakMap,Wi=new WeakMap,Xh=new WeakMap,ne=new WeakSet,Df=function(e,n=!1){if(!e){this.remove();return}x(this,Ne,e.bitmap),n||(x(this,En,e.id),x(this,Wi,e.isSvg)),e.file&&x(this,Yh,e.file.name),D(this,ne,Dy).call(this)},kf=function(){if(x(this,jl,null),this._uiManager.enableWaiting(!1),!!d(this,br)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Ne)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Ne)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ty=function(){if(d(this,En)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,En)).then(r=>D(this,ne,Df).call(this,r,!0)).finally(()=>D(this,ne,kf).call(this));return}if(d(this,yr)){const r=d(this,yr);x(this,yr,null),this._uiManager.enableWaiting(!0),x(this,jl,this._uiManager.imageManager.getFromUrl(r).then(l=>D(this,ne,Df).call(this,l)).finally(()=>D(this,ne,kf).call(this)));return}if(d(this,Fl)){const r=d(this,Fl);x(this,Fl,null),this._uiManager.enableWaiting(!0),x(this,jl,this._uiManager.imageManager.getFromFile(r).then(l=>D(this,ne,Df).call(this,l)).finally(()=>D(this,ne,kf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=nS.join(",");const n=this._uiManager._signal;x(this,jl,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const l=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),D(this,ne,Df).call(this,l)}r()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>D(this,ne,kf).call(this))),e.click()},Dy=function(){var y;const{div:e}=this;let{width:n,height:r}=d(this,Ne);const[l,u]=this.pageDimensions,c=.75;if(this.width)n=this.width*l,r=this.height*u;else if(n>c*l||r>c*u){const b=Math.min(c*l/n,c*u/r);n*=b,r*=b}const[f,p]=this.parentDimensions;this.setDims(n*f/l,r*p/u),this._uiManager.enableWaiting(!1);const g=x(this,br,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),this.width=n/l,this.height=r/u,(y=this._initialOptions)!=null&&y.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),D(this,ne,cw).call(this),d(this,Xh)||(this.parent.addUndoableEditor(this),x(this,Xh,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,Yh)&&this.div.setAttribute("aria-description",d(this,Yh))},ky=function(e,n){const{width:r,height:l}=d(this,Ne);let u=r,c=l,f=d(this,Ne);for(;u>2*e||c>2*n;){const p=u,g=c;u>2*e&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),c>2*n&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const y=new OffscreenCanvas(u,c);y.getContext("2d").drawImage(f,0,0,p,g,0,0,u,c),f=y.transferToImageBitmap()}return f},cw=function(){const[e,n]=this.parentDimensions,{width:r,height:l}=this,u=new Cr,c=Math.ceil(r*e*u.sx),f=Math.ceil(l*n*u.sy),p=d(this,br);if(!p||p.width===c&&p.height===f)return;p.width=c,p.height=f;const g=d(this,Wi)?d(this,Ne):D(this,ne,ky).call(this,c,f),y=p.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(g,0,0,g.width,g.height,0,0,c,f)},Ry=function(e){if(e){if(d(this,Wi)){const l=this._uiManager.imageManager.getSvgUrl(d(this,En));if(l)return l}const n=document.createElement("canvas");return{width:n.width,height:n.height}=d(this,Ne),n.getContext("2d").drawImage(d(this,Ne),0,0),n.toDataURL()}if(d(this,Wi)){const[n,r]=this.pageDimensions,l=Math.round(this.width*n*Vl.PDF_TO_CSS_UNITS),u=Math.round(this.height*r*Vl.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(l,u);return c.getContext("2d").drawImage(d(this,Ne),0,0,d(this,Ne).width,d(this,Ne).height,0,0,l,u),c.transferToImageBitmap()}return structuredClone(d(this,Ne))},eM=function(e){var c;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,l=e.pageIndex===n,u=(((c=e.accessibilityData)==null?void 0:c.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&l&&u,isSameAltText:u}},gt(uw,"_type","stamp"),gt(uw,"_editorType",Pt.STAMP);var Eu,$h,va,Bl,vr,vs,Hl,Wh,_u,Us,Ar,Wn,Sr,_t,Ul,Oe,nM,na,dw,fw,My;const Ms=class Ms{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:r,accessibilityManager:l,annotationLayer:u,drawLayer:c,textLayer:f,viewport:p,l10n:g}){T(this,Oe);T(this,Eu);T(this,$h,!1);T(this,va,null);T(this,Bl,null);T(this,vr,null);T(this,vs,new Map);T(this,Hl,!1);T(this,Wh,!1);T(this,_u,!1);T(this,Us,null);T(this,Ar,null);T(this,Wn,null);T(this,Sr,null);T(this,_t);const y=[...d(Ms,Ul).values()];if(!Ms._initialized){Ms._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),x(this,_t,t),this.pageIndex=e,this.div=n,x(this,Eu,l),x(this,va,u),this.viewport=p,x(this,Wn,f),this.drawLayer=c,this._structTree=r,d(this,_t).addLayer(this)}get isEmpty(){return d(this,vs).size===0}get isInvisible(){return this.isEmpty&&d(this,_t).getMode()===Pt.NONE}updateToolbar(t){d(this,_t).updateToolbar(t)}updateMode(t=d(this,_t).getMode()){switch(D(this,Oe,My).call(this),t){case Pt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Pt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Pt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of d(Ms,Ul).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=d(this,Wn))==null?void 0:e.div)}setEditingState(t){d(this,_t).setEditingState(t)}addCommands(t){d(this,_t).addCommands(t)}cleanUndoStack(t){d(this,_t).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=d(this,va))==null||e.div.classList.toggle("disabled",!t)}async enable(){x(this,_u,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of d(this,vs).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(d(this,_t).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!d(this,va)){x(this,_u,!1);return}const e=d(this,va).getEditableAnnotations();for(const n of e){if(n.hide(),d(this,_t).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}x(this,_u,!1)}disable(){var r;x(this,Wh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const l of d(this,vs).values())if(l.disableEditing(),!!l.annotationElementId){if(l.serialize()!==null){t.set(l.annotationElementId,l);continue}else e.set(l.annotationElementId,l);(r=this.getEditableAnnotation(l.annotationElementId))==null||r.show(),l.remove()}if(d(this,va)){const l=d(this,va).getEditableAnnotations();for(const u of l){const{id:c}=u.data;if(d(this,_t).isDeletedAnnotationElement(c))continue;let f=e.get(c);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=t.get(c),f&&(d(this,_t).addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}D(this,Oe,My).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const l of d(Ms,Ul).values())n.remove(`${l._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,Wh,!1)}getEditableAnnotation(t){var e;return((e=d(this,va))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){d(this,_t).getActive()!==t&&d(this,_t).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=d(this,Wn))!=null&&t.div&&!d(this,Sr)){x(this,Sr,new AbortController);const e=d(this,_t).combinedSignal(d(this,Sr));d(this,Wn).div.addEventListener("pointerdown",D(this,Oe,nM).bind(this),{signal:e}),d(this,Wn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=d(this,Wn))!=null&&t.div&&d(this,Sr)&&(d(this,Sr).abort(),x(this,Sr,null),d(this,Wn).div.classList.remove("highlighting"))}enableClick(){if(d(this,Bl))return;x(this,Bl,new AbortController);const t=d(this,_t).combinedSignal(d(this,Bl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=d(this,Bl))==null||t.abort(),x(this,Bl,null)}attach(t){d(this,vs).set(t.id,t);const{annotationElementId:e}=t;e&&d(this,_t).isDeletedAnnotationElement(e)&&d(this,_t).removeDeletedAnnotationElement(t)}detach(t){var e;d(this,vs).delete(t.id),(e=d(this,Eu))==null||e.removePointerInTextLayer(t.contentDiv),!d(this,Wh)&&t.annotationElementId&&d(this,_t).addDeletedAnnotationElement(t)}remove(t){this.detach(t),d(this,_t).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(d(this,_t).addDeletedAnnotationElement(t.annotationElementId),De.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),d(this,_t).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!d(this,_u)),d(this,_t).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!d(this,vr)&&(t._focusEventsAllowed=!1,x(this,vr,setTimeout(()=>{x(this,vr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:d(this,_t)._signal}),e.focus())},0))),t._structTreeParentId=(n=d(this,Eu))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return d(this,_t).getId()}combinedSignal(t){return d(this,_t).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=d(this,Oe,na))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){d(this,_t).updateToolbar(t),await d(this,_t).updateMode(t);const{offsetX:n,offsetY:r}=D(this,Oe,fw).call(this),l=this.getNextId(),u=D(this,Oe,dw).call(this,{parent:this,id:l,x:n,y:r,uiManager:d(this,_t),isCentered:!0,...e});u&&this.add(u)}async deserialize(t){var e;return await((e=d(Ms,Ul).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,d(this,_t)))||null}createAndAddNewEditor(t,e,n={}){const r=this.getNextId(),l=D(this,Oe,dw).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:d(this,_t),isCentered:e,...n});return l&&this.add(l),l}addNewEditor(t={}){this.createAndAddNewEditor(D(this,Oe,fw).call(this),!0,t)}setSelected(t){d(this,_t).setSelected(t)}toggleSelected(t){d(this,_t).toggleSelected(t)}unselect(t){d(this,_t).unselect(t)}pointerup(t){var r;const{isMac:e}=jn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!d(this,Hl)||(x(this,Hl,!1),(r=d(this,Oe,na))!=null&&r.isDrawer&&d(this,Oe,na).supportMultipleDrawings))return;if(!d(this,$h)){x(this,$h,!0);return}const n=d(this,_t).getMode();if(n===Pt.STAMP||n===Pt.SIGNATURE){d(this,_t).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var r;if(d(this,_t).getMode()===Pt.HIGHLIGHT&&this.enableTextSelection(),d(this,Hl)){x(this,Hl,!1);return}const{isMac:e}=jn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(x(this,Hl,!0),(r=d(this,Oe,na))!=null&&r.isDrawer){this.startDrawingSession(t);return}const n=d(this,_t).getActive();x(this,$h,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),d(this,Us)){d(this,Oe,na).startDrawing(this,d(this,_t),!1,t);return}d(this,_t).setCurrentDrawingSession(this),x(this,Us,new AbortController);const e=d(this,_t).combinedSignal(d(this,Us));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(x(this,Ar,null),this.commitOrRemove())},{signal:e}),d(this,Oe,na).startDrawing(this,d(this,_t),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&x(this,Ar,e);return}d(this,Ar)&&setTimeout(()=>{var e;(e=d(this,Ar))==null||e.focus(),x(this,Ar,null)},0)}endDrawingSession(t=!1){return d(this,Us)?(d(this,_t).setCurrentDrawingSession(null),d(this,Us).abort(),x(this,Us,null),x(this,Ar,null),d(this,Oe,na).endDrawing(t)):null}findNewParent(t,e,n){const r=d(this,_t).findParent(e,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return d(this,Us)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,Us)&&d(this,Oe,na).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=d(this,_t).getActive())==null?void 0:t.parent)===this&&(d(this,_t).commitOrRemove(),d(this,_t).setActiveEditor(null)),d(this,vr)&&(clearTimeout(d(this,vr)),x(this,vr,null));for(const n of d(this,vs).values())(e=d(this,Eu))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,d(this,vs).clear(),d(this,_t).removeLayer(this)}render({viewport:t}){this.viewport=t,ku(this.div,t);for(const e of d(this,_t).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){d(this,_t).commitOrRemove(),D(this,Oe,My).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,ku(this.div,{rotation:n}),e!==n)for(const r of d(this,vs).values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return d(this,_t).viewParameters.realScale}};Eu=new WeakMap,$h=new WeakMap,va=new WeakMap,Bl=new WeakMap,vr=new WeakMap,vs=new WeakMap,Hl=new WeakMap,Wh=new WeakMap,_u=new WeakMap,Us=new WeakMap,Ar=new WeakMap,Wn=new WeakMap,Sr=new WeakMap,_t=new WeakMap,Ul=new WeakMap,Oe=new WeakSet,nM=function(t){d(this,_t).unselectAll();const{target:e}=t;if(e===d(this,Wn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&d(this,Wn).div.contains(e)){const{isMac:n}=jn.platform;if(t.button!==0||t.ctrlKey&&n)return;d(this,_t).showAllEditors("highlight",!0,!0),d(this,Wn).div.classList.add("free"),this.toggleDrawing(),Gy.startHighlighting(this,d(this,_t).direction==="ltr",{target:d(this,Wn).div,x:t.x,y:t.y}),d(this,Wn).div.addEventListener("pointerup",()=>{d(this,Wn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,_t)._signal}),t.preventDefault()}},na=function(){return d(Ms,Ul).get(d(this,_t).getMode())},dw=function(t){const e=d(this,Oe,na);return e?new e.prototype.constructor(t):null},fw=function(){const{x:t,y:e,width:n,height:r}=this.div.getBoundingClientRect(),l=Math.max(0,t),u=Math.max(0,e),c=Math.min(window.innerWidth,t+n),f=Math.min(window.innerHeight,e+r),p=(l+c)/2-t,g=(u+f)/2-e,[y,b]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:b}},My=function(){for(const t of d(this,vs).values())t.isEmpty()&&t.remove()},gt(Ms,"_initialized",!1),T(Ms,Ul,new Map([GS,nw,uw,Gy,ow].map(t=>[t._editorType,t])));let hw=Ms;var Gs,ri,Cu,cg,hb,iM,xa,gw,sM,mw;const hn=class hn{constructor({pageIndex:t}){T(this,xa);T(this,Gs,null);T(this,ri,new Map);T(this,Cu,new Map);this.pageIndex=t}setParent(t){if(!d(this,Gs)){x(this,Gs,t);return}if(d(this,Gs)!==t){if(d(this,ri).size>0)for(const e of d(this,ri).values())e.remove(),t.append(e);x(this,Gs,t)}}static get _svgFactory(){return Qt(this,"_svgFactory",new By)}draw(t,e=!1,n=!1){const r=ei(hn,cg)._++,l=D(this,xa,gw).call(this),u=hn._svgFactory.createElement("defs");l.append(u);const c=hn._svgFactory.createElement("path");u.append(c);const f=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",f),c.setAttribute("vector-effect","non-scaling-stroke"),e&&d(this,Cu).set(r,c);const p=n?D(this,xa,sM).call(this,u,f):null,g=hn._svgFactory.createElement("use");return l.append(g),g.setAttribute("href",`#${f}`),this.updateProperties(l,t),d(this,ri).set(r,l),{id:r,clipPathId:`url(#${p})`}}drawOutline(t,e){const n=ei(hn,cg)._++,r=D(this,xa,gw).call(this),l=hn._svgFactory.createElement("defs");r.append(l);const u=hn._svgFactory.createElement("path");l.append(u);const c=`path_p${this.pageIndex}_${n}`;u.setAttribute("id",c),u.setAttribute("vector-effect","non-scaling-stroke");let f;if(e){const y=hn._svgFactory.createElement("mask");l.append(y),f=`mask_p${this.pageIndex}_${n}`,y.setAttribute("id",f),y.setAttribute("maskUnits","objectBoundingBox");const b=hn._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=hn._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${c}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const p=hn._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${c}`),f&&p.setAttribute("mask",`url(#${f})`);const g=p.cloneNode();return r.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,t),d(this,ri).set(n,r),n}finalizeDraw(t,e){d(this,Cu).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var f;if(!e)return;const{root:n,bbox:r,rootClass:l,path:u}=e,c=typeof t=="number"?d(this,ri).get(t):t;if(c){if(n&&D(this,xa,mw).call(this,c,n),r&&D(f=hn,hb,iM).call(f,c,r),l){const{classList:p}=c;for(const[g,y]of Object.entries(l))p.toggle(g,y)}if(u){const g=c.firstChild.firstChild;D(this,xa,mw).call(this,g,u)}}}updateParent(t,e){if(e===this)return;const n=d(this,ri).get(t);n&&(d(e,Gs).append(n),d(this,ri).delete(t),d(e,ri).set(t,n))}remove(t){d(this,Cu).delete(t),d(this,Gs)!==null&&(d(this,ri).get(t).remove(),d(this,ri).delete(t))}destroy(){x(this,Gs,null);for(const t of d(this,ri).values())t.remove();d(this,ri).clear(),d(this,Cu).clear()}};Gs=new WeakMap,ri=new WeakMap,Cu=new WeakMap,cg=new WeakMap,hb=new WeakSet,iM=function(t,[e,n,r,l]){const{style:u}=t;u.top=`${100*n}%`,u.left=`${100*e}%`,u.width=`${100*r}%`,u.height=`${100*l}%`},xa=new WeakSet,gw=function(){const t=hn._svgFactory.create(1,1,!0);return d(this,Gs).append(t),t.setAttribute("aria-hidden",!0),t},sM=function(t,e){const n=hn._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${e}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const l=hn._svgFactory.createElement("use");return n.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),r},mw=function(t,e){for(const[n,r]of Object.entries(e))r===null?t.removeAttribute(n):t.setAttribute(n,r)},T(hn,hb),T(hn,cg,0);let pw=hn;globalThis.pdfjsTestingUtils={HighlightOutliner:qS};globalThis.pdfjsLib={AbortException:Gl,AnnotationEditorLayer:hw,AnnotationEditorParamsType:Jt,AnnotationEditorType:Pt,AnnotationEditorUIManager:Ru,AnnotationLayer:BS,AnnotationMode:sl,AnnotationType:tn,build:SF,ColorPicker:Uy,createValidAbsoluteUrl:ZD,DOMSVGFactory:By,DrawLayer:pw,FeatureTest:jn,fetchData:vg,getDocument:eR,getFilenameFromUrl:pj,getPdfFilenameFromUrl:gj,getUuid:ek,getXfaPageViewport:mj,GlobalWorkerOptions:Sa,ImageKind:ey,InvalidPDFException:tS,isDataScheme:Tb,isPdfFile:Xw,isValidExplicitDest:pF,MathClamp:oi,noContextMenu:Ys,normalizeUnicode:hj,OPS:zy,OutputScale:Cr,PasswordResponses:nj,PDFDataRangeTransport:nR,PDFDateString:$w,PDFWorker:Hc,PermissionFlag:ej,PixelsPerInch:Vl,RenderingCancelledException:Yw,ResponseException:Iy,setLayerDimensions:ku,shadow:Qt,SignatureExtractor:wr,stopEvent:nn,SupportedImageMimeTypes:nS,TextLayer:jf,TouchManager:Fy,updateUrlHash:JD,Util:Et,VerbosityLevel:Eb,version:AF,XfaLayer:sR};const aM=et.createContext(null),kT=({pdfUrl:s,children:t})=>{const[e,n]=et.useState(null),[r,l]=et.useState([]),[u,c]=et.useState(!1),f=et.useRef([]),p=Ea();return et.useEffect(()=>{const g=y=>{const b=y.data;b.command==="getPdfWorkerPath"&&(Sa.workerSrc=b.PdfWorkerPath,c(!0))};return window.addEventListener("message",g),p.postMessage({command:"getPdfWorkerPath"}),()=>window.removeEventListener("message",g)},[]),et.useEffect(()=>{if(console.log("Worker 准备好:",u),console.log("PDF URL:",s),!u||!s)return;let g=!1;return(async()=>{try{console.log("Attempting to load PDF:",s);const b=await eR(s).promise;if(g)return;n(b);const A=[];let w=0;const S=1;for(let k=1;k<=b.numPages;k++){const N=(await b.getPage(k)).getViewport({scale:S});A.push({width:N.width,height:N.height,offsetY:w}),w+=N.height+10}g||l(A)}catch(y){console.error("PDF 加载失败:",y)}})(),()=>{g=!0}},[u,s]),et.useEffect(()=>{if(!e||r.length===0)return;const g=1;r.forEach((y,b)=>{const A=f.current[b];A&&e.getPage(b+1).then(w=>{const S=w.getViewport({scale:g});A.width=S.width,A.height=S.height;const k=A.getContext("2d");k&&w.render({canvasContext:k,viewport:S})}).catch(w=>{console.error("Page 渲染失败:",w)})})},[e,r]),r.length===0?P.jsx("div",{className:"text-center text-gray-500",children:"正在加载 PDF 文件..."}):P.jsxs("div",{className:"relative bg-gray-100 overflow-auto h-full",children:[r.map((g,y)=>P.jsx("div",{className:"mx-auto relative mb-2",style:{width:g.width,height:g.height},children:P.jsx("canvas",{ref:b=>{b&&(f.current[y]=b)},className:"block"})},y)),P.jsx(aM.Provider,{value:{pageMetrics:r},children:t})]})},rM=()=>{const s=et.useContext(aM);if(!s)throw new Error("usePDFMetrics must be used within PDFViewer");return s.pageMetrics},RT=({data:s})=>{const{openPanel:t}=xb(),e=rM(),n=r=>{t({id:r.id,type:"comment",content:r.content,author:r.author,time:r.time})};return P.jsx(P.Fragment,{children:s.map(r=>{const l=e[r.page-1];if(!l)return null;const u=r.position.x*l.width,c=l.offsetY+r.position.y*l.height;return P.jsx("div",{className:"comment-icon absolute cursor-pointer",style:{left:u,top:c},onClick:()=>n(r),title:"查看评论",children:"💬"},r.id)})})},MT=({data:s})=>{const t=rM(),{openPanel:e}=xb(),[n,r]=et.useState(null),l=c=>{const f=c.id;r(p=>p===f?null:f),e({id:f,type:"code",code:c.content,language:""})},u=c=>{navigator.clipboard.writeText(c).catch(f=>console.error("复制失败:",f))};return P.jsx(P.Fragment,{children:s.map(c=>{const f=t[c.page-1];if(!f)return null;const{id:p,content:g,position:{x:y,y:b,width:A,height:w}}=c,S=y*f.width,k=f.offsetY+b*f.height,C=A*f.width,N=w*f.height,O=n===p;return P.jsxs(db.Fragment,{children:[P.jsx("div",{style:{position:"absolute",left:S,top:k,width:C,height:N},className:"bg-green-200 bg-opacity-30 border border-green-500 cursor-pointer",onClick:()=>l(c),children:P.jsx("span",{style:{pointerEvents:"none"},children:"</>"})}),O&&P.jsxs("div",{style:{position:"absolute",left:S,top:k+N+4,width:Math.max(C,200)},className:"bg-white border border-gray-300 shadow-lg p-2 z-10",children:[P.jsxs("div",{className:"flex justify-between items-center mb-1",children:[P.jsx("strong",{className:"text-xs text-gray-700",children:"代码片段"}),P.jsx("button",{className:"text-xs text-gray-500 hover:text-gray-800",onClick:()=>r(null),children:"关闭"})]}),P.jsx("pre",{contentEditable:!0,suppressContentEditableWarning:!0,className:"bg-gray-100 p-2 text-xs overflow-auto",style:{maxHeight:"150px"},children:g}),P.jsxs("div",{className:"text-right mt-1",children:[P.jsx("button",{className:"text-xs text-blue-500 hover:underline mr-2",onClick:()=>u(g),children:"复制"}),P.jsx("button",{className:"text-xs text-green-600 hover:underline",onClick:()=>alert("保存已提交"),children:"保存"})]})]})]},p)})})},GF=({data:s,onClose:t})=>P.jsxs("div",{className:"border border-gray-300 bg-white shadow-lg rounded-xl overflow-hidden mb-4",children:[P.jsxs("div",{className:"flex justify-between items-center bg-blue-500 text-white p-2",children:[P.jsx("div",{className:"text-sm font-semibold",children:s.author}),P.jsx("div",{className:"text-xs",children:s.time}),P.jsx("button",{className:"text-white hover:text-gray-200 text-xs",onClick:t,children:"✕"})]}),P.jsx("div",{className:"p-4 text-sm text-gray-700 whitespace-pre-wrap",children:s.content})]}),VF=({data:s,onClose:t})=>{const[e,n]=db.useState(s.code),r=()=>{navigator.clipboard.writeText(e)},l=()=>{console.log("保存代码:",e)};return P.jsxs("div",{className:"border border-gray-300 bg-white shadow-lg rounded-xl overflow-hidden mb-4",children:[P.jsxs("div",{className:"flex justify-between items-center bg-green-500 text-white p-2",children:[P.jsxs("div",{className:"text-sm font-semibold",children:["代码片段 ",s.language&&`(${s.language})`]}),P.jsxs("div",{className:"space-x-2 text-xs",children:[P.jsx("button",{className:"hover:text-gray-200",onClick:r,children:"复制"}),P.jsx("button",{className:"hover:text-gray-200",onClick:l,children:"保存"}),P.jsx("button",{className:"hover:text-gray-200",onClick:t,children:"✕"})]})]}),P.jsx("textarea",{className:"w-full h-40 p-3 font-mono text-sm bg-gray-50 border-t border-b border-gray-200 resize-y outline-none",value:e,onChange:u=>n(u.target.value)}),P.jsxs("div",{className:"p-3 bg-gray-100 text-sm",children:[P.jsx("strong",{children:"运行结果:"}),P.jsx("div",{className:"mt-2 text-gray-600",children:"(结果输出区域)"})]})]})},qF=()=>{const{openPanels:s,closePanel:t}=xb();return s.length===0?null:P.jsx("div",{className:"p-4 overflow-auto h-full bg-gray-50",children:s.map(e=>e.type==="comment"?P.jsx(GF,{data:{content:e.content,author:e.author,time:e.time},onClose:()=>t(e.id)},e.id):e.type==="code"?P.jsx(VF,{data:{code:e.code,language:e.language},onClose:()=>t(e.id)},e.id):null)})},Rb=et.createContext(null);Rb.displayName="PanelGroupContext";const Ge={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},ix=10,Du=et.useLayoutEffect,NT=BN.useId,YF=typeof NT=="function"?NT:()=>null;let XF=0;function sx(s=null){const t=YF(),e=et.useRef(s||t||null);return e.current===null&&(e.current=""+XF++),s??e.current}function lM({children:s,className:t="",collapsedSize:e,collapsible:n,defaultSize:r,forwardedRef:l,id:u,maxSize:c,minSize:f,onCollapse:p,onExpand:g,onResize:y,order:b,style:A,tagName:w="div",...S}){const k=et.useContext(Rb);if(k===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:C,expandPanel:N,getPanelSize:O,getPanelStyle:I,groupId:z,isPanelCollapsed:L,reevaluatePanelConstraints:B,registerPanel:W,resizePanel:Q,unregisterPanel:st}=k,X=sx(u),Z=et.useRef({callbacks:{onCollapse:p,onExpand:g,onResize:y},constraints:{collapsedSize:e,collapsible:n,defaultSize:r,maxSize:c,minSize:f},id:X,idIsFromProps:u!==void 0,order:b});et.useRef({didLogMissingDefaultSizeWarning:!1}),Du(()=>{const{callbacks:J,constraints:ht}=Z.current,F={...ht};Z.current.id=X,Z.current.idIsFromProps=u!==void 0,Z.current.order=b,J.onCollapse=p,J.onExpand=g,J.onResize=y,ht.collapsedSize=e,ht.collapsible=n,ht.defaultSize=r,ht.maxSize=c,ht.minSize=f,(F.collapsedSize!==ht.collapsedSize||F.collapsible!==ht.collapsible||F.maxSize!==ht.maxSize||F.minSize!==ht.minSize)&&B(Z.current,F)}),Du(()=>{const J=Z.current;return W(J),()=>{st(J)}},[b,X,W,st]),et.useImperativeHandle(l,()=>({collapse:()=>{C(Z.current)},expand:J=>{N(Z.current,J)},getId(){return X},getSize(){return O(Z.current)},isCollapsed(){return L(Z.current)},isExpanded(){return!L(Z.current)},resize:J=>{Q(Z.current,J)}}),[C,N,O,L,X,Q]);const ct=I(Z.current,r);return et.createElement(w,{...S,children:s,className:t,id:X,style:{...ct,...A},[Ge.groupId]:z,[Ge.panel]:"",[Ge.panelCollapsible]:n||void 0,[Ge.panelId]:X,[Ge.panelSize]:parseFloat(""+ct.flexGrow).toFixed(1)})}const yw=et.forwardRef((s,t)=>et.createElement(lM,{...s,forwardedRef:t}));lM.displayName="Panel";yw.displayName="forwardRef(Panel)";let bw=null,Ny=-1,al=null;function $F(s,t){if(t){const e=(t&dM)!==0,n=(t&fM)!==0,r=(t&pM)!==0,l=(t&gM)!==0;if(e)return r?"se-resize":l?"ne-resize":"e-resize";if(n)return r?"sw-resize":l?"nw-resize":"w-resize";if(r)return"s-resize";if(l)return"n-resize"}switch(s){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function WF(){al!==null&&(document.head.removeChild(al),bw=null,al=null,Ny=-1)}function _A(s,t){var e,n;const r=$F(s,t);if(bw!==r){if(bw=r,al===null&&(al=document.createElement("style"),document.head.appendChild(al)),Ny>=0){var l;(l=al.sheet)===null||l===void 0||l.removeRule(Ny)}Ny=(e=(n=al.sheet)===null||n===void 0?void 0:n.insertRule(`*{cursor: ${r} !important;}`))!==null&&e!==void 0?e:-1}}function oM(s){return s.type==="keydown"}function uM(s){return s.type.startsWith("pointer")}function cM(s){return s.type.startsWith("mouse")}function Mb(s){if(uM(s)){if(s.isPrimary)return{x:s.clientX,y:s.clientY}}else if(cM(s))return{x:s.clientX,y:s.clientY};return{x:1/0,y:1/0}}function KF(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function QF(s,t,e){return s.x<t.x+t.width&&s.x+s.width>t.x&&s.y<t.y+t.height&&s.y+s.height>t.y}function ZF(s,t){if(s===t)throw new Error("Cannot compare node with itself");const e={a:PT(s),b:PT(t)};let n;for(;e.a.at(-1)===e.b.at(-1);)s=e.a.pop(),t=e.b.pop(),n=s;Gt(n,"Stacking order can only be calculated for elements with a common ancestor");const r={a:LT(OT(e.a)),b:LT(OT(e.b))};if(r.a===r.b){const l=n.childNodes,u={a:e.a.at(-1),b:e.b.at(-1)};let c=l.length;for(;c--;){const f=l[c];if(f===u.a)return 1;if(f===u.b)return-1}}return Math.sign(r.a-r.b)}const JF=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function tB(s){var t;const e=getComputedStyle((t=hM(s))!==null&&t!==void 0?t:s).display;return e==="flex"||e==="inline-flex"}function eB(s){const t=getComputedStyle(s);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||tB(s))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||JF.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function OT(s){let t=s.length;for(;t--;){const e=s[t];if(Gt(e,"Missing node"),eB(e))return e}return null}function LT(s){return s&&Number(getComputedStyle(s).zIndex)||0}function PT(s){const t=[];for(;s;)t.push(s),s=hM(s);return t}function hM(s){const{parentNode:t}=s;return t&&t instanceof ShadowRoot?t.host:t}const dM=1,fM=2,pM=4,gM=8,nB=KF()==="coarse";let qs=[],Uc=!1,rl=new Map,Nb=new Map;const Bf=new Set;function iB(s,t,e,n,r){var l;const{ownerDocument:u}=t,c={direction:e,element:t,hitAreaMargins:n,setResizeHandlerState:r},f=(l=rl.get(u))!==null&&l!==void 0?l:0;return rl.set(u,f+1),Bf.add(c),qy(),function(){var g;Nb.delete(s),Bf.delete(c);const y=(g=rl.get(u))!==null&&g!==void 0?g:1;if(rl.set(u,y-1),qy(),y===1&&rl.delete(u),qs.includes(c)){const b=qs.indexOf(c);b>=0&&qs.splice(b,1),rx(),r("up",!0,null)}}}function sB(s){const{target:t}=s,{x:e,y:n}=Mb(s);Uc=!0,ax({target:t,x:e,y:n}),qy(),qs.length>0&&(Yy("down",s),s.preventDefault(),mM(t)||s.stopImmediatePropagation())}function CA(s){const{x:t,y:e}=Mb(s);if(Uc&&s.buttons===0&&(Uc=!1,Yy("up",s)),!Uc){const{target:n}=s;ax({target:n,x:t,y:e})}Yy("move",s),rx(),qs.length>0&&s.preventDefault()}function TA(s){const{target:t}=s,{x:e,y:n}=Mb(s);Nb.clear(),Uc=!1,qs.length>0&&(s.preventDefault(),mM(t)||s.stopImmediatePropagation()),Yy("up",s),ax({target:t,x:e,y:n}),rx(),qy()}function mM(s){let t=s;for(;t;){if(t.hasAttribute(Ge.resizeHandle))return!0;t=t.parentElement}return!1}function ax({target:s,x:t,y:e}){qs.splice(0);let n=null;(s instanceof HTMLElement||s instanceof SVGElement)&&(n=s),Bf.forEach(r=>{const{element:l,hitAreaMargins:u}=r,c=l.getBoundingClientRect(),{bottom:f,left:p,right:g,top:y}=c,b=nB?u.coarse:u.fine;if(t>=p-b&&t<=g+b&&e>=y-b&&e<=f+b){if(n!==null&&document.contains(n)&&l!==n&&!l.contains(n)&&!n.contains(l)&&ZF(n,l)>0){let w=n,S=!1;for(;w&&!w.contains(l);){if(QF(w.getBoundingClientRect(),c)){S=!0;break}w=w.parentElement}if(S)return}qs.push(r)}})}function DA(s,t){Nb.set(s,t)}function rx(){let s=!1,t=!1;qs.forEach(n=>{const{direction:r}=n;r==="horizontal"?s=!0:t=!0});let e=0;Nb.forEach(n=>{e|=n}),s&&t?_A("intersection",e):s?_A("horizontal",e):t?_A("vertical",e):WF()}let kA=new AbortController;function qy(){kA.abort(),kA=new AbortController;const s={capture:!0,signal:kA.signal};Bf.size&&(Uc?(qs.length>0&&rl.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("contextmenu",TA,s),n.addEventListener("pointerleave",CA,s),n.addEventListener("pointermove",CA,s))}),rl.forEach((t,e)=>{const{body:n}=e;n.addEventListener("pointerup",TA,s),n.addEventListener("pointercancel",TA,s)})):rl.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("pointerdown",sB,s),n.addEventListener("pointermove",CA,s))}))}function Yy(s,t){Bf.forEach(e=>{const{setResizeHandlerState:n}=e,r=qs.includes(e);n(s,r,t)})}function aB(){const[s,t]=et.useState(0);return et.useCallback(()=>t(e=>e+1),[])}function Gt(s,t){if(!s)throw console.error(t),Error(t)}function Nu(s,t,e=ix){return s.toFixed(e)===t.toFixed(e)?0:s>t?1:-1}function xr(s,t,e=ix){return Nu(s,t,e)===0}function Qi(s,t,e){return Nu(s,t,e)===0}function rB(s,t,e){if(s.length!==t.length)return!1;for(let n=0;n<s.length;n++){const r=s[n],l=t[n];if(!Qi(r,l,e))return!1}return!0}function Pc({panelConstraints:s,panelIndex:t,size:e}){const n=s[t];Gt(n!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:r=0,collapsible:l,maxSize:u=100,minSize:c=0}=n;if(Nu(e,c)<0)if(l){const f=(r+c)/2;Nu(e,f)<0?e=r:e=c}else e=c;return e=Math.min(u,e),e=parseFloat(e.toFixed(ix)),e}function Rf({delta:s,initialLayout:t,panelConstraints:e,pivotIndices:n,prevLayout:r,trigger:l}){if(Qi(s,0))return t;const u=[...t],[c,f]=n;Gt(c!=null,"Invalid first pivot index"),Gt(f!=null,"Invalid second pivot index");let p=0;if(l==="keyboard"){{const y=s<0?f:c,b=e[y];Gt(b,`Panel constraints not found for index ${y}`);const{collapsedSize:A=0,collapsible:w,minSize:S=0}=b;if(w){const k=t[y];if(Gt(k!=null,`Previous layout not found for panel index ${y}`),Qi(k,A)){const C=S-k;Nu(C,Math.abs(s))>0&&(s=s<0?0-C:C)}}}{const y=s<0?c:f,b=e[y];Gt(b,`No panel constraints found for index ${y}`);const{collapsedSize:A=0,collapsible:w,minSize:S=0}=b;if(w){const k=t[y];if(Gt(k!=null,`Previous layout not found for panel index ${y}`),Qi(k,S)){const C=k-A;Nu(C,Math.abs(s))>0&&(s=s<0?0-C:C)}}}}{const y=s<0?1:-1;let b=s<0?f:c,A=0;for(;;){const S=t[b];Gt(S!=null,`Previous layout not found for panel index ${b}`);const C=Pc({panelConstraints:e,panelIndex:b,size:100})-S;if(A+=C,b+=y,b<0||b>=e.length)break}const w=Math.min(Math.abs(s),Math.abs(A));s=s<0?0-w:w}{let b=s<0?c:f;for(;b>=0&&b<e.length;){const A=Math.abs(s)-Math.abs(p),w=t[b];Gt(w!=null,`Previous layout not found for panel index ${b}`);const S=w-A,k=Pc({panelConstraints:e,panelIndex:b,size:S});if(!Qi(w,k)&&(p+=w-k,u[b]=k,p.toPrecision(3).localeCompare(Math.abs(s).toPrecision(3),void 0,{numeric:!0})>=0))break;s<0?b--:b++}}if(rB(r,u))return r;{const y=s<0?f:c,b=t[y];Gt(b!=null,`Previous layout not found for panel index ${y}`);const A=b+p,w=Pc({panelConstraints:e,panelIndex:y,size:A});if(u[y]=w,!Qi(w,A)){let S=A-w,C=s<0?f:c;for(;C>=0&&C<e.length;){const N=u[C];Gt(N!=null,`Previous layout not found for panel index ${C}`);const O=N+S,I=Pc({panelConstraints:e,panelIndex:C,size:O});if(Qi(N,I)||(S-=I-N,u[C]=I),Qi(S,0))break;s>0?C--:C++}}}const g=u.reduce((y,b)=>b+y,0);return Qi(g,100)?u:r}function lB({layout:s,panelsArray:t,pivotIndices:e}){let n=0,r=100,l=0,u=0;const c=e[0];Gt(c!=null,"No pivot index found"),t.forEach((y,b)=>{const{constraints:A}=y,{maxSize:w=100,minSize:S=0}=A;b===c?(n=S,r=w):(l+=S,u+=w)});const f=Math.min(r,100-l),p=Math.max(n,100-u),g=s[c];return{valueMax:f,valueMin:p,valueNow:g}}function Hf(s,t=document){return Array.from(t.querySelectorAll(`[${Ge.resizeHandleId}][data-panel-group-id="${s}"]`))}function yM(s,t,e=document){const r=Hf(s,e).findIndex(l=>l.getAttribute(Ge.resizeHandleId)===t);return r??null}function bM(s,t,e){const n=yM(s,t,e);return n!=null?[n,n+1]:[-1,-1]}function vM(s,t=document){var e;if(t instanceof HTMLElement&&(t==null||(e=t.dataset)===null||e===void 0?void 0:e.panelGroupId)==s)return t;const n=t.querySelector(`[data-panel-group][data-panel-group-id="${s}"]`);return n||null}function Ob(s,t=document){const e=t.querySelector(`[${Ge.resizeHandleId}="${s}"]`);return e||null}function oB(s,t,e,n=document){var r,l,u,c;const f=Ob(t,n),p=Hf(s,n),g=f?p.indexOf(f):-1,y=(r=(l=e[g])===null||l===void 0?void 0:l.id)!==null&&r!==void 0?r:null,b=(u=(c=e[g+1])===null||c===void 0?void 0:c.id)!==null&&u!==void 0?u:null;return[y,b]}function uB({committedValuesRef:s,eagerValuesRef:t,groupId:e,layout:n,panelDataArray:r,panelGroupElement:l,setLayout:u}){et.useRef({didWarnAboutMissingResizeHandle:!1}),Du(()=>{if(!l)return;const c=Hf(e,l);for(let f=0;f<r.length-1;f++){const{valueMax:p,valueMin:g,valueNow:y}=lB({layout:n,panelsArray:r,pivotIndices:[f,f+1]}),b=c[f];if(b!=null){const A=r[f];Gt(A,`No panel data found for index "${f}"`),b.setAttribute("aria-controls",A.id),b.setAttribute("aria-valuemax",""+Math.round(p)),b.setAttribute("aria-valuemin",""+Math.round(g)),b.setAttribute("aria-valuenow",y!=null?""+Math.round(y):"")}}return()=>{c.forEach((f,p)=>{f.removeAttribute("aria-controls"),f.removeAttribute("aria-valuemax"),f.removeAttribute("aria-valuemin"),f.removeAttribute("aria-valuenow")})}},[e,n,r,l]),et.useEffect(()=>{if(!l)return;const c=t.current;Gt(c,"Eager values not found");const{panelDataArray:f}=c,p=vM(e,l);Gt(p!=null,`No group found for id "${e}"`);const g=Hf(e,l);Gt(g,`No resize handles found for group id "${e}"`);const y=g.map(b=>{const A=b.getAttribute(Ge.resizeHandleId);Gt(A,"Resize handle element has no handle id attribute");const[w,S]=oB(e,A,f,l);if(w==null||S==null)return()=>{};const k=C=>{if(!C.defaultPrevented)switch(C.key){case"Enter":{C.preventDefault();const N=f.findIndex(O=>O.id===w);if(N>=0){const O=f[N];Gt(O,`No panel data found for index ${N}`);const I=n[N],{collapsedSize:z=0,collapsible:L,minSize:B=0}=O.constraints;if(I!=null&&L){const W=Rf({delta:Qi(I,z)?B-z:z-I,initialLayout:n,panelConstraints:f.map(Q=>Q.constraints),pivotIndices:bM(e,A,l),prevLayout:n,trigger:"keyboard"});n!==W&&u(W)}}break}}};return b.addEventListener("keydown",k),()=>{b.removeEventListener("keydown",k)}});return()=>{y.forEach(b=>b())}},[l,s,t,e,n,r,u])}function zT(s,t){if(s.length!==t.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!==t[e])return!1;return!0}function AM(s,t){const e=s==="horizontal",{x:n,y:r}=Mb(t);return e?n:r}function cB(s,t,e,n,r){const l=e==="horizontal",u=Ob(t,r);Gt(u,`No resize handle element found for id "${t}"`);const c=u.getAttribute(Ge.groupId);Gt(c,"Resize handle element has no group id attribute");let{initialCursorPosition:f}=n;const p=AM(e,s),g=vM(c,r);Gt(g,`No group element found for id "${c}"`);const y=g.getBoundingClientRect(),b=l?y.width:y.height;return(p-f)/b*100}function hB(s,t,e,n,r,l){if(oM(s)){const u=e==="horizontal";let c=0;s.shiftKey?c=100:r!=null?c=r:c=10;let f=0;switch(s.key){case"ArrowDown":f=u?0:c;break;case"ArrowLeft":f=u?-c:0;break;case"ArrowRight":f=u?c:0;break;case"ArrowUp":f=u?0:-c;break;case"End":f=100;break;case"Home":f=-100;break}return f}else return n==null?0:cB(s,t,e,n,l)}function dB({panelDataArray:s}){const t=Array(s.length),e=s.map(l=>l.constraints);let n=0,r=100;for(let l=0;l<s.length;l++){const u=e[l];Gt(u,`Panel constraints not found for index ${l}`);const{defaultSize:c}=u;c!=null&&(n++,t[l]=c,r-=c)}for(let l=0;l<s.length;l++){const u=e[l];Gt(u,`Panel constraints not found for index ${l}`);const{defaultSize:c}=u;if(c!=null)continue;const f=s.length-n,p=r/f;n++,t[l]=p,r-=p}return t}function Sc(s,t,e){t.forEach((n,r)=>{const l=s[r];Gt(l,`Panel data not found for index ${r}`);const{callbacks:u,constraints:c,id:f}=l,{collapsedSize:p=0,collapsible:g}=c,y=e[f];if(y==null||n!==y){e[f]=n;const{onCollapse:b,onExpand:A,onResize:w}=u;w&&w(n,y),g&&(b||A)&&(A&&(y==null||xr(y,p))&&!xr(n,p)&&A(),b&&(y==null||!xr(y,p))&&xr(n,p)&&b())}})}function Zm(s,t){if(s.length!==t.length)return!1;for(let e=0;e<s.length;e++)if(s[e]!=t[e])return!1;return!0}function fB({defaultSize:s,dragState:t,layout:e,panelData:n,panelIndex:r,precision:l=3}){const u=e[r];let c;return u==null?c=s!=null?s.toPrecision(l):"1":n.length===1?c="1":c=u.toPrecision(l),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function pB(s,t=10){let e=null;return(...r)=>{e!==null&&clearTimeout(e),e=setTimeout(()=>{s(...r)},t)}}function IT(s){try{if(typeof localStorage<"u")s.getItem=t=>localStorage.getItem(t),s.setItem=(t,e)=>{localStorage.setItem(t,e)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),s.getItem=()=>null,s.setItem=()=>{}}}function SM(s){return`react-resizable-panels:${s}`}function wM(s){return s.map(t=>{const{constraints:e,id:n,idIsFromProps:r,order:l}=t;return r?n:l?`${l}:${JSON.stringify(e)}`:JSON.stringify(e)}).sort((t,e)=>t.localeCompare(e)).join(",")}function xM(s,t){try{const e=SM(s),n=t.getItem(e);if(n){const r=JSON.parse(n);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function gB(s,t,e){var n,r;const l=(n=xM(s,e))!==null&&n!==void 0?n:{},u=wM(t);return(r=l[u])!==null&&r!==void 0?r:null}function mB(s,t,e,n,r){var l;const u=SM(s),c=wM(t),f=(l=xM(s,r))!==null&&l!==void 0?l:{};f[c]={expandToSizes:Object.fromEntries(e.entries()),layout:n};try{r.setItem(u,JSON.stringify(f))}catch(p){console.error(p)}}function jT({layout:s,panelConstraints:t}){const e=[...s],n=e.reduce((l,u)=>l+u,0);if(e.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${e.map(l=>`${l}%`).join(", ")}`);if(!Qi(n,100)&&e.length>0)for(let l=0;l<t.length;l++){const u=e[l];Gt(u!=null,`No layout data found for index ${l}`);const c=100/n*u;e[l]=c}let r=0;for(let l=0;l<t.length;l++){const u=e[l];Gt(u!=null,`No layout data found for index ${l}`);const c=Pc({panelConstraints:t,panelIndex:l,size:u});u!=c&&(r+=u-c,e[l]=c)}if(!Qi(r,0))for(let l=0;l<t.length;l++){const u=e[l];Gt(u!=null,`No layout data found for index ${l}`);const c=u+r,f=Pc({panelConstraints:t,panelIndex:l,size:c});if(u!==f&&(r-=f-u,e[l]=f,Qi(r,0)))break}return e}const yB=100,Mf={getItem:s=>(IT(Mf),Mf.getItem(s)),setItem:(s,t)=>{IT(Mf),Mf.setItem(s,t)}},FT={};function EM({autoSaveId:s=null,children:t,className:e="",direction:n,forwardedRef:r,id:l=null,onLayout:u=null,keyboardResizeBy:c=null,storage:f=Mf,style:p,tagName:g="div",...y}){const b=sx(l),A=et.useRef(null),[w,S]=et.useState(null),[k,C]=et.useState([]),N=aB(),O=et.useRef({}),I=et.useRef(new Map),z=et.useRef(0),L=et.useRef({autoSaveId:s,direction:n,dragState:w,id:b,keyboardResizeBy:c,onLayout:u,storage:f}),B=et.useRef({layout:k,panelDataArray:[],panelDataArrayChanged:!1});et.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),et.useImperativeHandle(r,()=>({getId:()=>L.current.id,getLayout:()=>{const{layout:R}=B.current;return R},setLayout:R=>{const{onLayout:at}=L.current,{layout:ft,panelDataArray:it}=B.current,ut=jT({layout:R,panelConstraints:it.map(mt=>mt.constraints)});zT(ft,ut)||(C(ut),B.current.layout=ut,at&&at(ut),Sc(it,ut,O.current))}}),[]),Du(()=>{L.current.autoSaveId=s,L.current.direction=n,L.current.dragState=w,L.current.id=b,L.current.onLayout=u,L.current.storage=f}),uB({committedValuesRef:L,eagerValuesRef:B,groupId:b,layout:k,panelDataArray:B.current.panelDataArray,setLayout:C,panelGroupElement:A.current}),et.useEffect(()=>{const{panelDataArray:R}=B.current;if(s){if(k.length===0||k.length!==R.length)return;let at=FT[s];at==null&&(at=pB(mB,yB),FT[s]=at);const ft=[...R],it=new Map(I.current);at(s,ft,it,k,f)}},[s,k,f]),et.useEffect(()=>{});const W=et.useCallback(R=>{const{onLayout:at}=L.current,{layout:ft,panelDataArray:it}=B.current;if(R.constraints.collapsible){const ut=it.map(fe=>fe.constraints),{collapsedSize:mt=0,panelSize:Tt,pivotIndices:Bt}=yo(it,R,ft);if(Gt(Tt!=null,`Panel size not found for panel "${R.id}"`),!xr(Tt,mt)){I.current.set(R.id,Tt);const pe=Mc(it,R)===it.length-1?Tt-mt:mt-Tt,Zt=Rf({delta:pe,initialLayout:ft,panelConstraints:ut,pivotIndices:Bt,prevLayout:ft,trigger:"imperative-api"});Zm(ft,Zt)||(C(Zt),B.current.layout=Zt,at&&at(Zt),Sc(it,Zt,O.current))}}},[]),Q=et.useCallback((R,at)=>{const{onLayout:ft}=L.current,{layout:it,panelDataArray:ut}=B.current;if(R.constraints.collapsible){const mt=ut.map(Vt=>Vt.constraints),{collapsedSize:Tt=0,panelSize:Bt=0,minSize:fe=0,pivotIndices:pe}=yo(ut,R,it),Zt=at??fe;if(xr(Bt,Tt)){const Vt=I.current.get(R.id),Fn=Vt!=null&&Vt>=Zt?Vt:Zt,Fe=Mc(ut,R)===ut.length-1?Bt-Fn:Fn-Bt,Ve=Rf({delta:Fe,initialLayout:it,panelConstraints:mt,pivotIndices:pe,prevLayout:it,trigger:"imperative-api"});Zm(it,Ve)||(C(Ve),B.current.layout=Ve,ft&&ft(Ve),Sc(ut,Ve,O.current))}}},[]),st=et.useCallback(R=>{const{layout:at,panelDataArray:ft}=B.current,{panelSize:it}=yo(ft,R,at);return Gt(it!=null,`Panel size not found for panel "${R.id}"`),it},[]),X=et.useCallback((R,at)=>{const{panelDataArray:ft}=B.current,it=Mc(ft,R);return fB({defaultSize:at,dragState:w,layout:k,panelData:ft,panelIndex:it})},[w,k]),Z=et.useCallback(R=>{const{layout:at,panelDataArray:ft}=B.current,{collapsedSize:it=0,collapsible:ut,panelSize:mt}=yo(ft,R,at);return Gt(mt!=null,`Panel size not found for panel "${R.id}"`),ut===!0&&xr(mt,it)},[]),ct=et.useCallback(R=>{const{layout:at,panelDataArray:ft}=B.current,{collapsedSize:it=0,collapsible:ut,panelSize:mt}=yo(ft,R,at);return Gt(mt!=null,`Panel size not found for panel "${R.id}"`),!ut||Nu(mt,it)>0},[]),J=et.useCallback(R=>{const{panelDataArray:at}=B.current;at.push(R),at.sort((ft,it)=>{const ut=ft.order,mt=it.order;return ut==null&&mt==null?0:ut==null?-1:mt==null?1:ut-mt}),B.current.panelDataArrayChanged=!0,N()},[N]);Du(()=>{if(B.current.panelDataArrayChanged){B.current.panelDataArrayChanged=!1;const{autoSaveId:R,onLayout:at,storage:ft}=L.current,{layout:it,panelDataArray:ut}=B.current;let mt=null;if(R){const Bt=gB(R,ut,ft);Bt&&(I.current=new Map(Object.entries(Bt.expandToSizes)),mt=Bt.layout)}mt==null&&(mt=dB({panelDataArray:ut}));const Tt=jT({layout:mt,panelConstraints:ut.map(Bt=>Bt.constraints)});zT(it,Tt)||(C(Tt),B.current.layout=Tt,at&&at(Tt),Sc(ut,Tt,O.current))}}),Du(()=>{const R=B.current;return()=>{R.layout=[]}},[]);const ht=et.useCallback(R=>{let at=!1;const ft=A.current;return ft&&window.getComputedStyle(ft,null).getPropertyValue("direction")==="rtl"&&(at=!0),function(ut){ut.preventDefault();const mt=A.current;if(!mt)return()=>null;const{direction:Tt,dragState:Bt,id:fe,keyboardResizeBy:pe,onLayout:Zt}=L.current,{layout:Vt,panelDataArray:Fn}=B.current,{initialLayout:je}=Bt??{},Fe=bM(fe,R,mt);let Ve=hB(ut,R,Tt,Bt,pe,mt);const xs=Tt==="horizontal";xs&&at&&(Ve=-Ve);const _a=Fn.map(Ca=>Ca.constraints),ci=Rf({delta:Ve,initialLayout:je??Vt,panelConstraints:_a,pivotIndices:Fe,prevLayout:Vt,trigger:oM(ut)?"keyboard":"mouse-or-touch"}),kr=!Zm(Vt,ci);(uM(ut)||cM(ut))&&z.current!=Ve&&(z.current=Ve,!kr&&Ve!==0?xs?DA(R,Ve<0?dM:fM):DA(R,Ve<0?pM:gM):DA(R,0)),kr&&(C(ci),B.current.layout=ci,Zt&&Zt(ci),Sc(Fn,ci,O.current))}},[]),F=et.useCallback((R,at)=>{const{onLayout:ft}=L.current,{layout:it,panelDataArray:ut}=B.current,mt=ut.map(Vt=>Vt.constraints),{panelSize:Tt,pivotIndices:Bt}=yo(ut,R,it);Gt(Tt!=null,`Panel size not found for panel "${R.id}"`);const pe=Mc(ut,R)===ut.length-1?Tt-at:at-Tt,Zt=Rf({delta:pe,initialLayout:it,panelConstraints:mt,pivotIndices:Bt,prevLayout:it,trigger:"imperative-api"});Zm(it,Zt)||(C(Zt),B.current.layout=Zt,ft&&ft(Zt),Sc(ut,Zt,O.current))},[]),q=et.useCallback((R,at)=>{const{layout:ft,panelDataArray:it}=B.current,{collapsedSize:ut=0,collapsible:mt}=at,{collapsedSize:Tt=0,collapsible:Bt,maxSize:fe=100,minSize:pe=0}=R.constraints,{panelSize:Zt}=yo(it,R,ft);Zt!=null&&(mt&&Bt&&xr(Zt,ut)?xr(ut,Tt)||F(R,Tt):Zt<pe?F(R,pe):Zt>fe&&F(R,fe))},[F]),yt=et.useCallback((R,at)=>{const{direction:ft}=L.current,{layout:it}=B.current;if(!A.current)return;const ut=Ob(R,A.current);Gt(ut,`Drag handle element not found for id "${R}"`);const mt=AM(ft,at);S({dragHandleId:R,dragHandleRect:ut.getBoundingClientRect(),initialCursorPosition:mt,initialLayout:it})},[]),xt=et.useCallback(()=>{S(null)},[]),_=et.useCallback(R=>{const{panelDataArray:at}=B.current,ft=Mc(at,R);ft>=0&&(at.splice(ft,1),delete O.current[R.id],B.current.panelDataArrayChanged=!0,N())},[N]),K=et.useMemo(()=>({collapsePanel:W,direction:n,dragState:w,expandPanel:Q,getPanelSize:st,getPanelStyle:X,groupId:b,isPanelCollapsed:Z,isPanelExpanded:ct,reevaluatePanelConstraints:q,registerPanel:J,registerResizeHandle:ht,resizePanel:F,startDragging:yt,stopDragging:xt,unregisterPanel:_,panelGroupElement:A.current}),[W,w,n,Q,st,X,b,Z,ct,q,J,ht,F,yt,xt,_]),ot={display:"flex",flexDirection:n==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return et.createElement(Rb.Provider,{value:K},et.createElement(g,{...y,children:t,className:e,id:l,ref:A,style:{...ot,...p},[Ge.group]:"",[Ge.groupDirection]:n,[Ge.groupId]:b}))}const _M=et.forwardRef((s,t)=>et.createElement(EM,{...s,forwardedRef:t}));EM.displayName="PanelGroup";_M.displayName="forwardRef(PanelGroup)";function Mc(s,t){return s.findIndex(e=>e===t||e.id===t.id)}function yo(s,t,e){const n=Mc(s,t),l=n===s.length-1?[n-1,n]:[n,n+1],u=e[n];return{...t.constraints,panelSize:u,pivotIndices:l}}function bB({disabled:s,handleId:t,resizeHandler:e,panelGroupElement:n}){et.useEffect(()=>{if(s||e==null||n==null)return;const r=Ob(t,n);if(r==null)return;const l=u=>{if(!u.defaultPrevented)switch(u.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{u.preventDefault(),e(u);break}case"F6":{u.preventDefault();const c=r.getAttribute(Ge.groupId);Gt(c,`No group element found for id "${c}"`);const f=Hf(c,n),p=yM(c,t,n);Gt(p!==null,`No resize element found for id "${t}"`);const g=u.shiftKey?p>0?p-1:f.length-1:p+1<f.length?p+1:0;f[g].focus();break}}};return r.addEventListener("keydown",l),()=>{r.removeEventListener("keydown",l)}},[n,s,t,e])}function CM({children:s=null,className:t="",disabled:e=!1,hitAreaMargins:n,id:r,onBlur:l,onClick:u,onDragging:c,onFocus:f,onPointerDown:p,onPointerUp:g,style:y={},tabIndex:b=0,tagName:A="div",...w}){var S,k;const C=et.useRef(null),N=et.useRef({onClick:u,onDragging:c,onPointerDown:p,onPointerUp:g});et.useEffect(()=>{N.current.onClick=u,N.current.onDragging=c,N.current.onPointerDown=p,N.current.onPointerUp=g});const O=et.useContext(Rb);if(O===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:I,groupId:z,registerResizeHandle:L,startDragging:B,stopDragging:W,panelGroupElement:Q}=O,st=sx(r),[X,Z]=et.useState("inactive"),[ct,J]=et.useState(!1),[ht,F]=et.useState(null),q=et.useRef({state:X});Du(()=>{q.current.state=X}),et.useEffect(()=>{if(e)F(null);else{const K=L(st);F(()=>K)}},[e,st,L]);const yt=(S=n==null?void 0:n.coarse)!==null&&S!==void 0?S:15,xt=(k=n==null?void 0:n.fine)!==null&&k!==void 0?k:5;et.useEffect(()=>{if(e||ht==null)return;const K=C.current;Gt(K,"Element ref not attached");let ot=!1;return iB(st,K,I,{coarse:yt,fine:xt},(at,ft,it)=>{if(!ft){Z("inactive");return}switch(at){case"down":{Z("drag"),ot=!1,Gt(it,'Expected event to be defined for "down" action'),B(st,it);const{onDragging:ut,onPointerDown:mt}=N.current;ut==null||ut(!0),mt==null||mt();break}case"move":{const{state:ut}=q.current;ot=!0,ut!=="drag"&&Z("hover"),Gt(it,'Expected event to be defined for "move" action'),ht(it);break}case"up":{Z("hover"),W();const{onClick:ut,onDragging:mt,onPointerUp:Tt}=N.current;mt==null||mt(!1),Tt==null||Tt(),ot||ut==null||ut();break}}})},[yt,I,e,xt,L,st,ht,B,W]),bB({disabled:e,handleId:st,resizeHandler:ht,panelGroupElement:Q});const _={touchAction:"none",userSelect:"none"};return et.createElement(A,{...w,children:s,className:t,id:r,onBlur:()=>{J(!1),l==null||l()},onFocus:()=>{J(!0),f==null||f()},ref:C,role:"separator",style:{..._,...y},tabIndex:b,[Ge.groupDirection]:I,[Ge.groupId]:z,[Ge.resizeHandle]:"",[Ge.resizeHandleActive]:X==="drag"?"pointer":ct?"keyboard":void 0,[Ge.resizeHandleEnabled]:!e,[Ge.resizeHandleId]:st,[Ge.resizeHandleState]:X})}CM.displayName="PanelResizeHandle";const BT=[{id:"c1",page:1,type:"text",content:"第一页顶部评论。",author:"张三",time:"2025-05-06",position:{x:.5,y:.5}},{id:"c2",page:1,type:"highlight",content:"注意此段内容。",author:"李四",time:"2025-05-06",position:{x:.2,y:.3}}],HT=[{id:"code1",page:2,content:'console.log("Hello World");',position:{x:.5,y:.5,width:.6,height:.1}}],vB=()=>{const{openPanels:s}=xb(),e=s.some(c=>c.type==="code")?60:70,n=100-e,r=Ea(),[l,u]=et.useState("");return et.useEffect(()=>{const c=f=>{const p=f.data;p.command==="getDemoPdfPath"&&u(p.filePath)};return window.addEventListener("message",c),r.postMessage({command:"getDemoPdfPath"}),()=>window.removeEventListener("message",c)},[]),s.length===0?P.jsxs(kT,{pdfUrl:l,children:[P.jsx(RT,{data:BT}),P.jsx(MT,{data:HT})]}):P.jsxs(_M,{direction:"horizontal",children:[P.jsx(yw,{defaultSize:e,children:P.jsxs(kT,{pdfUrl:l,children:[P.jsx(RT,{data:BT}),P.jsx(MT,{data:HT})]})}),P.jsx(CM,{className:"resize-handle"}),P.jsx(yw,{defaultSize:n,children:P.jsx(qF,{})})]})},AB=()=>P.jsx(J3,{children:P.jsx(vB,{})}),wc=Ea();function SB(){const[s,t]=et.useState("LoginPage"),[e,n]=et.useState(null),[r,l]=et.useState("");et.useEffect(()=>{const g=y=>{const b=y.data;b.command==="logoutResult"&&b.success&&(n(null),t("LoginPage")),b.command==="currentUseridResult"&&(b.userId||(n(null),t("LoginPage")))};return window.addEventListener("message",g),wc==null||wc.postMessage({command:"getCurrentUserid"}),()=>window.removeEventListener("message",g)},[]);const u=g=>{n(g),t("HomePage")},c=g=>{n(g),t("HomePage")},f=()=>{wc==null||wc.postMessage({command:"logout"})},p=()=>{if(!e)return s==="RegisterPage"?P.jsx(QN,{onRegisterSuccess:c,onSwitchToLogin:()=>t("LoginPage")}):P.jsx(KN,{onLoginSuccess:u,onSwitchToRegister:()=>t("RegisterPage")});if(r)return P.jsx(Z3,{filePath:r});switch(s){case"HomePage":return P.jsx(sC,{});case"CoursePage":return P.jsx(ZN,{setSelectedFile:l});case"CalendarPage":return P.jsx(CL,{});case"DemoPage":return P.jsx(AB,{});default:return P.jsx(sC,{})}};return P.jsxs("div",{className:"p-4 bg-gray-50 min-h-screen",children:[e&&P.jsxs("div",{className:"flex justify-between items-center mb-4",children:[P.jsxs("div",{children:["欢迎，",e.name]}),P.jsxs("div",{className:"flex gap-2",children:[P.jsxs("select",{value:s,onChange:g=>t(g.target.value),className:"border p-2 rounded-md bg-white shadow",children:[P.jsx("option",{value:"HomePage",children:"主页"}),P.jsx("option",{value:"CoursePage",children:"课程页面"}),P.jsx("option",{value:"CalendarPage",children:"日历页面"}),P.jsx("option",{value:"DemoPage",children:"🧪 Demo 测试"})]}),P.jsx("button",{onClick:f,className:"bg-red-500 text-white px-4 py-2 rounded",children:"注销"})]})]}),r&&P.jsx("button",{onClick:()=>l(""),className:"mt-2 p-2 bg-blue-500 text-white rounded",children:"返回课程页面"}),p()]})}$N.createRoot(document.getElementById("root")).render(P.jsx(db.StrictMode,{children:P.jsx(SB,{})}));
