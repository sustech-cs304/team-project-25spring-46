var nL=Object.defineProperty;var OC=i=>{throw TypeError(i)};var iL=(i,t,e)=>t in i?nL(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var mt=(i,t,e)=>iL(i,typeof t!="symbol"?t+"":t,e),gA=(i,t,e)=>t.has(i)||OC("Cannot "+e);var f=(i,t,e)=>(gA(i,t,"read from private field"),e?e.call(i):t.get(i)),R=(i,t,e)=>t.has(i)?OC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),x=(i,t,e,n)=>(gA(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),D=(i,t,e)=>(gA(i,t,"access private method"),e);var ri=(i,t,e,n)=>({set _(r){x(i,t,r,e)},get _(){return f(i,t,n)}});function sL(i,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const l=Object.getOwnPropertyDescriptor(n,r);l&&Object.defineProperty(i,r,l.get?l:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();function Cg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var mA={exports:{}},ff={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LC;function rL(){if(LC)return ff;LC=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,r,l){var o=null;if(l!==void 0&&(o=""+l),r.key!==void 0&&(o=""+r.key),"key"in r){l={};for(var c in r)c!=="key"&&(l[c]=r[c])}else l=r;return r=l.ref,{$$typeof:i,type:n,key:o,ref:r!==void 0?r:null,props:l}}return ff.Fragment=t,ff.jsx=e,ff.jsxs=e,ff}var PC;function aL(){return PC||(PC=1,mA.exports=rL()),mA.exports}var P=aL(),yA={exports:{}},qt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zC;function lL(){if(zC)return qt;zC=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function b(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function _(C,K,ut){this.props=C,this.context=K,this.refs=w,this.updater=ut||v}_.prototype.isReactComponent={},_.prototype.setState=function(C,K){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,K,"setState")},_.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function T(){}T.prototype=_.prototype;function O(C,K,ut){this.props=C,this.context=K,this.refs=w,this.updater=ut||v}var N=O.prototype=new T;N.constructor=O,S(N,_.prototype),N.isPureReactComponent=!0;var I=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function B(C,K,ut,k,at,pt){return ut=pt.ref,{$$typeof:i,type:C,key:K,ref:ut!==void 0?ut:null,props:pt}}function X(C,K){return B(C.type,K,void 0,void 0,void 0,C.props)}function Q(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function rt(C){var K={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ut){return K[ut]})}var $=/\/+/g;function J(C,K){return typeof C=="object"&&C!==null&&C.key!=null?rt(""+C.key):K.toString(36)}function ht(){}function tt(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(ht,ht):(C.status="pending",C.then(function(K){C.status==="pending"&&(C.status="fulfilled",C.value=K)},function(K){C.status==="pending"&&(C.status="rejected",C.reason=K)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function dt(C,K,ut,k,at){var pt=typeof C;(pt==="undefined"||pt==="boolean")&&(C=null);var st=!1;if(C===null)st=!0;else switch(pt){case"bigint":case"string":case"number":st=!0;break;case"object":switch(C.$$typeof){case i:case t:st=!0;break;case g:return st=C._init,dt(st(C._payload),K,ut,k,at)}}if(st)return at=at(C),st=k===""?"."+J(C,0):k,I(at)?(ut="",st!=null&&(ut=st.replace($,"$&/")+"/"),dt(at,K,ut,"",function(Rt){return Rt})):at!=null&&(Q(at)&&(at=X(at,ut+(at.key==null||C&&C.key===at.key?"":(""+at.key).replace($,"$&/")+"/")+st)),K.push(at)),1;st=0;var ct=k===""?".":k+":";if(I(C))for(var yt=0;yt<C.length;yt++)k=C[yt],pt=ct+J(k,yt),st+=dt(k,K,ut,pt,at);else if(yt=b(C),typeof yt=="function")for(C=yt.call(C),yt=0;!(k=C.next()).done;)k=k.value,pt=ct+J(k,yt++),st+=dt(k,K,ut,pt,at);else if(pt==="object"){if(typeof C.then=="function")return dt(tt(C),K,ut,k,at);throw K=String(C),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return st}function F(C,K,ut){if(C==null)return C;var k=[],at=0;return dt(C,k,"","",function(pt){return K.call(ut,pt,at++)}),k}function G(C){if(C._status===-1){var K=C._result;K=K(),K.then(function(ut){(C._status===0||C._status===-1)&&(C._status=1,C._result=ut)},function(ut){(C._status===0||C._status===-1)&&(C._status=2,C._result=ut)}),C._status===-1&&(C._status=0,C._result=K)}if(C._status===1)return C._result.default;throw C._result}var bt=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function Et(){}return qt.Children={map:F,forEach:function(C,K,ut){F(C,function(){K.apply(this,arguments)},ut)},count:function(C){var K=0;return F(C,function(){K++}),K},toArray:function(C){return F(C,function(K){return K})||[]},only:function(C){if(!Q(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},qt.Component=_,qt.Fragment=e,qt.Profiler=r,qt.PureComponent=O,qt.StrictMode=n,qt.Suspense=h,qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,qt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return z.H.useMemoCache(C)}},qt.cache=function(C){return function(){return C.apply(null,arguments)}},qt.cloneElement=function(C,K,ut){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var k=S({},C.props),at=C.key,pt=void 0;if(K!=null)for(st in K.ref!==void 0&&(pt=void 0),K.key!==void 0&&(at=""+K.key),K)!L.call(K,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&K.ref===void 0||(k[st]=K[st]);var st=arguments.length-2;if(st===1)k.children=ut;else if(1<st){for(var ct=Array(st),yt=0;yt<st;yt++)ct[yt]=arguments[yt+2];k.children=ct}return B(C.type,at,void 0,void 0,pt,k)},qt.createContext=function(C){return C={$$typeof:o,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:l,_context:C},C},qt.createElement=function(C,K,ut){var k,at={},pt=null;if(K!=null)for(k in K.key!==void 0&&(pt=""+K.key),K)L.call(K,k)&&k!=="key"&&k!=="__self"&&k!=="__source"&&(at[k]=K[k]);var st=arguments.length-2;if(st===1)at.children=ut;else if(1<st){for(var ct=Array(st),yt=0;yt<st;yt++)ct[yt]=arguments[yt+2];at.children=ct}if(C&&C.defaultProps)for(k in st=C.defaultProps,st)at[k]===void 0&&(at[k]=st[k]);return B(C,pt,void 0,void 0,null,at)},qt.createRef=function(){return{current:null}},qt.forwardRef=function(C){return{$$typeof:c,render:C}},qt.isValidElement=Q,qt.lazy=function(C){return{$$typeof:g,_payload:{_status:-1,_result:C},_init:G}},qt.memo=function(C,K){return{$$typeof:p,type:C,compare:K===void 0?null:K}},qt.startTransition=function(C){var K=z.T,ut={};z.T=ut;try{var k=C(),at=z.S;at!==null&&at(ut,k),typeof k=="object"&&k!==null&&typeof k.then=="function"&&k.then(Et,bt)}catch(pt){bt(pt)}finally{z.T=K}},qt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},qt.use=function(C){return z.H.use(C)},qt.useActionState=function(C,K,ut){return z.H.useActionState(C,K,ut)},qt.useCallback=function(C,K){return z.H.useCallback(C,K)},qt.useContext=function(C){return z.H.useContext(C)},qt.useDebugValue=function(){},qt.useDeferredValue=function(C,K){return z.H.useDeferredValue(C,K)},qt.useEffect=function(C,K,ut){var k=z.H;if(typeof ut=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return k.useEffect(C,K)},qt.useId=function(){return z.H.useId()},qt.useImperativeHandle=function(C,K,ut){return z.H.useImperativeHandle(C,K,ut)},qt.useInsertionEffect=function(C,K){return z.H.useInsertionEffect(C,K)},qt.useLayoutEffect=function(C,K){return z.H.useLayoutEffect(C,K)},qt.useMemo=function(C,K){return z.H.useMemo(C,K)},qt.useOptimistic=function(C,K){return z.H.useOptimistic(C,K)},qt.useReducer=function(C,K,ut){return z.H.useReducer(C,K,ut)},qt.useRef=function(C){return z.H.useRef(C)},qt.useState=function(C){return z.H.useState(C)},qt.useSyncExternalStore=function(C,K,ut){return z.H.useSyncExternalStore(C,K,ut)},qt.useTransition=function(){return z.H.useTransition()},qt.version="19.1.0",qt}var IC;function nx(){return IC||(IC=1,yA.exports=lL()),yA.exports}var et=nx();const Lb=Cg(et),oL=sL({__proto__:null,default:Lb},[et]);var bA={exports:{}},pf={},vA={exports:{}},AA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jC;function uL(){return jC||(jC=1,function(i){function t(F,G){var bt=F.length;F.push(G);t:for(;0<bt;){var Et=bt-1>>>1,C=F[Et];if(0<r(C,G))F[Et]=G,F[bt]=C,bt=Et;else break t}}function e(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var G=F[0],bt=F.pop();if(bt!==G){F[0]=bt;t:for(var Et=0,C=F.length,K=C>>>1;Et<K;){var ut=2*(Et+1)-1,k=F[ut],at=ut+1,pt=F[at];if(0>r(k,bt))at<C&&0>r(pt,k)?(F[Et]=pt,F[at]=bt,Et=at):(F[Et]=k,F[ut]=bt,Et=ut);else if(at<C&&0>r(pt,bt))F[Et]=pt,F[at]=bt,Et=at;else break t}}return G}function r(F,G){var bt=F.sortIndex-G.sortIndex;return bt!==0?bt:F.id-G.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var h=[],p=[],g=1,y=null,b=3,v=!1,S=!1,w=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(F){for(var G=e(p);G!==null;){if(G.callback===null)n(p);else if(G.startTime<=F)n(p),G.sortIndex=G.expirationTime,t(h,G);else break;G=e(p)}}function z(F){if(w=!1,I(F),!S)if(e(h)!==null)S=!0,L||(L=!0,J());else{var G=e(p);G!==null&&dt(z,G.startTime-F)}}var L=!1,B=-1,X=5,Q=-1;function rt(){return _?!0:!(i.unstable_now()-Q<X)}function $(){if(_=!1,L){var F=i.unstable_now();Q=F;var G=!0;try{t:{S=!1,w&&(w=!1,O(B),B=-1),v=!0;var bt=b;try{e:{for(I(F),y=e(h);y!==null&&!(y.expirationTime>F&&rt());){var Et=y.callback;if(typeof Et=="function"){y.callback=null,b=y.priorityLevel;var C=Et(y.expirationTime<=F);if(F=i.unstable_now(),typeof C=="function"){y.callback=C,I(F),G=!0;break e}y===e(h)&&n(h),I(F)}else n(h);y=e(h)}if(y!==null)G=!0;else{var K=e(p);K!==null&&dt(z,K.startTime-F),G=!1}}break t}finally{y=null,b=bt,v=!1}G=void 0}}finally{G?J():L=!1}}}var J;if(typeof N=="function")J=function(){N($)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,tt=ht.port2;ht.port1.onmessage=$,J=function(){tt.postMessage(null)}}else J=function(){T($,0)};function dt(F,G){B=T(function(){F(i.unstable_now())},G)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(F){F.callback=null},i.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<F?Math.floor(1e3/F):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(F){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var bt=b;b=G;try{return F()}finally{b=bt}},i.unstable_requestPaint=function(){_=!0},i.unstable_runWithPriority=function(F,G){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var bt=b;b=F;try{return G()}finally{b=bt}},i.unstable_scheduleCallback=function(F,G,bt){var Et=i.unstable_now();switch(typeof bt=="object"&&bt!==null?(bt=bt.delay,bt=typeof bt=="number"&&0<bt?Et+bt:Et):bt=Et,F){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=bt+C,F={id:g++,callback:G,priorityLevel:F,startTime:bt,expirationTime:C,sortIndex:-1},bt>Et?(F.sortIndex=bt,t(p,F),e(h)===null&&F===e(p)&&(w?(O(B),B=-1):w=!0,dt(z,bt-Et))):(F.sortIndex=C,t(h,F),S||v||(S=!0,L||(L=!0,J()))),F},i.unstable_shouldYield=rt,i.unstable_wrapCallback=function(F){var G=b;return function(){var bt=b;b=G;try{return F.apply(this,arguments)}finally{b=bt}}}}(AA)),AA}var FC;function cL(){return FC||(FC=1,vA.exports=uL()),vA.exports}var wA={exports:{}},Yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BC;function hL(){if(BC)return Yn;BC=1;var i=nx();function t(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(h,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:h,containerInfo:p,implementation:g}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Yn.createPortal=function(h,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(h,p,null,g)},Yn.flushSync=function(h){var p=o.T,g=n.p;try{if(o.T=null,n.p=2,h)return h()}finally{o.T=p,n.p=g,n.d.f()}},Yn.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(h,p))},Yn.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},Yn.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var g=p.as,y=c(g,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,v=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?n.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:v}):g==="script"&&n.d.X(h,{crossOrigin:y,integrity:b,fetchPriority:v,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Yn.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=c(p.as,p.crossOrigin);n.d.M(h,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(h)},Yn.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=c(g,p.crossOrigin);n.d.L(h,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Yn.preloadModule=function(h,p){if(typeof h=="string")if(p){var g=c(p.as,p.crossOrigin);n.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(h)},Yn.requestFormReset=function(h){n.d.r(h)},Yn.unstable_batchedUpdates=function(h,p){return h(p)},Yn.useFormState=function(h,p,g){return o.H.useFormState(h,p,g)},Yn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Yn.version="19.1.0",Yn}var HC;function dL(){if(HC)return wA.exports;HC=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),wA.exports=hL(),wA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UC;function fL(){if(UC)return pf;UC=1;var i=cL(),t=nx(),e=dL();function n(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function o(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(l(s)!==s)throw Error(n(188))}function h(s){var a=s.alternate;if(!a){if(a=l(s),a===null)throw Error(n(188));return a!==s?null:s}for(var u=s,d=a;;){var m=u.return;if(m===null)break;var A=m.alternate;if(A===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===A.child){for(A=m.child;A;){if(A===u)return c(m),s;if(A===d)return c(m),a;A=A.sibling}throw Error(n(188))}if(u.return!==d.return)u=m,d=A;else{for(var E=!1,M=m.child;M;){if(M===u){E=!0,u=m,d=A;break}if(M===d){E=!0,d=m,u=A;break}M=M.sibling}if(!E){for(M=A.child;M;){if(M===u){E=!0,u=A,d=m;break}if(M===d){E=!0,d=A,u=m;break}M=M.sibling}if(!E)throw Error(n(189))}}if(u.alternate!==d)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),rt=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function J(s){return s===null||typeof s!="object"?null:(s=$&&s[$]||s["@@iterator"],typeof s=="function"?s:null)}var ht=Symbol.for("react.client.reference");function tt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ht?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case z:return"Suspense";case L:return"SuspenseList";case Q:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case v:return"Portal";case N:return(s.displayName||"Context")+".Provider";case O:return(s._context.displayName||"Context")+".Consumer";case I:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case B:return a=s.displayName||null,a!==null?a:tt(s.type)||"Memo";case X:a=s._payload,s=s._init;try{return tt(s(a))}catch{}}return null}var dt=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bt={pending:!1,data:null,method:null,action:null},Et=[],C=-1;function K(s){return{current:s}}function ut(s){0>C||(s.current=Et[C],Et[C]=null,C--)}function k(s,a){C++,Et[C]=s.current,s.current=a}var at=K(null),pt=K(null),st=K(null),ct=K(null);function yt(s,a){switch(k(st,a),k(pt,s),k(at,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?lC(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=lC(a),s=oC(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ut(at),k(at,s)}function Rt(){ut(at),ut(pt),ut(st)}function Ut(s){s.memoizedState!==null&&k(ct,s);var a=at.current,u=oC(a,s.type);a!==u&&(k(pt,s),k(at,u))}function ge(s){pt.current===s&&(ut(at),ut(pt)),ct.current===s&&(ut(ct),of._currentValue=bt)}var me=Object.prototype.hasOwnProperty,te=i.unstable_scheduleCallback,Yt=i.unstable_cancelCallback,Un=i.unstable_shouldYield,Be=i.unstable_requestPaint,He=i.unstable_now,Ye=i.unstable_getCurrentPriorityLevel,Ds=i.unstable_ImmediatePriority,Nr=i.unstable_UserBlockingPriority,pi=i.unstable_NormalPriority,Ia=i.unstable_LowPriority,Or=i.unstable_IdlePriority,fd=i.log,pd=i.unstable_setDisableYieldValue,nt=null,ft=null;function Dt(s){if(typeof fd=="function"&&pd(s),ft&&typeof ft.setStrictMode=="function")try{ft.setStrictMode(nt,s)}catch{}}var kt=Math.clz32?Math.clz32:ks,re=Math.log,qn=Math.LN2;function ks(s){return s>>>=0,s===0?32:31-(re(s)/qn|0)|0}var un=256,Ni=4194304;function ei(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Xe(s,a,u){var d=s.pendingLanes;if(d===0)return 0;var m=0,A=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var M=d&134217727;return M!==0?(d=M&~A,d!==0?m=ei(d):(E&=M,E!==0?m=ei(E):u||(u=M&~s,u!==0&&(m=ei(u))))):(M=d&~A,M!==0?m=ei(M):E!==0?m=ei(E):u||(u=d&~s,u!==0&&(m=ei(u)))),m===0?0:a!==0&&a!==m&&(a&A)===0&&(A=m&-m,u=a&-a,A>=u||A===32&&(u&4194048)!==0)?a:m}function ni(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function ii(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ug(){var s=un;return un<<=1,(un&4194048)===0&&(un=256),s}function gd(){var s=Ni;return Ni<<=1,(Ni&62914560)===0&&(Ni=4194304),s}function md(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function ja(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Vn(s,a,u,d,m,A){var E=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var M=s.entanglements,j=s.expirationTimes,V=s.hiddenUpdates;for(u=E&~u;0<u;){var it=31-kt(u),ot=1<<it;M[it]=0,j[it]=-1;var Y=V[it];if(Y!==null)for(V[it]=null,it=0;it<Y.length;it++){var W=Y[it];W!==null&&(W.lane&=-536870913)}u&=~ot}d!==0&&Rn(s,d,0),A!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=A&~(E&~a))}function Rn(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var d=31-kt(a);s.entangledLanes|=a,s.entanglements[d]=s.entanglements[d]|1073741824|u&4194090}function ro(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var d=31-kt(u),m=1<<d;m&a|s[d]&a&&(s[d]|=a),u&=~m}}function Ee(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function gi(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function qg(){var s=G.p;return s!==0?s:(s=window.event,s===void 0?32:TC(s.type))}function yd(s,a){var u=G.p;try{return G.p=s,a()}finally{G.p=u}}var Ms=Math.random().toString(36).slice(2),cn="__reactFiber$"+Ms,bn="__reactProps$"+Ms,Ns="__reactContainer$"+Ms,ao="__reactEvents$"+Ms,bd="__reactListeners$"+Ms,vd="__reactHandles$"+Ms,Vg="__reactResources$"+Ms,Lr="__reactMarker$"+Ms;function Wu(s){delete s[cn],delete s[bn],delete s[ao],delete s[bd],delete s[vd]}function Fa(s){var a=s[cn];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Ns]||u[cn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=dC(s);s!==null;){if(u=s[cn])return u;s=dC(s)}return a}s=u,u=s.parentNode}return null}function Ba(s){if(s=s[cn]||s[Ns]){var a=s.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return s}return null}function jt(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(n(33))}function he(s){var a=s[Vg];return a||(a=s[Vg]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Xt(s){s[Lr]=!0}var mi=new Set,yi={};function Os(s,a){Ha(s,a),Ha(s+"Capture",a)}function Ha(s,a){for(yi[s]=a,s=0;s<a.length;s++)mi.add(a[s])}var ov=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zx={},Jx={};function WN(s){return me.call(Jx,s)?!0:me.call(Zx,s)?!1:ov.test(s)?Jx[s]=!0:(Zx[s]=!0,!1)}function Gg(s,a,u){if(WN(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function Yg(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function Pr(s,a,u,d){if(d===null)s.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+d)}}var uv,t1;function Ku(s){if(uv===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);uv=a&&a[1]||"",t1=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+uv+s+t1}var cv=!1;function hv(s,a){if(!s||cv)return"";cv=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var ot=function(){throw Error()};if(Object.defineProperty(ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ot,[])}catch(W){var Y=W}Reflect.construct(s,[],ot)}else{try{ot.call()}catch(W){Y=W}s.call(ot.prototype)}}else{try{throw Error()}catch(W){Y=W}(ot=s())&&typeof ot.catch=="function"&&ot.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=d.DetermineComponentFrameRoot(),E=A[0],M=A[1];if(E&&M){var j=E.split(`
`),V=M.split(`
`);for(m=d=0;d<j.length&&!j[d].includes("DetermineComponentFrameRoot");)d++;for(;m<V.length&&!V[m].includes("DetermineComponentFrameRoot");)m++;if(d===j.length||m===V.length)for(d=j.length-1,m=V.length-1;1<=d&&0<=m&&j[d]!==V[m];)m--;for(;1<=d&&0<=m;d--,m--)if(j[d]!==V[m]){if(d!==1||m!==1)do if(d--,m--,0>m||j[d]!==V[m]){var it=`
`+j[d].replace(" at new "," at ");return s.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",s.displayName)),it}while(1<=d&&0<=m);break}}}finally{cv=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Ku(u):""}function KN(s){switch(s.tag){case 26:case 27:case 5:return Ku(s.type);case 16:return Ku("Lazy");case 13:return Ku("Suspense");case 19:return Ku("SuspenseList");case 0:case 15:return hv(s.type,!1);case 11:return hv(s.type.render,!1);case 1:return hv(s.type,!0);case 31:return Ku("Activity");default:return""}}function e1(s){try{var a="";do a+=KN(s),s=s.return;while(s);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function os(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function n1(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function QN(s){var a=n1(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),d=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,A=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(E){d=""+E,A.call(this,E)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Xg(s){s._valueTracker||(s._valueTracker=QN(s))}function i1(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),d="";return s&&(d=n1(s)?s.checked?"true":"false":s.value),s=d,s!==u?(a.setValue(s),!0):!1}function $g(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var ZN=/[\n"\\]/g;function us(s){return s.replace(ZN,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function dv(s,a,u,d,m,A,E,M){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),a!=null?E==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+os(a)):s.value!==""+os(a)&&(s.value=""+os(a)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),a!=null?fv(s,E,os(a)):u!=null?fv(s,E,os(u)):d!=null&&s.removeAttribute("value"),m==null&&A!=null&&(s.defaultChecked=!!A),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+os(M):s.removeAttribute("name")}function s1(s,a,u,d,m,A,E,M){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.type=A),a!=null||u!=null){if(!(A!=="submit"&&A!=="reset"||a!=null))return;u=u!=null?""+os(u):"",a=a!=null?""+os(a):u,M||a===s.value||(s.value=a),s.defaultValue=a}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=M?s.checked:!!d,s.defaultChecked=!!d,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E)}function fv(s,a,u){a==="number"&&$g(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function Qu(s,a,u,d){if(s=s.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<s.length;u++)m=a.hasOwnProperty("$"+s[u].value),s[u].selected!==m&&(s[u].selected=m),m&&d&&(s[u].defaultSelected=!0)}else{for(u=""+os(u),a=null,m=0;m<s.length;m++){if(s[m].value===u){s[m].selected=!0,d&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function r1(s,a,u){if(a!=null&&(a=""+os(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+os(u):""}function a1(s,a,u,d){if(a==null){if(d!=null){if(u!=null)throw Error(n(92));if(dt(d)){if(1<d.length)throw Error(n(93));d=d[0]}u=d}u==null&&(u=""),a=u}u=os(a),s.defaultValue=u,d=s.textContent,d===u&&d!==""&&d!==null&&(s.value=d)}function Zu(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var JN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function l1(s,a,u){var d=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":d?s.setProperty(a,u):typeof u!="number"||u===0||JN.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function o1(s,a,u){if(a!=null&&typeof a!="object")throw Error(n(62));if(s=s.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var m in a)d=a[m],a.hasOwnProperty(m)&&u[m]!==d&&l1(s,m,d)}else for(var A in a)a.hasOwnProperty(A)&&l1(s,A,a[A])}function pv(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tO=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eO=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wg(s){return eO.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var gv=null;function mv(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ju=null,tc=null;function u1(s){var a=Ba(s);if(a&&(s=a.stateNode)){var u=s[bn]||null;t:switch(s=a.stateNode,a.type){case"input":if(dv(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+us(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var d=u[a];if(d!==s&&d.form===s.form){var m=d[bn]||null;if(!m)throw Error(n(90));dv(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(a=0;a<u.length;a++)d=u[a],d.form===s.form&&i1(d)}break t;case"textarea":r1(s,u.value,u.defaultValue);break t;case"select":a=u.value,a!=null&&Qu(s,!!u.multiple,a,!1)}}}var yv=!1;function c1(s,a,u){if(yv)return s(a,u);yv=!0;try{var d=s(a);return d}finally{if(yv=!1,(Ju!==null||tc!==null)&&(Lm(),Ju&&(a=Ju,s=tc,tc=Ju=null,u1(a),s)))for(a=0;a<s.length;a++)u1(s[a])}}function Ad(s,a){var u=s.stateNode;if(u===null)return null;var d=u[bn]||null;if(d===null)return null;u=d[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break t;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(n(231,a,typeof u));return u}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bv=!1;if(zr)try{var wd={};Object.defineProperty(wd,"passive",{get:function(){bv=!0}}),window.addEventListener("test",wd,wd),window.removeEventListener("test",wd,wd)}catch{bv=!1}var Ua=null,vv=null,Kg=null;function h1(){if(Kg)return Kg;var s,a=vv,u=a.length,d,m="value"in Ua?Ua.value:Ua.textContent,A=m.length;for(s=0;s<u&&a[s]===m[s];s++);var E=u-s;for(d=1;d<=E&&a[u-d]===m[A-d];d++);return Kg=m.slice(s,1<d?1-d:void 0)}function Qg(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Zg(){return!0}function d1(){return!1}function bi(s){function a(u,d,m,A,E){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=A,this.target=E,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(A):A[M]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Zg:d1,this.isPropagationStopped=d1,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Zg)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Zg)},persist:function(){},isPersistent:Zg}),a}var lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jg=bi(lo),Sd=g({},lo,{view:0,detail:0}),nO=bi(Sd),Av,wv,xd,tm=g({},Sd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xv,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==xd&&(xd&&s.type==="mousemove"?(Av=s.screenX-xd.screenX,wv=s.screenY-xd.screenY):wv=Av=0,xd=s),Av)},movementY:function(s){return"movementY"in s?s.movementY:wv}}),f1=bi(tm),iO=g({},tm,{dataTransfer:0}),sO=bi(iO),rO=g({},Sd,{relatedTarget:0}),Sv=bi(rO),aO=g({},lo,{animationName:0,elapsedTime:0,pseudoElement:0}),lO=bi(aO),oO=g({},lo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),uO=bi(oO),cO=g({},lo,{data:0}),p1=bi(cO),hO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pO(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=fO[s])?!!a[s]:!1}function xv(){return pO}var gO=g({},Sd,{key:function(s){if(s.key){var a=hO[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Qg(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?dO[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xv,charCode:function(s){return s.type==="keypress"?Qg(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Qg(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),mO=bi(gO),yO=g({},tm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g1=bi(yO),bO=g({},Sd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xv}),vO=bi(bO),AO=g({},lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),wO=bi(AO),SO=g({},tm,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),xO=bi(SO),EO=g({},lo,{newState:0,oldState:0}),_O=bi(EO),CO=[9,13,27,32],Ev=zr&&"CompositionEvent"in window,Ed=null;zr&&"documentMode"in document&&(Ed=document.documentMode);var TO=zr&&"TextEvent"in window&&!Ed,m1=zr&&(!Ev||Ed&&8<Ed&&11>=Ed),y1=" ",b1=!1;function v1(s,a){switch(s){case"keyup":return CO.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A1(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ec=!1;function RO(s,a){switch(s){case"compositionend":return A1(a);case"keypress":return a.which!==32?null:(b1=!0,y1);case"textInput":return s=a.data,s===y1&&b1?null:s;default:return null}}function DO(s,a){if(ec)return s==="compositionend"||!Ev&&v1(s,a)?(s=h1(),Kg=vv=Ua=null,ec=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return m1&&a.locale!=="ko"?null:a.data;default:return null}}var kO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w1(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!kO[s.type]:a==="textarea"}function S1(s,a,u,d){Ju?tc?tc.push(d):tc=[d]:Ju=d,a=Bm(a,"onChange"),0<a.length&&(u=new Jg("onChange","change",null,u,d),s.push({event:u,listeners:a}))}var _d=null,Cd=null;function MO(s){nC(s,0)}function em(s){var a=jt(s);if(i1(a))return s}function x1(s,a){if(s==="change")return a}var E1=!1;if(zr){var _v;if(zr){var Cv="oninput"in document;if(!Cv){var _1=document.createElement("div");_1.setAttribute("oninput","return;"),Cv=typeof _1.oninput=="function"}_v=Cv}else _v=!1;E1=_v&&(!document.documentMode||9<document.documentMode)}function C1(){_d&&(_d.detachEvent("onpropertychange",T1),Cd=_d=null)}function T1(s){if(s.propertyName==="value"&&em(Cd)){var a=[];S1(a,Cd,s,mv(s)),c1(MO,a)}}function NO(s,a,u){s==="focusin"?(C1(),_d=a,Cd=u,_d.attachEvent("onpropertychange",T1)):s==="focusout"&&C1()}function OO(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return em(Cd)}function LO(s,a){if(s==="click")return em(a)}function PO(s,a){if(s==="input"||s==="change")return em(a)}function zO(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Oi=typeof Object.is=="function"?Object.is:zO;function Td(s,a){if(Oi(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),d=Object.keys(a);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!me.call(a,m)||!Oi(s[m],a[m]))return!1}return!0}function R1(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function D1(s,a){var u=R1(s);s=0;for(var d;u;){if(u.nodeType===3){if(d=s+u.textContent.length,s<=a&&d>=a)return{node:u,offset:a-s};s=d}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=R1(u)}}function k1(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?k1(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function M1(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=$g(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=$g(s.document)}return a}function Tv(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var IO=zr&&"documentMode"in document&&11>=document.documentMode,nc=null,Rv=null,Rd=null,Dv=!1;function N1(s,a,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Dv||nc==null||nc!==$g(d)||(d=nc,"selectionStart"in d&&Tv(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Rd&&Td(Rd,d)||(Rd=d,d=Bm(Rv,"onSelect"),0<d.length&&(a=new Jg("onSelect","select",null,a,u),s.push({event:a,listeners:d}),a.target=nc)))}function oo(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var ic={animationend:oo("Animation","AnimationEnd"),animationiteration:oo("Animation","AnimationIteration"),animationstart:oo("Animation","AnimationStart"),transitionrun:oo("Transition","TransitionRun"),transitionstart:oo("Transition","TransitionStart"),transitioncancel:oo("Transition","TransitionCancel"),transitionend:oo("Transition","TransitionEnd")},kv={},O1={};zr&&(O1=document.createElement("div").style,"AnimationEvent"in window||(delete ic.animationend.animation,delete ic.animationiteration.animation,delete ic.animationstart.animation),"TransitionEvent"in window||delete ic.transitionend.transition);function uo(s){if(kv[s])return kv[s];if(!ic[s])return s;var a=ic[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in O1)return kv[s]=a[u];return s}var L1=uo("animationend"),P1=uo("animationiteration"),z1=uo("animationstart"),jO=uo("transitionrun"),FO=uo("transitionstart"),BO=uo("transitioncancel"),I1=uo("transitionend"),j1=new Map,Mv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mv.push("scrollEnd");function Ls(s,a){j1.set(s,a),Os(a,[s])}var F1=new WeakMap;function cs(s,a){if(typeof s=="object"&&s!==null){var u=F1.get(s);return u!==void 0?u:(a={value:s,source:a,stack:e1(a)},F1.set(s,a),a)}return{value:s,source:a,stack:e1(a)}}var hs=[],sc=0,Nv=0;function nm(){for(var s=sc,a=Nv=sc=0;a<s;){var u=hs[a];hs[a++]=null;var d=hs[a];hs[a++]=null;var m=hs[a];hs[a++]=null;var A=hs[a];if(hs[a++]=null,d!==null&&m!==null){var E=d.pending;E===null?m.next=m:(m.next=E.next,E.next=m),d.pending=m}A!==0&&B1(u,m,A)}}function im(s,a,u,d){hs[sc++]=s,hs[sc++]=a,hs[sc++]=u,hs[sc++]=d,Nv|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function Ov(s,a,u,d){return im(s,a,u,d),sm(s)}function rc(s,a){return im(s,null,null,a),sm(s)}function B1(s,a,u){s.lanes|=u;var d=s.alternate;d!==null&&(d.lanes|=u);for(var m=!1,A=s.return;A!==null;)A.childLanes|=u,d=A.alternate,d!==null&&(d.childLanes|=u),A.tag===22&&(s=A.stateNode,s===null||s._visibility&1||(m=!0)),s=A,A=A.return;return s.tag===3?(A=s.stateNode,m&&a!==null&&(m=31-kt(u),s=A.hiddenUpdates,d=s[m],d===null?s[m]=[a]:d.push(a),a.lane=u|536870912),A):null}function sm(s){if(50<Jd)throw Jd=0,F0=null,Error(n(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var ac={};function HO(s,a,u,d){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Li(s,a,u,d){return new HO(s,a,u,d)}function Lv(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ir(s,a){var u=s.alternate;return u===null?(u=Li(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function H1(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function rm(s,a,u,d,m,A){var E=0;if(d=s,typeof s=="function")Lv(s)&&(E=1);else if(typeof s=="string")E=q2(s,u,at.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case Q:return s=Li(31,u,a,m),s.elementType=Q,s.lanes=A,s;case S:return co(u.children,m,A,a);case w:E=8,m|=24;break;case _:return s=Li(12,u,a,m|2),s.elementType=_,s.lanes=A,s;case z:return s=Li(13,u,a,m),s.elementType=z,s.lanes=A,s;case L:return s=Li(19,u,a,m),s.elementType=L,s.lanes=A,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case T:case N:E=10;break t;case O:E=9;break t;case I:E=11;break t;case B:E=14;break t;case X:E=16,d=null;break t}E=29,u=Error(n(130,s===null?"null":typeof s,"")),d=null}return a=Li(E,u,a,m),a.elementType=s,a.type=d,a.lanes=A,a}function co(s,a,u,d){return s=Li(7,s,d,a),s.lanes=u,s}function Pv(s,a,u){return s=Li(6,s,null,a),s.lanes=u,s}function zv(s,a,u){return a=Li(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var lc=[],oc=0,am=null,lm=0,ds=[],fs=0,ho=null,jr=1,Fr="";function fo(s,a){lc[oc++]=lm,lc[oc++]=am,am=s,lm=a}function U1(s,a,u){ds[fs++]=jr,ds[fs++]=Fr,ds[fs++]=ho,ho=s;var d=jr;s=Fr;var m=32-kt(d)-1;d&=~(1<<m),u+=1;var A=32-kt(a)+m;if(30<A){var E=m-m%5;A=(d&(1<<E)-1).toString(32),d>>=E,m-=E,jr=1<<32-kt(a)+m|u<<m|d,Fr=A+s}else jr=1<<A|u<<m|d,Fr=s}function Iv(s){s.return!==null&&(fo(s,1),U1(s,1,0))}function jv(s){for(;s===am;)am=lc[--oc],lc[oc]=null,lm=lc[--oc],lc[oc]=null;for(;s===ho;)ho=ds[--fs],ds[fs]=null,Fr=ds[--fs],ds[fs]=null,jr=ds[--fs],ds[fs]=null}var si=null,Ue=null,le=!1,po=null,er=!1,Fv=Error(n(519));function go(s){var a=Error(n(418,""));throw Md(cs(a,s)),Fv}function q1(s){var a=s.stateNode,u=s.type,d=s.memoizedProps;switch(a[cn]=s,a[bn]=d,u){case"dialog":Zt("cancel",a),Zt("close",a);break;case"iframe":case"object":case"embed":Zt("load",a);break;case"video":case"audio":for(u=0;u<ef.length;u++)Zt(ef[u],a);break;case"source":Zt("error",a);break;case"img":case"image":case"link":Zt("error",a),Zt("load",a);break;case"details":Zt("toggle",a);break;case"input":Zt("invalid",a),s1(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Xg(a);break;case"select":Zt("invalid",a);break;case"textarea":Zt("invalid",a),a1(a,d.value,d.defaultValue,d.children),Xg(a)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||d.suppressHydrationWarning===!0||aC(a.textContent,u)?(d.popover!=null&&(Zt("beforetoggle",a),Zt("toggle",a)),d.onScroll!=null&&Zt("scroll",a),d.onScrollEnd!=null&&Zt("scrollend",a),d.onClick!=null&&(a.onclick=Hm),a=!0):a=!1,a||go(s)}function V1(s){for(si=s.return;si;)switch(si.tag){case 5:case 13:er=!1;return;case 27:case 3:er=!0;return;default:si=si.return}}function Dd(s){if(s!==si)return!1;if(!le)return V1(s),le=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||eA(s.type,s.memoizedProps)),u=!u),u&&Ue&&go(s),V1(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));t:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(a===0){Ue=zs(s.nextSibling);break t}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;s=s.nextSibling}Ue=null}}else a===27?(a=Ue,sl(s.type)?(s=rA,rA=null,Ue=s):Ue=a):Ue=si?zs(s.stateNode.nextSibling):null;return!0}function kd(){Ue=si=null,le=!1}function G1(){var s=po;return s!==null&&(wi===null?wi=s:wi.push.apply(wi,s),po=null),s}function Md(s){po===null?po=[s]:po.push(s)}var Bv=K(null),mo=null,Br=null;function qa(s,a,u){k(Bv,a._currentValue),a._currentValue=u}function Hr(s){s._currentValue=Bv.current,ut(Bv)}function Hv(s,a,u){for(;s!==null;){var d=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),s===u)break;s=s.return}}function Uv(s,a,u,d){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var A=m.dependencies;if(A!==null){var E=m.child;A=A.firstContext;t:for(;A!==null;){var M=A;A=m;for(var j=0;j<a.length;j++)if(M.context===a[j]){A.lanes|=u,M=A.alternate,M!==null&&(M.lanes|=u),Hv(A.return,u,s),d||(E=null);break t}A=M.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(n(341));E.lanes|=u,A=E.alternate,A!==null&&(A.lanes|=u),Hv(E,u,s),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===s){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function Nd(s,a,u,d){s=null;for(var m=a,A=!1;m!==null;){if(!A){if((m.flags&524288)!==0)A=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var M=m.type;Oi(m.pendingProps.value,E.value)||(s!==null?s.push(M):s=[M])}}else if(m===ct.current){if(E=m.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(of):s=[of])}m=m.return}s!==null&&Uv(a,s,u,d),a.flags|=262144}function om(s){for(s=s.firstContext;s!==null;){if(!Oi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function yo(s){mo=s,Br=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Gn(s){return Y1(mo,s)}function um(s,a){return mo===null&&yo(s),Y1(s,a)}function Y1(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Br===null){if(s===null)throw Error(n(308));Br=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Br=Br.next=a;return u}var UO=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,d){s.push(d)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},qO=i.unstable_scheduleCallback,VO=i.unstable_NormalPriority,hn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qv(){return{controller:new UO,data:new Map,refCount:0}}function Od(s){s.refCount--,s.refCount===0&&qO(VO,function(){s.controller.abort()})}var Ld=null,Vv=0,uc=0,cc=null;function GO(s,a){if(Ld===null){var u=Ld=[];Vv=0,uc=Y0(),cc={status:"pending",value:void 0,then:function(d){u.push(d)}}}return Vv++,a.then(X1,X1),a}function X1(){if(--Vv===0&&Ld!==null){cc!==null&&(cc.status="fulfilled");var s=Ld;Ld=null,uc=0,cc=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function YO(s,a){var u=[],d={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return s.then(function(){d.status="fulfilled",d.value=a;for(var m=0;m<u.length;m++)(0,u[m])(a)},function(m){for(d.status="rejected",d.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),d}var $1=F.S;F.S=function(s,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&GO(s,a),$1!==null&&$1(s,a)};var bo=K(null);function Gv(){var s=bo.current;return s!==null?s:Ce.pooledCache}function cm(s,a){a===null?k(bo,bo.current):k(bo,a.pool)}function W1(){var s=Gv();return s===null?null:{parent:hn._currentValue,pool:s}}var Pd=Error(n(460)),K1=Error(n(474)),hm=Error(n(542)),Yv={then:function(){}};function Q1(s){return s=s.status,s==="fulfilled"||s==="rejected"}function dm(){}function Z1(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(dm,dm),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,tE(s),s;default:if(typeof a.status=="string")a.then(dm,dm);else{if(s=Ce,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=a,s.status="pending",s.then(function(d){if(a.status==="pending"){var m=a;m.status="fulfilled",m.value=d}},function(d){if(a.status==="pending"){var m=a;m.status="rejected",m.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,tE(s),s}throw zd=a,Pd}}var zd=null;function J1(){if(zd===null)throw Error(n(459));var s=zd;return zd=null,s}function tE(s){if(s===Pd||s===hm)throw Error(n(483))}var Va=!1;function Xv(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $v(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ga(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ya(s,a,u){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(de&2)!==0){var m=d.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),d.pending=a,a=sm(s),B1(s,null,u),a}return im(s,d,a,u),sm(s)}function Id(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var d=a.lanes;d&=s.pendingLanes,u|=d,a.lanes=u,ro(s,u)}}function Wv(s,a){var u=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,A=null;if(u=u.firstBaseUpdate,u!==null){do{var E={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};A===null?m=A=E:A=A.next=E,u=u.next}while(u!==null);A===null?m=A=a:A=A.next=a}else m=A=a;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:A,shared:d.shared,callbacks:d.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var Kv=!1;function jd(){if(Kv){var s=cc;if(s!==null)throw s}}function Fd(s,a,u,d){Kv=!1;var m=s.updateQueue;Va=!1;var A=m.firstBaseUpdate,E=m.lastBaseUpdate,M=m.shared.pending;if(M!==null){m.shared.pending=null;var j=M,V=j.next;j.next=null,E===null?A=V:E.next=V,E=j;var it=s.alternate;it!==null&&(it=it.updateQueue,M=it.lastBaseUpdate,M!==E&&(M===null?it.firstBaseUpdate=V:M.next=V,it.lastBaseUpdate=j))}if(A!==null){var ot=m.baseState;E=0,it=V=j=null,M=A;do{var Y=M.lane&-536870913,W=Y!==M.lane;if(W?(ne&Y)===Y:(d&Y)===Y){Y!==0&&Y===uc&&(Kv=!0),it!==null&&(it=it.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var Lt=s,Mt=M;Y=a;var ve=u;switch(Mt.tag){case 1:if(Lt=Mt.payload,typeof Lt=="function"){ot=Lt.call(ve,ot,Y);break t}ot=Lt;break t;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Mt.payload,Y=typeof Lt=="function"?Lt.call(ve,ot,Y):Lt,Y==null)break t;ot=g({},ot,Y);break t;case 2:Va=!0}}Y=M.callback,Y!==null&&(s.flags|=64,W&&(s.flags|=8192),W=m.callbacks,W===null?m.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:M.tag,payload:M.payload,callback:M.callback,next:null},it===null?(V=it=W,j=ot):it=it.next=W,E|=Y;if(M=M.next,M===null){if(M=m.shared.pending,M===null)break;W=M,M=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);it===null&&(j=ot),m.baseState=j,m.firstBaseUpdate=V,m.lastBaseUpdate=it,A===null&&(m.shared.lanes=0),tl|=E,s.lanes=E,s.memoizedState=ot}}function eE(s,a){if(typeof s!="function")throw Error(n(191,s));s.call(a)}function nE(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)eE(u[s],a)}var hc=K(null),fm=K(0);function iE(s,a){s=$r,k(fm,s),k(hc,a),$r=s|a.baseLanes}function Qv(){k(fm,$r),k(hc,hc.current)}function Zv(){$r=fm.current,ut(hc),ut(fm)}var Xa=0,$t=null,ye=null,tn=null,pm=!1,dc=!1,vo=!1,gm=0,Bd=0,fc=null,XO=0;function $e(){throw Error(n(321))}function Jv(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Oi(s[u],a[u]))return!1;return!0}function t0(s,a,u,d,m,A){return Xa=A,$t=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,F.H=s===null||s.memoizedState===null?BE:HE,vo=!1,A=u(d,m),vo=!1,dc&&(A=rE(a,u,d,m)),sE(s),A}function sE(s){F.H=wm;var a=ye!==null&&ye.next!==null;if(Xa=0,tn=ye=$t=null,pm=!1,Bd=0,fc=null,a)throw Error(n(300));s===null||vn||(s=s.dependencies,s!==null&&om(s)&&(vn=!0))}function rE(s,a,u,d){$t=s;var m=0;do{if(dc&&(fc=null),Bd=0,dc=!1,25<=m)throw Error(n(301));if(m+=1,tn=ye=null,s.updateQueue!=null){var A=s.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}F.H=t2,A=a(u,d)}while(dc);return A}function $O(){var s=F.H,a=s.useState()[0];return a=typeof a.then=="function"?Hd(a):a,s=s.useState()[0],(ye!==null?ye.memoizedState:null)!==s&&($t.flags|=1024),a}function e0(){var s=gm!==0;return gm=0,s}function n0(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function i0(s){if(pm){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}pm=!1}Xa=0,tn=ye=$t=null,dc=!1,Bd=gm=0,fc=null}function vi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?$t.memoizedState=tn=s:tn=tn.next=s,tn}function en(){if(ye===null){var s=$t.alternate;s=s!==null?s.memoizedState:null}else s=ye.next;var a=tn===null?$t.memoizedState:tn.next;if(a!==null)tn=a,ye=s;else{if(s===null)throw $t.alternate===null?Error(n(467)):Error(n(310));ye=s,s={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},tn===null?$t.memoizedState=tn=s:tn=tn.next=s}return tn}function s0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hd(s){var a=Bd;return Bd+=1,fc===null&&(fc=[]),s=Z1(fc,s,a),a=$t,(tn===null?a.memoizedState:tn.next)===null&&(a=a.alternate,F.H=a===null||a.memoizedState===null?BE:HE),s}function mm(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Hd(s);if(s.$$typeof===N)return Gn(s)}throw Error(n(438,String(s)))}function r0(s){var a=null,u=$t.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var d=$t.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(m){return m.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=s0(),$t.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),d=0;d<s;d++)u[d]=rt;return a.index++,u}function Ur(s,a){return typeof a=="function"?a(s):a}function ym(s){var a=en();return a0(a,ye,s)}function a0(s,a,u){var d=s.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=u;var m=s.baseQueue,A=d.pending;if(A!==null){if(m!==null){var E=m.next;m.next=A.next,A.next=E}a.baseQueue=m=A,d.pending=null}if(A=s.baseState,m===null)s.memoizedState=A;else{a=m.next;var M=E=null,j=null,V=a,it=!1;do{var ot=V.lane&-536870913;if(ot!==V.lane?(ne&ot)===ot:(Xa&ot)===ot){var Y=V.revertLane;if(Y===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),ot===uc&&(it=!0);else if((Xa&Y)===Y){V=V.next,Y===uc&&(it=!0);continue}else ot={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},j===null?(M=j=ot,E=A):j=j.next=ot,$t.lanes|=Y,tl|=Y;ot=V.action,vo&&u(A,ot),A=V.hasEagerState?V.eagerState:u(A,ot)}else Y={lane:ot,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},j===null?(M=j=Y,E=A):j=j.next=Y,$t.lanes|=ot,tl|=ot;V=V.next}while(V!==null&&V!==a);if(j===null?E=A:j.next=M,!Oi(A,s.memoizedState)&&(vn=!0,it&&(u=cc,u!==null)))throw u;s.memoizedState=A,s.baseState=E,s.baseQueue=j,d.lastRenderedState=A}return m===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function l0(s){var a=en(),u=a.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var d=u.dispatch,m=u.pending,A=a.memoizedState;if(m!==null){u.pending=null;var E=m=m.next;do A=s(A,E.action),E=E.next;while(E!==m);Oi(A,a.memoizedState)||(vn=!0),a.memoizedState=A,a.baseQueue===null&&(a.baseState=A),u.lastRenderedState=A}return[A,d]}function aE(s,a,u){var d=$t,m=en(),A=le;if(A){if(u===void 0)throw Error(n(407));u=u()}else u=a();var E=!Oi((ye||m).memoizedState,u);E&&(m.memoizedState=u,vn=!0),m=m.queue;var M=uE.bind(null,d,m,s);if(Ud(2048,8,M,[s]),m.getSnapshot!==a||E||tn!==null&&tn.memoizedState.tag&1){if(d.flags|=2048,pc(9,bm(),oE.bind(null,d,m,u,a),null),Ce===null)throw Error(n(349));A||(Xa&124)!==0||lE(d,a,u)}return u}function lE(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=$t.updateQueue,a===null?(a=s0(),$t.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function oE(s,a,u,d){a.value=u,a.getSnapshot=d,cE(a)&&hE(s)}function uE(s,a,u){return u(function(){cE(a)&&hE(s)})}function cE(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Oi(s,u)}catch{return!0}}function hE(s){var a=rc(s,2);a!==null&&Fi(a,s,2)}function o0(s){var a=vi();if(typeof s=="function"){var u=s;if(s=u(),vo){Dt(!0);try{u()}finally{Dt(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:s},a}function dE(s,a,u,d){return s.baseState=u,a0(s,ye,typeof d=="function"?d:Ur)}function WO(s,a,u,d,m){if(Am(s))throw Error(n(485));if(s=a.action,s!==null){var A={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){A.listeners.push(E)}};F.T!==null?u(!0):A.isTransition=!1,d(A),u=a.pending,u===null?(A.next=a.pending=A,fE(a,A)):(A.next=u.next,a.pending=u.next=A)}}function fE(s,a){var u=a.action,d=a.payload,m=s.state;if(a.isTransition){var A=F.T,E={};F.T=E;try{var M=u(m,d),j=F.S;j!==null&&j(E,M),pE(s,a,M)}catch(V){u0(s,a,V)}finally{F.T=A}}else try{A=u(m,d),pE(s,a,A)}catch(V){u0(s,a,V)}}function pE(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){gE(s,a,d)},function(d){return u0(s,a,d)}):gE(s,a,u)}function gE(s,a,u){a.status="fulfilled",a.value=u,mE(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,fE(s,u)))}function u0(s,a,u){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=u,mE(a),a=a.next;while(a!==d)}s.action=null}function mE(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function yE(s,a){return a}function bE(s,a){if(le){var u=Ce.formState;if(u!==null){t:{var d=$t;if(le){if(Ue){e:{for(var m=Ue,A=er;m.nodeType!==8;){if(!A){m=null;break e}if(m=zs(m.nextSibling),m===null){m=null;break e}}A=m.data,m=A==="F!"||A==="F"?m:null}if(m){Ue=zs(m.nextSibling),d=m.data==="F!";break t}}go(d)}d=!1}d&&(a=u[0])}}return u=vi(),u.memoizedState=u.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yE,lastRenderedState:a},u.queue=d,u=IE.bind(null,$t,d),d.dispatch=u,d=o0(!1),A=p0.bind(null,$t,!1,d.queue),d=vi(),m={state:a,dispatch:null,action:s,pending:null},d.queue=m,u=WO.bind(null,$t,m,A,u),m.dispatch=u,d.memoizedState=s,[a,u,!1]}function vE(s){var a=en();return AE(a,ye,s)}function AE(s,a,u){if(a=a0(s,a,yE)[0],s=ym(Ur)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=Hd(a)}catch(E){throw E===Pd?hm:E}else d=a;a=en();var m=a.queue,A=m.dispatch;return u!==a.memoizedState&&($t.flags|=2048,pc(9,bm(),KO.bind(null,m,u),null)),[d,A,s]}function KO(s,a){s.action=a}function wE(s){var a=en(),u=ye;if(u!==null)return AE(a,u,s);en(),a=a.memoizedState,u=en();var d=u.queue.dispatch;return u.memoizedState=s,[a,d,!1]}function pc(s,a,u,d){return s={tag:s,create:u,deps:d,inst:a,next:null},a=$t.updateQueue,a===null&&(a=s0(),$t.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(d=u.next,u.next=s,s.next=d,a.lastEffect=s),s}function bm(){return{destroy:void 0,resource:void 0}}function SE(){return en().memoizedState}function vm(s,a,u,d){var m=vi();d=d===void 0?null:d,$t.flags|=s,m.memoizedState=pc(1|a,bm(),u,d)}function Ud(s,a,u,d){var m=en();d=d===void 0?null:d;var A=m.memoizedState.inst;ye!==null&&d!==null&&Jv(d,ye.memoizedState.deps)?m.memoizedState=pc(a,A,u,d):($t.flags|=s,m.memoizedState=pc(1|a,A,u,d))}function xE(s,a){vm(8390656,8,s,a)}function EE(s,a){Ud(2048,8,s,a)}function _E(s,a){return Ud(4,2,s,a)}function CE(s,a){return Ud(4,4,s,a)}function TE(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function RE(s,a,u){u=u!=null?u.concat([s]):null,Ud(4,4,TE.bind(null,a,s),u)}function c0(){}function DE(s,a){var u=en();a=a===void 0?null:a;var d=u.memoizedState;return a!==null&&Jv(a,d[1])?d[0]:(u.memoizedState=[s,a],s)}function kE(s,a){var u=en();a=a===void 0?null:a;var d=u.memoizedState;if(a!==null&&Jv(a,d[1]))return d[0];if(d=s(),vo){Dt(!0);try{s()}finally{Dt(!1)}}return u.memoizedState=[d,a],d}function h0(s,a,u){return u===void 0||(Xa&1073741824)!==0?s.memoizedState=a:(s.memoizedState=u,s=O_(),$t.lanes|=s,tl|=s,u)}function ME(s,a,u,d){return Oi(u,a)?u:hc.current!==null?(s=h0(s,u,d),Oi(s,a)||(vn=!0),s):(Xa&42)===0?(vn=!0,s.memoizedState=u):(s=O_(),$t.lanes|=s,tl|=s,a)}function NE(s,a,u,d,m){var A=G.p;G.p=A!==0&&8>A?A:8;var E=F.T,M={};F.T=M,p0(s,!1,a,u);try{var j=m(),V=F.S;if(V!==null&&V(M,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var it=YO(j,d);qd(s,a,it,ji(s))}else qd(s,a,d,ji(s))}catch(ot){qd(s,a,{then:function(){},status:"rejected",reason:ot},ji())}finally{G.p=A,F.T=E}}function QO(){}function d0(s,a,u,d){if(s.tag!==5)throw Error(n(476));var m=OE(s).queue;NE(s,m,a,bt,u===null?QO:function(){return LE(s),u(d)})}function OE(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:bt,baseState:bt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:bt},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function LE(s){var a=OE(s).next.queue;qd(s,a,{},ji())}function f0(){return Gn(of)}function PE(){return en().memoizedState}function zE(){return en().memoizedState}function ZO(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=ji();s=Ga(u);var d=Ya(a,s,u);d!==null&&(Fi(d,a,u),Id(d,a,u)),a={cache:qv()},s.payload=a;return}a=a.return}}function JO(s,a,u){var d=ji();u={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Am(s)?jE(a,u):(u=Ov(s,a,u,d),u!==null&&(Fi(u,s,d),FE(u,a,d)))}function IE(s,a,u){var d=ji();qd(s,a,u,d)}function qd(s,a,u,d){var m={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Am(s))jE(a,m);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=a.lastRenderedReducer,A!==null))try{var E=a.lastRenderedState,M=A(E,u);if(m.hasEagerState=!0,m.eagerState=M,Oi(M,E))return im(s,a,m,0),Ce===null&&nm(),!1}catch{}finally{}if(u=Ov(s,a,m,d),u!==null)return Fi(u,s,d),FE(u,a,d),!0}return!1}function p0(s,a,u,d){if(d={lane:2,revertLane:Y0(),action:d,hasEagerState:!1,eagerState:null,next:null},Am(s)){if(a)throw Error(n(479))}else a=Ov(s,u,d,2),a!==null&&Fi(a,s,2)}function Am(s){var a=s.alternate;return s===$t||a!==null&&a===$t}function jE(s,a){dc=pm=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function FE(s,a,u){if((u&4194048)!==0){var d=a.lanes;d&=s.pendingLanes,u|=d,a.lanes=u,ro(s,u)}}var wm={readContext:Gn,use:mm,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useLayoutEffect:$e,useInsertionEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useSyncExternalStore:$e,useId:$e,useHostTransitionStatus:$e,useFormState:$e,useActionState:$e,useOptimistic:$e,useMemoCache:$e,useCacheRefresh:$e},BE={readContext:Gn,use:mm,useCallback:function(s,a){return vi().memoizedState=[s,a===void 0?null:a],s},useContext:Gn,useEffect:xE,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,vm(4194308,4,TE.bind(null,a,s),u)},useLayoutEffect:function(s,a){return vm(4194308,4,s,a)},useInsertionEffect:function(s,a){vm(4,2,s,a)},useMemo:function(s,a){var u=vi();a=a===void 0?null:a;var d=s();if(vo){Dt(!0);try{s()}finally{Dt(!1)}}return u.memoizedState=[d,a],d},useReducer:function(s,a,u){var d=vi();if(u!==void 0){var m=u(a);if(vo){Dt(!0);try{u(a)}finally{Dt(!1)}}}else m=a;return d.memoizedState=d.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},d.queue=s,s=s.dispatch=JO.bind(null,$t,s),[d.memoizedState,s]},useRef:function(s){var a=vi();return s={current:s},a.memoizedState=s},useState:function(s){s=o0(s);var a=s.queue,u=IE.bind(null,$t,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:c0,useDeferredValue:function(s,a){var u=vi();return h0(u,s,a)},useTransition:function(){var s=o0(!1);return s=NE.bind(null,$t,s.queue,!0,!1),vi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var d=$t,m=vi();if(le){if(u===void 0)throw Error(n(407));u=u()}else{if(u=a(),Ce===null)throw Error(n(349));(ne&124)!==0||lE(d,a,u)}m.memoizedState=u;var A={value:u,getSnapshot:a};return m.queue=A,xE(uE.bind(null,d,A,s),[s]),d.flags|=2048,pc(9,bm(),oE.bind(null,d,A,u,a),null),u},useId:function(){var s=vi(),a=Ce.identifierPrefix;if(le){var u=Fr,d=jr;u=(d&~(1<<32-kt(d)-1)).toString(32)+u,a="«"+a+"R"+u,u=gm++,0<u&&(a+="H"+u.toString(32)),a+="»"}else u=XO++,a="«"+a+"r"+u.toString(32)+"»";return s.memoizedState=a},useHostTransitionStatus:f0,useFormState:bE,useActionState:bE,useOptimistic:function(s){var a=vi();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=p0.bind(null,$t,!0,u),u.dispatch=a,[s,a]},useMemoCache:r0,useCacheRefresh:function(){return vi().memoizedState=ZO.bind(null,$t)}},HE={readContext:Gn,use:mm,useCallback:DE,useContext:Gn,useEffect:EE,useImperativeHandle:RE,useInsertionEffect:_E,useLayoutEffect:CE,useMemo:kE,useReducer:ym,useRef:SE,useState:function(){return ym(Ur)},useDebugValue:c0,useDeferredValue:function(s,a){var u=en();return ME(u,ye.memoizedState,s,a)},useTransition:function(){var s=ym(Ur)[0],a=en().memoizedState;return[typeof s=="boolean"?s:Hd(s),a]},useSyncExternalStore:aE,useId:PE,useHostTransitionStatus:f0,useFormState:vE,useActionState:vE,useOptimistic:function(s,a){var u=en();return dE(u,ye,s,a)},useMemoCache:r0,useCacheRefresh:zE},t2={readContext:Gn,use:mm,useCallback:DE,useContext:Gn,useEffect:EE,useImperativeHandle:RE,useInsertionEffect:_E,useLayoutEffect:CE,useMemo:kE,useReducer:l0,useRef:SE,useState:function(){return l0(Ur)},useDebugValue:c0,useDeferredValue:function(s,a){var u=en();return ye===null?h0(u,s,a):ME(u,ye.memoizedState,s,a)},useTransition:function(){var s=l0(Ur)[0],a=en().memoizedState;return[typeof s=="boolean"?s:Hd(s),a]},useSyncExternalStore:aE,useId:PE,useHostTransitionStatus:f0,useFormState:wE,useActionState:wE,useOptimistic:function(s,a){var u=en();return ye!==null?dE(u,ye,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:r0,useCacheRefresh:zE},gc=null,Vd=0;function Sm(s){var a=Vd;return Vd+=1,gc===null&&(gc=[]),Z1(gc,s,a)}function Gd(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function xm(s,a){throw a.$$typeof===y?Error(n(525)):(s=Object.prototype.toString.call(a),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function UE(s){var a=s._init;return a(s._payload)}function qE(s){function a(U,H){if(s){var q=U.deletions;q===null?(U.deletions=[H],U.flags|=16):q.push(H)}}function u(U,H){if(!s)return null;for(;H!==null;)a(U,H),H=H.sibling;return null}function d(U){for(var H=new Map;U!==null;)U.key!==null?H.set(U.key,U):H.set(U.index,U),U=U.sibling;return H}function m(U,H){return U=Ir(U,H),U.index=0,U.sibling=null,U}function A(U,H,q){return U.index=q,s?(q=U.alternate,q!==null?(q=q.index,q<H?(U.flags|=67108866,H):q):(U.flags|=67108866,H)):(U.flags|=1048576,H)}function E(U){return s&&U.alternate===null&&(U.flags|=67108866),U}function M(U,H,q,lt){return H===null||H.tag!==6?(H=Pv(q,U.mode,lt),H.return=U,H):(H=m(H,q),H.return=U,H)}function j(U,H,q,lt){var xt=q.type;return xt===S?it(U,H,q.props.children,lt,q.key):H!==null&&(H.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===X&&UE(xt)===H.type)?(H=m(H,q.props),Gd(H,q),H.return=U,H):(H=rm(q.type,q.key,q.props,null,U.mode,lt),Gd(H,q),H.return=U,H)}function V(U,H,q,lt){return H===null||H.tag!==4||H.stateNode.containerInfo!==q.containerInfo||H.stateNode.implementation!==q.implementation?(H=zv(q,U.mode,lt),H.return=U,H):(H=m(H,q.children||[]),H.return=U,H)}function it(U,H,q,lt,xt){return H===null||H.tag!==7?(H=co(q,U.mode,lt,xt),H.return=U,H):(H=m(H,q),H.return=U,H)}function ot(U,H,q){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Pv(""+H,U.mode,q),H.return=U,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return q=rm(H.type,H.key,H.props,null,U.mode,q),Gd(q,H),q.return=U,q;case v:return H=zv(H,U.mode,q),H.return=U,H;case X:var lt=H._init;return H=lt(H._payload),ot(U,H,q)}if(dt(H)||J(H))return H=co(H,U.mode,q,null),H.return=U,H;if(typeof H.then=="function")return ot(U,Sm(H),q);if(H.$$typeof===N)return ot(U,um(U,H),q);xm(U,H)}return null}function Y(U,H,q,lt){var xt=H!==null?H.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return xt!==null?null:M(U,H,""+q,lt);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case b:return q.key===xt?j(U,H,q,lt):null;case v:return q.key===xt?V(U,H,q,lt):null;case X:return xt=q._init,q=xt(q._payload),Y(U,H,q,lt)}if(dt(q)||J(q))return xt!==null?null:it(U,H,q,lt,null);if(typeof q.then=="function")return Y(U,H,Sm(q),lt);if(q.$$typeof===N)return Y(U,H,um(U,q),lt);xm(U,q)}return null}function W(U,H,q,lt,xt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return U=U.get(q)||null,M(H,U,""+lt,xt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case b:return U=U.get(lt.key===null?q:lt.key)||null,j(H,U,lt,xt);case v:return U=U.get(lt.key===null?q:lt.key)||null,V(H,U,lt,xt);case X:var Wt=lt._init;return lt=Wt(lt._payload),W(U,H,q,lt,xt)}if(dt(lt)||J(lt))return U=U.get(q)||null,it(H,U,lt,xt,null);if(typeof lt.then=="function")return W(U,H,q,Sm(lt),xt);if(lt.$$typeof===N)return W(U,H,q,um(H,lt),xt);xm(H,lt)}return null}function Lt(U,H,q,lt){for(var xt=null,Wt=null,Tt=H,Ot=H=0,wn=null;Tt!==null&&Ot<q.length;Ot++){Tt.index>Ot?(wn=Tt,Tt=null):wn=Tt.sibling;var ae=Y(U,Tt,q[Ot],lt);if(ae===null){Tt===null&&(Tt=wn);break}s&&Tt&&ae.alternate===null&&a(U,Tt),H=A(ae,H,Ot),Wt===null?xt=ae:Wt.sibling=ae,Wt=ae,Tt=wn}if(Ot===q.length)return u(U,Tt),le&&fo(U,Ot),xt;if(Tt===null){for(;Ot<q.length;Ot++)Tt=ot(U,q[Ot],lt),Tt!==null&&(H=A(Tt,H,Ot),Wt===null?xt=Tt:Wt.sibling=Tt,Wt=Tt);return le&&fo(U,Ot),xt}for(Tt=d(Tt);Ot<q.length;Ot++)wn=W(Tt,U,Ot,q[Ot],lt),wn!==null&&(s&&wn.alternate!==null&&Tt.delete(wn.key===null?Ot:wn.key),H=A(wn,H,Ot),Wt===null?xt=wn:Wt.sibling=wn,Wt=wn);return s&&Tt.forEach(function(ul){return a(U,ul)}),le&&fo(U,Ot),xt}function Mt(U,H,q,lt){if(q==null)throw Error(n(151));for(var xt=null,Wt=null,Tt=H,Ot=H=0,wn=null,ae=q.next();Tt!==null&&!ae.done;Ot++,ae=q.next()){Tt.index>Ot?(wn=Tt,Tt=null):wn=Tt.sibling;var ul=Y(U,Tt,ae.value,lt);if(ul===null){Tt===null&&(Tt=wn);break}s&&Tt&&ul.alternate===null&&a(U,Tt),H=A(ul,H,Ot),Wt===null?xt=ul:Wt.sibling=ul,Wt=ul,Tt=wn}if(ae.done)return u(U,Tt),le&&fo(U,Ot),xt;if(Tt===null){for(;!ae.done;Ot++,ae=q.next())ae=ot(U,ae.value,lt),ae!==null&&(H=A(ae,H,Ot),Wt===null?xt=ae:Wt.sibling=ae,Wt=ae);return le&&fo(U,Ot),xt}for(Tt=d(Tt);!ae.done;Ot++,ae=q.next())ae=W(Tt,U,Ot,ae.value,lt),ae!==null&&(s&&ae.alternate!==null&&Tt.delete(ae.key===null?Ot:ae.key),H=A(ae,H,Ot),Wt===null?xt=ae:Wt.sibling=ae,Wt=ae);return s&&Tt.forEach(function(eL){return a(U,eL)}),le&&fo(U,Ot),xt}function ve(U,H,q,lt){if(typeof q=="object"&&q!==null&&q.type===S&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case b:t:{for(var xt=q.key;H!==null;){if(H.key===xt){if(xt=q.type,xt===S){if(H.tag===7){u(U,H.sibling),lt=m(H,q.props.children),lt.return=U,U=lt;break t}}else if(H.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===X&&UE(xt)===H.type){u(U,H.sibling),lt=m(H,q.props),Gd(lt,q),lt.return=U,U=lt;break t}u(U,H);break}else a(U,H);H=H.sibling}q.type===S?(lt=co(q.props.children,U.mode,lt,q.key),lt.return=U,U=lt):(lt=rm(q.type,q.key,q.props,null,U.mode,lt),Gd(lt,q),lt.return=U,U=lt)}return E(U);case v:t:{for(xt=q.key;H!==null;){if(H.key===xt)if(H.tag===4&&H.stateNode.containerInfo===q.containerInfo&&H.stateNode.implementation===q.implementation){u(U,H.sibling),lt=m(H,q.children||[]),lt.return=U,U=lt;break t}else{u(U,H);break}else a(U,H);H=H.sibling}lt=zv(q,U.mode,lt),lt.return=U,U=lt}return E(U);case X:return xt=q._init,q=xt(q._payload),ve(U,H,q,lt)}if(dt(q))return Lt(U,H,q,lt);if(J(q)){if(xt=J(q),typeof xt!="function")throw Error(n(150));return q=xt.call(q),Mt(U,H,q,lt)}if(typeof q.then=="function")return ve(U,H,Sm(q),lt);if(q.$$typeof===N)return ve(U,H,um(U,q),lt);xm(U,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,H!==null&&H.tag===6?(u(U,H.sibling),lt=m(H,q),lt.return=U,U=lt):(u(U,H),lt=Pv(q,U.mode,lt),lt.return=U,U=lt),E(U)):u(U,H)}return function(U,H,q,lt){try{Vd=0;var xt=ve(U,H,q,lt);return gc=null,xt}catch(Tt){if(Tt===Pd||Tt===hm)throw Tt;var Wt=Li(29,Tt,null,U.mode);return Wt.lanes=lt,Wt.return=U,Wt}finally{}}}var mc=qE(!0),VE=qE(!1),ps=K(null),nr=null;function $a(s){var a=s.alternate;k(dn,dn.current&1),k(ps,s),nr===null&&(a===null||hc.current!==null||a.memoizedState!==null)&&(nr=s)}function GE(s){if(s.tag===22){if(k(dn,dn.current),k(ps,s),nr===null){var a=s.alternate;a!==null&&a.memoizedState!==null&&(nr=s)}}else Wa()}function Wa(){k(dn,dn.current),k(ps,ps.current)}function qr(s){ut(ps),nr===s&&(nr=null),ut(dn)}var dn=K(0);function Em(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||sA(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function g0(s,a,u,d){a=s.memoizedState,u=u(d,a),u=u==null?a:g({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var m0={enqueueSetState:function(s,a,u){s=s._reactInternals;var d=ji(),m=Ga(d);m.payload=a,u!=null&&(m.callback=u),a=Ya(s,m,d),a!==null&&(Fi(a,s,d),Id(a,s,d))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var d=ji(),m=Ga(d);m.tag=1,m.payload=a,u!=null&&(m.callback=u),a=Ya(s,m,d),a!==null&&(Fi(a,s,d),Id(a,s,d))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=ji(),d=Ga(u);d.tag=2,a!=null&&(d.callback=a),a=Ya(s,d,u),a!==null&&(Fi(a,s,u),Id(a,s,u))}};function YE(s,a,u,d,m,A,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,A,E):a.prototype&&a.prototype.isPureReactComponent?!Td(u,d)||!Td(m,A):!0}function XE(s,a,u,d){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,d),a.state!==s&&m0.enqueueReplaceState(a,a.state,null)}function Ao(s,a){var u=a;if("ref"in a){u={};for(var d in a)d!=="ref"&&(u[d]=a[d])}if(s=s.defaultProps){u===a&&(u=g({},u));for(var m in s)u[m]===void 0&&(u[m]=s[m])}return u}var _m=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function $E(s){_m(s)}function WE(s){console.error(s)}function KE(s){_m(s)}function Cm(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function QE(s,a,u){try{var d=s.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function y0(s,a,u){return u=Ga(u),u.tag=3,u.payload={element:null},u.callback=function(){Cm(s,a)},u}function ZE(s){return s=Ga(s),s.tag=3,s}function JE(s,a,u,d){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var A=d.value;s.payload=function(){return m(A)},s.callback=function(){QE(a,u,d)}}var E=u.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){QE(a,u,d),typeof m!="function"&&(el===null?el=new Set([this]):el.add(this));var M=d.stack;this.componentDidCatch(d.value,{componentStack:M!==null?M:""})})}function e2(s,a,u,d,m){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=u.alternate,a!==null&&Nd(a,u,m,!0),u=ps.current,u!==null){switch(u.tag){case 13:return nr===null?H0():u.alternate===null&&qe===0&&(qe=3),u.flags&=-257,u.flags|=65536,u.lanes=m,d===Yv?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([d]):a.add(d),q0(s,d,m)),!1;case 22:return u.flags|=65536,d===Yv?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([d]):u.add(d)),q0(s,d,m)),!1}throw Error(n(435,u.tag))}return q0(s,d,m),H0(),!1}if(le)return a=ps.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=m,d!==Fv&&(s=Error(n(422),{cause:d}),Md(cs(s,u)))):(d!==Fv&&(a=Error(n(423),{cause:d}),Md(cs(a,u))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,d=cs(d,u),m=y0(s.stateNode,d,m),Wv(s,m),qe!==4&&(qe=2)),!1;var A=Error(n(520),{cause:d});if(A=cs(A,u),Zd===null?Zd=[A]:Zd.push(A),qe!==4&&(qe=2),a===null)return!0;d=cs(d,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=m&-m,u.lanes|=s,s=y0(u.stateNode,d,s),Wv(u,s),!1;case 1:if(a=u.type,A=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(el===null||!el.has(A))))return u.flags|=65536,m&=-m,u.lanes|=m,m=ZE(m),JE(m,s,u,d),Wv(u,m),!1}u=u.return}while(u!==null);return!1}var t_=Error(n(461)),vn=!1;function Dn(s,a,u,d){a.child=s===null?VE(a,null,u,d):mc(a,s.child,u,d)}function e_(s,a,u,d,m){u=u.render;var A=a.ref;if("ref"in d){var E={};for(var M in d)M!=="ref"&&(E[M]=d[M])}else E=d;return yo(a),d=t0(s,a,u,E,A,m),M=e0(),s!==null&&!vn?(n0(s,a,m),Vr(s,a,m)):(le&&M&&Iv(a),a.flags|=1,Dn(s,a,d,m),a.child)}function n_(s,a,u,d,m){if(s===null){var A=u.type;return typeof A=="function"&&!Lv(A)&&A.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=A,i_(s,a,A,d,m)):(s=rm(u.type,null,d,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(A=s.child,!_0(s,m)){var E=A.memoizedProps;if(u=u.compare,u=u!==null?u:Td,u(E,d)&&s.ref===a.ref)return Vr(s,a,m)}return a.flags|=1,s=Ir(A,d),s.ref=a.ref,s.return=a,a.child=s}function i_(s,a,u,d,m){if(s!==null){var A=s.memoizedProps;if(Td(A,d)&&s.ref===a.ref)if(vn=!1,a.pendingProps=d=A,_0(s,m))(s.flags&131072)!==0&&(vn=!0);else return a.lanes=s.lanes,Vr(s,a,m)}return b0(s,a,u,d,m)}function s_(s,a,u){var d=a.pendingProps,m=d.children,A=s!==null?s.memoizedState:null;if(d.mode==="hidden"){if((a.flags&128)!==0){if(d=A!==null?A.baseLanes|u:u,s!==null){for(m=a.child=s.child,A=0;m!==null;)A=A|m.lanes|m.childLanes,m=m.sibling;a.childLanes=A&~d}else a.childLanes=0,a.child=null;return r_(s,a,d,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&cm(a,A!==null?A.cachePool:null),A!==null?iE(a,A):Qv(),GE(a);else return a.lanes=a.childLanes=536870912,r_(s,a,A!==null?A.baseLanes|u:u,u)}else A!==null?(cm(a,A.cachePool),iE(a,A),Wa(),a.memoizedState=null):(s!==null&&cm(a,null),Qv(),Wa());return Dn(s,a,m,u),a.child}function r_(s,a,u,d){var m=Gv();return m=m===null?null:{parent:hn._currentValue,pool:m},a.memoizedState={baseLanes:u,cachePool:m},s!==null&&cm(a,null),Qv(),GE(a),s!==null&&Nd(s,a,d,!0),null}function Tm(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function b0(s,a,u,d,m){return yo(a),u=t0(s,a,u,d,void 0,m),d=e0(),s!==null&&!vn?(n0(s,a,m),Vr(s,a,m)):(le&&d&&Iv(a),a.flags|=1,Dn(s,a,u,m),a.child)}function a_(s,a,u,d,m,A){return yo(a),a.updateQueue=null,u=rE(a,d,u,m),sE(s),d=e0(),s!==null&&!vn?(n0(s,a,A),Vr(s,a,A)):(le&&d&&Iv(a),a.flags|=1,Dn(s,a,u,A),a.child)}function l_(s,a,u,d,m){if(yo(a),a.stateNode===null){var A=ac,E=u.contextType;typeof E=="object"&&E!==null&&(A=Gn(E)),A=new u(d,A),a.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=m0,a.stateNode=A,A._reactInternals=a,A=a.stateNode,A.props=d,A.state=a.memoizedState,A.refs={},Xv(a),E=u.contextType,A.context=typeof E=="object"&&E!==null?Gn(E):ac,A.state=a.memoizedState,E=u.getDerivedStateFromProps,typeof E=="function"&&(g0(a,u,E,d),A.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(E=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),E!==A.state&&m0.enqueueReplaceState(A,A.state,null),Fd(a,d,A,m),jd(),A.state=a.memoizedState),typeof A.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(s===null){A=a.stateNode;var M=a.memoizedProps,j=Ao(u,M);A.props=j;var V=A.context,it=u.contextType;E=ac,typeof it=="object"&&it!==null&&(E=Gn(it));var ot=u.getDerivedStateFromProps;it=typeof ot=="function"||typeof A.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,it||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(M||V!==E)&&XE(a,A,d,E),Va=!1;var Y=a.memoizedState;A.state=Y,Fd(a,d,A,m),jd(),V=a.memoizedState,M||Y!==V||Va?(typeof ot=="function"&&(g0(a,u,ot,d),V=a.memoizedState),(j=Va||YE(a,u,j,d,Y,V,E))?(it||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(a.flags|=4194308)):(typeof A.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=V),A.props=d,A.state=V,A.context=E,d=j):(typeof A.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{A=a.stateNode,$v(s,a),E=a.memoizedProps,it=Ao(u,E),A.props=it,ot=a.pendingProps,Y=A.context,V=u.contextType,j=ac,typeof V=="object"&&V!==null&&(j=Gn(V)),M=u.getDerivedStateFromProps,(V=typeof M=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(E!==ot||Y!==j)&&XE(a,A,d,j),Va=!1,Y=a.memoizedState,A.state=Y,Fd(a,d,A,m),jd();var W=a.memoizedState;E!==ot||Y!==W||Va||s!==null&&s.dependencies!==null&&om(s.dependencies)?(typeof M=="function"&&(g0(a,u,M,d),W=a.memoizedState),(it=Va||YE(a,u,it,d,Y,W,j)||s!==null&&s.dependencies!==null&&om(s.dependencies))?(V||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(d,W,j),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(d,W,j)),typeof A.componentDidUpdate=="function"&&(a.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof A.componentDidUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(a.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=W),A.props=d,A.state=W,A.context=j,d=it):(typeof A.componentDidUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(a.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(a.flags|=1024),d=!1)}return A=d,Tm(s,a),d=(a.flags&128)!==0,A||d?(A=a.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:A.render(),a.flags|=1,s!==null&&d?(a.child=mc(a,s.child,null,m),a.child=mc(a,null,u,m)):Dn(s,a,u,m),a.memoizedState=A.state,s=a.child):s=Vr(s,a,m),s}function o_(s,a,u,d){return kd(),a.flags|=256,Dn(s,a,u,d),a.child}var v0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function A0(s){return{baseLanes:s,cachePool:W1()}}function w0(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=gs),s}function u_(s,a,u){var d=a.pendingProps,m=!1,A=(a.flags&128)!==0,E;if((E=A)||(E=s!==null&&s.memoizedState===null?!1:(dn.current&2)!==0),E&&(m=!0,a.flags&=-129),E=(a.flags&32)!==0,a.flags&=-33,s===null){if(le){if(m?$a(a):Wa(),le){var M=Ue,j;if(j=M){t:{for(j=M,M=er;j.nodeType!==8;){if(!M){M=null;break t}if(j=zs(j.nextSibling),j===null){M=null;break t}}M=j}M!==null?(a.memoizedState={dehydrated:M,treeContext:ho!==null?{id:jr,overflow:Fr}:null,retryLane:536870912,hydrationErrors:null},j=Li(18,null,null,0),j.stateNode=M,j.return=a,a.child=j,si=a,Ue=null,j=!0):j=!1}j||go(a)}if(M=a.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return sA(M)?a.lanes=32:a.lanes=536870912,null;qr(a)}return M=d.children,d=d.fallback,m?(Wa(),m=a.mode,M=Rm({mode:"hidden",children:M},m),d=co(d,m,u,null),M.return=a,d.return=a,M.sibling=d,a.child=M,m=a.child,m.memoizedState=A0(u),m.childLanes=w0(s,E,u),a.memoizedState=v0,d):($a(a),S0(a,M))}if(j=s.memoizedState,j!==null&&(M=j.dehydrated,M!==null)){if(A)a.flags&256?($a(a),a.flags&=-257,a=x0(s,a,u)):a.memoizedState!==null?(Wa(),a.child=s.child,a.flags|=128,a=null):(Wa(),m=d.fallback,M=a.mode,d=Rm({mode:"visible",children:d.children},M),m=co(m,M,u,null),m.flags|=2,d.return=a,m.return=a,d.sibling=m,a.child=d,mc(a,s.child,null,u),d=a.child,d.memoizedState=A0(u),d.childLanes=w0(s,E,u),a.memoizedState=v0,a=m);else if($a(a),sA(M)){if(E=M.nextSibling&&M.nextSibling.dataset,E)var V=E.dgst;E=V,d=Error(n(419)),d.stack="",d.digest=E,Md({value:d,source:null,stack:null}),a=x0(s,a,u)}else if(vn||Nd(s,a,u,!1),E=(u&s.childLanes)!==0,vn||E){if(E=Ce,E!==null&&(d=u&-u,d=(d&42)!==0?1:Ee(d),d=(d&(E.suspendedLanes|u))!==0?0:d,d!==0&&d!==j.retryLane))throw j.retryLane=d,rc(s,d),Fi(E,s,d),t_;M.data==="$?"||H0(),a=x0(s,a,u)}else M.data==="$?"?(a.flags|=192,a.child=s.child,a=null):(s=j.treeContext,Ue=zs(M.nextSibling),si=a,le=!0,po=null,er=!1,s!==null&&(ds[fs++]=jr,ds[fs++]=Fr,ds[fs++]=ho,jr=s.id,Fr=s.overflow,ho=a),a=S0(a,d.children),a.flags|=4096);return a}return m?(Wa(),m=d.fallback,M=a.mode,j=s.child,V=j.sibling,d=Ir(j,{mode:"hidden",children:d.children}),d.subtreeFlags=j.subtreeFlags&65011712,V!==null?m=Ir(V,m):(m=co(m,M,u,null),m.flags|=2),m.return=a,d.return=a,d.sibling=m,a.child=d,d=m,m=a.child,M=s.child.memoizedState,M===null?M=A0(u):(j=M.cachePool,j!==null?(V=hn._currentValue,j=j.parent!==V?{parent:V,pool:V}:j):j=W1(),M={baseLanes:M.baseLanes|u,cachePool:j}),m.memoizedState=M,m.childLanes=w0(s,E,u),a.memoizedState=v0,d):($a(a),u=s.child,s=u.sibling,u=Ir(u,{mode:"visible",children:d.children}),u.return=a,u.sibling=null,s!==null&&(E=a.deletions,E===null?(a.deletions=[s],a.flags|=16):E.push(s)),a.child=u,a.memoizedState=null,u)}function S0(s,a){return a=Rm({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Rm(s,a){return s=Li(22,s,null,a),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function x0(s,a,u){return mc(a,s.child,null,u),s=S0(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function c_(s,a,u){s.lanes|=a;var d=s.alternate;d!==null&&(d.lanes|=a),Hv(s.return,a,u)}function E0(s,a,u,d,m){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m}:(A.isBackwards=a,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=u,A.tailMode=m)}function h_(s,a,u){var d=a.pendingProps,m=d.revealOrder,A=d.tail;if(Dn(s,a,d.children,u),d=dn.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&c_(s,u,a);else if(s.tag===19)c_(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}switch(k(dn,d),m){case"forwards":for(u=a.child,m=null;u!==null;)s=u.alternate,s!==null&&Em(s)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),E0(a,!1,m,u,A);break;case"backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&Em(s)===null){a.child=m;break}s=m.sibling,m.sibling=u,u=m,m=s}E0(a,!0,u,null,A);break;case"together":E0(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Vr(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),tl|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(Nd(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(n(153));if(a.child!==null){for(s=a.child,u=Ir(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=Ir(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function _0(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&om(s)))}function n2(s,a,u){switch(a.tag){case 3:yt(a,a.stateNode.containerInfo),qa(a,hn,s.memoizedState.cache),kd();break;case 27:case 5:Ut(a);break;case 4:yt(a,a.stateNode.containerInfo);break;case 10:qa(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?($a(a),a.flags|=128,null):(u&a.child.childLanes)!==0?u_(s,a,u):($a(a),s=Vr(s,a,u),s!==null?s.sibling:null);$a(a);break;case 19:var m=(s.flags&128)!==0;if(d=(u&a.childLanes)!==0,d||(Nd(s,a,u,!1),d=(u&a.childLanes)!==0),m){if(d)return h_(s,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),k(dn,dn.current),d)break;return null;case 22:case 23:return a.lanes=0,s_(s,a,u);case 24:qa(a,hn,s.memoizedState.cache)}return Vr(s,a,u)}function d_(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)vn=!0;else{if(!_0(s,u)&&(a.flags&128)===0)return vn=!1,n2(s,a,u);vn=(s.flags&131072)!==0}else vn=!1,le&&(a.flags&1048576)!==0&&U1(a,lm,a.index);switch(a.lanes=0,a.tag){case 16:t:{s=a.pendingProps;var d=a.elementType,m=d._init;if(d=m(d._payload),a.type=d,typeof d=="function")Lv(d)?(s=Ao(d,s),a.tag=1,a=l_(null,a,d,s,u)):(a.tag=0,a=b0(null,a,d,s,u));else{if(d!=null){if(m=d.$$typeof,m===I){a.tag=11,a=e_(null,a,d,s,u);break t}else if(m===B){a.tag=14,a=n_(null,a,d,s,u);break t}}throw a=tt(d)||d,Error(n(306,a,""))}}return a;case 0:return b0(s,a,a.type,a.pendingProps,u);case 1:return d=a.type,m=Ao(d,a.pendingProps),l_(s,a,d,m,u);case 3:t:{if(yt(a,a.stateNode.containerInfo),s===null)throw Error(n(387));d=a.pendingProps;var A=a.memoizedState;m=A.element,$v(s,a),Fd(a,d,null,u);var E=a.memoizedState;if(d=E.cache,qa(a,hn,d),d!==A.cache&&Uv(a,[hn],u,!0),jd(),d=E.element,A.isDehydrated)if(A={element:d,isDehydrated:!1,cache:E.cache},a.updateQueue.baseState=A,a.memoizedState=A,a.flags&256){a=o_(s,a,d,u);break t}else if(d!==m){m=cs(Error(n(424)),a),Md(m),a=o_(s,a,d,u);break t}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ue=zs(s.firstChild),si=a,le=!0,po=null,er=!0,u=VE(a,null,d,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(kd(),d===m){a=Vr(s,a,u);break t}Dn(s,a,d,u)}a=a.child}return a;case 26:return Tm(s,a),s===null?(u=mC(a.type,null,a.pendingProps,null))?a.memoizedState=u:le||(u=a.type,s=a.pendingProps,d=Um(st.current).createElement(u),d[cn]=a,d[bn]=s,Mn(d,u,s),Xt(d),a.stateNode=d):a.memoizedState=mC(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Ut(a),s===null&&le&&(d=a.stateNode=fC(a.type,a.pendingProps,st.current),si=a,er=!0,m=Ue,sl(a.type)?(rA=m,Ue=zs(d.firstChild)):Ue=m),Dn(s,a,a.pendingProps.children,u),Tm(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&le&&((m=d=Ue)&&(d=k2(d,a.type,a.pendingProps,er),d!==null?(a.stateNode=d,si=a,Ue=zs(d.firstChild),er=!1,m=!0):m=!1),m||go(a)),Ut(a),m=a.type,A=a.pendingProps,E=s!==null?s.memoizedProps:null,d=A.children,eA(m,A)?d=null:E!==null&&eA(m,E)&&(a.flags|=32),a.memoizedState!==null&&(m=t0(s,a,$O,null,null,u),of._currentValue=m),Tm(s,a),Dn(s,a,d,u),a.child;case 6:return s===null&&le&&((s=u=Ue)&&(u=M2(u,a.pendingProps,er),u!==null?(a.stateNode=u,si=a,Ue=null,s=!0):s=!1),s||go(a)),null;case 13:return u_(s,a,u);case 4:return yt(a,a.stateNode.containerInfo),d=a.pendingProps,s===null?a.child=mc(a,null,d,u):Dn(s,a,d,u),a.child;case 11:return e_(s,a,a.type,a.pendingProps,u);case 7:return Dn(s,a,a.pendingProps,u),a.child;case 8:return Dn(s,a,a.pendingProps.children,u),a.child;case 12:return Dn(s,a,a.pendingProps.children,u),a.child;case 10:return d=a.pendingProps,qa(a,a.type,d.value),Dn(s,a,d.children,u),a.child;case 9:return m=a.type._context,d=a.pendingProps.children,yo(a),m=Gn(m),d=d(m),a.flags|=1,Dn(s,a,d,u),a.child;case 14:return n_(s,a,a.type,a.pendingProps,u);case 15:return i_(s,a,a.type,a.pendingProps,u);case 19:return h_(s,a,u);case 31:return d=a.pendingProps,u=a.mode,d={mode:d.mode,children:d.children},s===null?(u=Rm(d,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=Ir(s.child,d),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return s_(s,a,u);case 24:return yo(a),d=Gn(hn),s===null?(m=Gv(),m===null&&(m=Ce,A=qv(),m.pooledCache=A,A.refCount++,A!==null&&(m.pooledCacheLanes|=u),m=A),a.memoizedState={parent:d,cache:m},Xv(a),qa(a,hn,m)):((s.lanes&u)!==0&&($v(s,a),Fd(a,null,null,u),jd()),m=s.memoizedState,A=a.memoizedState,m.parent!==d?(m={parent:d,cache:d},a.memoizedState=m,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=m),qa(a,hn,d)):(d=A.cache,qa(a,hn,d),d!==m.cache&&Uv(a,[hn],u,!0))),Dn(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(n(156,a.tag))}function Gr(s){s.flags|=4}function f_(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!wC(a)){if(a=ps.current,a!==null&&((ne&4194048)===ne?nr!==null:(ne&62914560)!==ne&&(ne&536870912)===0||a!==nr))throw zd=Yv,K1;s.flags|=8192}}function Dm(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?gd():536870912,s.lanes|=a,Ac|=a)}function Yd(s,a){if(!le)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Ie(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,d=0;if(a)for(var m=s.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=d,s.childLanes=u,a}function i2(s,a,u){var d=a.pendingProps;switch(jv(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(a),null;case 1:return Ie(a),null;case 3:return u=a.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Hr(hn),Rt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Dd(a)?Gr(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,G1())),Ie(a),null;case 26:return u=a.memoizedState,s===null?(Gr(a),u!==null?(Ie(a),f_(a,u)):(Ie(a),a.flags&=-16777217)):u?u!==s.memoizedState?(Gr(a),Ie(a),f_(a,u)):(Ie(a),a.flags&=-16777217):(s.memoizedProps!==d&&Gr(a),Ie(a),a.flags&=-16777217),null;case 27:ge(a),u=st.current;var m=a.type;if(s!==null&&a.stateNode!=null)s.memoizedProps!==d&&Gr(a);else{if(!d){if(a.stateNode===null)throw Error(n(166));return Ie(a),null}s=at.current,Dd(a)?q1(a):(s=fC(m,d,u),a.stateNode=s,Gr(a))}return Ie(a),null;case 5:if(ge(a),u=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==d&&Gr(a);else{if(!d){if(a.stateNode===null)throw Error(n(166));return Ie(a),null}if(s=at.current,Dd(a))q1(a);else{switch(m=Um(st.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof d.is=="string"?m.createElement("select",{is:d.is}):m.createElement("select"),d.multiple?s.multiple=!0:d.size&&(s.size=d.size);break;default:s=typeof d.is=="string"?m.createElement(u,{is:d.is}):m.createElement(u)}}s[cn]=a,s[bn]=d;t:for(m=a.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===a)break t;for(;m.sibling===null;){if(m.return===null||m.return===a)break t;m=m.return}m.sibling.return=m.return,m=m.sibling}a.stateNode=s;t:switch(Mn(s,u,d),u){case"button":case"input":case"select":case"textarea":s=!!d.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&Gr(a)}}return Ie(a),a.flags&=-16777217,null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==d&&Gr(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(n(166));if(s=st.current,Dd(a)){if(s=a.stateNode,u=a.memoizedProps,d=null,m=si,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}s[cn]=a,s=!!(s.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||aC(s.nodeValue,u)),s||go(a)}else s=Um(s).createTextNode(d),s[cn]=a,a.stateNode=s}return Ie(a),null;case 13:if(d=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=Dd(a),d!==null&&d.dehydrated!==null){if(s===null){if(!m)throw Error(n(318));if(m=a.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));m[cn]=a}else kd(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ie(a),m=!1}else m=G1(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return a.flags&256?(qr(a),a):(qr(a),null)}if(qr(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=d!==null,s=s!==null&&s.memoizedState!==null,u){d=a.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool);var A=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(A=d.memoizedState.cachePool.pool),A!==m&&(d.flags|=2048)}return u!==s&&u&&(a.child.flags|=8192),Dm(a,a.updateQueue),Ie(a),null;case 4:return Rt(),s===null&&K0(a.stateNode.containerInfo),Ie(a),null;case 10:return Hr(a.type),Ie(a),null;case 19:if(ut(dn),m=a.memoizedState,m===null)return Ie(a),null;if(d=(a.flags&128)!==0,A=m.rendering,A===null)if(d)Yd(m,!1);else{if(qe!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(A=Em(s),A!==null){for(a.flags|=128,Yd(m,!1),s=A.updateQueue,a.updateQueue=s,Dm(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)H1(u,s),u=u.sibling;return k(dn,dn.current&1|2),a.child}s=s.sibling}m.tail!==null&&He()>Nm&&(a.flags|=128,d=!0,Yd(m,!1),a.lanes=4194304)}else{if(!d)if(s=Em(A),s!==null){if(a.flags|=128,d=!0,s=s.updateQueue,a.updateQueue=s,Dm(a,s),Yd(m,!0),m.tail===null&&m.tailMode==="hidden"&&!A.alternate&&!le)return Ie(a),null}else 2*He()-m.renderingStartTime>Nm&&u!==536870912&&(a.flags|=128,d=!0,Yd(m,!1),a.lanes=4194304);m.isBackwards?(A.sibling=a.child,a.child=A):(s=m.last,s!==null?s.sibling=A:a.child=A,m.last=A)}return m.tail!==null?(a=m.tail,m.rendering=a,m.tail=a.sibling,m.renderingStartTime=He(),a.sibling=null,s=dn.current,k(dn,d?s&1|2:s&1),a):(Ie(a),null);case 22:case 23:return qr(a),Zv(),d=a.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(u&536870912)!==0&&(a.flags&128)===0&&(Ie(a),a.subtreeFlags&6&&(a.flags|=8192)):Ie(a),u=a.updateQueue,u!==null&&Dm(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==u&&(a.flags|=2048),s!==null&&ut(bo),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Hr(hn),Ie(a),null;case 25:return null;case 30:return null}throw Error(n(156,a.tag))}function s2(s,a){switch(jv(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Hr(hn),Rt(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return ge(a),null;case 13:if(qr(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(n(340));kd()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ut(dn),null;case 4:return Rt(),null;case 10:return Hr(a.type),null;case 22:case 23:return qr(a),Zv(),s!==null&&ut(bo),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Hr(hn),null;case 25:return null;default:return null}}function p_(s,a){switch(jv(a),a.tag){case 3:Hr(hn),Rt();break;case 26:case 27:case 5:ge(a);break;case 4:Rt();break;case 13:qr(a);break;case 19:ut(dn);break;case 10:Hr(a.type);break;case 22:case 23:qr(a),Zv(),s!==null&&ut(bo);break;case 24:Hr(hn)}}function Xd(s,a){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&s)===s){d=void 0;var A=u.create,E=u.inst;d=A(),E.destroy=d}u=u.next}while(u!==m)}}catch(M){_e(a,a.return,M)}}function Ka(s,a,u){try{var d=a.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var A=m.next;d=A;do{if((d.tag&s)===s){var E=d.inst,M=E.destroy;if(M!==void 0){E.destroy=void 0,m=a;var j=u,V=M;try{V()}catch(it){_e(m,j,it)}}}d=d.next}while(d!==A)}}catch(it){_e(a,a.return,it)}}function g_(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{nE(a,u)}catch(d){_e(s,s.return,d)}}}function m_(s,a,u){u.props=Ao(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(d){_e(s,a,d)}}function $d(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof u=="function"?s.refCleanup=u(d):u.current=d}}catch(m){_e(s,a,m)}}function ir(s,a){var u=s.ref,d=s.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(m){_e(s,a,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){_e(s,a,m)}else u.current=null}function y_(s){var a=s.type,u=s.memoizedProps,d=s.stateNode;try{t:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break t;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(m){_e(s,s.return,m)}}function C0(s,a,u){try{var d=s.stateNode;_2(d,s.type,u,a),d[bn]=a}catch(m){_e(s,s.return,m)}}function b_(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&sl(s.type)||s.tag===4}function T0(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||b_(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&sl(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function R0(s,a,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Hm));else if(d!==4&&(d===27&&sl(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(R0(s,a,u),s=s.sibling;s!==null;)R0(s,a,u),s=s.sibling}function km(s,a,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(d!==4&&(d===27&&sl(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(km(s,a,u),s=s.sibling;s!==null;)km(s,a,u),s=s.sibling}function v_(s){var a=s.stateNode,u=s.memoizedProps;try{for(var d=s.type,m=a.attributes;m.length;)a.removeAttributeNode(m[0]);Mn(a,d,u),a[cn]=s,a[bn]=u}catch(A){_e(s,s.return,A)}}var Yr=!1,We=!1,D0=!1,A_=typeof WeakSet=="function"?WeakSet:Set,An=null;function r2(s,a){if(s=s.containerInfo,J0=$m,s=M1(s),Tv(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{u=(u=s.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,A=d.focusNode;d=d.focusOffset;try{u.nodeType,A.nodeType}catch{u=null;break t}var E=0,M=-1,j=-1,V=0,it=0,ot=s,Y=null;e:for(;;){for(var W;ot!==u||m!==0&&ot.nodeType!==3||(M=E+m),ot!==A||d!==0&&ot.nodeType!==3||(j=E+d),ot.nodeType===3&&(E+=ot.nodeValue.length),(W=ot.firstChild)!==null;)Y=ot,ot=W;for(;;){if(ot===s)break e;if(Y===u&&++V===m&&(M=E),Y===A&&++it===d&&(j=E),(W=ot.nextSibling)!==null)break;ot=Y,Y=ot.parentNode}ot=W}u=M===-1||j===-1?null:{start:M,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(tA={focusedElem:s,selectionRange:u},$m=!1,An=a;An!==null;)if(a=An,s=a.child,(a.subtreeFlags&1024)!==0&&s!==null)s.return=a,An=s;else for(;An!==null;){switch(a=An,A=a.alternate,s=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&A!==null){s=void 0,u=a,m=A.memoizedProps,A=A.memoizedState,d=u.stateNode;try{var Lt=Ao(u.type,m,u.elementType===u.type);s=d.getSnapshotBeforeUpdate(Lt,A),d.__reactInternalSnapshotBeforeUpdate=s}catch(Mt){_e(u,u.return,Mt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)iA(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":iA(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=a.sibling,s!==null){s.return=a.return,An=s;break}An=a.return}}function w_(s,a,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:Qa(s,u),d&4&&Xd(5,u);break;case 1:if(Qa(s,u),d&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(E){_e(u,u.return,E)}else{var m=Ao(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(m,a,s.__reactInternalSnapshotBeforeUpdate)}catch(E){_e(u,u.return,E)}}d&64&&g_(u),d&512&&$d(u,u.return);break;case 3:if(Qa(s,u),d&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{nE(s,a)}catch(E){_e(u,u.return,E)}}break;case 27:a===null&&d&4&&v_(u);case 26:case 5:Qa(s,u),a===null&&d&4&&y_(u),d&512&&$d(u,u.return);break;case 12:Qa(s,u);break;case 13:Qa(s,u),d&4&&E_(s,u),d&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=p2.bind(null,u),N2(s,u))));break;case 22:if(d=u.memoizedState!==null||Yr,!d){a=a!==null&&a.memoizedState!==null||We,m=Yr;var A=We;Yr=d,(We=a)&&!A?Za(s,u,(u.subtreeFlags&8772)!==0):Qa(s,u),Yr=m,We=A}break;case 30:break;default:Qa(s,u)}}function S_(s){var a=s.alternate;a!==null&&(s.alternate=null,S_(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Wu(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ne=null,Ai=!1;function Xr(s,a,u){for(u=u.child;u!==null;)x_(s,a,u),u=u.sibling}function x_(s,a,u){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(nt,u)}catch{}switch(u.tag){case 26:We||ir(u,a),Xr(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:We||ir(u,a);var d=Ne,m=Ai;sl(u.type)&&(Ne=u.stateNode,Ai=!1),Xr(s,a,u),sf(u.stateNode),Ne=d,Ai=m;break;case 5:We||ir(u,a);case 6:if(d=Ne,m=Ai,Ne=null,Xr(s,a,u),Ne=d,Ai=m,Ne!==null)if(Ai)try{(Ne.nodeType===9?Ne.body:Ne.nodeName==="HTML"?Ne.ownerDocument.body:Ne).removeChild(u.stateNode)}catch(A){_e(u,a,A)}else try{Ne.removeChild(u.stateNode)}catch(A){_e(u,a,A)}break;case 18:Ne!==null&&(Ai?(s=Ne,hC(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),df(s)):hC(Ne,u.stateNode));break;case 4:d=Ne,m=Ai,Ne=u.stateNode.containerInfo,Ai=!0,Xr(s,a,u),Ne=d,Ai=m;break;case 0:case 11:case 14:case 15:We||Ka(2,u,a),We||Ka(4,u,a),Xr(s,a,u);break;case 1:We||(ir(u,a),d=u.stateNode,typeof d.componentWillUnmount=="function"&&m_(u,a,d)),Xr(s,a,u);break;case 21:Xr(s,a,u);break;case 22:We=(d=We)||u.memoizedState!==null,Xr(s,a,u),We=d;break;default:Xr(s,a,u)}}function E_(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{df(s)}catch(u){_e(a,a.return,u)}}function a2(s){switch(s.tag){case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new A_),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new A_),a;default:throw Error(n(435,s.tag))}}function k0(s,a){var u=a2(s);a.forEach(function(d){var m=g2.bind(null,s,d);u.has(d)||(u.add(d),d.then(m,m))})}function Pi(s,a){var u=a.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d],A=s,E=a,M=E;t:for(;M!==null;){switch(M.tag){case 27:if(sl(M.type)){Ne=M.stateNode,Ai=!1;break t}break;case 5:Ne=M.stateNode,Ai=!1;break t;case 3:case 4:Ne=M.stateNode.containerInfo,Ai=!0;break t}M=M.return}if(Ne===null)throw Error(n(160));x_(A,E,m),Ne=null,Ai=!1,A=m.alternate,A!==null&&(A.return=null),m.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)__(a,s),a=a.sibling}var Ps=null;function __(s,a){var u=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Pi(a,s),zi(s),d&4&&(Ka(3,s,s.return),Xd(3,s),Ka(5,s,s.return));break;case 1:Pi(a,s),zi(s),d&512&&(We||u===null||ir(u,u.return)),d&64&&Yr&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var m=Ps;if(Pi(a,s),zi(s),d&512&&(We||u===null||ir(u,u.return)),d&4){var A=u!==null?u.memoizedState:null;if(d=s.memoizedState,u===null)if(d===null)if(s.stateNode===null){t:{d=s.type,u=s.memoizedProps,m=m.ownerDocument||m;e:switch(d){case"title":A=m.getElementsByTagName("title")[0],(!A||A[Lr]||A[cn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=m.createElement(d),m.head.insertBefore(A,m.querySelector("head > title"))),Mn(A,d,u),A[cn]=s,Xt(A),d=A;break t;case"link":var E=vC("link","href",m).get(d+(u.href||""));if(E){for(var M=0;M<E.length;M++)if(A=E[M],A.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&A.getAttribute("rel")===(u.rel==null?null:u.rel)&&A.getAttribute("title")===(u.title==null?null:u.title)&&A.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){E.splice(M,1);break e}}A=m.createElement(d),Mn(A,d,u),m.head.appendChild(A);break;case"meta":if(E=vC("meta","content",m).get(d+(u.content||""))){for(M=0;M<E.length;M++)if(A=E[M],A.getAttribute("content")===(u.content==null?null:""+u.content)&&A.getAttribute("name")===(u.name==null?null:u.name)&&A.getAttribute("property")===(u.property==null?null:u.property)&&A.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&A.getAttribute("charset")===(u.charSet==null?null:u.charSet)){E.splice(M,1);break e}}A=m.createElement(d),Mn(A,d,u),m.head.appendChild(A);break;default:throw Error(n(468,d))}A[cn]=s,Xt(A),d=A}s.stateNode=d}else AC(m,s.type,s.stateNode);else s.stateNode=bC(m,d,s.memoizedProps);else A!==d?(A===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):A.count--,d===null?AC(m,s.type,s.stateNode):bC(m,d,s.memoizedProps)):d===null&&s.stateNode!==null&&C0(s,s.memoizedProps,u.memoizedProps)}break;case 27:Pi(a,s),zi(s),d&512&&(We||u===null||ir(u,u.return)),u!==null&&d&4&&C0(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Pi(a,s),zi(s),d&512&&(We||u===null||ir(u,u.return)),s.flags&32){m=s.stateNode;try{Zu(m,"")}catch(W){_e(s,s.return,W)}}d&4&&s.stateNode!=null&&(m=s.memoizedProps,C0(s,m,u!==null?u.memoizedProps:m)),d&1024&&(D0=!0);break;case 6:if(Pi(a,s),zi(s),d&4){if(s.stateNode===null)throw Error(n(162));d=s.memoizedProps,u=s.stateNode;try{u.nodeValue=d}catch(W){_e(s,s.return,W)}}break;case 3:if(Gm=null,m=Ps,Ps=qm(a.containerInfo),Pi(a,s),Ps=m,zi(s),d&4&&u!==null&&u.memoizedState.isDehydrated)try{df(a.containerInfo)}catch(W){_e(s,s.return,W)}D0&&(D0=!1,C_(s));break;case 4:d=Ps,Ps=qm(s.stateNode.containerInfo),Pi(a,s),zi(s),Ps=d;break;case 12:Pi(a,s),zi(s);break;case 13:Pi(a,s),zi(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(z0=He()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,k0(s,d)));break;case 22:m=s.memoizedState!==null;var j=u!==null&&u.memoizedState!==null,V=Yr,it=We;if(Yr=V||m,We=it||j,Pi(a,s),We=it,Yr=V,zi(s),d&8192)t:for(a=s.stateNode,a._visibility=m?a._visibility&-2:a._visibility|1,m&&(u===null||j||Yr||We||wo(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){j=u=a;try{if(A=j.stateNode,m)E=A.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{M=j.stateNode;var ot=j.memoizedProps.style,Y=ot!=null&&ot.hasOwnProperty("display")?ot.display:null;M.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(W){_e(j,j.return,W)}}}else if(a.tag===6){if(u===null){j=a;try{j.stateNode.nodeValue=m?"":j.memoizedProps}catch(W){_e(j,j.return,W)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break t;for(;a.sibling===null;){if(a.return===null||a.return===s)break t;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=s.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,k0(s,u))));break;case 19:Pi(a,s),zi(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,k0(s,d)));break;case 30:break;case 21:break;default:Pi(a,s),zi(s)}}function zi(s){var a=s.flags;if(a&2){try{for(var u,d=s.return;d!==null;){if(b_(d)){u=d;break}d=d.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var m=u.stateNode,A=T0(s);km(s,A,m);break;case 5:var E=u.stateNode;u.flags&32&&(Zu(E,""),u.flags&=-33);var M=T0(s);km(s,M,E);break;case 3:case 4:var j=u.stateNode.containerInfo,V=T0(s);R0(s,V,j);break;default:throw Error(n(161))}}catch(it){_e(s,s.return,it)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function C_(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;C_(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Qa(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)w_(s,a.alternate,a),a=a.sibling}function wo(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Ka(4,a,a.return),wo(a);break;case 1:ir(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&m_(a,a.return,u),wo(a);break;case 27:sf(a.stateNode);case 26:case 5:ir(a,a.return),wo(a);break;case 22:a.memoizedState===null&&wo(a);break;case 30:wo(a);break;default:wo(a)}s=s.sibling}}function Za(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,m=s,A=a,E=A.flags;switch(A.tag){case 0:case 11:case 15:Za(m,A,u),Xd(4,A);break;case 1:if(Za(m,A,u),d=A,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(V){_e(d,d.return,V)}if(d=A,m=d.updateQueue,m!==null){var M=d.stateNode;try{var j=m.shared.hiddenCallbacks;if(j!==null)for(m.shared.hiddenCallbacks=null,m=0;m<j.length;m++)eE(j[m],M)}catch(V){_e(d,d.return,V)}}u&&E&64&&g_(A),$d(A,A.return);break;case 27:v_(A);case 26:case 5:Za(m,A,u),u&&d===null&&E&4&&y_(A),$d(A,A.return);break;case 12:Za(m,A,u);break;case 13:Za(m,A,u),u&&E&4&&E_(m,A);break;case 22:A.memoizedState===null&&Za(m,A,u),$d(A,A.return);break;case 30:break;default:Za(m,A,u)}a=a.sibling}}function M0(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Od(u))}function N0(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Od(s))}function sr(s,a,u,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)T_(s,a,u,d),a=a.sibling}function T_(s,a,u,d){var m=a.flags;switch(a.tag){case 0:case 11:case 15:sr(s,a,u,d),m&2048&&Xd(9,a);break;case 1:sr(s,a,u,d);break;case 3:sr(s,a,u,d),m&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Od(s)));break;case 12:if(m&2048){sr(s,a,u,d),s=a.stateNode;try{var A=a.memoizedProps,E=A.id,M=A.onPostCommit;typeof M=="function"&&M(E,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(j){_e(a,a.return,j)}}else sr(s,a,u,d);break;case 13:sr(s,a,u,d);break;case 23:break;case 22:A=a.stateNode,E=a.alternate,a.memoizedState!==null?A._visibility&2?sr(s,a,u,d):Wd(s,a):A._visibility&2?sr(s,a,u,d):(A._visibility|=2,yc(s,a,u,d,(a.subtreeFlags&10256)!==0)),m&2048&&M0(E,a);break;case 24:sr(s,a,u,d),m&2048&&N0(a.alternate,a);break;default:sr(s,a,u,d)}}function yc(s,a,u,d,m){for(m=m&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var A=s,E=a,M=u,j=d,V=E.flags;switch(E.tag){case 0:case 11:case 15:yc(A,E,M,j,m),Xd(8,E);break;case 23:break;case 22:var it=E.stateNode;E.memoizedState!==null?it._visibility&2?yc(A,E,M,j,m):Wd(A,E):(it._visibility|=2,yc(A,E,M,j,m)),m&&V&2048&&M0(E.alternate,E);break;case 24:yc(A,E,M,j,m),m&&V&2048&&N0(E.alternate,E);break;default:yc(A,E,M,j,m)}a=a.sibling}}function Wd(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,d=a,m=d.flags;switch(d.tag){case 22:Wd(u,d),m&2048&&M0(d.alternate,d);break;case 24:Wd(u,d),m&2048&&N0(d.alternate,d);break;default:Wd(u,d)}a=a.sibling}}var Kd=8192;function bc(s){if(s.subtreeFlags&Kd)for(s=s.child;s!==null;)R_(s),s=s.sibling}function R_(s){switch(s.tag){case 26:bc(s),s.flags&Kd&&s.memoizedState!==null&&G2(Ps,s.memoizedState,s.memoizedProps);break;case 5:bc(s);break;case 3:case 4:var a=Ps;Ps=qm(s.stateNode.containerInfo),bc(s),Ps=a;break;case 22:s.memoizedState===null&&(a=s.alternate,a!==null&&a.memoizedState!==null?(a=Kd,Kd=16777216,bc(s),Kd=a):bc(s));break;default:bc(s)}}function D_(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Qd(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];An=d,M_(d,s)}D_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)k_(s),s=s.sibling}function k_(s){switch(s.tag){case 0:case 11:case 15:Qd(s),s.flags&2048&&Ka(9,s,s.return);break;case 3:Qd(s);break;case 12:Qd(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Mm(s)):Qd(s);break;default:Qd(s)}}function Mm(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];An=d,M_(d,s)}D_(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Ka(8,a,a.return),Mm(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Mm(a));break;default:Mm(a)}s=s.sibling}}function M_(s,a){for(;An!==null;){var u=An;switch(u.tag){case 0:case 11:case 15:Ka(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Od(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,An=d;else t:for(u=s;An!==null;){d=An;var m=d.sibling,A=d.return;if(S_(d),d===u){An=null;break t}if(m!==null){m.return=A,An=m;break t}An=A}}}var l2={getCacheForType:function(s){var a=Gn(hn),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u}},o2=typeof WeakMap=="function"?WeakMap:Map,de=0,Ce=null,Qt=null,ne=0,fe=0,Ii=null,Ja=!1,vc=!1,O0=!1,$r=0,qe=0,tl=0,So=0,L0=0,gs=0,Ac=0,Zd=null,wi=null,P0=!1,z0=0,Nm=1/0,Om=null,el=null,kn=0,nl=null,wc=null,Sc=0,I0=0,j0=null,N_=null,Jd=0,F0=null;function ji(){if((de&2)!==0&&ne!==0)return ne&-ne;if(F.T!==null){var s=uc;return s!==0?s:Y0()}return qg()}function O_(){gs===0&&(gs=(ne&536870912)===0||le?Ug():536870912);var s=ps.current;return s!==null&&(s.flags|=32),gs}function Fi(s,a,u){(s===Ce&&(fe===2||fe===9)||s.cancelPendingCommit!==null)&&(xc(s,0),il(s,ne,gs,!1)),ja(s,u),((de&2)===0||s!==Ce)&&(s===Ce&&((de&2)===0&&(So|=u),qe===4&&il(s,ne,gs,!1)),rr(s))}function L_(s,a,u){if((de&6)!==0)throw Error(n(327));var d=!u&&(a&124)===0&&(a&s.expiredLanes)===0||ni(s,a),m=d?h2(s,a):U0(s,a,!0),A=d;do{if(m===0){vc&&!d&&il(s,a,0,!1);break}else{if(u=s.current.alternate,A&&!u2(u)){m=U0(s,a,!1),A=!1;continue}if(m===2){if(A=a,s.errorRecoveryDisabledLanes&A)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){a=E;t:{var M=s;m=Zd;var j=M.current.memoizedState.isDehydrated;if(j&&(xc(M,E).flags|=256),E=U0(M,E,!1),E!==2){if(O0&&!j){M.errorRecoveryDisabledLanes|=A,So|=A,m=4;break t}A=wi,wi=m,A!==null&&(wi===null?wi=A:wi.push.apply(wi,A))}m=E}if(A=!1,m!==2)continue}}if(m===1){xc(s,0),il(s,a,0,!0);break}t:{switch(d=s,A=m,A){case 0:case 1:throw Error(n(345));case 4:if((a&4194048)!==a)break;case 6:il(d,a,gs,!Ja);break t;case 2:wi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((a&62914560)===a&&(m=z0+300-He(),10<m)){if(il(d,a,gs,!Ja),Xe(d,0,!0)!==0)break t;d.timeoutHandle=uC(P_.bind(null,d,u,wi,Om,P0,a,gs,So,Ac,Ja,A,2,-0,0),m);break t}P_(d,u,wi,Om,P0,a,gs,So,Ac,Ja,A,0,-0,0)}}break}while(!0);rr(s)}function P_(s,a,u,d,m,A,E,M,j,V,it,ot,Y,W){if(s.timeoutHandle=-1,ot=a.subtreeFlags,(ot&8192||(ot&16785408)===16785408)&&(lf={stylesheets:null,count:0,unsuspend:V2},R_(a),ot=Y2(),ot!==null)){s.cancelPendingCommit=ot(U_.bind(null,s,a,A,u,d,m,E,M,j,it,1,Y,W)),il(s,A,E,!V);return}U_(s,a,A,u,d,m,E,M,j)}function u2(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var m=u[d],A=m.getSnapshot;m=m.value;try{if(!Oi(A(),m))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function il(s,a,u,d){a&=~L0,a&=~So,s.suspendedLanes|=a,s.pingedLanes&=~a,d&&(s.warmLanes|=a),d=s.expirationTimes;for(var m=a;0<m;){var A=31-kt(m),E=1<<A;d[A]=-1,m&=~E}u!==0&&Rn(s,u,a)}function Lm(){return(de&6)===0?(tf(0),!1):!0}function B0(){if(Qt!==null){if(fe===0)var s=Qt.return;else s=Qt,Br=mo=null,i0(s),gc=null,Vd=0,s=Qt;for(;s!==null;)p_(s.alternate,s),s=s.return;Qt=null}}function xc(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,T2(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),B0(),Ce=s,Qt=u=Ir(s.current,null),ne=a,fe=0,Ii=null,Ja=!1,vc=ni(s,a),O0=!1,Ac=gs=L0=So=tl=qe=0,wi=Zd=null,P0=!1,(a&8)!==0&&(a|=a&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=a;0<d;){var m=31-kt(d),A=1<<m;a|=s[m],d&=~A}return $r=a,nm(),u}function z_(s,a){$t=null,F.H=wm,a===Pd||a===hm?(a=J1(),fe=3):a===K1?(a=J1(),fe=4):fe=a===t_?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ii=a,Qt===null&&(qe=1,Cm(s,cs(a,s.current)))}function I_(){var s=F.H;return F.H=wm,s===null?wm:s}function j_(){var s=F.A;return F.A=l2,s}function H0(){qe=4,Ja||(ne&4194048)!==ne&&ps.current!==null||(vc=!0),(tl&134217727)===0&&(So&134217727)===0||Ce===null||il(Ce,ne,gs,!1)}function U0(s,a,u){var d=de;de|=2;var m=I_(),A=j_();(Ce!==s||ne!==a)&&(Om=null,xc(s,a)),a=!1;var E=qe;t:do try{if(fe!==0&&Qt!==null){var M=Qt,j=Ii;switch(fe){case 8:B0(),E=6;break t;case 3:case 2:case 9:case 6:ps.current===null&&(a=!0);var V=fe;if(fe=0,Ii=null,Ec(s,M,j,V),u&&vc){E=0;break t}break;default:V=fe,fe=0,Ii=null,Ec(s,M,j,V)}}c2(),E=qe;break}catch(it){z_(s,it)}while(!0);return a&&s.shellSuspendCounter++,Br=mo=null,de=d,F.H=m,F.A=A,Qt===null&&(Ce=null,ne=0,nm()),E}function c2(){for(;Qt!==null;)F_(Qt)}function h2(s,a){var u=de;de|=2;var d=I_(),m=j_();Ce!==s||ne!==a?(Om=null,Nm=He()+500,xc(s,a)):vc=ni(s,a);t:do try{if(fe!==0&&Qt!==null){a=Qt;var A=Ii;e:switch(fe){case 1:fe=0,Ii=null,Ec(s,a,A,1);break;case 2:case 9:if(Q1(A)){fe=0,Ii=null,B_(a);break}a=function(){fe!==2&&fe!==9||Ce!==s||(fe=7),rr(s)},A.then(a,a);break t;case 3:fe=7;break t;case 4:fe=5;break t;case 7:Q1(A)?(fe=0,Ii=null,B_(a)):(fe=0,Ii=null,Ec(s,a,A,7));break;case 5:var E=null;switch(Qt.tag){case 26:E=Qt.memoizedState;case 5:case 27:var M=Qt;if(!E||wC(E)){fe=0,Ii=null;var j=M.sibling;if(j!==null)Qt=j;else{var V=M.return;V!==null?(Qt=V,Pm(V)):Qt=null}break e}}fe=0,Ii=null,Ec(s,a,A,5);break;case 6:fe=0,Ii=null,Ec(s,a,A,6);break;case 8:B0(),qe=6;break t;default:throw Error(n(462))}}d2();break}catch(it){z_(s,it)}while(!0);return Br=mo=null,F.H=d,F.A=m,de=u,Qt!==null?0:(Ce=null,ne=0,nm(),qe)}function d2(){for(;Qt!==null&&!Un();)F_(Qt)}function F_(s){var a=d_(s.alternate,s,$r);s.memoizedProps=s.pendingProps,a===null?Pm(s):Qt=a}function B_(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=a_(u,a,a.pendingProps,a.type,void 0,ne);break;case 11:a=a_(u,a,a.pendingProps,a.type.render,a.ref,ne);break;case 5:i0(a);default:p_(u,a),a=Qt=H1(a,$r),a=d_(u,a,$r)}s.memoizedProps=s.pendingProps,a===null?Pm(s):Qt=a}function Ec(s,a,u,d){Br=mo=null,i0(a),gc=null,Vd=0;var m=a.return;try{if(e2(s,m,a,u,ne)){qe=1,Cm(s,cs(u,s.current)),Qt=null;return}}catch(A){if(m!==null)throw Qt=m,A;qe=1,Cm(s,cs(u,s.current)),Qt=null;return}a.flags&32768?(le||d===1?s=!0:vc||(ne&536870912)!==0?s=!1:(Ja=s=!0,(d===2||d===9||d===3||d===6)&&(d=ps.current,d!==null&&d.tag===13&&(d.flags|=16384))),H_(a,s)):Pm(a)}function Pm(s){var a=s;do{if((a.flags&32768)!==0){H_(a,Ja);return}s=a.return;var u=i2(a.alternate,a,$r);if(u!==null){Qt=u;return}if(a=a.sibling,a!==null){Qt=a;return}Qt=a=s}while(a!==null);qe===0&&(qe=5)}function H_(s,a){do{var u=s2(s.alternate,s);if(u!==null){u.flags&=32767,Qt=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){Qt=s;return}Qt=s=u}while(s!==null);qe=6,Qt=null}function U_(s,a,u,d,m,A,E,M,j){s.cancelPendingCommit=null;do zm();while(kn!==0);if((de&6)!==0)throw Error(n(327));if(a!==null){if(a===s.current)throw Error(n(177));if(A=a.lanes|a.childLanes,A|=Nv,Vn(s,u,A,E,M,j),s===Ce&&(Qt=Ce=null,ne=0),wc=a,nl=s,Sc=u,I0=A,j0=m,N_=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,m2(pi,function(){return X_(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=F.T,F.T=null,m=G.p,G.p=2,E=de,de|=4;try{r2(s,a,u)}finally{de=E,G.p=m,F.T=d}}kn=1,q_(),V_(),G_()}}function q_(){if(kn===1){kn=0;var s=nl,a=wc,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=F.T,F.T=null;var d=G.p;G.p=2;var m=de;de|=4;try{__(a,s);var A=tA,E=M1(s.containerInfo),M=A.focusedElem,j=A.selectionRange;if(E!==M&&M&&M.ownerDocument&&k1(M.ownerDocument.documentElement,M)){if(j!==null&&Tv(M)){var V=j.start,it=j.end;if(it===void 0&&(it=V),"selectionStart"in M)M.selectionStart=V,M.selectionEnd=Math.min(it,M.value.length);else{var ot=M.ownerDocument||document,Y=ot&&ot.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),Lt=M.textContent.length,Mt=Math.min(j.start,Lt),ve=j.end===void 0?Mt:Math.min(j.end,Lt);!W.extend&&Mt>ve&&(E=ve,ve=Mt,Mt=E);var U=D1(M,Mt),H=D1(M,ve);if(U&&H&&(W.rangeCount!==1||W.anchorNode!==U.node||W.anchorOffset!==U.offset||W.focusNode!==H.node||W.focusOffset!==H.offset)){var q=ot.createRange();q.setStart(U.node,U.offset),W.removeAllRanges(),Mt>ve?(W.addRange(q),W.extend(H.node,H.offset)):(q.setEnd(H.node,H.offset),W.addRange(q))}}}}for(ot=[],W=M;W=W.parentNode;)W.nodeType===1&&ot.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ot.length;M++){var lt=ot[M];lt.element.scrollLeft=lt.left,lt.element.scrollTop=lt.top}}$m=!!J0,tA=J0=null}finally{de=m,G.p=d,F.T=u}}s.current=a,kn=2}}function V_(){if(kn===2){kn=0;var s=nl,a=wc,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=F.T,F.T=null;var d=G.p;G.p=2;var m=de;de|=4;try{w_(s,a.alternate,a)}finally{de=m,G.p=d,F.T=u}}kn=3}}function G_(){if(kn===4||kn===3){kn=0,Be();var s=nl,a=wc,u=Sc,d=N_;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?kn=5:(kn=0,wc=nl=null,Y_(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(el=null),gi(u),a=a.stateNode,ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(nt,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=F.T,m=G.p,G.p=2,F.T=null;try{for(var A=s.onRecoverableError,E=0;E<d.length;E++){var M=d[E];A(M.value,{componentStack:M.stack})}}finally{F.T=a,G.p=m}}(Sc&3)!==0&&zm(),rr(s),m=s.pendingLanes,(u&4194090)!==0&&(m&42)!==0?s===F0?Jd++:(Jd=0,F0=s):Jd=0,tf(0)}}function Y_(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Od(a)))}function zm(s){return q_(),V_(),G_(),X_()}function X_(){if(kn!==5)return!1;var s=nl,a=I0;I0=0;var u=gi(Sc),d=F.T,m=G.p;try{G.p=32>u?32:u,F.T=null,u=j0,j0=null;var A=nl,E=Sc;if(kn=0,wc=nl=null,Sc=0,(de&6)!==0)throw Error(n(331));var M=de;if(de|=4,k_(A.current),T_(A,A.current,E,u),de=M,tf(0,!1),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(nt,A)}catch{}return!0}finally{G.p=m,F.T=d,Y_(s,a)}}function $_(s,a,u){a=cs(u,a),a=y0(s.stateNode,a,2),s=Ya(s,a,2),s!==null&&(ja(s,2),rr(s))}function _e(s,a,u){if(s.tag===3)$_(s,s,u);else for(;a!==null;){if(a.tag===3){$_(a,s,u);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(el===null||!el.has(d))){s=cs(u,s),u=ZE(2),d=Ya(a,u,2),d!==null&&(JE(u,d,a,s),ja(d,2),rr(d));break}}a=a.return}}function q0(s,a,u){var d=s.pingCache;if(d===null){d=s.pingCache=new o2;var m=new Set;d.set(a,m)}else m=d.get(a),m===void 0&&(m=new Set,d.set(a,m));m.has(u)||(O0=!0,m.add(u),s=f2.bind(null,s,a,u),a.then(s,s))}function f2(s,a,u){var d=s.pingCache;d!==null&&d.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Ce===s&&(ne&u)===u&&(qe===4||qe===3&&(ne&62914560)===ne&&300>He()-z0?(de&2)===0&&xc(s,0):L0|=u,Ac===ne&&(Ac=0)),rr(s)}function W_(s,a){a===0&&(a=gd()),s=rc(s,a),s!==null&&(ja(s,a),rr(s))}function p2(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),W_(s,u)}function g2(s,a){var u=0;switch(s.tag){case 13:var d=s.stateNode,m=s.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(a),W_(s,u)}function m2(s,a){return te(s,a)}var Im=null,_c=null,V0=!1,jm=!1,G0=!1,xo=0;function rr(s){s!==_c&&s.next===null&&(_c===null?Im=_c=s:_c=_c.next=s),jm=!0,V0||(V0=!0,b2())}function tf(s,a){if(!G0&&jm){G0=!0;do for(var u=!1,d=Im;d!==null;){if(s!==0){var m=d.pendingLanes;if(m===0)var A=0;else{var E=d.suspendedLanes,M=d.pingedLanes;A=(1<<31-kt(42|s)+1)-1,A&=m&~(E&~M),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(u=!0,J_(d,A))}else A=ne,A=Xe(d,d===Ce?A:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(A&3)===0||ni(d,A)||(u=!0,J_(d,A));d=d.next}while(u);G0=!1}}function y2(){K_()}function K_(){jm=V0=!1;var s=0;xo!==0&&(C2()&&(s=xo),xo=0);for(var a=He(),u=null,d=Im;d!==null;){var m=d.next,A=Q_(d,a);A===0?(d.next=null,u===null?Im=m:u.next=m,m===null&&(_c=u)):(u=d,(s!==0||(A&3)!==0)&&(jm=!0)),d=m}tf(s)}function Q_(s,a){for(var u=s.suspendedLanes,d=s.pingedLanes,m=s.expirationTimes,A=s.pendingLanes&-62914561;0<A;){var E=31-kt(A),M=1<<E,j=m[E];j===-1?((M&u)===0||(M&d)!==0)&&(m[E]=ii(M,a)):j<=a&&(s.expiredLanes|=M),A&=~M}if(a=Ce,u=ne,u=Xe(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,u===0||s===a&&(fe===2||fe===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&Yt(d),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||ni(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(d!==null&&Yt(d),gi(u)){case 2:case 8:u=Nr;break;case 32:u=pi;break;case 268435456:u=Or;break;default:u=pi}return d=Z_.bind(null,s),u=te(u,d),s.callbackPriority=a,s.callbackNode=u,a}return d!==null&&d!==null&&Yt(d),s.callbackPriority=2,s.callbackNode=null,2}function Z_(s,a){if(kn!==0&&kn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(zm()&&s.callbackNode!==u)return null;var d=ne;return d=Xe(s,s===Ce?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(L_(s,d,a),Q_(s,He()),s.callbackNode!=null&&s.callbackNode===u?Z_.bind(null,s):null)}function J_(s,a){if(zm())return null;L_(s,a,!0)}function b2(){R2(function(){(de&6)!==0?te(Ds,y2):K_()})}function Y0(){return xo===0&&(xo=Ug()),xo}function tC(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Wg(""+s)}function eC(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function v2(s,a,u,d,m){if(a==="submit"&&u&&u.stateNode===m){var A=tC((m[bn]||null).action),E=d.submitter;E&&(a=(a=E[bn]||null)?tC(a.formAction):E.getAttribute("formAction"),a!==null&&(A=a,E=null));var M=new Jg("action","action",null,d,m);s.push({event:M,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(xo!==0){var j=E?eC(m,E):new FormData(m);d0(u,{pending:!0,data:j,method:m.method,action:A},null,j)}}else typeof A=="function"&&(M.preventDefault(),j=E?eC(m,E):new FormData(m),d0(u,{pending:!0,data:j,method:m.method,action:A},A,j))},currentTarget:m}]})}}for(var X0=0;X0<Mv.length;X0++){var $0=Mv[X0],A2=$0.toLowerCase(),w2=$0[0].toUpperCase()+$0.slice(1);Ls(A2,"on"+w2)}Ls(L1,"onAnimationEnd"),Ls(P1,"onAnimationIteration"),Ls(z1,"onAnimationStart"),Ls("dblclick","onDoubleClick"),Ls("focusin","onFocus"),Ls("focusout","onBlur"),Ls(jO,"onTransitionRun"),Ls(FO,"onTransitionStart"),Ls(BO,"onTransitionCancel"),Ls(I1,"onTransitionEnd"),Ha("onMouseEnter",["mouseout","mouseover"]),Ha("onMouseLeave",["mouseout","mouseover"]),Ha("onPointerEnter",["pointerout","pointerover"]),Ha("onPointerLeave",["pointerout","pointerover"]),Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Os("onBeforeInput",["compositionend","keypress","textInput","paste"]),Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ef="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ef));function nC(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var d=s[u],m=d.event;d=d.listeners;t:{var A=void 0;if(a)for(var E=d.length-1;0<=E;E--){var M=d[E],j=M.instance,V=M.currentTarget;if(M=M.listener,j!==A&&m.isPropagationStopped())break t;A=M,m.currentTarget=V;try{A(m)}catch(it){_m(it)}m.currentTarget=null,A=j}else for(E=0;E<d.length;E++){if(M=d[E],j=M.instance,V=M.currentTarget,M=M.listener,j!==A&&m.isPropagationStopped())break t;A=M,m.currentTarget=V;try{A(m)}catch(it){_m(it)}m.currentTarget=null,A=j}}}}function Zt(s,a){var u=a[ao];u===void 0&&(u=a[ao]=new Set);var d=s+"__bubble";u.has(d)||(iC(a,s,2,!1),u.add(d))}function W0(s,a,u){var d=0;a&&(d|=4),iC(u,s,d,a)}var Fm="_reactListening"+Math.random().toString(36).slice(2);function K0(s){if(!s[Fm]){s[Fm]=!0,mi.forEach(function(u){u!=="selectionchange"&&(S2.has(u)||W0(u,!1,s),W0(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Fm]||(a[Fm]=!0,W0("selectionchange",!1,a))}}function iC(s,a,u,d){switch(TC(a)){case 2:var m=W2;break;case 8:m=K2;break;default:m=cA}u=m.bind(null,a,u,s),m=void 0,!bv||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),d?m!==void 0?s.addEventListener(a,u,{capture:!0,passive:m}):s.addEventListener(a,u,!0):m!==void 0?s.addEventListener(a,u,{passive:m}):s.addEventListener(a,u,!1)}function Q0(s,a,u,d,m){var A=d;if((a&1)===0&&(a&2)===0&&d!==null)t:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var M=d.stateNode.containerInfo;if(M===m)break;if(E===4)for(E=d.return;E!==null;){var j=E.tag;if((j===3||j===4)&&E.stateNode.containerInfo===m)return;E=E.return}for(;M!==null;){if(E=Fa(M),E===null)return;if(j=E.tag,j===5||j===6||j===26||j===27){d=A=E;continue t}M=M.parentNode}}d=d.return}c1(function(){var V=A,it=mv(u),ot=[];t:{var Y=j1.get(s);if(Y!==void 0){var W=Jg,Lt=s;switch(s){case"keypress":if(Qg(u)===0)break t;case"keydown":case"keyup":W=mO;break;case"focusin":Lt="focus",W=Sv;break;case"focusout":Lt="blur",W=Sv;break;case"beforeblur":case"afterblur":W=Sv;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=f1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=sO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=vO;break;case L1:case P1:case z1:W=lO;break;case I1:W=wO;break;case"scroll":case"scrollend":W=nO;break;case"wheel":W=xO;break;case"copy":case"cut":case"paste":W=uO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=g1;break;case"toggle":case"beforetoggle":W=_O}var Mt=(a&4)!==0,ve=!Mt&&(s==="scroll"||s==="scrollend"),U=Mt?Y!==null?Y+"Capture":null:Y;Mt=[];for(var H=V,q;H!==null;){var lt=H;if(q=lt.stateNode,lt=lt.tag,lt!==5&&lt!==26&&lt!==27||q===null||U===null||(lt=Ad(H,U),lt!=null&&Mt.push(nf(H,lt,q))),ve)break;H=H.return}0<Mt.length&&(Y=new W(Y,Lt,null,u,it),ot.push({event:Y,listeners:Mt}))}}if((a&7)===0){t:{if(Y=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",Y&&u!==gv&&(Lt=u.relatedTarget||u.fromElement)&&(Fa(Lt)||Lt[Ns]))break t;if((W||Y)&&(Y=it.window===it?it:(Y=it.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(Lt=u.relatedTarget||u.toElement,W=V,Lt=Lt?Fa(Lt):null,Lt!==null&&(ve=l(Lt),Mt=Lt.tag,Lt!==ve||Mt!==5&&Mt!==27&&Mt!==6)&&(Lt=null)):(W=null,Lt=V),W!==Lt)){if(Mt=f1,lt="onMouseLeave",U="onMouseEnter",H="mouse",(s==="pointerout"||s==="pointerover")&&(Mt=g1,lt="onPointerLeave",U="onPointerEnter",H="pointer"),ve=W==null?Y:jt(W),q=Lt==null?Y:jt(Lt),Y=new Mt(lt,H+"leave",W,u,it),Y.target=ve,Y.relatedTarget=q,lt=null,Fa(it)===V&&(Mt=new Mt(U,H+"enter",Lt,u,it),Mt.target=q,Mt.relatedTarget=ve,lt=Mt),ve=lt,W&&Lt)e:{for(Mt=W,U=Lt,H=0,q=Mt;q;q=Cc(q))H++;for(q=0,lt=U;lt;lt=Cc(lt))q++;for(;0<H-q;)Mt=Cc(Mt),H--;for(;0<q-H;)U=Cc(U),q--;for(;H--;){if(Mt===U||U!==null&&Mt===U.alternate)break e;Mt=Cc(Mt),U=Cc(U)}Mt=null}else Mt=null;W!==null&&sC(ot,Y,W,Mt,!1),Lt!==null&&ve!==null&&sC(ot,ve,Lt,Mt,!0)}}t:{if(Y=V?jt(V):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var xt=x1;else if(w1(Y))if(E1)xt=PO;else{xt=OO;var Wt=NO}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?V&&pv(V.elementType)&&(xt=x1):xt=LO;if(xt&&(xt=xt(s,V))){S1(ot,xt,u,it);break t}Wt&&Wt(s,Y,V),s==="focusout"&&V&&Y.type==="number"&&V.memoizedProps.value!=null&&fv(Y,"number",Y.value)}switch(Wt=V?jt(V):window,s){case"focusin":(w1(Wt)||Wt.contentEditable==="true")&&(nc=Wt,Rv=V,Rd=null);break;case"focusout":Rd=Rv=nc=null;break;case"mousedown":Dv=!0;break;case"contextmenu":case"mouseup":case"dragend":Dv=!1,N1(ot,u,it);break;case"selectionchange":if(IO)break;case"keydown":case"keyup":N1(ot,u,it)}var Tt;if(Ev)t:{switch(s){case"compositionstart":var Ot="onCompositionStart";break t;case"compositionend":Ot="onCompositionEnd";break t;case"compositionupdate":Ot="onCompositionUpdate";break t}Ot=void 0}else ec?v1(s,u)&&(Ot="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Ot="onCompositionStart");Ot&&(m1&&u.locale!=="ko"&&(ec||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&ec&&(Tt=h1()):(Ua=it,vv="value"in Ua?Ua.value:Ua.textContent,ec=!0)),Wt=Bm(V,Ot),0<Wt.length&&(Ot=new p1(Ot,s,null,u,it),ot.push({event:Ot,listeners:Wt}),Tt?Ot.data=Tt:(Tt=A1(u),Tt!==null&&(Ot.data=Tt)))),(Tt=TO?RO(s,u):DO(s,u))&&(Ot=Bm(V,"onBeforeInput"),0<Ot.length&&(Wt=new p1("onBeforeInput","beforeinput",null,u,it),ot.push({event:Wt,listeners:Ot}),Wt.data=Tt)),v2(ot,s,V,u,it)}nC(ot,a)})}function nf(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Bm(s,a){for(var u=a+"Capture",d=[];s!==null;){var m=s,A=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||A===null||(m=Ad(s,u),m!=null&&d.unshift(nf(s,m,A)),m=Ad(s,a),m!=null&&d.push(nf(s,m,A))),s.tag===3)return d;s=s.return}return[]}function Cc(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function sC(s,a,u,d,m){for(var A=a._reactName,E=[];u!==null&&u!==d;){var M=u,j=M.alternate,V=M.stateNode;if(M=M.tag,j!==null&&j===d)break;M!==5&&M!==26&&M!==27||V===null||(j=V,m?(V=Ad(u,A),V!=null&&E.unshift(nf(u,V,j))):m||(V=Ad(u,A),V!=null&&E.push(nf(u,V,j)))),u=u.return}E.length!==0&&s.push({event:a,listeners:E})}var x2=/\r\n?/g,E2=/\u0000|\uFFFD/g;function rC(s){return(typeof s=="string"?s:""+s).replace(x2,`
`).replace(E2,"")}function aC(s,a){return a=rC(a),rC(s)===a}function Hm(){}function be(s,a,u,d,m,A){switch(u){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||Zu(s,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&Zu(s,""+d);break;case"className":Yg(s,"class",d);break;case"tabIndex":Yg(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Yg(s,u,d);break;case"style":o1(s,d,A);break;case"data":if(a!=="object"){Yg(s,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=Wg(""+d),s.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(u==="formAction"?(a!=="input"&&be(s,a,"name",m.name,m,null),be(s,a,"formEncType",m.formEncType,m,null),be(s,a,"formMethod",m.formMethod,m,null),be(s,a,"formTarget",m.formTarget,m,null)):(be(s,a,"encType",m.encType,m,null),be(s,a,"method",m.method,m,null),be(s,a,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=Wg(""+d),s.setAttribute(u,d);break;case"onClick":d!=null&&(s.onclick=Hm);break;case"onScroll":d!=null&&Zt("scroll",s);break;case"onScrollEnd":d!=null&&Zt("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(n(60));s.innerHTML=u}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}u=Wg(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""+d):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":d===!0?s.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,d):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(u,d):s.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(u):s.setAttribute(u,d);break;case"popover":Zt("beforetoggle",s),Zt("toggle",s),Gg(s,"popover",d);break;case"xlinkActuate":Pr(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Pr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Pr(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Pr(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Pr(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Pr(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Pr(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Pr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Pr(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Gg(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=tO.get(u)||u,Gg(s,u,d))}}function Z0(s,a,u,d,m,A){switch(u){case"style":o1(s,d,A);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(n(60));s.innerHTML=u}}break;case"children":typeof d=="string"?Zu(s,d):(typeof d=="number"||typeof d=="bigint")&&Zu(s,""+d);break;case"onScroll":d!=null&&Zt("scroll",s);break;case"onScrollEnd":d!=null&&Zt("scrollend",s);break;case"onClick":d!=null&&(s.onclick=Hm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yi.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),a=u.slice(2,m?u.length-7:void 0),A=s[bn]||null,A=A!=null?A[u]:null,typeof A=="function"&&s.removeEventListener(a,A,m),typeof d=="function")){typeof A!="function"&&A!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,d,m);break t}u in s?s[u]=d:d===!0?s.setAttribute(u,""):Gg(s,u,d)}}}function Mn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Zt("error",s),Zt("load",s);var d=!1,m=!1,A;for(A in u)if(u.hasOwnProperty(A)){var E=u[A];if(E!=null)switch(A){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:be(s,a,A,E,u,null)}}m&&be(s,a,"srcSet",u.srcSet,u,null),d&&be(s,a,"src",u.src,u,null);return;case"input":Zt("invalid",s);var M=A=E=m=null,j=null,V=null;for(d in u)if(u.hasOwnProperty(d)){var it=u[d];if(it!=null)switch(d){case"name":m=it;break;case"type":E=it;break;case"checked":j=it;break;case"defaultChecked":V=it;break;case"value":A=it;break;case"defaultValue":M=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,a));break;default:be(s,a,d,it,u,null)}}s1(s,A,M,j,V,E,m,!1),Xg(s);return;case"select":Zt("invalid",s),d=E=A=null;for(m in u)if(u.hasOwnProperty(m)&&(M=u[m],M!=null))switch(m){case"value":A=M;break;case"defaultValue":E=M;break;case"multiple":d=M;default:be(s,a,m,M,u,null)}a=A,u=E,s.multiple=!!d,a!=null?Qu(s,!!d,a,!1):u!=null&&Qu(s,!!d,u,!0);return;case"textarea":Zt("invalid",s),A=m=d=null;for(E in u)if(u.hasOwnProperty(E)&&(M=u[E],M!=null))switch(E){case"value":d=M;break;case"defaultValue":m=M;break;case"children":A=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:be(s,a,E,M,u,null)}a1(s,d,m,A),Xg(s);return;case"option":for(j in u)if(u.hasOwnProperty(j)&&(d=u[j],d!=null))switch(j){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:be(s,a,j,d,u,null)}return;case"dialog":Zt("beforetoggle",s),Zt("toggle",s),Zt("cancel",s),Zt("close",s);break;case"iframe":case"object":Zt("load",s);break;case"video":case"audio":for(d=0;d<ef.length;d++)Zt(ef[d],s);break;case"image":Zt("error",s),Zt("load",s);break;case"details":Zt("toggle",s);break;case"embed":case"source":case"link":Zt("error",s),Zt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in u)if(u.hasOwnProperty(V)&&(d=u[V],d!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,a));default:be(s,a,V,d,u,null)}return;default:if(pv(a)){for(it in u)u.hasOwnProperty(it)&&(d=u[it],d!==void 0&&Z0(s,a,it,d,u,void 0));return}}for(M in u)u.hasOwnProperty(M)&&(d=u[M],d!=null&&be(s,a,M,d,u,null))}function _2(s,a,u,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,A=null,E=null,M=null,j=null,V=null,it=null;for(W in u){var ot=u[W];if(u.hasOwnProperty(W)&&ot!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":j=ot;default:d.hasOwnProperty(W)||be(s,a,W,null,d,ot)}}for(var Y in d){var W=d[Y];if(ot=u[Y],d.hasOwnProperty(Y)&&(W!=null||ot!=null))switch(Y){case"type":A=W;break;case"name":m=W;break;case"checked":V=W;break;case"defaultChecked":it=W;break;case"value":E=W;break;case"defaultValue":M=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(137,a));break;default:W!==ot&&be(s,a,Y,W,d,ot)}}dv(s,E,M,j,V,it,A,m);return;case"select":W=E=M=Y=null;for(A in u)if(j=u[A],u.hasOwnProperty(A)&&j!=null)switch(A){case"value":break;case"multiple":W=j;default:d.hasOwnProperty(A)||be(s,a,A,null,d,j)}for(m in d)if(A=d[m],j=u[m],d.hasOwnProperty(m)&&(A!=null||j!=null))switch(m){case"value":Y=A;break;case"defaultValue":M=A;break;case"multiple":E=A;default:A!==j&&be(s,a,m,A,d,j)}a=M,u=E,d=W,Y!=null?Qu(s,!!u,Y,!1):!!d!=!!u&&(a!=null?Qu(s,!!u,a,!0):Qu(s,!!u,u?[]:"",!1));return;case"textarea":W=Y=null;for(M in u)if(m=u[M],u.hasOwnProperty(M)&&m!=null&&!d.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:be(s,a,M,null,d,m)}for(E in d)if(m=d[E],A=u[E],d.hasOwnProperty(E)&&(m!=null||A!=null))switch(E){case"value":Y=m;break;case"defaultValue":W=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(n(91));break;default:m!==A&&be(s,a,E,m,d,A)}r1(s,Y,W);return;case"option":for(var Lt in u)if(Y=u[Lt],u.hasOwnProperty(Lt)&&Y!=null&&!d.hasOwnProperty(Lt))switch(Lt){case"selected":s.selected=!1;break;default:be(s,a,Lt,null,d,Y)}for(j in d)if(Y=d[j],W=u[j],d.hasOwnProperty(j)&&Y!==W&&(Y!=null||W!=null))switch(j){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:be(s,a,j,Y,d,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mt in u)Y=u[Mt],u.hasOwnProperty(Mt)&&Y!=null&&!d.hasOwnProperty(Mt)&&be(s,a,Mt,null,d,Y);for(V in d)if(Y=d[V],W=u[V],d.hasOwnProperty(V)&&Y!==W&&(Y!=null||W!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(137,a));break;default:be(s,a,V,Y,d,W)}return;default:if(pv(a)){for(var ve in u)Y=u[ve],u.hasOwnProperty(ve)&&Y!==void 0&&!d.hasOwnProperty(ve)&&Z0(s,a,ve,void 0,d,Y);for(it in d)Y=d[it],W=u[it],!d.hasOwnProperty(it)||Y===W||Y===void 0&&W===void 0||Z0(s,a,it,Y,d,W);return}}for(var U in u)Y=u[U],u.hasOwnProperty(U)&&Y!=null&&!d.hasOwnProperty(U)&&be(s,a,U,null,d,Y);for(ot in d)Y=d[ot],W=u[ot],!d.hasOwnProperty(ot)||Y===W||Y==null&&W==null||be(s,a,ot,Y,d,W)}var J0=null,tA=null;function Um(s){return s.nodeType===9?s:s.ownerDocument}function lC(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oC(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function eA(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var nA=null;function C2(){var s=window.event;return s&&s.type==="popstate"?s===nA?!1:(nA=s,!0):(nA=null,!1)}var uC=typeof setTimeout=="function"?setTimeout:void 0,T2=typeof clearTimeout=="function"?clearTimeout:void 0,cC=typeof Promise=="function"?Promise:void 0,R2=typeof queueMicrotask=="function"?queueMicrotask:typeof cC<"u"?function(s){return cC.resolve(null).then(s).catch(D2)}:uC;function D2(s){setTimeout(function(){throw s})}function sl(s){return s==="head"}function hC(s,a){var u=a,d=0,m=0;do{var A=u.nextSibling;if(s.removeChild(u),A&&A.nodeType===8)if(u=A.data,u==="/$"){if(0<d&&8>d){u=d;var E=s.ownerDocument;if(u&1&&sf(E.documentElement),u&2&&sf(E.body),u&4)for(u=E.head,sf(u),E=u.firstChild;E;){var M=E.nextSibling,j=E.nodeName;E[Lr]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=M}}if(m===0){s.removeChild(A),df(a);return}m--}else u==="$"||u==="$?"||u==="$!"?m++:d=u.charCodeAt(0)-48;else d=0;u=A}while(u);df(a)}function iA(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":iA(u),Wu(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function k2(s,a,u,d){for(;s.nodeType===1;){var m=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[Lr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(A=s.getAttribute("rel"),A==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(A!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(A=s.getAttribute("src"),(A!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&A&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var A=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===A)return s}else return s;if(s=zs(s.nextSibling),s===null)break}return null}function M2(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=zs(s.nextSibling),s===null))return null;return s}function sA(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function N2(s,a){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")a();else{var d=function(){a(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function zs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return s}var rA=null;function dC(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}function fC(s,a,u){switch(a=Um(u),s){case"html":if(s=a.documentElement,!s)throw Error(n(452));return s;case"head":if(s=a.head,!s)throw Error(n(453));return s;case"body":if(s=a.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function sf(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Wu(s)}var ms=new Map,pC=new Set;function qm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Wr=G.d;G.d={f:O2,r:L2,D:P2,C:z2,L:I2,m:j2,X:B2,S:F2,M:H2};function O2(){var s=Wr.f(),a=Lm();return s||a}function L2(s){var a=Ba(s);a!==null&&a.tag===5&&a.type==="form"?LE(a):Wr.r(s)}var Tc=typeof document>"u"?null:document;function gC(s,a,u){var d=Tc;if(d&&typeof a=="string"&&a){var m=us(a);m='link[rel="'+s+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),pC.has(m)||(pC.add(m),s={rel:s,crossOrigin:u,href:a},d.querySelector(m)===null&&(a=d.createElement("link"),Mn(a,"link",s),Xt(a),d.head.appendChild(a)))}}function P2(s){Wr.D(s),gC("dns-prefetch",s,null)}function z2(s,a){Wr.C(s,a),gC("preconnect",s,a)}function I2(s,a,u){Wr.L(s,a,u);var d=Tc;if(d&&s&&a){var m='link[rel="preload"][as="'+us(a)+'"]';a==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+us(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+us(u.imageSizes)+'"]')):m+='[href="'+us(s)+'"]';var A=m;switch(a){case"style":A=Rc(s);break;case"script":A=Dc(s)}ms.has(A)||(s=g({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),ms.set(A,s),d.querySelector(m)!==null||a==="style"&&d.querySelector(rf(A))||a==="script"&&d.querySelector(af(A))||(a=d.createElement("link"),Mn(a,"link",s),Xt(a),d.head.appendChild(a)))}}function j2(s,a){Wr.m(s,a);var u=Tc;if(u&&s){var d=a&&typeof a.as=="string"?a.as:"script",m='link[rel="modulepreload"][as="'+us(d)+'"][href="'+us(s)+'"]',A=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Dc(s)}if(!ms.has(A)&&(s=g({rel:"modulepreload",href:s},a),ms.set(A,s),u.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(af(A)))return}d=u.createElement("link"),Mn(d,"link",s),Xt(d),u.head.appendChild(d)}}}function F2(s,a,u){Wr.S(s,a,u);var d=Tc;if(d&&s){var m=he(d).hoistableStyles,A=Rc(s);a=a||"default";var E=m.get(A);if(!E){var M={loading:0,preload:null};if(E=d.querySelector(rf(A)))M.loading=5;else{s=g({rel:"stylesheet",href:s,"data-precedence":a},u),(u=ms.get(A))&&aA(s,u);var j=E=d.createElement("link");Xt(j),Mn(j,"link",s),j._p=new Promise(function(V,it){j.onload=V,j.onerror=it}),j.addEventListener("load",function(){M.loading|=1}),j.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Vm(E,a,d)}E={type:"stylesheet",instance:E,count:1,state:M},m.set(A,E)}}}function B2(s,a){Wr.X(s,a);var u=Tc;if(u&&s){var d=he(u).hoistableScripts,m=Dc(s),A=d.get(m);A||(A=u.querySelector(af(m)),A||(s=g({src:s,async:!0},a),(a=ms.get(m))&&lA(s,a),A=u.createElement("script"),Xt(A),Mn(A,"link",s),u.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},d.set(m,A))}}function H2(s,a){Wr.M(s,a);var u=Tc;if(u&&s){var d=he(u).hoistableScripts,m=Dc(s),A=d.get(m);A||(A=u.querySelector(af(m)),A||(s=g({src:s,async:!0,type:"module"},a),(a=ms.get(m))&&lA(s,a),A=u.createElement("script"),Xt(A),Mn(A,"link",s),u.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},d.set(m,A))}}function mC(s,a,u,d){var m=(m=st.current)?qm(m):null;if(!m)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Rc(u.href),u=he(m).hoistableStyles,d=u.get(a),d||(d={type:"style",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Rc(u.href);var A=he(m).hoistableStyles,E=A.get(s);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(s,E),(A=m.querySelector(rf(s)))&&!A._p&&(E.instance=A,E.state.loading=5),ms.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ms.set(s,u),A||U2(m,s,u,E.state))),a&&d===null)throw Error(n(528,""));return E}if(a&&d!==null)throw Error(n(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Dc(u),u=he(m).hoistableScripts,d=u.get(a),d||(d={type:"script",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function Rc(s){return'href="'+us(s)+'"'}function rf(s){return'link[rel="stylesheet"]['+s+"]"}function yC(s){return g({},s,{"data-precedence":s.precedence,precedence:null})}function U2(s,a,u,d){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=s.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),Mn(a,"link",u),Xt(a),s.head.appendChild(a))}function Dc(s){return'[src="'+us(s)+'"]'}function af(s){return"script[async]"+s}function bC(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var d=s.querySelector('style[data-href~="'+us(u.href)+'"]');if(d)return a.instance=d,Xt(d),d;var m=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),Xt(d),Mn(d,"style",m),Vm(d,u.precedence,s),a.instance=d;case"stylesheet":m=Rc(u.href);var A=s.querySelector(rf(m));if(A)return a.state.loading|=4,a.instance=A,Xt(A),A;d=yC(u),(m=ms.get(m))&&aA(d,m),A=(s.ownerDocument||s).createElement("link"),Xt(A);var E=A;return E._p=new Promise(function(M,j){E.onload=M,E.onerror=j}),Mn(A,"link",d),a.state.loading|=4,Vm(A,u.precedence,s),a.instance=A;case"script":return A=Dc(u.src),(m=s.querySelector(af(A)))?(a.instance=m,Xt(m),m):(d=u,(m=ms.get(A))&&(d=g({},u),lA(d,m)),s=s.ownerDocument||s,m=s.createElement("script"),Xt(m),Mn(m,"link",d),s.head.appendChild(m),a.instance=m);case"void":return null;default:throw Error(n(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,Vm(d,u.precedence,s));return a.instance}function Vm(s,a,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,A=m,E=0;E<d.length;E++){var M=d[E];if(M.dataset.precedence===a)A=M;else if(A!==m)break}A?A.parentNode.insertBefore(s,A.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function aA(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function lA(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Gm=null;function vC(s,a,u){if(Gm===null){var d=new Map,m=Gm=new Map;m.set(u,d)}else m=Gm,d=m.get(u),d||(d=new Map,m.set(u,d));if(d.has(s))return d;for(d.set(s,null),u=u.getElementsByTagName(s),m=0;m<u.length;m++){var A=u[m];if(!(A[Lr]||A[cn]||s==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var E=A.getAttribute(a)||"";E=s+E;var M=d.get(E);M?M.push(A):d.set(E,[A])}}return d}function AC(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function q2(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function wC(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var lf=null;function V2(){}function G2(s,a,u){if(lf===null)throw Error(n(475));var d=lf;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=Rc(u.href),A=s.querySelector(rf(m));if(A){s=A._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(d.count++,d=Ym.bind(d),s.then(d,d)),a.state.loading|=4,a.instance=A,Xt(A);return}A=s.ownerDocument||s,u=yC(u),(m=ms.get(m))&&aA(u,m),A=A.createElement("link"),Xt(A);var E=A;E._p=new Promise(function(M,j){E.onload=M,E.onerror=j}),Mn(A,"link",u),a.instance=A}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=Ym.bind(d),s.addEventListener("load",a),s.addEventListener("error",a))}}function Y2(){if(lf===null)throw Error(n(475));var s=lf;return s.stylesheets&&s.count===0&&oA(s,s.stylesheets),0<s.count?function(a){var u=setTimeout(function(){if(s.stylesheets&&oA(s,s.stylesheets),s.unsuspend){var d=s.unsuspend;s.unsuspend=null,d()}},6e4);return s.unsuspend=a,function(){s.unsuspend=null,clearTimeout(u)}}:null}function Ym(){if(this.count--,this.count===0){if(this.stylesheets)oA(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Xm=null;function oA(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Xm=new Map,a.forEach(X2,s),Xm=null,Ym.call(s))}function X2(s,a){if(!(a.state.loading&4)){var u=Xm.get(s);if(u)var d=u.get(null);else{u=new Map,Xm.set(s,u);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<m.length;A++){var E=m[A];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(u.set(E.dataset.precedence,E),d=E)}d&&u.set(null,d)}m=a.instance,E=m.getAttribute("data-precedence"),A=u.get(E)||d,A===d&&u.set(null,m),u.set(E,m),this.count++,d=Ym.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),A?A.parentNode.insertBefore(m,A.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),a.state.loading|=4}}var of={$$typeof:N,Provider:null,Consumer:null,_currentValue:bt,_currentValue2:bt,_threadCount:0};function $2(s,a,u,d,m,A,E,M){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=md(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=md(0),this.hiddenUpdates=md(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=A,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function SC(s,a,u,d,m,A,E,M,j,V,it,ot){return s=new $2(s,a,u,E,M,j,V,ot),a=1,A===!0&&(a|=24),A=Li(3,null,null,a),s.current=A,A.stateNode=s,a=qv(),a.refCount++,s.pooledCache=a,a.refCount++,A.memoizedState={element:d,isDehydrated:u,cache:a},Xv(A),s}function xC(s){return s?(s=ac,s):ac}function EC(s,a,u,d,m,A){m=xC(m),d.context===null?d.context=m:d.pendingContext=m,d=Ga(a),d.payload={element:u},A=A===void 0?null:A,A!==null&&(d.callback=A),u=Ya(s,d,a),u!==null&&(Fi(u,s,a),Id(u,s,a))}function _C(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function uA(s,a){_C(s,a),(s=s.alternate)&&_C(s,a)}function CC(s){if(s.tag===13){var a=rc(s,67108864);a!==null&&Fi(a,s,67108864),uA(s,67108864)}}var $m=!0;function W2(s,a,u,d){var m=F.T;F.T=null;var A=G.p;try{G.p=2,cA(s,a,u,d)}finally{G.p=A,F.T=m}}function K2(s,a,u,d){var m=F.T;F.T=null;var A=G.p;try{G.p=8,cA(s,a,u,d)}finally{G.p=A,F.T=m}}function cA(s,a,u,d){if($m){var m=hA(d);if(m===null)Q0(s,a,d,Wm,u),RC(s,d);else if(Z2(m,s,a,u,d))d.stopPropagation();else if(RC(s,d),a&4&&-1<Q2.indexOf(s)){for(;m!==null;){var A=Ba(m);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var E=ei(A.pendingLanes);if(E!==0){var M=A;for(M.pendingLanes|=2,M.entangledLanes|=2;E;){var j=1<<31-kt(E);M.entanglements[1]|=j,E&=~j}rr(A),(de&6)===0&&(Nm=He()+500,tf(0))}}break;case 13:M=rc(A,2),M!==null&&Fi(M,A,2),Lm(),uA(A,2)}if(A=hA(d),A===null&&Q0(s,a,d,Wm,u),A===m)break;m=A}m!==null&&d.stopPropagation()}else Q0(s,a,d,null,u)}}function hA(s){return s=mv(s),dA(s)}var Wm=null;function dA(s){if(Wm=null,s=Fa(s),s!==null){var a=l(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=o(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Wm=s,null}function TC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ye()){case Ds:return 2;case Nr:return 8;case pi:case Ia:return 32;case Or:return 268435456;default:return 32}default:return 32}}var fA=!1,rl=null,al=null,ll=null,uf=new Map,cf=new Map,ol=[],Q2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function RC(s,a){switch(s){case"focusin":case"focusout":rl=null;break;case"dragenter":case"dragleave":al=null;break;case"mouseover":case"mouseout":ll=null;break;case"pointerover":case"pointerout":uf.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":cf.delete(a.pointerId)}}function hf(s,a,u,d,m,A){return s===null||s.nativeEvent!==A?(s={blockedOn:a,domEventName:u,eventSystemFlags:d,nativeEvent:A,targetContainers:[m]},a!==null&&(a=Ba(a),a!==null&&CC(a)),s):(s.eventSystemFlags|=d,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function Z2(s,a,u,d,m){switch(a){case"focusin":return rl=hf(rl,s,a,u,d,m),!0;case"dragenter":return al=hf(al,s,a,u,d,m),!0;case"mouseover":return ll=hf(ll,s,a,u,d,m),!0;case"pointerover":var A=m.pointerId;return uf.set(A,hf(uf.get(A)||null,s,a,u,d,m)),!0;case"gotpointercapture":return A=m.pointerId,cf.set(A,hf(cf.get(A)||null,s,a,u,d,m)),!0}return!1}function DC(s){var a=Fa(s.target);if(a!==null){var u=l(a);if(u!==null){if(a=u.tag,a===13){if(a=o(u),a!==null){s.blockedOn=a,yd(s.priority,function(){if(u.tag===13){var d=ji();d=Ee(d);var m=rc(u,d);m!==null&&Fi(m,u,d),uA(u,d)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Km(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=hA(s.nativeEvent);if(u===null){u=s.nativeEvent;var d=new u.constructor(u.type,u);gv=d,u.target.dispatchEvent(d),gv=null}else return a=Ba(u),a!==null&&CC(a),s.blockedOn=u,!1;a.shift()}return!0}function kC(s,a,u){Km(s)&&u.delete(a)}function J2(){fA=!1,rl!==null&&Km(rl)&&(rl=null),al!==null&&Km(al)&&(al=null),ll!==null&&Km(ll)&&(ll=null),uf.forEach(kC),cf.forEach(kC)}function Qm(s,a){s.blockedOn===a&&(s.blockedOn=null,fA||(fA=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,J2)))}var Zm=null;function MC(s){Zm!==s&&(Zm=s,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Zm===s&&(Zm=null);for(var a=0;a<s.length;a+=3){var u=s[a],d=s[a+1],m=s[a+2];if(typeof d!="function"){if(dA(d||u)===null)continue;break}var A=Ba(u);A!==null&&(s.splice(a,3),a-=3,d0(A,{pending:!0,data:m,method:u.method,action:d},d,m))}}))}function df(s){function a(j){return Qm(j,s)}rl!==null&&Qm(rl,s),al!==null&&Qm(al,s),ll!==null&&Qm(ll,s),uf.forEach(a),cf.forEach(a);for(var u=0;u<ol.length;u++){var d=ol[u];d.blockedOn===s&&(d.blockedOn=null)}for(;0<ol.length&&(u=ol[0],u.blockedOn===null);)DC(u),u.blockedOn===null&&ol.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var m=u[d],A=u[d+1],E=m[bn]||null;if(typeof A=="function")E||MC(u);else if(E){var M=null;if(A&&A.hasAttribute("formAction")){if(m=A,E=A[bn]||null)M=E.formAction;else if(dA(m)!==null)continue}else M=E.action;typeof M=="function"?u[d+1]=M:(u.splice(d,3),d-=3),MC(u)}}}function pA(s){this._internalRoot=s}Jm.prototype.render=pA.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(n(409));var u=a.current,d=ji();EC(u,d,s,a,null,null)},Jm.prototype.unmount=pA.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;EC(s.current,2,null,s,null,null),Lm(),a[Ns]=null}};function Jm(s){this._internalRoot=s}Jm.prototype.unstable_scheduleHydration=function(s){if(s){var a=qg();s={blockedOn:null,target:s,priority:a};for(var u=0;u<ol.length&&a!==0&&a<ol[u].priority;u++);ol.splice(u,0,s),u===0&&DC(s)}};var NC=t.version;if(NC!=="19.1.0")throw Error(n(527,NC,"19.1.0"));G.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=h(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var tL={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ty=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ty.isDisabled&&ty.supportsFiber)try{nt=ty.inject(tL),ft=ty}catch{}}return pf.createRoot=function(s,a){if(!r(s))throw Error(n(299));var u=!1,d="",m=$E,A=WE,E=KE,M=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(M=a.unstable_transitionCallbacks)),a=SC(s,1,!1,null,null,u,d,m,A,E,M,null),s[Ns]=a.current,K0(s),new pA(a)},pf.hydrateRoot=function(s,a,u){if(!r(s))throw Error(n(299));var d=!1,m="",A=$E,E=WE,M=KE,j=null,V=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(A=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(j=u.unstable_transitionCallbacks),u.formState!==void 0&&(V=u.formState)),a=SC(s,1,!0,a,u??null,d,m,A,E,M,j,V),a.context=xC(null),u=a.current,d=ji(),d=Ee(d),m=Ga(d),m.callback=null,Ya(u,m,d),u=d,a.current.lanes=u,ja(a,u),rr(a),s[Ns]=a.current,K0(s),new Jm(a)},pf.version="19.1.0",pf}var qC;function pL(){if(qC)return bA.exports;qC=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),bA.exports=fL(),bA.exports}var gL=pL();const mL=Cg(gL);let SA=null;function Pa(){return yL()?(!SA&&window.acquireVsCodeApi&&(SA=window.acquireVsCodeApi()),SA):null}function yL(){return typeof window.acquireVsCodeApi=="function"||typeof window.acquireVsCodeApi=="object"}const xA=Pa(),bL=({onLoginSuccess:i,onSwitchToRegister:t})=>{const[e,n]=et.useState(""),[r,l]=et.useState(""),[o,c]=et.useState(""),[h,p]=et.useState(null);et.useEffect(()=>{const b=v=>{const S=v.data;S.command==="loginResult"&&(S.success?i(S.user):p(S.error||"登录失败"))};return window.addEventListener("message",b),()=>window.removeEventListener("message",b)},[i]);const g=b=>{b.preventDefault(),p(null),xA==null||xA.postMessage({command:"login",name:e,email:r,password:o})},y=()=>{t()};return P.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:P.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md w-full max-w-md",children:[P.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"登录"}),h&&P.jsx("div",{className:"text-red-500 mb-4",children:h}),P.jsxs("form",{onSubmit:g,className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block mb-1",children:"姓名"}),P.jsx("input",{type:"text",value:e,onChange:b=>n(b.target.value),className:"w-full border px-3 py-2 rounded",placeholder:"请输入您的姓名",required:!0})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block mb-1",children:"邮箱"}),P.jsx("input",{type:"email",value:r,onChange:b=>l(b.target.value),className:"w-full border px-3 py-2 rounded",placeholder:"user@example.com",required:!0})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block mb-1",children:"密码"}),P.jsx("input",{type:"password",value:o,onChange:b=>c(b.target.value),className:"w-full border px-3 py-2 rounded",placeholder:"（任意输入均可）",required:!0})]}),P.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",children:"登录"})]}),P.jsxs("p",{className:"mt-4 text-center",children:["没有账号？"," ",P.jsx("button",{onClick:y,className:"text-green-600 underline",children:"注册"})]})]})})},EA=Pa();function vL({onRegisterSuccess:i,onSwitchToLogin:t}){const[e,n]=et.useState(""),[r,l]=et.useState(""),[o,c]=et.useState(""),[h,p]=et.useState(null);et.useEffect(()=>{const y=b=>{const v=b.data;v.command==="registerResult"&&(v.success?i(v.user):p(v.error||"注册失败"))};return window.addEventListener("message",y),()=>window.removeEventListener("message",y)},[i]);const g=y=>{y.preventDefault(),p(null),EA==null||EA.postMessage({command:"register",name:e,email:r,password:o})};return P.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:P.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md w-full max-w-md",children:[P.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"注册"}),h&&P.jsx("div",{className:"text-red-500 mb-4",children:h}),P.jsxs("form",{onSubmit:g,className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block mb-1",children:"姓名"}),P.jsx("input",{type:"text",value:e,onChange:y=>n(y.target.value),className:"w-full border px-3 py-2 rounded",required:!0})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block mb-1",children:"邮箱"}),P.jsx("input",{type:"email",value:r,onChange:y=>l(y.target.value),className:"w-full border px-3 py-2 rounded",required:!0})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block mb-1",children:"密码"}),P.jsx("input",{type:"password",className:"w-full border px-3 py-2 rounded",placeholder:"任意输入",required:!0})]}),P.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700",children:"注册"})]}),P.jsxs("p",{className:"mt-4 text-center",children:["已有账号？"," ",P.jsx("button",{onClick:t,className:"text-blue-600 underline",children:"去登录"})]})]})})}function ey({title:i,progress:t,ddl:e}){return P.jsxs("div",{className:"bg-white p-4 rounded-xl shadow w-full",children:[P.jsx("h2",{className:"text-xl font-semibold",children:i}),P.jsx("div",{className:"w-full bg-gray-200 h-2 rounded mt-2",children:P.jsx("div",{className:"bg-blue-600 h-2 rounded",style:{width:`${t}%`}})}),P.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:["DDL：",e]})]})}const Eo=Pa();function VC(){if(Eo==null)return P.jsxs("div",{className:"flex flex-col items-center space-y-10",children:[P.jsx("h1",{className:"text-4xl font-extrabold font-serif text-center mt-6",children:"📚 我的课程"}),P.jsxs("div",{className:"flex flex-col items-center space-y-6 w-full max-w-xl",children:[P.jsx(ey,{title:"数据结构",progress:75,ddl:"2025-04-20"}),P.jsx(ey,{title:"操作系统",progress:40,ddl:"2025-04-18"}),P.jsx(ey,{title:"AI导论",progress:90,ddl:"2025-04-22"})]}),P.jsxs("div",{className:"mt-auto pb-10 flex gap-4",children:[P.jsx("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-xl text-lg",children:"➕ 添加课程"}),P.jsx("button",{className:"bg-gray-300 px-6 py-3 rounded-xl text-lg",children:"📁 导入课程"})]})]});const[i,t]=et.useState([]);et.useEffect(()=>{const r=l=>{const o=l.data;switch(o.command){case"coursesData":t(o.courses);break;case"createCourseResult":o.success?Eo&&Eo.postMessage({command:"getCourses"}):console.error("创建课程失败：",o.error);break;default:console.warn("未知的消息:",o)}};return window.addEventListener("message",r),Eo&&Eo.postMessage({command:"getCourses"}),()=>window.removeEventListener("message",r)},[]);const e=()=>{Eo&&Eo.postMessage({command:"createCourse"})},n=()=>{console.log("导入课程功能暂未实现")};return P.jsxs("div",{className:"flex flex-col items-center space-y-10",children:[P.jsx("h1",{className:"text-4xl font-extrabold font-serif text-center mt-6",children:"📚 我的课程"}),P.jsx("div",{className:"flex flex-col items-center space-y-6 w-full max-w-xl",children:i.map((r,l)=>P.jsx(ey,{title:r.name,progress:r.progress!==void 0?r.progress:0,ddl:r.ddl||"2025-04-30"},l))}),P.jsxs("div",{className:"mt-auto pb-10 flex gap-4",children:[P.jsx("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-xl text-lg",onClick:e,children:"➕ 添加课程"}),P.jsx("button",{className:"bg-gray-300 px-6 py-3 rounded-xl text-lg",onClick:n,children:"📁 导入课程"})]})]})}function gf({title:i,count:t,files:e,onFileClick:n}){const[r,l]=et.useState(!1);return P.jsxs("div",{className:"bg-white p-4 rounded-xl shadow flex flex-col items-center w-48",children:[P.jsx("div",{className:"text-2xl",children:"📂"}),P.jsx("div",{className:"font-bold mt-2",children:i}),P.jsxs("div",{className:"text-sm text-gray-500",children:[t," 个文件"]}),P.jsx("button",{className:"mt-2 text-blue-600 hover:underline",onClick:()=>l(!r),children:r?"▲ 收起":"▼ 展开文件列表"}),r&&P.jsx("ul",{className:"text-sm mt-2 text-gray-700 list-disc list-inside",children:e.map((o,c)=>P.jsx("li",{children:n?P.jsx("button",{className:"text-blue-500 hover:underline",onClick:()=>n(o),children:o}):o},c))})]})}function AL({setSelectedFile:i}){const t=Pa();if(t==null){const[g,y]=et.useState("操作系统"),b=["操作系统","数据结构","AI导论"];return P.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[P.jsxs("div",{className:"mt-6 text-center",children:[P.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["📘 ",g]}),P.jsx("select",{value:g,onChange:v=>y(v.target.value),className:"border p-2 rounded-md",children:b.map(v=>P.jsx("option",{value:v,children:v},v))})]}),P.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mt-10",children:[P.jsx(gf,{title:"讲义",count:8,files:["Lecture1.pdf","Lecture2.pdf"]}),P.jsx(gf,{title:"作业",count:5,files:["HW1.docx","HW2.docx"]}),P.jsx(gf,{title:"资料",count:10,files:["Paper1.pdf"]}),P.jsx(gf,{title:"笔记",count:3,files:["Note1.md"]})]})]})}const[e,n]=et.useState([]),[r,l]=et.useState(""),[o,c]=et.useState([[],[],[],[]]);et.useEffect(()=>{window.addEventListener("message",g=>{const y=g.data;y.command==="coursesData"?(n(y.courses),y.courses.length>0&&(l(y.courses[0].name),t.postMessage({command:"getCourseFiles",courseName:y.courses[0].name}))):y.command==="courseFilesData"&&c(y.files)}),t.postMessage({command:"getCourses"})},[]);const h=g=>{l(g),t.postMessage({command:"getCourseFiles",courseName:g})},p=["讲义","作业","资料","笔记"];return P.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[P.jsxs("div",{className:"mt-6 text-center",children:[P.jsxs("h1",{className:"text-3xl font-bold mb-2",children:["📘 ",r]}),P.jsx("select",{value:r,onChange:g=>h(g.target.value),className:"border p-2 rounded-md",children:e.map(g=>P.jsx("option",{value:g.name,children:g.name},g.name))})]}),P.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mt-10",children:p.map((g,y)=>P.jsx(gf,{title:g,count:o[y].length,files:o[y],onFileClick:b=>i(`${r}/${g}/${b}`)},g))})]})}function HR(i){var t,e,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var r=i.length;for(t=0;t<r;t++)i[t]&&(e=HR(i[t]))&&(n&&(n+=" "),n+=e)}else for(e in i)i[e]&&(n&&(n+=" "),n+=e);return n}function Pb(){for(var i,t,e=0,n="",r=arguments.length;e<r;e++)(i=arguments[e])&&(t=HR(i))&&(n&&(n+=" "),n+=t);return n}var _A,GC;function wL(){if(GC)return _A;GC=1;const i=(h,p,g,y)=>{if(g==="length"||g==="prototype"||g==="arguments"||g==="caller")return;const b=Object.getOwnPropertyDescriptor(h,g),v=Object.getOwnPropertyDescriptor(p,g);!t(b,v)&&y||Object.defineProperty(h,g,v)},t=function(h,p){return h===void 0||h.configurable||h.writable===p.writable&&h.enumerable===p.enumerable&&h.configurable===p.configurable&&(h.writable||h.value===p.value)},e=(h,p)=>{const g=Object.getPrototypeOf(p);g!==Object.getPrototypeOf(h)&&Object.setPrototypeOf(h,g)},n=(h,p)=>`/* Wrapped ${h}*/
${p}`,r=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),l=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),o=(h,p,g)=>{const y=g===""?"":`with ${g.trim()}() `,b=n.bind(null,y,p.toString());Object.defineProperty(b,"name",l),Object.defineProperty(h,"toString",{...r,value:b})};return _A=(h,p,{ignoreNonConfigurable:g=!1}={})=>{const{name:y}=h;for(const b of Reflect.ownKeys(p))i(h,p,b,g);return e(h,p),o(h,p,y),h},_A}var _f={exports:{}},CA,YC;function SL(){return YC||(YC=1,CA=()=>{const i={};return i.promise=new Promise((t,e)=>{i.resolve=t,i.reject=e}),i}),CA}var ny=_f.exports,XC;function xL(){return XC||(XC=1,function(i,t){var e=ny&&ny.__awaiter||function(o,c,h,p){return new(h||(h=Promise))(function(g,y){function b(w){try{S(p.next(w))}catch(_){y(_)}}function v(w){try{S(p.throw(w))}catch(_){y(_)}}function S(w){w.done?g(w.value):new h(function(_){_(w.value)}).then(b,v)}S((p=p.apply(o,c||[])).next())})},n=ny&&ny.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(SL());function l(o,c="maxAge"){let h,p,g;const y=()=>e(this,void 0,void 0,function*(){if(h!==void 0)return;const S=w=>e(this,void 0,void 0,function*(){g=r.default();const _=w[1][c]-Date.now();if(_<=0){o.delete(w[0]),g.resolve();return}return h=w[0],p=setTimeout(()=>{o.delete(w[0]),g&&g.resolve()},_),typeof p.unref=="function"&&p.unref(),g.promise});try{for(const w of o)yield S(w)}catch{}h=void 0}),b=()=>{h=void 0,p!==void 0&&(clearTimeout(p),p=void 0),g!==void 0&&(g.reject(void 0),g=void 0)},v=o.set.bind(o);return o.set=(S,w)=>{o.has(S)&&o.delete(S);const _=v(S,w);return h&&h===S&&b(),y(),_},y(),o}t.default=l,i.exports=l,i.exports.default=l}(_f,_f.exports)),_f.exports}var TA,$C;function EL(){if($C)return TA;$C=1;const i=wL(),t=xL(),e=new WeakMap,n=new WeakMap,r=(l,{cacheKey:o,cache:c=new Map,maxAge:h}={})=>{typeof h=="number"&&t(c);const p=function(...g){const y=o?o(g):g[0],b=c.get(y);if(b)return b.data;const v=l.apply(this,g);return c.set(y,{data:v,maxAge:h?Date.now()+h:Number.POSITIVE_INFINITY}),v};return i(p,l,{ignoreNonConfigurable:!0}),n.set(p,c),p};return r.decorator=(l={})=>(o,c,h)=>{const p=o[c];if(typeof p!="function")throw new TypeError("The decorated value must be a function");delete h.value,delete h.writable,h.get=function(){if(!e.has(this)){const g=r(p,l);return e.set(this,g),g}return e.get(this)}},r.clear=l=>{const o=n.get(l);if(!o)throw new TypeError("Can't clear a function that was not memoized!");if(typeof o.clear!="function")throw new TypeError("The cache Map can't be cleared!");o.clear()},TA=r,TA}var _L=EL();const UR=Cg(_L);function CL(i){return typeof i=="string"}function TL(i,t,e){return e.indexOf(i)===t}function RL(i){return i.toLowerCase()===i}function WC(i){return i.indexOf(",")===-1?i:i.split(",")}function lw(i){if(!i)return i;if(i==="C"||i==="posix"||i==="POSIX")return"en-US";if(i.indexOf(".")!==-1){var t=i.split(".")[0],e=t===void 0?"":t;return lw(e)}if(i.indexOf("@")!==-1){var n=i.split("@")[0],e=n===void 0?"":n;return lw(e)}if(i.indexOf("-")===-1||!RL(i))return i;var r=i.split("-"),l=r[0],o=r[1],c=o===void 0?"":o;return"".concat(l,"-").concat(c.toUpperCase())}function DL(i){var t=i===void 0?{}:i,e=t.useFallbackLocale,n=e===void 0?!0:e,r=t.fallbackLocale,l=r===void 0?"en-US":r,o=[];if(typeof navigator<"u"){for(var c=navigator.languages||[],h=[],p=0,g=c;p<g.length;p++){var y=g[p];h=h.concat(WC(y))}var b=navigator.language,v=b&&WC(b);o=o.concat(h,v)}return n&&o.push(l),o.filter(CL).map(lw).filter(TL)}var kL=UR(DL,{cacheKey:JSON.stringify});function ML(i){return kL(i)[0]||null}var qR=UR(ML,{cacheKey:JSON.stringify});function za(i,t,e){return function(r,l){l===void 0&&(l=e);var o=i(r)+l;return t(o)}}function Tg(i){return function(e){return new Date(i(e).getTime()-1)}}function Rg(i,t){return function(n){return[i(n),t(n)]}}function ze(i){if(i instanceof Date)return i.getFullYear();if(typeof i=="number")return i;var t=parseInt(i,10);if(typeof i=="string"&&!isNaN(t))return t;throw new Error("Failed to get year from date: ".concat(i,"."))}function no(i){if(i instanceof Date)return i.getMonth();throw new Error("Failed to get month from date: ".concat(i,"."))}function zb(i){if(i instanceof Date)return i.getDate();throw new Error("Failed to get year from date: ".concat(i,"."))}function ld(i){var t=ze(i),e=t+(-t+1)%100,n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}var NL=za(ze,ld,-100),VR=za(ze,ld,100),ix=Tg(VR),OL=za(ze,ix,-100),GR=Rg(ld,ix);function io(i){var t=ze(i),e=t+(-t+1)%10,n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}var YR=za(ze,io,-10),sx=za(ze,io,10),Ib=Tg(sx),XR=za(ze,Ib,-10),$R=Rg(io,Ib);function od(i){var t=ze(i),e=new Date;return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}var WR=za(ze,od,-1),rx=za(ze,od,1),jb=Tg(rx),KR=za(ze,jb,-1),LL=Rg(od,jb);function ax(i,t){return function(n,r){r===void 0&&(r=t);var l=ze(n),o=no(n)+r,c=new Date;return c.setFullYear(l,o,1),c.setHours(0,0,0,0),i(c)}}function Vu(i){var t=ze(i),e=no(i),n=new Date;return n.setFullYear(t,e,1),n.setHours(0,0,0,0),n}var QR=ax(Vu,-1),lx=ax(Vu,1),Dg=Tg(lx),ZR=ax(Dg,-1),PL=Rg(Vu,Dg);function zL(i,t){return function(n,r){r===void 0&&(r=t);var l=ze(n),o=no(n),c=zb(n)+r,h=new Date;return h.setFullYear(l,o,c),h.setHours(0,0,0,0),i(h)}}function kg(i){var t=ze(i),e=no(i),n=zb(i),r=new Date;return r.setFullYear(t,e,n),r.setHours(0,0,0,0),r}var IL=zL(kg,1),ox=Tg(IL),jL=Rg(kg,ox);function JR(i){return zb(Dg(i))}var Fn={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},FL={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},ux=[0,1,2,3,4,5,6],RA=new Map;function BL(i){return function(e,n){var r=e||qR();RA.has(r)||RA.set(r,new Map);var l=RA.get(r);return l.has(i)||l.set(i,new Intl.DateTimeFormat(r||void 0,i).format),l.get(i)(n)}}function HL(i){var t=new Date(i);return new Date(t.setHours(12))}function Gu(i){return function(t,e){return BL(i)(t,HL(e))}}var UL={day:"numeric"},qL={day:"numeric",month:"long",year:"numeric"},VL={month:"long"},GL={month:"long",year:"numeric"},YL={weekday:"short"},XL={weekday:"long"},$L={year:"numeric"},WL=Gu(UL),KL=Gu(qL),QL=Gu(VL),tD=Gu(GL),ZL=Gu(YL),JL=Gu(XL),Fb=Gu($L),tP=ux[0],eP=ux[5],KC=ux[6];function Wf(i,t){t===void 0&&(t=Fn.ISO_8601);var e=i.getDay();switch(t){case Fn.ISO_8601:return(e+6)%7;case Fn.ISLAMIC:return(e+1)%7;case Fn.HEBREW:case Fn.GREGORY:return e;default:throw new Error("Unsupported calendar type.")}}function nP(i){var t=ld(i);return ze(t)}function iP(i){var t=io(i);return ze(t)}function ow(i,t){t===void 0&&(t=Fn.ISO_8601);var e=ze(i),n=no(i),r=i.getDate()-Wf(i,t);return new Date(e,n,r)}function sP(i,t){t===void 0&&(t=Fn.ISO_8601);var e=t===Fn.GREGORY?Fn.GREGORY:Fn.ISO_8601,n=ow(i,t),r=ze(i)+1,l,o;do l=new Date(r,0,e===Fn.ISO_8601?4:1),o=ow(l,t),r-=1;while(i<o);return Math.round((n.getTime()-o.getTime())/(864e5*7))+1}function zu(i,t){switch(i){case"century":return ld(t);case"decade":return io(t);case"year":return od(t);case"month":return Vu(t);case"day":return kg(t);default:throw new Error("Invalid rangeType: ".concat(i))}}function rP(i,t){switch(i){case"century":return NL(t);case"decade":return YR(t);case"year":return WR(t);case"month":return QR(t);default:throw new Error("Invalid rangeType: ".concat(i))}}function eD(i,t){switch(i){case"century":return VR(t);case"decade":return sx(t);case"year":return rx(t);case"month":return lx(t);default:throw new Error("Invalid rangeType: ".concat(i))}}function aP(i,t){switch(i){case"decade":return YR(t,-100);case"year":return WR(t,-10);case"month":return QR(t,-12);default:throw new Error("Invalid rangeType: ".concat(i))}}function lP(i,t){switch(i){case"decade":return sx(t,100);case"year":return rx(t,10);case"month":return lx(t,12);default:throw new Error("Invalid rangeType: ".concat(i))}}function nD(i,t){switch(i){case"century":return ix(t);case"decade":return Ib(t);case"year":return jb(t);case"month":return Dg(t);case"day":return ox(t);default:throw new Error("Invalid rangeType: ".concat(i))}}function oP(i,t){switch(i){case"century":return OL(t);case"decade":return XR(t);case"year":return KR(t);case"month":return ZR(t);default:throw new Error("Invalid rangeType: ".concat(i))}}function uP(i,t){switch(i){case"decade":return XR(t,-100);case"year":return KR(t,-10);case"month":return ZR(t,-12);default:throw new Error("Invalid rangeType: ".concat(i))}}function QC(i,t){switch(i){case"century":return GR(t);case"decade":return $R(t);case"year":return LL(t);case"month":return PL(t);case"day":return jL(t);default:throw new Error("Invalid rangeType: ".concat(i))}}function cP(i,t,e){var n=[t,e].sort(function(r,l){return r.getTime()-l.getTime()});return[zu(i,n[0]),nD(i,n[1])]}function iD(i,t,e){return e.map(function(n){return(t||Fb)(i,n)}).join(" – ")}function hP(i,t,e){return iD(i,t,GR(e))}function sD(i,t,e){return iD(i,t,$R(e))}function dP(i){return i.getDay()===new Date().getDay()}function rD(i,t){t===void 0&&(t=Fn.ISO_8601);var e=i.getDay();switch(t){case Fn.ISLAMIC:case Fn.HEBREW:return e===eP||e===KC;case Fn.ISO_8601:case Fn.GREGORY:return e===KC||e===tP;default:throw new Error("Unsupported calendar type.")}}var ar="react-calendar__navigation";function fP(i){var t=i.activeStartDate,e=i.drillUp,n=i.formatMonthYear,r=n===void 0?tD:n,l=i.formatYear,o=l===void 0?Fb:l,c=i.locale,h=i.maxDate,p=i.minDate,g=i.navigationAriaLabel,y=g===void 0?"":g,b=i.navigationAriaLive,v=i.navigationLabel,S=i.next2AriaLabel,w=S===void 0?"":S,_=i.next2Label,T=_===void 0?"»":_,O=i.nextAriaLabel,N=O===void 0?"":O,I=i.nextLabel,z=I===void 0?"›":I,L=i.prev2AriaLabel,B=L===void 0?"":L,X=i.prev2Label,Q=X===void 0?"«":X,rt=i.prevAriaLabel,$=rt===void 0?"":rt,J=i.prevLabel,ht=J===void 0?"‹":J,tt=i.setActiveStartDate,dt=i.showDoubleView,F=i.view,G=i.views,bt=G.indexOf(F)>0,Et=F!=="century",C=rP(F,t),K=Et?aP(F,t):void 0,ut=eD(F,t),k=Et?lP(F,t):void 0,at=function(){if(C.getFullYear()<0)return!0;var Yt=oP(F,t);return p&&p>=Yt}(),pt=Et&&function(){if(K.getFullYear()<0)return!0;var Yt=uP(F,t);return p&&p>=Yt}(),st=h&&h<ut,ct=Et&&h&&h<k;function yt(){tt(C,"prev")}function Rt(){tt(K,"prev2")}function Ut(){tt(ut,"next")}function ge(){tt(k,"next2")}function me(Yt){var Un=function(){switch(F){case"century":return hP(c,o,Yt);case"decade":return sD(c,o,Yt);case"year":return o(c,Yt);case"month":return r(c,Yt);default:throw new Error("Invalid view: ".concat(F,"."))}}();return v?v({date:Yt,label:Un,locale:c||qR()||void 0,view:F}):Un}function te(){var Yt="".concat(ar,"__label");return P.jsxs("button",{"aria-label":y,"aria-live":b,className:Yt,disabled:!bt,onClick:e,style:{flexGrow:1},type:"button",children:[P.jsx("span",{className:"".concat(Yt,"__labelText ").concat(Yt,"__labelText--from"),children:me(t)}),dt?P.jsxs(P.Fragment,{children:[P.jsx("span",{className:"".concat(Yt,"__divider"),children:" – "}),P.jsx("span",{className:"".concat(Yt,"__labelText ").concat(Yt,"__labelText--to"),children:me(ut)})]}):null]})}return P.jsxs("div",{className:ar,children:[Q!==null&&Et?P.jsx("button",{"aria-label":B,className:"".concat(ar,"__arrow ").concat(ar,"__prev2-button"),disabled:pt,onClick:Rt,type:"button",children:Q}):null,ht!==null&&P.jsx("button",{"aria-label":$,className:"".concat(ar,"__arrow ").concat(ar,"__prev-button"),disabled:at,onClick:yt,type:"button",children:ht}),te(),z!==null&&P.jsx("button",{"aria-label":N,className:"".concat(ar,"__arrow ").concat(ar,"__next-button"),disabled:st,onClick:Ut,type:"button",children:z}),T!==null&&Et?P.jsx("button",{"aria-label":w,className:"".concat(ar,"__arrow ").concat(ar,"__next2-button"),disabled:ct,onClick:ge,type:"button",children:T}):null]})}var qc=function(){return qc=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},qc.apply(this,arguments)},pP=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]]);return e};function ZC(i){return"".concat(i,"%")}function cx(i){var t=i.children,e=i.className,n=i.count,r=i.direction,l=i.offset,o=i.style,c=i.wrap,h=pP(i,["children","className","count","direction","offset","style","wrap"]);return P.jsx("div",qc({className:e,style:qc({display:"flex",flexDirection:r,flexWrap:c?"wrap":"nowrap"},o)},h,{children:et.Children.map(t,function(p,g){var y=l&&g===0?ZC(100*l/n):null;return et.cloneElement(p,qc(qc({},p.props),{style:{flexBasis:ZC(100/n),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:y,marginInlineStart:y,marginInlineEnd:0}}))})}))}function gP(i,t,e){return t&&t>i?t:e&&e<i?e:i}function Kf(i,t){return t[0]<=i&&t[1]>=i}function mP(i,t){return i[0]<=t[0]&&i[1]>=t[1]}function aD(i,t){return Kf(i[0],t)||Kf(i[1],t)}function JC(i,t,e){var n=aD(t,i),r=[];if(n){r.push(e);var l=Kf(i[0],t),o=Kf(i[1],t);l&&r.push("".concat(e,"Start")),o&&r.push("".concat(e,"End")),l&&o&&r.push("".concat(e,"BothEnds"))}return r}function yP(i){return Array.isArray(i)?i[0]!==null&&i[1]!==null:i!==null}function bP(i){if(!i)throw new Error("args is required");var t=i.value,e=i.date,n=i.hover,r="react-calendar__tile",l=[r];if(!e)return l;var o=new Date,c=function(){if(Array.isArray(e))return e;var v=i.dateType;if(!v)throw new Error("dateType is required when date is not an array of two dates");return QC(v,e)}();if(Kf(o,c)&&l.push("".concat(r,"--now")),!t||!yP(t))return l;var h=function(){if(Array.isArray(t))return t;var v=i.valueType;if(!v)throw new Error("valueType is required when value is not an array of two dates");return QC(v,t)}();mP(h,c)?l.push("".concat(r,"--active")):aD(h,c)&&l.push("".concat(r,"--hasActive"));var p=JC(h,c,"".concat(r,"--range"));l.push.apply(l,p);var g=Array.isArray(t)?t:[t];if(n&&g.length===1){var y=n>h[0]?[h[0],n]:[n,h[0]],b=JC(y,c,"".concat(r,"--hover"));l.push.apply(l,b)}return l}function Bb(i){for(var t=i.className,e=i.count,n=e===void 0?3:e,r=i.dateTransform,l=i.dateType,o=i.end,c=i.hover,h=i.offset,p=i.renderTile,g=i.start,y=i.step,b=y===void 0?1:y,v=i.value,S=i.valueType,w=[],_=g;_<=o;_+=b){var T=r(_);w.push(p({classes:bP({date:T,dateType:l,hover:c,value:v,valueType:S}),date:T}))}return P.jsx(cx,{className:t,count:n,offset:h,wrap:!0,children:w})}function Hb(i){var t=i.activeStartDate,e=i.children,n=i.classes,r=i.date,l=i.formatAbbr,o=i.locale,c=i.maxDate,h=i.maxDateTransform,p=i.minDate,g=i.minDateTransform,y=i.onClick,b=i.onMouseOver,v=i.style,S=i.tileClassName,w=i.tileContent,_=i.tileDisabled,T=i.view,O=et.useMemo(function(){var I={activeStartDate:t,date:r,view:T};return typeof S=="function"?S(I):S},[t,r,S,T]),N=et.useMemo(function(){var I={activeStartDate:t,date:r,view:T};return typeof w=="function"?w(I):w},[t,r,w,T]);return P.jsxs("button",{className:Pb(n,O),disabled:p&&g(p)>r||c&&h(c)<r||(_==null?void 0:_({activeStartDate:t,date:r,view:T})),onClick:y?function(I){return y(r,I)}:void 0,onFocus:b?function(){return b(r)}:void 0,onMouseOver:b?function(){return b(r)}:void 0,style:v,type:"button",children:[l?P.jsx("abbr",{"aria-label":l(o,r),children:e}):e,N]})}var uw=function(){return uw=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},uw.apply(this,arguments)},vP=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]]);return e},tT="react-calendar__century-view__decades__decade";function AP(i){var t=i.classes,e=t===void 0?[]:t,n=i.currentCentury,r=i.formatYear,l=r===void 0?Fb:r,o=vP(i,["classes","currentCentury","formatYear"]),c=o.date,h=o.locale,p=[];return e&&p.push.apply(p,e),p.push(tT),ld(c).getFullYear()!==n&&p.push("".concat(tT,"--neighboringCentury")),P.jsx(Hb,uw({},o,{classes:p,maxDateTransform:Ib,minDateTransform:io,view:"century",children:sD(h,l,c)}))}var cw=function(){return cw=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},cw.apply(this,arguments)},eT=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]]);return e};function wP(i){var t=i.activeStartDate,e=i.hover,n=i.showNeighboringCentury,r=i.value,l=i.valueType,o=eT(i,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),c=nP(t),h=c+(n?119:99);return P.jsx(Bb,{className:"react-calendar__century-view__decades",dateTransform:io,dateType:"decade",end:h,hover:e,renderTile:function(p){var g=p.date,y=eT(p,["date"]);return P.jsx(AP,cw({},o,y,{activeStartDate:t,currentCentury:c,date:g}),g.getTime())},start:c,step:10,value:r,valueType:l})}var hw=function(){return hw=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},hw.apply(this,arguments)};function SP(i){function t(){return P.jsx(wP,hw({},i))}return P.jsx("div",{className:"react-calendar__century-view",children:t()})}var dw=function(){return dw=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},dw.apply(this,arguments)},xP=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]]);return e},nT="react-calendar__decade-view__years__year";function EP(i){var t=i.classes,e=t===void 0?[]:t,n=i.currentDecade,r=i.formatYear,l=r===void 0?Fb:r,o=xP(i,["classes","currentDecade","formatYear"]),c=o.date,h=o.locale,p=[];return e&&p.push.apply(p,e),p.push(nT),io(c).getFullYear()!==n&&p.push("".concat(nT,"--neighboringDecade")),P.jsx(Hb,dw({},o,{classes:p,maxDateTransform:jb,minDateTransform:od,view:"decade",children:l(h,c)}))}var fw=function(){return fw=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},fw.apply(this,arguments)},iT=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]]);return e};function _P(i){var t=i.activeStartDate,e=i.hover,n=i.showNeighboringDecade,r=i.value,l=i.valueType,o=iT(i,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),c=iP(t),h=c+(n?11:9);return P.jsx(Bb,{className:"react-calendar__decade-view__years",dateTransform:od,dateType:"year",end:h,hover:e,renderTile:function(p){var g=p.date,y=iT(p,["date"]);return P.jsx(EP,fw({},o,y,{activeStartDate:t,currentDecade:c,date:g}),g.getTime())},start:c,value:r,valueType:l})}var pw=function(){return pw=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},pw.apply(this,arguments)};function CP(i){function t(){return P.jsx(_P,pw({},i))}return P.jsx("div",{className:"react-calendar__decade-view",children:t()})}var gw=function(){return gw=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},gw.apply(this,arguments)},TP=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]]);return e},sT=function(i,t,e){if(e||arguments.length===2)for(var n=0,r=t.length,l;n<r;n++)(l||!(n in t))&&(l||(l=Array.prototype.slice.call(t,0,n)),l[n]=t[n]);return i.concat(l||Array.prototype.slice.call(t))},RP="react-calendar__year-view__months__month";function DP(i){var t=i.classes,e=t===void 0?[]:t,n=i.formatMonth,r=n===void 0?QL:n,l=i.formatMonthYear,o=l===void 0?tD:l,c=TP(i,["classes","formatMonth","formatMonthYear"]),h=c.date,p=c.locale;return P.jsx(Hb,gw({},c,{classes:sT(sT([],e,!0),[RP],!1),formatAbbr:o,maxDateTransform:Dg,minDateTransform:Vu,view:"year",children:r(p,h)}))}var mw=function(){return mw=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},mw.apply(this,arguments)},rT=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]]);return e};function kP(i){var t=i.activeStartDate,e=i.hover,n=i.value,r=i.valueType,l=rT(i,["activeStartDate","hover","value","valueType"]),o=0,c=11,h=ze(t);return P.jsx(Bb,{className:"react-calendar__year-view__months",dateTransform:function(p){var g=new Date;return g.setFullYear(h,p,1),Vu(g)},dateType:"month",end:c,hover:e,renderTile:function(p){var g=p.date,y=rT(p,["date"]);return P.jsx(DP,mw({},l,y,{activeStartDate:t,date:g}),g.getTime())},start:o,value:n,valueType:r})}var yw=function(){return yw=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},yw.apply(this,arguments)};function MP(i){function t(){return P.jsx(kP,yw({},i))}return P.jsx("div",{className:"react-calendar__year-view",children:t()})}var bw=function(){return bw=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},bw.apply(this,arguments)},NP=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]]);return e},DA="react-calendar__month-view__days__day";function OP(i){var t=i.calendarType,e=i.classes,n=e===void 0?[]:e,r=i.currentMonthIndex,l=i.formatDay,o=l===void 0?WL:l,c=i.formatLongDate,h=c===void 0?KL:c,p=NP(i,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),g=p.date,y=p.locale,b=[];return n&&b.push.apply(b,n),b.push(DA),rD(g,t)&&b.push("".concat(DA,"--weekend")),g.getMonth()!==r&&b.push("".concat(DA,"--neighboringMonth")),P.jsx(Hb,bw({},p,{classes:b,formatAbbr:h,maxDateTransform:ox,minDateTransform:kg,view:"month",children:o(y,g)}))}var vw=function(){return vw=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},vw.apply(this,arguments)},aT=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]]);return e};function LP(i){var t=i.activeStartDate,e=i.calendarType,n=i.hover,r=i.showFixedNumberOfWeeks,l=i.showNeighboringMonth,o=i.value,c=i.valueType,h=aT(i,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),p=ze(t),g=no(t),y=r||l,b=Wf(t,e),v=y?0:b,S=(y?-b:0)+1,w=function(){if(r)return S+6*7-1;var _=JR(t);if(l){var T=new Date;T.setFullYear(p,g,_),T.setHours(0,0,0,0);var O=7-Wf(T,e)-1;return _+O}return _}();return P.jsx(Bb,{className:"react-calendar__month-view__days",count:7,dateTransform:function(_){var T=new Date;return T.setFullYear(p,g,_),kg(T)},dateType:"day",hover:n,end:w,renderTile:function(_){var T=_.date,O=aT(_,["date"]);return P.jsx(OP,vw({},h,O,{activeStartDate:t,calendarType:e,currentMonthIndex:g,date:T}),T.getTime())},offset:v,start:S,value:o,valueType:c})}var lD="react-calendar__month-view__weekdays",kA="".concat(lD,"__weekday");function PP(i){for(var t=i.calendarType,e=i.formatShortWeekday,n=e===void 0?ZL:e,r=i.formatWeekday,l=r===void 0?JL:r,o=i.locale,c=i.onMouseLeave,h=new Date,p=Vu(h),g=ze(p),y=no(p),b=[],v=1;v<=7;v+=1){var S=new Date(g,y,v-Wf(p,t)),w=l(o,S);b.push(P.jsx("div",{className:Pb(kA,dP(S)&&"".concat(kA,"--current"),rD(S,t)&&"".concat(kA,"--weekend")),children:P.jsx("abbr",{"aria-label":w,title:w,children:n(o,S).replace(".","")})},v))}return P.jsx(cx,{className:lD,count:7,onFocus:c,onMouseOver:c,children:b})}var Jy=function(){return Jy=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Jy.apply(this,arguments)},lT=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]]);return e},oT="react-calendar__tile";function zP(i){var t=i.onClickWeekNumber,e=i.weekNumber,n=P.jsx("span",{children:e});if(t){var r=i.date,l=i.onClickWeekNumber,o=i.weekNumber,c=lT(i,["date","onClickWeekNumber","weekNumber"]);return P.jsx("button",Jy({},c,{className:oT,onClick:function(h){return l(o,r,h)},type:"button",children:n}))}else{i.date,i.onClickWeekNumber,i.weekNumber;var c=lT(i,["date","onClickWeekNumber","weekNumber"]);return P.jsx("div",Jy({},c,{className:oT,children:n}))}}function IP(i){var t=i.activeStartDate,e=i.calendarType,n=i.onClickWeekNumber,r=i.onMouseLeave,l=i.showFixedNumberOfWeeks,o=function(){if(l)return 6;var p=JR(t),g=Wf(t,e),y=p-(7-g);return 1+Math.ceil(y/7)}(),c=function(){for(var p=ze(t),g=no(t),y=zb(t),b=[],v=0;v<o;v+=1)b.push(ow(new Date(p,g,y+v*7),e));return b}(),h=c.map(function(p){return sP(p,e)});return P.jsx(cx,{className:"react-calendar__month-view__weekNumbers",count:o,direction:"column",onFocus:r,onMouseOver:r,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:h.map(function(p,g){var y=c[g];if(!y)throw new Error("date is not defined");return P.jsx(zP,{date:y,onClickWeekNumber:n,weekNumber:p},p)})})}var Aw=function(){return Aw=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Aw.apply(this,arguments)},jP=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(i);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(i,n[r])&&(e[n[r]]=i[n[r]]);return e};function FP(i){if(i)for(var t=0,e=Object.entries(FL);t<e.length;t++){var n=e[t],r=n[0],l=n[1];if(l.includes(i))return r}return Fn.ISO_8601}function BP(i){var t=i.activeStartDate,e=i.locale,n=i.onMouseLeave,r=i.showFixedNumberOfWeeks,l=i.calendarType,o=l===void 0?FP(e):l,c=i.formatShortWeekday,h=i.formatWeekday,p=i.onClickWeekNumber,g=i.showWeekNumbers,y=jP(i,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function b(){return P.jsx(PP,{calendarType:o,formatShortWeekday:c,formatWeekday:h,locale:e,onMouseLeave:n})}function v(){return g?P.jsx(IP,{activeStartDate:t,calendarType:o,onClickWeekNumber:p,onMouseLeave:n,showFixedNumberOfWeeks:r}):null}function S(){return P.jsx(LP,Aw({calendarType:o},y))}var w="react-calendar__month-view";return P.jsx("div",{className:Pb(w,g?"".concat(w,"--weekNumbers"):""),children:P.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[v(),P.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[b(),S()]})]})})}var Vc=function(){return Vc=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Vc.apply(this,arguments)},iy="react-calendar",my=["century","decade","year","month"],HP=["decade","year","month","day"],hx=new Date;hx.setFullYear(1,0,1);hx.setHours(0,0,0,0);var UP=new Date(864e13);function Cf(i){return i instanceof Date?i:new Date(i)}function oD(i,t){return my.slice(my.indexOf(i),my.indexOf(t)+1)}function qP(i,t,e){var n=oD(t,e);return n.indexOf(i)!==-1}function dx(i,t,e){return i&&qP(i,t,e)?i:e}function uD(i){var t=my.indexOf(i);return HP[t]}function VP(i,t){var e=Array.isArray(i)?i[t]:i;if(!e)return null;var n=Cf(e);if(Number.isNaN(n.getTime()))throw new Error("Invalid date: ".concat(i));return n}function cD(i,t){var e=i.value,n=i.minDate,r=i.maxDate,l=i.maxDetail,o=VP(e,t);if(!o)return null;var c=uD(l),h=function(){switch(t){case 0:return zu(c,o);case 1:return nD(c,o);default:throw new Error("Invalid index value: ".concat(t))}}();return gP(h,n,r)}var fx=function(i){return cD(i,0)},hD=function(i){return cD(i,1)},GP=function(i){return[fx,hD].map(function(t){return t(i)})};function dD(i){var t=i.maxDate,e=i.maxDetail,n=i.minDate,r=i.minDetail,l=i.value,o=i.view,c=dx(o,r,e),h=fx({value:l,minDate:n,maxDate:t,maxDetail:e})||new Date;return zu(c,h)}function YP(i){var t=i.activeStartDate,e=i.defaultActiveStartDate,n=i.defaultValue,r=i.defaultView,l=i.maxDate,o=i.maxDetail,c=i.minDate,h=i.minDetail,p=i.value,g=i.view,y=dx(g,h,o),b=t||e;return b?zu(y,b):dD({maxDate:l,maxDetail:o,minDate:c,minDetail:h,value:p||n,view:g||r})}function MA(i){return i&&(!Array.isArray(i)||i.length===1)}function sy(i,t){return i instanceof Date&&t instanceof Date&&i.getTime()===t.getTime()}var XP=et.forwardRef(function(t,e){var n=t.activeStartDate,r=t.allowPartialRange,l=t.calendarType,o=t.className,c=t.defaultActiveStartDate,h=t.defaultValue,p=t.defaultView,g=t.formatDay,y=t.formatLongDate,b=t.formatMonth,v=t.formatMonthYear,S=t.formatShortWeekday,w=t.formatWeekday,_=t.formatYear,T=t.goToRangeStartOnSelect,O=T===void 0?!0:T,N=t.inputRef,I=t.locale,z=t.maxDate,L=z===void 0?UP:z,B=t.maxDetail,X=B===void 0?"month":B,Q=t.minDate,rt=Q===void 0?hx:Q,$=t.minDetail,J=$===void 0?"century":$,ht=t.navigationAriaLabel,tt=t.navigationAriaLive,dt=t.navigationLabel,F=t.next2AriaLabel,G=t.next2Label,bt=t.nextAriaLabel,Et=t.nextLabel,C=t.onActiveStartDateChange,K=t.onChange,ut=t.onClickDay,k=t.onClickDecade,at=t.onClickMonth,pt=t.onClickWeekNumber,st=t.onClickYear,ct=t.onDrillDown,yt=t.onDrillUp,Rt=t.onViewChange,Ut=t.prev2AriaLabel,ge=t.prev2Label,me=t.prevAriaLabel,te=t.prevLabel,Yt=t.returnValue,Un=Yt===void 0?"start":Yt,Be=t.selectRange,He=t.showDoubleView,Ye=t.showFixedNumberOfWeeks,Ds=t.showNavigation,Nr=Ds===void 0?!0:Ds,pi=t.showNeighboringCentury,Ia=t.showNeighboringDecade,Or=t.showNeighboringMonth,fd=Or===void 0?!0:Or,pd=t.showWeekNumbers,nt=t.tileClassName,ft=t.tileContent,Dt=t.tileDisabled,kt=t.value,re=t.view,qn=et.useState(c),ks=qn[0],un=qn[1],Ni=et.useState(null),ei=Ni[0],Xe=Ni[1],ni=et.useState(Array.isArray(h)?h.map(function(jt){return jt!==null?Cf(jt):null}):h!=null?Cf(h):null),ii=ni[0],Ug=ni[1],gd=et.useState(p),md=gd[0],ja=gd[1],Vn=n||ks||YP({activeStartDate:n,defaultActiveStartDate:c,defaultValue:h,defaultView:p,maxDate:L,maxDetail:X,minDate:rt,minDetail:J,value:kt,view:re}),Rn=function(){var jt=function(){return Be&&MA(ii)?ii:kt!==void 0?kt:ii}();return jt?Array.isArray(jt)?jt.map(function(he){return he!==null?Cf(he):null}):jt!==null?Cf(jt):null:null}(),ro=uD(X),Ee=dx(re||md,J,X),gi=oD(J,X),qg=Be?ei:null,yd=gi.indexOf(Ee)<gi.length-1,Ms=gi.indexOf(Ee)>0,cn=et.useCallback(function(jt){var he=function(){switch(Un){case"start":return fx;case"end":return hD;case"range":return GP;default:throw new Error("Invalid returnValue.")}}();return he({maxDate:L,maxDetail:X,minDate:rt,value:jt})},[L,X,rt,Un]),bn=et.useCallback(function(jt,he){un(jt);var Xt={action:he,activeStartDate:jt,value:Rn,view:Ee};C&&!sy(Vn,jt)&&C(Xt)},[Vn,C,Rn,Ee]),Ns=et.useCallback(function(jt,he){var Xt=function(){switch(Ee){case"century":return k;case"decade":return st;case"year":return at;case"month":return ut;default:throw new Error("Invalid view: ".concat(Ee,"."))}}();Xt&&Xt(jt,he)},[ut,k,at,st,Ee]),ao=et.useCallback(function(jt,he){if(yd){Ns(jt,he);var Xt=gi[gi.indexOf(Ee)+1];if(!Xt)throw new Error("Attempted to drill down from the lowest view.");un(jt),ja(Xt);var mi={action:"drillDown",activeStartDate:jt,value:Rn,view:Xt};C&&!sy(Vn,jt)&&C(mi),Rt&&Ee!==Xt&&Rt(mi),ct&&ct(mi)}},[Vn,yd,C,Ns,ct,Rt,Rn,Ee,gi]),bd=et.useCallback(function(){if(Ms){var jt=gi[gi.indexOf(Ee)-1];if(!jt)throw new Error("Attempted to drill up from the highest view.");var he=zu(jt,Vn);un(he),ja(jt);var Xt={action:"drillUp",activeStartDate:he,value:Rn,view:jt};C&&!sy(Vn,he)&&C(Xt),Rt&&Ee!==jt&&Rt(Xt),yt&&yt(Xt)}},[Vn,Ms,C,yt,Rt,Rn,Ee,gi]),vd=et.useCallback(function(jt,he){var Xt=Rn;Ns(jt,he);var mi=Be&&!MA(Xt),yi;if(Be)if(mi)yi=zu(ro,jt);else{if(!Xt)throw new Error("previousValue is required");if(Array.isArray(Xt))throw new Error("previousValue must not be an array");yi=cP(ro,Xt,jt)}else yi=cn(jt);var Os=!Be||mi||O?dD({maxDate:L,maxDetail:X,minDate:rt,minDetail:J,value:yi,view:Ee}):null;he.persist(),un(Os),Ug(yi);var Ha={action:"onChange",activeStartDate:Os,value:yi,view:Ee};if(C&&!sy(Vn,Os)&&C(Ha),K)if(Be){var ov=MA(yi);if(!ov)K(yi||null,he);else if(r){if(Array.isArray(yi))throw new Error("value must not be an array");K([yi||null,null],he)}}else K(yi||null,he)},[Vn,r,cn,O,L,X,rt,J,C,K,Ns,Be,Rn,ro,Ee]);function Vg(jt){Xe(jt)}function Lr(){Xe(null)}et.useImperativeHandle(e,function(){return{activeStartDate:Vn,drillDown:ao,drillUp:bd,onChange:vd,setActiveStartDate:bn,value:Rn,view:Ee}},[Vn,ao,bd,vd,bn,Rn,Ee]);function Wu(jt){var he=jt?eD(Ee,Vn):zu(Ee,Vn),Xt=yd?ao:vd,mi={activeStartDate:he,hover:qg,locale:I,maxDate:L,minDate:rt,onClick:Xt,onMouseOver:Be?Vg:void 0,tileClassName:nt,tileContent:ft,tileDisabled:Dt,value:Rn,valueType:ro};switch(Ee){case"century":return P.jsx(SP,Vc({formatYear:_,showNeighboringCentury:pi},mi));case"decade":return P.jsx(CP,Vc({formatYear:_,showNeighboringDecade:Ia},mi));case"year":return P.jsx(MP,Vc({formatMonth:b,formatMonthYear:v},mi));case"month":return P.jsx(BP,Vc({calendarType:l,formatDay:g,formatLongDate:y,formatShortWeekday:S,formatWeekday:w,onClickWeekNumber:pt,onMouseLeave:Be?Lr:void 0,showFixedNumberOfWeeks:typeof Ye<"u"?Ye:He,showNeighboringMonth:fd,showWeekNumbers:pd},mi));default:throw new Error("Invalid view: ".concat(Ee,"."))}}function Fa(){return Nr?P.jsx(fP,{activeStartDate:Vn,drillUp:bd,formatMonthYear:v,formatYear:_,locale:I,maxDate:L,minDate:rt,navigationAriaLabel:ht,navigationAriaLive:tt,navigationLabel:dt,next2AriaLabel:F,next2Label:G,nextAriaLabel:bt,nextLabel:Et,prev2AriaLabel:Ut,prev2Label:ge,prevAriaLabel:me,prevLabel:te,setActiveStartDate:bn,showDoubleView:He,view:Ee,views:gi}):null}var Ba=Array.isArray(Rn)?Rn:[Rn];return P.jsxs("div",{className:Pb(iy,Be&&Ba.length===1&&"".concat(iy,"--selectRange"),He&&"".concat(iy,"--doubleView"),o),ref:N,children:[Fa(),P.jsxs("div",{className:"".concat(iy,"__viewContainer"),onBlur:Be?Lr:void 0,onMouseLeave:Be?Lr:void 0,children:[Wu(),He?Wu(!0):null]})]})});function $P(){const[i,t]=et.useState(new Date);return P.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[P.jsx("h1",{className:"text-3xl font-bold text-center mt-6",children:"📆 日历"}),P.jsx("div",{className:"bg-white rounded-xl shadow p-6",children:P.jsx(XP,{onChange:t,value:i})})]})}function WP({filePath:i}){const t=Pa(),[e,n]=et.useState(!1),[r]=et.useState([]),l=()=>{t&&(t.postMessage({command:"runCodeRecognition",filePath:i}),n(!0))};return P.jsxs("div",{className:"bg-white shadow p-4 rounded-xl",children:[P.jsx("h2",{className:"text-xl font-semibold mb-4",children:"🧠 代码识别"}),P.jsx("button",{className:"bg-indigo-500 text-white px-4 py-2 rounded-lg hover:bg-indigo-600",onClick:l,children:"🚀 运行代码识别"}),e&&P.jsx("div",{className:"mt-4",children:r.length?r.map((o,c)=>{let h="";try{const p=JSON.parse(o.content);h=Array.isArray(p)?p.join(`
`):o.content}catch{h=o.content}return P.jsxs("div",{className:"bg-gray-100 rounded p-4 mb-2",children:[P.jsx("p",{className:"font-bold mb-2",children:o.path}),P.jsx("pre",{className:"overflow-auto max-h-64 whitespace-pre-wrap",children:P.jsx("code",{children:h})})]},c)}):"正在运行代码识别..."})]})}function KP(i,t){const e={};return(i[i.length-1]===""?[...i,""]:i).join((e.padRight?" ":"")+","+(e.padLeft===!1?"":" ")).trim()}const QP=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ZP=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,JP={};function uT(i,t){return(JP.jsx?ZP:QP).test(i)}const tz=/[ \t\n\f\r]/g;function ez(i){return typeof i=="object"?i.type==="text"?cT(i.value):!1:cT(i)}function cT(i){return i.replace(tz,"")===""}class Mg{constructor(t,e,n){this.normal=e,this.property=t,n&&(this.space=n)}}Mg.prototype.normal={};Mg.prototype.property={};Mg.prototype.space=void 0;function fD(i,t){const e={},n={};for(const r of i)Object.assign(e,r.property),Object.assign(n,r.normal);return new Mg(e,n,t)}function ww(i){return i.toLowerCase()}class Mi{constructor(t,e){this.attribute=e,this.property=t}}Mi.prototype.attribute="";Mi.prototype.booleanish=!1;Mi.prototype.boolean=!1;Mi.prototype.commaOrSpaceSeparated=!1;Mi.prototype.commaSeparated=!1;Mi.prototype.defined=!1;Mi.prototype.mustUseProperty=!1;Mi.prototype.number=!1;Mi.prototype.overloadedBoolean=!1;Mi.prototype.property="";Mi.prototype.spaceSeparated=!1;Mi.prototype.space=void 0;let nz=0;const Ft=Yu(),rn=Yu(),pD=Yu(),gt=Yu(),Re=Yu(),Wc=Yu(),Bi=Yu();function Yu(){return 2**++nz}const Sw=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ft,booleanish:rn,commaOrSpaceSeparated:Bi,commaSeparated:Wc,number:gt,overloadedBoolean:pD,spaceSeparated:Re},Symbol.toStringTag,{value:"Module"})),NA=Object.keys(Sw);class px extends Mi{constructor(t,e,n,r){let l=-1;if(super(t,e),hT(this,"space",r),typeof n=="number")for(;++l<NA.length;){const o=NA[l];hT(this,NA[l],(n&Sw[o])===Sw[o])}}}px.prototype.defined=!0;function hT(i,t,e){e&&(i[t]=e)}function ud(i){const t={},e={};for(const[n,r]of Object.entries(i.properties)){const l=new px(n,i.transform(i.attributes||{},n),r,i.space);i.mustUseProperty&&i.mustUseProperty.includes(n)&&(l.mustUseProperty=!0),t[n]=l,e[ww(n)]=n,e[ww(l.attribute)]=n}return new Mg(t,e,i.space)}const gD=ud({properties:{ariaActiveDescendant:null,ariaAtomic:rn,ariaAutoComplete:null,ariaBusy:rn,ariaChecked:rn,ariaColCount:gt,ariaColIndex:gt,ariaColSpan:gt,ariaControls:Re,ariaCurrent:null,ariaDescribedBy:Re,ariaDetails:null,ariaDisabled:rn,ariaDropEffect:Re,ariaErrorMessage:null,ariaExpanded:rn,ariaFlowTo:Re,ariaGrabbed:rn,ariaHasPopup:null,ariaHidden:rn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Re,ariaLevel:gt,ariaLive:null,ariaModal:rn,ariaMultiLine:rn,ariaMultiSelectable:rn,ariaOrientation:null,ariaOwns:Re,ariaPlaceholder:null,ariaPosInSet:gt,ariaPressed:rn,ariaReadOnly:rn,ariaRelevant:null,ariaRequired:rn,ariaRoleDescription:Re,ariaRowCount:gt,ariaRowIndex:gt,ariaRowSpan:gt,ariaSelected:rn,ariaSetSize:gt,ariaSort:null,ariaValueMax:gt,ariaValueMin:gt,ariaValueNow:gt,ariaValueText:null,role:null},transform(i,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function mD(i,t){return t in i?i[t]:t}function yD(i,t){return mD(i,t.toLowerCase())}const iz=ud({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Wc,acceptCharset:Re,accessKey:Re,action:null,allow:null,allowFullScreen:Ft,allowPaymentRequest:Ft,allowUserMedia:Ft,alt:null,as:null,async:Ft,autoCapitalize:null,autoComplete:Re,autoFocus:Ft,autoPlay:Ft,blocking:Re,capture:null,charSet:null,checked:Ft,cite:null,className:Re,cols:gt,colSpan:null,content:null,contentEditable:rn,controls:Ft,controlsList:Re,coords:gt|Wc,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ft,defer:Ft,dir:null,dirName:null,disabled:Ft,download:pD,draggable:rn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ft,formTarget:null,headers:Re,height:gt,hidden:Ft,high:gt,href:null,hrefLang:null,htmlFor:Re,httpEquiv:Re,id:null,imageSizes:null,imageSrcSet:null,inert:Ft,inputMode:null,integrity:null,is:null,isMap:Ft,itemId:null,itemProp:Re,itemRef:Re,itemScope:Ft,itemType:Re,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ft,low:gt,manifest:null,max:null,maxLength:gt,media:null,method:null,min:null,minLength:gt,multiple:Ft,muted:Ft,name:null,nonce:null,noModule:Ft,noValidate:Ft,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ft,optimum:gt,pattern:null,ping:Re,placeholder:null,playsInline:Ft,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ft,referrerPolicy:null,rel:Re,required:Ft,reversed:Ft,rows:gt,rowSpan:gt,sandbox:Re,scope:null,scoped:Ft,seamless:Ft,selected:Ft,shadowRootClonable:Ft,shadowRootDelegatesFocus:Ft,shadowRootMode:null,shape:null,size:gt,sizes:null,slot:null,span:gt,spellCheck:rn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:gt,step:null,style:null,tabIndex:gt,target:null,title:null,translate:null,type:null,typeMustMatch:Ft,useMap:null,value:rn,width:gt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Re,axis:null,background:null,bgColor:null,border:gt,borderColor:null,bottomMargin:gt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ft,declare:Ft,event:null,face:null,frame:null,frameBorder:null,hSpace:gt,leftMargin:gt,link:null,longDesc:null,lowSrc:null,marginHeight:gt,marginWidth:gt,noResize:Ft,noHref:Ft,noShade:Ft,noWrap:Ft,object:null,profile:null,prompt:null,rev:null,rightMargin:gt,rules:null,scheme:null,scrolling:rn,standby:null,summary:null,text:null,topMargin:gt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:gt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ft,disableRemotePlayback:Ft,prefix:null,property:null,results:gt,security:null,unselectable:null},space:"html",transform:yD}),sz=ud({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Bi,accentHeight:gt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:gt,amplitude:gt,arabicForm:null,ascent:gt,attributeName:null,attributeType:null,azimuth:gt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:gt,by:null,calcMode:null,capHeight:gt,className:Re,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:gt,diffuseConstant:gt,direction:null,display:null,dur:null,divisor:gt,dominantBaseline:null,download:Ft,dx:null,dy:null,edgeMode:null,editable:null,elevation:gt,enableBackground:null,end:null,event:null,exponent:gt,externalResourcesRequired:null,fill:null,fillOpacity:gt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Wc,g2:Wc,glyphName:Wc,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:gt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:gt,horizOriginX:gt,horizOriginY:gt,id:null,ideographic:gt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:gt,k:gt,k1:gt,k2:gt,k3:gt,k4:gt,kernelMatrix:Bi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:gt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:gt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:gt,overlineThickness:gt,paintOrder:null,panose1:null,path:null,pathLength:gt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Re,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:gt,pointsAtY:gt,pointsAtZ:gt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Bi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Bi,rev:Bi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Bi,requiredFeatures:Bi,requiredFonts:Bi,requiredFormats:Bi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:gt,specularExponent:gt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:gt,strikethroughThickness:gt,string:null,stroke:null,strokeDashArray:Bi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:gt,strokeOpacity:gt,strokeWidth:null,style:null,surfaceScale:gt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Bi,tabIndex:gt,tableValues:null,target:null,targetX:gt,targetY:gt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Bi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:gt,underlineThickness:gt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:gt,values:null,vAlphabetic:gt,vMathematical:gt,vectorEffect:null,vHanging:gt,vIdeographic:gt,version:null,vertAdvY:gt,vertOriginX:gt,vertOriginY:gt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:gt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:mD}),bD=ud({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(i,t){return"xlink:"+t.slice(5).toLowerCase()}}),vD=ud({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:yD}),AD=ud({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(i,t){return"xml:"+t.slice(3).toLowerCase()}}),rz={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},az=/[A-Z]/g,dT=/-[a-z]/g,lz=/^data[-\w.:]+$/i;function oz(i,t){const e=ww(t);let n=t,r=Mi;if(e in i.normal)return i.property[i.normal[e]];if(e.length>4&&e.slice(0,4)==="data"&&lz.test(t)){if(t.charAt(4)==="-"){const l=t.slice(5).replace(dT,cz);n="data"+l.charAt(0).toUpperCase()+l.slice(1)}else{const l=t.slice(4);if(!dT.test(l)){let o=l.replace(az,uz);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}r=px}return new r(n,t)}function uz(i){return"-"+i.toLowerCase()}function cz(i){return i.charAt(1).toUpperCase()}const hz=fD([gD,iz,bD,vD,AD],"html"),gx=fD([gD,sz,bD,vD,AD],"svg");function dz(i){return i.join(" ").trim()}var kc={},OA,fT;function fz(){if(fT)return OA;fT=1;var i=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,e=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,l=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,c=/^\s+|\s+$/g,h=`
`,p="/",g="*",y="",b="comment",v="declaration";OA=function(w,_){if(typeof w!="string")throw new TypeError("First argument must be a string");if(!w)return[];_=_||{};var T=1,O=1;function N(ht){var tt=ht.match(t);tt&&(T+=tt.length);var dt=ht.lastIndexOf(h);O=~dt?ht.length-dt:O+ht.length}function I(){var ht={line:T,column:O};return function(tt){return tt.position=new z(ht),X(),tt}}function z(ht){this.start=ht,this.end={line:T,column:O},this.source=_.source}z.prototype.content=w;function L(ht){var tt=new Error(_.source+":"+T+":"+O+": "+ht);if(tt.reason=ht,tt.filename=_.source,tt.line=T,tt.column=O,tt.source=w,!_.silent)throw tt}function B(ht){var tt=ht.exec(w);if(tt){var dt=tt[0];return N(dt),w=w.slice(dt.length),tt}}function X(){B(e)}function Q(ht){var tt;for(ht=ht||[];tt=rt();)tt!==!1&&ht.push(tt);return ht}function rt(){var ht=I();if(!(p!=w.charAt(0)||g!=w.charAt(1))){for(var tt=2;y!=w.charAt(tt)&&(g!=w.charAt(tt)||p!=w.charAt(tt+1));)++tt;if(tt+=2,y===w.charAt(tt-1))return L("End of comment missing");var dt=w.slice(2,tt-2);return O+=2,N(dt),w=w.slice(tt),O+=2,ht({type:b,comment:dt})}}function $(){var ht=I(),tt=B(n);if(tt){if(rt(),!B(r))return L("property missing ':'");var dt=B(l),F=ht({type:v,property:S(tt[0].replace(i,y)),value:dt?S(dt[0].replace(i,y)):y});return B(o),F}}function J(){var ht=[];Q(ht);for(var tt;tt=$();)tt!==!1&&(ht.push(tt),Q(ht));return ht}return X(),J()};function S(w){return w?w.replace(c,y):y}return OA}var pT;function pz(){if(pT)return kc;pT=1;var i=kc&&kc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(kc,"__esModule",{value:!0}),kc.default=e;var t=i(fz());function e(n,r){var l=null;if(!n||typeof n!="string")return l;var o=(0,t.default)(n),c=typeof r=="function";return o.forEach(function(h){if(h.type==="declaration"){var p=h.property,g=h.value;c?r(p,g,h):g&&(l=l||{},l[p]=g)}}),l}return kc}var mf={},gT;function gz(){if(gT)return mf;gT=1,Object.defineProperty(mf,"__esModule",{value:!0}),mf.camelCase=void 0;var i=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,e=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,l=function(p){return!p||e.test(p)||i.test(p)},o=function(p,g){return g.toUpperCase()},c=function(p,g){return"".concat(g,"-")},h=function(p,g){return g===void 0&&(g={}),l(p)?p:(p=p.toLowerCase(),g.reactCompat?p=p.replace(r,c):p=p.replace(n,c),p.replace(t,o))};return mf.camelCase=h,mf}var yf,mT;function mz(){if(mT)return yf;mT=1;var i=yf&&yf.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},t=i(pz()),e=gz();function n(r,l){var o={};return!r||typeof r!="string"||(0,t.default)(r,function(c,h){c&&h&&(o[(0,e.camelCase)(c,l)]=h)}),o}return n.default=n,yf=n,yf}var yz=mz();const bz=Cg(yz),wD=SD("end"),mx=SD("start");function SD(i){return t;function t(e){const n=e&&e.position&&e.position[i]||{};if(typeof n.line=="number"&&n.line>0&&typeof n.column=="number"&&n.column>0)return{line:n.line,column:n.column,offset:typeof n.offset=="number"&&n.offset>-1?n.offset:void 0}}}function vz(i){const t=mx(i),e=wD(i);if(t&&e)return{start:t,end:e}}function Yf(i){return!i||typeof i!="object"?"":"position"in i||"type"in i?yT(i.position):"start"in i||"end"in i?yT(i):"line"in i||"column"in i?xw(i):""}function xw(i){return bT(i&&i.line)+":"+bT(i&&i.column)}function yT(i){return xw(i&&i.start)+"-"+xw(i&&i.end)}function bT(i){return i&&typeof i=="number"?i:1}class ti extends Error{constructor(t,e,n){super(),typeof e=="string"&&(n=e,e=void 0);let r="",l={},o=!1;if(e&&("line"in e&&"column"in e?l={place:e}:"start"in e&&"end"in e?l={place:e}:"type"in e?l={ancestors:[e],place:e.position}:l={...e}),typeof t=="string"?r=t:!l.cause&&t&&(o=!0,r=t.message,l.cause=t),!l.ruleId&&!l.source&&typeof n=="string"){const h=n.indexOf(":");h===-1?l.ruleId=n:(l.source=n.slice(0,h),l.ruleId=n.slice(h+1))}if(!l.place&&l.ancestors&&l.ancestors){const h=l.ancestors[l.ancestors.length-1];h&&(l.place=h.position)}const c=l.place&&"start"in l.place?l.place.start:l.place;this.ancestors=l.ancestors||void 0,this.cause=l.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=c?c.line:void 0,this.name=Yf(l.place)||"1:1",this.place=l.place||void 0,this.reason=this.message,this.ruleId=l.ruleId||void 0,this.source=l.source||void 0,this.stack=o&&l.cause&&typeof l.cause.stack=="string"?l.cause.stack:"",this.actual,this.expected,this.note,this.url}}ti.prototype.file="";ti.prototype.name="";ti.prototype.reason="";ti.prototype.message="";ti.prototype.stack="";ti.prototype.column=void 0;ti.prototype.line=void 0;ti.prototype.ancestors=void 0;ti.prototype.cause=void 0;ti.prototype.fatal=void 0;ti.prototype.place=void 0;ti.prototype.ruleId=void 0;ti.prototype.source=void 0;const yx={}.hasOwnProperty,Az=new Map,wz=/[A-Z]/g,Sz=new Set(["table","tbody","thead","tfoot","tr"]),xz=new Set(["td","th"]),xD="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Ez(i,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const e=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=Nz(e,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=Mz(e,t.jsx,t.jsxs)}const r={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:e,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?gx:hz,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},l=ED(r,i,void 0);return l&&typeof l!="string"?l:r.create(i,r.Fragment,{children:l||void 0},void 0)}function ED(i,t,e){if(t.type==="element")return _z(i,t,e);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Cz(i,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Rz(i,t,e);if(t.type==="mdxjsEsm")return Tz(i,t);if(t.type==="root")return Dz(i,t,e);if(t.type==="text")return kz(i,t)}function _z(i,t,e){const n=i.schema;let r=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=gx,i.schema=r),i.ancestors.push(t);const l=CD(i,t.tagName,!1),o=Oz(i,t);let c=vx(i,t);return Sz.has(t.tagName)&&(c=c.filter(function(h){return typeof h=="string"?!ez(h):!0})),_D(i,o,l,t),bx(o,c),i.ancestors.pop(),i.schema=n,i.create(t,l,o,e)}function Cz(i,t){if(t.data&&t.data.estree&&i.evaluater){const n=t.data.estree.body[0];return n.type,i.evaluater.evaluateExpression(n.expression)}Qf(i,t.position)}function Tz(i,t){if(t.data&&t.data.estree&&i.evaluater)return i.evaluater.evaluateProgram(t.data.estree);Qf(i,t.position)}function Rz(i,t,e){const n=i.schema;let r=n;t.name==="svg"&&n.space==="html"&&(r=gx,i.schema=r),i.ancestors.push(t);const l=t.name===null?i.Fragment:CD(i,t.name,!0),o=Lz(i,t),c=vx(i,t);return _D(i,o,l,t),bx(o,c),i.ancestors.pop(),i.schema=n,i.create(t,l,o,e)}function Dz(i,t,e){const n={};return bx(n,vx(i,t)),i.create(t,i.Fragment,n,e)}function kz(i,t){return t.value}function _D(i,t,e,n){typeof e!="string"&&e!==i.Fragment&&i.passNode&&(t.node=n)}function bx(i,t){if(t.length>0){const e=t.length>1?t:t[0];e&&(i.children=e)}}function Mz(i,t,e){return n;function n(r,l,o,c){const p=Array.isArray(o.children)?e:t;return c?p(l,o,c):p(l,o)}}function Nz(i,t){return e;function e(n,r,l,o){const c=Array.isArray(l.children),h=mx(n);return t(r,l,o,c,{columnNumber:h?h.column-1:void 0,fileName:i,lineNumber:h?h.line:void 0},void 0)}}function Oz(i,t){const e={};let n,r;for(r in t.properties)if(r!=="children"&&yx.call(t.properties,r)){const l=Pz(i,r,t.properties[r]);if(l){const[o,c]=l;i.tableCellAlignToStyle&&o==="align"&&typeof c=="string"&&xz.has(t.tagName)?n=c:e[o]=c}}if(n){const l=e.style||(e.style={});l[i.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return e}function Lz(i,t){const e={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&i.evaluater){const l=n.data.estree.body[0];l.type;const o=l.expression;o.type;const c=o.properties[0];c.type,Object.assign(e,i.evaluater.evaluateExpression(c.argument))}else Qf(i,t.position);else{const r=n.name;let l;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&i.evaluater){const c=n.value.data.estree.body[0];c.type,l=i.evaluater.evaluateExpression(c.expression)}else Qf(i,t.position);else l=n.value===null?!0:n.value;e[r]=l}return e}function vx(i,t){const e=[];let n=-1;const r=i.passKeys?new Map:Az;for(;++n<t.children.length;){const l=t.children[n];let o;if(i.passKeys){const h=l.type==="element"?l.tagName:l.type==="mdxJsxFlowElement"||l.type==="mdxJsxTextElement"?l.name:void 0;if(h){const p=r.get(h)||0;o=h+"-"+p,r.set(h,p+1)}}const c=ED(i,l,o);c!==void 0&&e.push(c)}return e}function Pz(i,t,e){const n=oz(i.schema,t);if(!(e==null||typeof e=="number"&&Number.isNaN(e))){if(Array.isArray(e)&&(e=n.commaSeparated?KP(e):dz(e)),n.property==="style"){let r=typeof e=="object"?e:zz(i,String(e));return i.stylePropertyNameCase==="css"&&(r=Iz(r)),["style",r]}return[i.elementAttributeNameCase==="react"&&n.space?rz[n.property]||n.property:n.attribute,e]}}function zz(i,t){try{return bz(t,{reactCompat:!0})}catch(e){if(i.ignoreInvalidStyle)return{};const n=e,r=new ti("Cannot parse `style` attribute",{ancestors:i.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=i.filePath||void 0,r.url=xD+"#cannot-parse-style-attribute",r}}function CD(i,t,e){let n;if(!e)n={type:"Literal",value:t};else if(t.includes(".")){const r=t.split(".");let l=-1,o;for(;++l<r.length;){const c=uT(r[l])?{type:"Identifier",name:r[l]}:{type:"Literal",value:r[l]};o=o?{type:"MemberExpression",object:o,property:c,computed:!!(l&&c.type==="Literal"),optional:!1}:c}n=o}else n=uT(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const r=n.value;return yx.call(i.components,r)?i.components[r]:r}if(i.evaluater)return i.evaluater.evaluateExpression(n);Qf(i)}function Qf(i,t){const e=new ti("Cannot handle MDX estrees without `createEvaluater`",{ancestors:i.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw e.file=i.filePath||void 0,e.url=xD+"#cannot-handle-mdx-estrees-without-createevaluater",e}function Iz(i){const t={};let e;for(e in i)yx.call(i,e)&&(t[jz(e)]=i[e]);return t}function jz(i){let t=i.replace(wz,Fz);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Fz(i){return"-"+i.toLowerCase()}const LA={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Bz={};function Hz(i,t){const e=Bz,n=typeof e.includeImageAlt=="boolean"?e.includeImageAlt:!0,r=typeof e.includeHtml=="boolean"?e.includeHtml:!0;return TD(i,n,r)}function TD(i,t,e){if(Uz(i)){if("value"in i)return i.type==="html"&&!e?"":i.value;if(t&&"alt"in i&&i.alt)return i.alt;if("children"in i)return vT(i.children,t,e)}return Array.isArray(i)?vT(i,t,e):""}function vT(i,t,e){const n=[];let r=-1;for(;++r<i.length;)n[r]=TD(i[r],t,e);return n.join("")}function Uz(i){return!!(i&&typeof i=="object")}const AT=document.createElement("i");function Ax(i){const t="&"+i+";";AT.innerHTML=t;const e=AT.textContent;return e.charCodeAt(e.length-1)===59&&i!=="semi"||e===t?!1:e}function kr(i,t,e,n){const r=i.length;let l=0,o;if(t<0?t=-t>r?0:r+t:t=t>r?r:t,e=e>0?e:0,n.length<1e4)o=Array.from(n),o.unshift(t,e),i.splice(...o);else for(e&&i.splice(t,e);l<n.length;)o=n.slice(l,l+1e4),o.unshift(t,0),i.splice(...o),l+=1e4,t+=1e4}function Cs(i,t){return i.length>0?(kr(i,i.length,0,t),i):t}const wT={}.hasOwnProperty;function qz(i){const t={};let e=-1;for(;++e<i.length;)Vz(t,i[e]);return t}function Vz(i,t){let e;for(e in t){const r=(wT.call(i,e)?i[e]:void 0)||(i[e]={}),l=t[e];let o;if(l)for(o in l){wT.call(r,o)||(r[o]=[]);const c=l[o];Gz(r[o],Array.isArray(c)?c:c?[c]:[])}}}function Gz(i,t){let e=-1;const n=[];for(;++e<t.length;)(t[e].add==="after"?i:n).push(t[e]);kr(i,0,0,n)}function RD(i,t){const e=Number.parseInt(i,t);return e<9||e===11||e>13&&e<32||e>126&&e<160||e>55295&&e<57344||e>64975&&e<65008||(e&65535)===65535||(e&65535)===65534||e>1114111?"�":String.fromCodePoint(e)}function Kc(i){return i.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Rr=so(/[A-Za-z]/),rs=so(/[\dA-Za-z]/),Yz=so(/[#-'*+\--9=?A-Z^-~]/);function Ew(i){return i!==null&&(i<32||i===127)}const _w=so(/\d/),Xz=so(/[\dA-Fa-f]/),$z=so(/[!-/:-@[-`{-~]/);function Pt(i){return i!==null&&i<-2}function Di(i){return i!==null&&(i<0||i===32)}function ue(i){return i===-2||i===-1||i===32}const Wz=so(new RegExp("\\p{P}|\\p{S}","u")),Kz=so(/\s/);function so(i){return t;function t(e){return e!==null&&e>-1&&i.test(String.fromCharCode(e))}}function cd(i){const t=[];let e=-1,n=0,r=0;for(;++e<i.length;){const l=i.charCodeAt(e);let o="";if(l===37&&rs(i.charCodeAt(e+1))&&rs(i.charCodeAt(e+2)))r=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(o=String.fromCharCode(l));else if(l>55295&&l<57344){const c=i.charCodeAt(e+1);l<56320&&c>56319&&c<57344?(o=String.fromCharCode(l,c),r=1):o="�"}else o=String.fromCharCode(l);o&&(t.push(i.slice(n,e),encodeURIComponent(o)),n=e+r+1,o=""),r&&(e+=r,r=0)}return t.join("")+i.slice(n)}function De(i,t,e,n){const r=n?n-1:Number.POSITIVE_INFINITY;let l=0;return o;function o(h){return ue(h)?(i.enter(e),c(h)):t(h)}function c(h){return ue(h)&&l++<r?(i.consume(h),c):(i.exit(e),t(h))}}const Qz={tokenize:Zz};function Zz(i){const t=i.attempt(this.parser.constructs.contentInitial,n,r);let e;return t;function n(c){if(c===null){i.consume(c);return}return i.enter("lineEnding"),i.consume(c),i.exit("lineEnding"),De(i,t,"linePrefix")}function r(c){return i.enter("paragraph"),l(c)}function l(c){const h=i.enter("chunkText",{contentType:"text",previous:e});return e&&(e.next=h),e=h,o(c)}function o(c){if(c===null){i.exit("chunkText"),i.exit("paragraph"),i.consume(c);return}return Pt(c)?(i.consume(c),i.exit("chunkText"),l):(i.consume(c),o)}}const Jz={tokenize:tI},ST={tokenize:eI};function tI(i){const t=this,e=[];let n=0,r,l,o;return c;function c(N){if(n<e.length){const I=e[n];return t.containerState=I[1],i.attempt(I[0].continuation,h,p)(N)}return p(N)}function h(N){if(n++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&O();const I=t.events.length;let z=I,L;for(;z--;)if(t.events[z][0]==="exit"&&t.events[z][1].type==="chunkFlow"){L=t.events[z][1].end;break}T(n);let B=I;for(;B<t.events.length;)t.events[B][1].end={...L},B++;return kr(t.events,z+1,0,t.events.slice(I)),t.events.length=B,p(N)}return c(N)}function p(N){if(n===e.length){if(!r)return b(N);if(r.currentConstruct&&r.currentConstruct.concrete)return S(N);t.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},i.check(ST,g,y)(N)}function g(N){return r&&O(),T(n),b(N)}function y(N){return t.parser.lazy[t.now().line]=n!==e.length,o=t.now().offset,S(N)}function b(N){return t.containerState={},i.attempt(ST,v,S)(N)}function v(N){return n++,e.push([t.currentConstruct,t.containerState]),b(N)}function S(N){if(N===null){r&&O(),T(0),i.consume(N);return}return r=r||t.parser.flow(t.now()),i.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:l}),w(N)}function w(N){if(N===null){_(i.exit("chunkFlow"),!0),T(0),i.consume(N);return}return Pt(N)?(i.consume(N),_(i.exit("chunkFlow")),n=0,t.interrupt=void 0,c):(i.consume(N),w)}function _(N,I){const z=t.sliceStream(N);if(I&&z.push(null),N.previous=l,l&&(l.next=N),l=N,r.defineSkip(N.start),r.write(z),t.parser.lazy[N.start.line]){let L=r.events.length;for(;L--;)if(r.events[L][1].start.offset<o&&(!r.events[L][1].end||r.events[L][1].end.offset>o))return;const B=t.events.length;let X=B,Q,rt;for(;X--;)if(t.events[X][0]==="exit"&&t.events[X][1].type==="chunkFlow"){if(Q){rt=t.events[X][1].end;break}Q=!0}for(T(n),L=B;L<t.events.length;)t.events[L][1].end={...rt},L++;kr(t.events,X+1,0,t.events.slice(B)),t.events.length=L}}function T(N){let I=e.length;for(;I-- >N;){const z=e[I];t.containerState=z[1],z[0].exit.call(t,i)}e.length=N}function O(){r.write([null]),l=void 0,r=void 0,t.containerState._closeFlow=void 0}}function eI(i,t,e){return De(i,i.attempt(this.parser.constructs.document,t,e),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function xT(i){if(i===null||Di(i)||Kz(i))return 1;if(Wz(i))return 2}function wx(i,t,e){const n=[];let r=-1;for(;++r<i.length;){const l=i[r].resolveAll;l&&!n.includes(l)&&(t=l(t,e),n.push(l))}return t}const Cw={name:"attention",resolveAll:nI,tokenize:iI};function nI(i,t){let e=-1,n,r,l,o,c,h,p,g;for(;++e<i.length;)if(i[e][0]==="enter"&&i[e][1].type==="attentionSequence"&&i[e][1]._close){for(n=e;n--;)if(i[n][0]==="exit"&&i[n][1].type==="attentionSequence"&&i[n][1]._open&&t.sliceSerialize(i[n][1]).charCodeAt(0)===t.sliceSerialize(i[e][1]).charCodeAt(0)){if((i[n][1]._close||i[e][1]._open)&&(i[e][1].end.offset-i[e][1].start.offset)%3&&!((i[n][1].end.offset-i[n][1].start.offset+i[e][1].end.offset-i[e][1].start.offset)%3))continue;h=i[n][1].end.offset-i[n][1].start.offset>1&&i[e][1].end.offset-i[e][1].start.offset>1?2:1;const y={...i[n][1].end},b={...i[e][1].start};ET(y,-h),ET(b,h),o={type:h>1?"strongSequence":"emphasisSequence",start:y,end:{...i[n][1].end}},c={type:h>1?"strongSequence":"emphasisSequence",start:{...i[e][1].start},end:b},l={type:h>1?"strongText":"emphasisText",start:{...i[n][1].end},end:{...i[e][1].start}},r={type:h>1?"strong":"emphasis",start:{...o.start},end:{...c.end}},i[n][1].end={...o.start},i[e][1].start={...c.end},p=[],i[n][1].end.offset-i[n][1].start.offset&&(p=Cs(p,[["enter",i[n][1],t],["exit",i[n][1],t]])),p=Cs(p,[["enter",r,t],["enter",o,t],["exit",o,t],["enter",l,t]]),p=Cs(p,wx(t.parser.constructs.insideSpan.null,i.slice(n+1,e),t)),p=Cs(p,[["exit",l,t],["enter",c,t],["exit",c,t],["exit",r,t]]),i[e][1].end.offset-i[e][1].start.offset?(g=2,p=Cs(p,[["enter",i[e][1],t],["exit",i[e][1],t]])):g=0,kr(i,n-1,e-n+3,p),e=n+p.length-g-2;break}}for(e=-1;++e<i.length;)i[e][1].type==="attentionSequence"&&(i[e][1].type="data");return i}function iI(i,t){const e=this.parser.constructs.attentionMarkers.null,n=this.previous,r=xT(n);let l;return o;function o(h){return l=h,i.enter("attentionSequence"),c(h)}function c(h){if(h===l)return i.consume(h),c;const p=i.exit("attentionSequence"),g=xT(h),y=!g||g===2&&r||e.includes(h),b=!r||r===2&&g||e.includes(n);return p._open=!!(l===42?y:y&&(r||!b)),p._close=!!(l===42?b:b&&(g||!y)),t(h)}}function ET(i,t){i.column+=t,i.offset+=t,i._bufferIndex+=t}const sI={name:"autolink",tokenize:rI};function rI(i,t,e){let n=0;return r;function r(v){return i.enter("autolink"),i.enter("autolinkMarker"),i.consume(v),i.exit("autolinkMarker"),i.enter("autolinkProtocol"),l}function l(v){return Rr(v)?(i.consume(v),o):v===64?e(v):p(v)}function o(v){return v===43||v===45||v===46||rs(v)?(n=1,c(v)):p(v)}function c(v){return v===58?(i.consume(v),n=0,h):(v===43||v===45||v===46||rs(v))&&n++<32?(i.consume(v),c):(n=0,p(v))}function h(v){return v===62?(i.exit("autolinkProtocol"),i.enter("autolinkMarker"),i.consume(v),i.exit("autolinkMarker"),i.exit("autolink"),t):v===null||v===32||v===60||Ew(v)?e(v):(i.consume(v),h)}function p(v){return v===64?(i.consume(v),g):Yz(v)?(i.consume(v),p):e(v)}function g(v){return rs(v)?y(v):e(v)}function y(v){return v===46?(i.consume(v),n=0,g):v===62?(i.exit("autolinkProtocol").type="autolinkEmail",i.enter("autolinkMarker"),i.consume(v),i.exit("autolinkMarker"),i.exit("autolink"),t):b(v)}function b(v){if((v===45||rs(v))&&n++<63){const S=v===45?b:y;return i.consume(v),S}return e(v)}}const Ub={partial:!0,tokenize:aI};function aI(i,t,e){return n;function n(l){return ue(l)?De(i,r,"linePrefix")(l):r(l)}function r(l){return l===null||Pt(l)?t(l):e(l)}}const DD={continuation:{tokenize:oI},exit:uI,name:"blockQuote",tokenize:lI};function lI(i,t,e){const n=this;return r;function r(o){if(o===62){const c=n.containerState;return c.open||(i.enter("blockQuote",{_container:!0}),c.open=!0),i.enter("blockQuotePrefix"),i.enter("blockQuoteMarker"),i.consume(o),i.exit("blockQuoteMarker"),l}return e(o)}function l(o){return ue(o)?(i.enter("blockQuotePrefixWhitespace"),i.consume(o),i.exit("blockQuotePrefixWhitespace"),i.exit("blockQuotePrefix"),t):(i.exit("blockQuotePrefix"),t(o))}}function oI(i,t,e){const n=this;return r;function r(o){return ue(o)?De(i,l,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):l(o)}function l(o){return i.attempt(DD,t,e)(o)}}function uI(i){i.exit("blockQuote")}const kD={name:"characterEscape",tokenize:cI};function cI(i,t,e){return n;function n(l){return i.enter("characterEscape"),i.enter("escapeMarker"),i.consume(l),i.exit("escapeMarker"),r}function r(l){return $z(l)?(i.enter("characterEscapeValue"),i.consume(l),i.exit("characterEscapeValue"),i.exit("characterEscape"),t):e(l)}}const MD={name:"characterReference",tokenize:hI};function hI(i,t,e){const n=this;let r=0,l,o;return c;function c(y){return i.enter("characterReference"),i.enter("characterReferenceMarker"),i.consume(y),i.exit("characterReferenceMarker"),h}function h(y){return y===35?(i.enter("characterReferenceMarkerNumeric"),i.consume(y),i.exit("characterReferenceMarkerNumeric"),p):(i.enter("characterReferenceValue"),l=31,o=rs,g(y))}function p(y){return y===88||y===120?(i.enter("characterReferenceMarkerHexadecimal"),i.consume(y),i.exit("characterReferenceMarkerHexadecimal"),i.enter("characterReferenceValue"),l=6,o=Xz,g):(i.enter("characterReferenceValue"),l=7,o=_w,g(y))}function g(y){if(y===59&&r){const b=i.exit("characterReferenceValue");return o===rs&&!Ax(n.sliceSerialize(b))?e(y):(i.enter("characterReferenceMarker"),i.consume(y),i.exit("characterReferenceMarker"),i.exit("characterReference"),t)}return o(y)&&r++<l?(i.consume(y),g):e(y)}}const _T={partial:!0,tokenize:fI},CT={concrete:!0,name:"codeFenced",tokenize:dI};function dI(i,t,e){const n=this,r={partial:!0,tokenize:z};let l=0,o=0,c;return h;function h(L){return p(L)}function p(L){const B=n.events[n.events.length-1];return l=B&&B[1].type==="linePrefix"?B[2].sliceSerialize(B[1],!0).length:0,c=L,i.enter("codeFenced"),i.enter("codeFencedFence"),i.enter("codeFencedFenceSequence"),g(L)}function g(L){return L===c?(o++,i.consume(L),g):o<3?e(L):(i.exit("codeFencedFenceSequence"),ue(L)?De(i,y,"whitespace")(L):y(L))}function y(L){return L===null||Pt(L)?(i.exit("codeFencedFence"),n.interrupt?t(L):i.check(_T,w,I)(L)):(i.enter("codeFencedFenceInfo"),i.enter("chunkString",{contentType:"string"}),b(L))}function b(L){return L===null||Pt(L)?(i.exit("chunkString"),i.exit("codeFencedFenceInfo"),y(L)):ue(L)?(i.exit("chunkString"),i.exit("codeFencedFenceInfo"),De(i,v,"whitespace")(L)):L===96&&L===c?e(L):(i.consume(L),b)}function v(L){return L===null||Pt(L)?y(L):(i.enter("codeFencedFenceMeta"),i.enter("chunkString",{contentType:"string"}),S(L))}function S(L){return L===null||Pt(L)?(i.exit("chunkString"),i.exit("codeFencedFenceMeta"),y(L)):L===96&&L===c?e(L):(i.consume(L),S)}function w(L){return i.attempt(r,I,_)(L)}function _(L){return i.enter("lineEnding"),i.consume(L),i.exit("lineEnding"),T}function T(L){return l>0&&ue(L)?De(i,O,"linePrefix",l+1)(L):O(L)}function O(L){return L===null||Pt(L)?i.check(_T,w,I)(L):(i.enter("codeFlowValue"),N(L))}function N(L){return L===null||Pt(L)?(i.exit("codeFlowValue"),O(L)):(i.consume(L),N)}function I(L){return i.exit("codeFenced"),t(L)}function z(L,B,X){let Q=0;return rt;function rt(dt){return L.enter("lineEnding"),L.consume(dt),L.exit("lineEnding"),$}function $(dt){return L.enter("codeFencedFence"),ue(dt)?De(L,J,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(dt):J(dt)}function J(dt){return dt===c?(L.enter("codeFencedFenceSequence"),ht(dt)):X(dt)}function ht(dt){return dt===c?(Q++,L.consume(dt),ht):Q>=o?(L.exit("codeFencedFenceSequence"),ue(dt)?De(L,tt,"whitespace")(dt):tt(dt)):X(dt)}function tt(dt){return dt===null||Pt(dt)?(L.exit("codeFencedFence"),B(dt)):X(dt)}}}function fI(i,t,e){const n=this;return r;function r(o){return o===null?e(o):(i.enter("lineEnding"),i.consume(o),i.exit("lineEnding"),l)}function l(o){return n.parser.lazy[n.now().line]?e(o):t(o)}}const PA={name:"codeIndented",tokenize:gI},pI={partial:!0,tokenize:mI};function gI(i,t,e){const n=this;return r;function r(p){return i.enter("codeIndented"),De(i,l,"linePrefix",5)(p)}function l(p){const g=n.events[n.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?o(p):e(p)}function o(p){return p===null?h(p):Pt(p)?i.attempt(pI,o,h)(p):(i.enter("codeFlowValue"),c(p))}function c(p){return p===null||Pt(p)?(i.exit("codeFlowValue"),o(p)):(i.consume(p),c)}function h(p){return i.exit("codeIndented"),t(p)}}function mI(i,t,e){const n=this;return r;function r(o){return n.parser.lazy[n.now().line]?e(o):Pt(o)?(i.enter("lineEnding"),i.consume(o),i.exit("lineEnding"),r):De(i,l,"linePrefix",5)(o)}function l(o){const c=n.events[n.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(o):Pt(o)?r(o):e(o)}}const yI={name:"codeText",previous:vI,resolve:bI,tokenize:AI};function bI(i){let t=i.length-4,e=3,n,r;if((i[e][1].type==="lineEnding"||i[e][1].type==="space")&&(i[t][1].type==="lineEnding"||i[t][1].type==="space")){for(n=e;++n<t;)if(i[n][1].type==="codeTextData"){i[e][1].type="codeTextPadding",i[t][1].type="codeTextPadding",e+=2,t-=2;break}}for(n=e-1,t++;++n<=t;)r===void 0?n!==t&&i[n][1].type!=="lineEnding"&&(r=n):(n===t||i[n][1].type==="lineEnding")&&(i[r][1].type="codeTextData",n!==r+2&&(i[r][1].end=i[n-1][1].end,i.splice(r+2,n-r-2),t-=n-r-2,n=r+2),r=void 0);return i}function vI(i){return i!==96||this.events[this.events.length-1][1].type==="characterEscape"}function AI(i,t,e){let n=0,r,l;return o;function o(y){return i.enter("codeText"),i.enter("codeTextSequence"),c(y)}function c(y){return y===96?(i.consume(y),n++,c):(i.exit("codeTextSequence"),h(y))}function h(y){return y===null?e(y):y===32?(i.enter("space"),i.consume(y),i.exit("space"),h):y===96?(l=i.enter("codeTextSequence"),r=0,g(y)):Pt(y)?(i.enter("lineEnding"),i.consume(y),i.exit("lineEnding"),h):(i.enter("codeTextData"),p(y))}function p(y){return y===null||y===32||y===96||Pt(y)?(i.exit("codeTextData"),h(y)):(i.consume(y),p)}function g(y){return y===96?(i.consume(y),r++,g):r===n?(i.exit("codeTextSequence"),i.exit("codeText"),t(y)):(l.type="codeTextData",p(y))}}class wI{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,e){const n=e??Number.POSITIVE_INFINITY;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,e,n){const r=e||0;this.setCursor(Math.trunc(t));const l=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&bf(this.left,n),l.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),bf(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),bf(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const e=this.left.splice(t,Number.POSITIVE_INFINITY);bf(this.right,e.reverse())}else{const e=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);bf(this.left,e.reverse())}}}function bf(i,t){let e=0;if(t.length<1e4)i.push(...t);else for(;e<t.length;)i.push(...t.slice(e,e+1e4)),e+=1e4}function ND(i){const t={};let e=-1,n,r,l,o,c,h,p;const g=new wI(i);for(;++e<g.length;){for(;e in t;)e=t[e];if(n=g.get(e),e&&n[1].type==="chunkFlow"&&g.get(e-1)[1].type==="listItemPrefix"&&(h=n[1]._tokenizer.events,l=0,l<h.length&&h[l][1].type==="lineEndingBlank"&&(l+=2),l<h.length&&h[l][1].type==="content"))for(;++l<h.length&&h[l][1].type!=="content";)h[l][1].type==="chunkText"&&(h[l][1]._isInFirstContentOfListItem=!0,l++);if(n[0]==="enter")n[1].contentType&&(Object.assign(t,SI(g,e)),e=t[e],p=!0);else if(n[1]._container){for(l=e,r=void 0;l--;)if(o=g.get(l),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(g.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=l);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(n[1].end={...g.get(r)[1].start},c=g.slice(r,e),c.unshift(n),g.splice(r,e-r+1,c))}}return kr(i,0,Number.POSITIVE_INFINITY,g.slice(0)),!p}function SI(i,t){const e=i.get(t)[1],n=i.get(t)[2];let r=t-1;const l=[];let o=e._tokenizer;o||(o=n.parser[e.contentType](e.start),e._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const c=o.events,h=[],p={};let g,y,b=-1,v=e,S=0,w=0;const _=[w];for(;v;){for(;i.get(++r)[1]!==v;);l.push(r),v._tokenizer||(g=n.sliceStream(v),v.next||g.push(null),y&&o.defineSkip(v.start),v._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(g),v._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),y=v,v=v.next}for(v=e;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(w=b+1,_.push(w),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(o.events=[],v?(v._tokenizer=void 0,v.previous=void 0):_.pop(),b=_.length;b--;){const T=c.slice(_[b],_[b+1]),O=l.pop();h.push([O,O+T.length-1]),i.splice(O,2,T)}for(h.reverse(),b=-1;++b<h.length;)p[S+h[b][0]]=S+h[b][1],S+=h[b][1]-h[b][0]-1;return p}const xI={resolve:_I,tokenize:CI},EI={partial:!0,tokenize:TI};function _I(i){return ND(i),i}function CI(i,t){let e;return n;function n(c){return i.enter("content"),e=i.enter("chunkContent",{contentType:"content"}),r(c)}function r(c){return c===null?l(c):Pt(c)?i.check(EI,o,l)(c):(i.consume(c),r)}function l(c){return i.exit("chunkContent"),i.exit("content"),t(c)}function o(c){return i.consume(c),i.exit("chunkContent"),e.next=i.enter("chunkContent",{contentType:"content",previous:e}),e=e.next,r}}function TI(i,t,e){const n=this;return r;function r(o){return i.exit("chunkContent"),i.enter("lineEnding"),i.consume(o),i.exit("lineEnding"),De(i,l,"linePrefix")}function l(o){if(o===null||Pt(o))return e(o);const c=n.events[n.events.length-1];return!n.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?t(o):i.interrupt(n.parser.constructs.flow,e,t)(o)}}function OD(i,t,e,n,r,l,o,c,h){const p=h||Number.POSITIVE_INFINITY;let g=0;return y;function y(T){return T===60?(i.enter(n),i.enter(r),i.enter(l),i.consume(T),i.exit(l),b):T===null||T===32||T===41||Ew(T)?e(T):(i.enter(n),i.enter(o),i.enter(c),i.enter("chunkString",{contentType:"string"}),w(T))}function b(T){return T===62?(i.enter(l),i.consume(T),i.exit(l),i.exit(r),i.exit(n),t):(i.enter(c),i.enter("chunkString",{contentType:"string"}),v(T))}function v(T){return T===62?(i.exit("chunkString"),i.exit(c),b(T)):T===null||T===60||Pt(T)?e(T):(i.consume(T),T===92?S:v)}function S(T){return T===60||T===62||T===92?(i.consume(T),v):v(T)}function w(T){return!g&&(T===null||T===41||Di(T))?(i.exit("chunkString"),i.exit(c),i.exit(o),i.exit(n),t(T)):g<p&&T===40?(i.consume(T),g++,w):T===41?(i.consume(T),g--,w):T===null||T===32||T===40||Ew(T)?e(T):(i.consume(T),T===92?_:w)}function _(T){return T===40||T===41||T===92?(i.consume(T),w):w(T)}}function LD(i,t,e,n,r,l){const o=this;let c=0,h;return p;function p(v){return i.enter(n),i.enter(r),i.consume(v),i.exit(r),i.enter(l),g}function g(v){return c>999||v===null||v===91||v===93&&!h||v===94&&!c&&"_hiddenFootnoteSupport"in o.parser.constructs?e(v):v===93?(i.exit(l),i.enter(r),i.consume(v),i.exit(r),i.exit(n),t):Pt(v)?(i.enter("lineEnding"),i.consume(v),i.exit("lineEnding"),g):(i.enter("chunkString",{contentType:"string"}),y(v))}function y(v){return v===null||v===91||v===93||Pt(v)||c++>999?(i.exit("chunkString"),g(v)):(i.consume(v),h||(h=!ue(v)),v===92?b:y)}function b(v){return v===91||v===92||v===93?(i.consume(v),c++,y):y(v)}}function PD(i,t,e,n,r,l){let o;return c;function c(b){return b===34||b===39||b===40?(i.enter(n),i.enter(r),i.consume(b),i.exit(r),o=b===40?41:b,h):e(b)}function h(b){return b===o?(i.enter(r),i.consume(b),i.exit(r),i.exit(n),t):(i.enter(l),p(b))}function p(b){return b===o?(i.exit(l),h(o)):b===null?e(b):Pt(b)?(i.enter("lineEnding"),i.consume(b),i.exit("lineEnding"),De(i,p,"linePrefix")):(i.enter("chunkString",{contentType:"string"}),g(b))}function g(b){return b===o||b===null||Pt(b)?(i.exit("chunkString"),p(b)):(i.consume(b),b===92?y:g)}function y(b){return b===o||b===92?(i.consume(b),g):g(b)}}function Xf(i,t){let e;return n;function n(r){return Pt(r)?(i.enter("lineEnding"),i.consume(r),i.exit("lineEnding"),e=!0,n):ue(r)?De(i,n,e?"linePrefix":"lineSuffix")(r):t(r)}}const RI={name:"definition",tokenize:kI},DI={partial:!0,tokenize:MI};function kI(i,t,e){const n=this;let r;return l;function l(v){return i.enter("definition"),o(v)}function o(v){return LD.call(n,i,c,e,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function c(v){return r=Kc(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)),v===58?(i.enter("definitionMarker"),i.consume(v),i.exit("definitionMarker"),h):e(v)}function h(v){return Di(v)?Xf(i,p)(v):p(v)}function p(v){return OD(i,g,e,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function g(v){return i.attempt(DI,y,y)(v)}function y(v){return ue(v)?De(i,b,"whitespace")(v):b(v)}function b(v){return v===null||Pt(v)?(i.exit("definition"),n.parser.defined.push(r),t(v)):e(v)}}function MI(i,t,e){return n;function n(c){return Di(c)?Xf(i,r)(c):e(c)}function r(c){return PD(i,l,e,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function l(c){return ue(c)?De(i,o,"whitespace")(c):o(c)}function o(c){return c===null||Pt(c)?t(c):e(c)}}const NI={name:"hardBreakEscape",tokenize:OI};function OI(i,t,e){return n;function n(l){return i.enter("hardBreakEscape"),i.consume(l),r}function r(l){return Pt(l)?(i.exit("hardBreakEscape"),t(l)):e(l)}}const LI={name:"headingAtx",resolve:PI,tokenize:zI};function PI(i,t){let e=i.length-2,n=3,r,l;return i[n][1].type==="whitespace"&&(n+=2),e-2>n&&i[e][1].type==="whitespace"&&(e-=2),i[e][1].type==="atxHeadingSequence"&&(n===e-1||e-4>n&&i[e-2][1].type==="whitespace")&&(e-=n+1===e?2:4),e>n&&(r={type:"atxHeadingText",start:i[n][1].start,end:i[e][1].end},l={type:"chunkText",start:i[n][1].start,end:i[e][1].end,contentType:"text"},kr(i,n,e-n+1,[["enter",r,t],["enter",l,t],["exit",l,t],["exit",r,t]])),i}function zI(i,t,e){let n=0;return r;function r(g){return i.enter("atxHeading"),l(g)}function l(g){return i.enter("atxHeadingSequence"),o(g)}function o(g){return g===35&&n++<6?(i.consume(g),o):g===null||Di(g)?(i.exit("atxHeadingSequence"),c(g)):e(g)}function c(g){return g===35?(i.enter("atxHeadingSequence"),h(g)):g===null||Pt(g)?(i.exit("atxHeading"),t(g)):ue(g)?De(i,c,"whitespace")(g):(i.enter("atxHeadingText"),p(g))}function h(g){return g===35?(i.consume(g),h):(i.exit("atxHeadingSequence"),c(g))}function p(g){return g===null||g===35||Di(g)?(i.exit("atxHeadingText"),c(g)):(i.consume(g),p)}}const II=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],TT=["pre","script","style","textarea"],jI={concrete:!0,name:"htmlFlow",resolveTo:HI,tokenize:UI},FI={partial:!0,tokenize:VI},BI={partial:!0,tokenize:qI};function HI(i){let t=i.length;for(;t--&&!(i[t][0]==="enter"&&i[t][1].type==="htmlFlow"););return t>1&&i[t-2][1].type==="linePrefix"&&(i[t][1].start=i[t-2][1].start,i[t+1][1].start=i[t-2][1].start,i.splice(t-2,2)),i}function UI(i,t,e){const n=this;let r,l,o,c,h;return p;function p(k){return g(k)}function g(k){return i.enter("htmlFlow"),i.enter("htmlFlowData"),i.consume(k),y}function y(k){return k===33?(i.consume(k),b):k===47?(i.consume(k),l=!0,w):k===63?(i.consume(k),r=3,n.interrupt?t:C):Rr(k)?(i.consume(k),o=String.fromCharCode(k),_):e(k)}function b(k){return k===45?(i.consume(k),r=2,v):k===91?(i.consume(k),r=5,c=0,S):Rr(k)?(i.consume(k),r=4,n.interrupt?t:C):e(k)}function v(k){return k===45?(i.consume(k),n.interrupt?t:C):e(k)}function S(k){const at="CDATA[";return k===at.charCodeAt(c++)?(i.consume(k),c===at.length?n.interrupt?t:J:S):e(k)}function w(k){return Rr(k)?(i.consume(k),o=String.fromCharCode(k),_):e(k)}function _(k){if(k===null||k===47||k===62||Di(k)){const at=k===47,pt=o.toLowerCase();return!at&&!l&&TT.includes(pt)?(r=1,n.interrupt?t(k):J(k)):II.includes(o.toLowerCase())?(r=6,at?(i.consume(k),T):n.interrupt?t(k):J(k)):(r=7,n.interrupt&&!n.parser.lazy[n.now().line]?e(k):l?O(k):N(k))}return k===45||rs(k)?(i.consume(k),o+=String.fromCharCode(k),_):e(k)}function T(k){return k===62?(i.consume(k),n.interrupt?t:J):e(k)}function O(k){return ue(k)?(i.consume(k),O):rt(k)}function N(k){return k===47?(i.consume(k),rt):k===58||k===95||Rr(k)?(i.consume(k),I):ue(k)?(i.consume(k),N):rt(k)}function I(k){return k===45||k===46||k===58||k===95||rs(k)?(i.consume(k),I):z(k)}function z(k){return k===61?(i.consume(k),L):ue(k)?(i.consume(k),z):N(k)}function L(k){return k===null||k===60||k===61||k===62||k===96?e(k):k===34||k===39?(i.consume(k),h=k,B):ue(k)?(i.consume(k),L):X(k)}function B(k){return k===h?(i.consume(k),h=null,Q):k===null||Pt(k)?e(k):(i.consume(k),B)}function X(k){return k===null||k===34||k===39||k===47||k===60||k===61||k===62||k===96||Di(k)?z(k):(i.consume(k),X)}function Q(k){return k===47||k===62||ue(k)?N(k):e(k)}function rt(k){return k===62?(i.consume(k),$):e(k)}function $(k){return k===null||Pt(k)?J(k):ue(k)?(i.consume(k),$):e(k)}function J(k){return k===45&&r===2?(i.consume(k),F):k===60&&r===1?(i.consume(k),G):k===62&&r===4?(i.consume(k),K):k===63&&r===3?(i.consume(k),C):k===93&&r===5?(i.consume(k),Et):Pt(k)&&(r===6||r===7)?(i.exit("htmlFlowData"),i.check(FI,ut,ht)(k)):k===null||Pt(k)?(i.exit("htmlFlowData"),ht(k)):(i.consume(k),J)}function ht(k){return i.check(BI,tt,ut)(k)}function tt(k){return i.enter("lineEnding"),i.consume(k),i.exit("lineEnding"),dt}function dt(k){return k===null||Pt(k)?ht(k):(i.enter("htmlFlowData"),J(k))}function F(k){return k===45?(i.consume(k),C):J(k)}function G(k){return k===47?(i.consume(k),o="",bt):J(k)}function bt(k){if(k===62){const at=o.toLowerCase();return TT.includes(at)?(i.consume(k),K):J(k)}return Rr(k)&&o.length<8?(i.consume(k),o+=String.fromCharCode(k),bt):J(k)}function Et(k){return k===93?(i.consume(k),C):J(k)}function C(k){return k===62?(i.consume(k),K):k===45&&r===2?(i.consume(k),C):J(k)}function K(k){return k===null||Pt(k)?(i.exit("htmlFlowData"),ut(k)):(i.consume(k),K)}function ut(k){return i.exit("htmlFlow"),t(k)}}function qI(i,t,e){const n=this;return r;function r(o){return Pt(o)?(i.enter("lineEnding"),i.consume(o),i.exit("lineEnding"),l):e(o)}function l(o){return n.parser.lazy[n.now().line]?e(o):t(o)}}function VI(i,t,e){return n;function n(r){return i.enter("lineEnding"),i.consume(r),i.exit("lineEnding"),i.attempt(Ub,t,e)}}const GI={name:"htmlText",tokenize:YI};function YI(i,t,e){const n=this;let r,l,o;return c;function c(C){return i.enter("htmlText"),i.enter("htmlTextData"),i.consume(C),h}function h(C){return C===33?(i.consume(C),p):C===47?(i.consume(C),z):C===63?(i.consume(C),N):Rr(C)?(i.consume(C),X):e(C)}function p(C){return C===45?(i.consume(C),g):C===91?(i.consume(C),l=0,S):Rr(C)?(i.consume(C),O):e(C)}function g(C){return C===45?(i.consume(C),v):e(C)}function y(C){return C===null?e(C):C===45?(i.consume(C),b):Pt(C)?(o=y,G(C)):(i.consume(C),y)}function b(C){return C===45?(i.consume(C),v):y(C)}function v(C){return C===62?F(C):C===45?b(C):y(C)}function S(C){const K="CDATA[";return C===K.charCodeAt(l++)?(i.consume(C),l===K.length?w:S):e(C)}function w(C){return C===null?e(C):C===93?(i.consume(C),_):Pt(C)?(o=w,G(C)):(i.consume(C),w)}function _(C){return C===93?(i.consume(C),T):w(C)}function T(C){return C===62?F(C):C===93?(i.consume(C),T):w(C)}function O(C){return C===null||C===62?F(C):Pt(C)?(o=O,G(C)):(i.consume(C),O)}function N(C){return C===null?e(C):C===63?(i.consume(C),I):Pt(C)?(o=N,G(C)):(i.consume(C),N)}function I(C){return C===62?F(C):N(C)}function z(C){return Rr(C)?(i.consume(C),L):e(C)}function L(C){return C===45||rs(C)?(i.consume(C),L):B(C)}function B(C){return Pt(C)?(o=B,G(C)):ue(C)?(i.consume(C),B):F(C)}function X(C){return C===45||rs(C)?(i.consume(C),X):C===47||C===62||Di(C)?Q(C):e(C)}function Q(C){return C===47?(i.consume(C),F):C===58||C===95||Rr(C)?(i.consume(C),rt):Pt(C)?(o=Q,G(C)):ue(C)?(i.consume(C),Q):F(C)}function rt(C){return C===45||C===46||C===58||C===95||rs(C)?(i.consume(C),rt):$(C)}function $(C){return C===61?(i.consume(C),J):Pt(C)?(o=$,G(C)):ue(C)?(i.consume(C),$):Q(C)}function J(C){return C===null||C===60||C===61||C===62||C===96?e(C):C===34||C===39?(i.consume(C),r=C,ht):Pt(C)?(o=J,G(C)):ue(C)?(i.consume(C),J):(i.consume(C),tt)}function ht(C){return C===r?(i.consume(C),r=void 0,dt):C===null?e(C):Pt(C)?(o=ht,G(C)):(i.consume(C),ht)}function tt(C){return C===null||C===34||C===39||C===60||C===61||C===96?e(C):C===47||C===62||Di(C)?Q(C):(i.consume(C),tt)}function dt(C){return C===47||C===62||Di(C)?Q(C):e(C)}function F(C){return C===62?(i.consume(C),i.exit("htmlTextData"),i.exit("htmlText"),t):e(C)}function G(C){return i.exit("htmlTextData"),i.enter("lineEnding"),i.consume(C),i.exit("lineEnding"),bt}function bt(C){return ue(C)?De(i,Et,"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):Et(C)}function Et(C){return i.enter("htmlTextData"),o(C)}}const Sx={name:"labelEnd",resolveAll:KI,resolveTo:QI,tokenize:ZI},XI={tokenize:JI},$I={tokenize:t3},WI={tokenize:e3};function KI(i){let t=-1;const e=[];for(;++t<i.length;){const n=i[t][1];if(e.push(i[t]),n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd"){const r=n.type==="labelImage"?4:2;n.type="data",t+=r}}return i.length!==e.length&&kr(i,0,i.length,e),i}function QI(i,t){let e=i.length,n=0,r,l,o,c;for(;e--;)if(r=i[e][1],l){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;i[e][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(i[e][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(l=e,r.type!=="labelLink")){n=2;break}}else r.type==="labelEnd"&&(o=e);const h={type:i[l][1].type==="labelLink"?"link":"image",start:{...i[l][1].start},end:{...i[i.length-1][1].end}},p={type:"label",start:{...i[l][1].start},end:{...i[o][1].end}},g={type:"labelText",start:{...i[l+n+2][1].end},end:{...i[o-2][1].start}};return c=[["enter",h,t],["enter",p,t]],c=Cs(c,i.slice(l+1,l+n+3)),c=Cs(c,[["enter",g,t]]),c=Cs(c,wx(t.parser.constructs.insideSpan.null,i.slice(l+n+4,o-3),t)),c=Cs(c,[["exit",g,t],i[o-2],i[o-1],["exit",p,t]]),c=Cs(c,i.slice(o+1)),c=Cs(c,[["exit",h,t]]),kr(i,l,i.length,c),i}function ZI(i,t,e){const n=this;let r=n.events.length,l,o;for(;r--;)if((n.events[r][1].type==="labelImage"||n.events[r][1].type==="labelLink")&&!n.events[r][1]._balanced){l=n.events[r][1];break}return c;function c(b){return l?l._inactive?y(b):(o=n.parser.defined.includes(Kc(n.sliceSerialize({start:l.end,end:n.now()}))),i.enter("labelEnd"),i.enter("labelMarker"),i.consume(b),i.exit("labelMarker"),i.exit("labelEnd"),h):e(b)}function h(b){return b===40?i.attempt(XI,g,o?g:y)(b):b===91?i.attempt($I,g,o?p:y)(b):o?g(b):y(b)}function p(b){return i.attempt(WI,g,y)(b)}function g(b){return t(b)}function y(b){return l._balanced=!0,e(b)}}function JI(i,t,e){return n;function n(y){return i.enter("resource"),i.enter("resourceMarker"),i.consume(y),i.exit("resourceMarker"),r}function r(y){return Di(y)?Xf(i,l)(y):l(y)}function l(y){return y===41?g(y):OD(i,o,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function o(y){return Di(y)?Xf(i,h)(y):g(y)}function c(y){return e(y)}function h(y){return y===34||y===39||y===40?PD(i,p,e,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):g(y)}function p(y){return Di(y)?Xf(i,g)(y):g(y)}function g(y){return y===41?(i.enter("resourceMarker"),i.consume(y),i.exit("resourceMarker"),i.exit("resource"),t):e(y)}}function t3(i,t,e){const n=this;return r;function r(c){return LD.call(n,i,l,o,"reference","referenceMarker","referenceString")(c)}function l(c){return n.parser.defined.includes(Kc(n.sliceSerialize(n.events[n.events.length-1][1]).slice(1,-1)))?t(c):e(c)}function o(c){return e(c)}}function e3(i,t,e){return n;function n(l){return i.enter("reference"),i.enter("referenceMarker"),i.consume(l),i.exit("referenceMarker"),r}function r(l){return l===93?(i.enter("referenceMarker"),i.consume(l),i.exit("referenceMarker"),i.exit("reference"),t):e(l)}}const n3={name:"labelStartImage",resolveAll:Sx.resolveAll,tokenize:i3};function i3(i,t,e){const n=this;return r;function r(c){return i.enter("labelImage"),i.enter("labelImageMarker"),i.consume(c),i.exit("labelImageMarker"),l}function l(c){return c===91?(i.enter("labelMarker"),i.consume(c),i.exit("labelMarker"),i.exit("labelImage"),o):e(c)}function o(c){return c===94&&"_hiddenFootnoteSupport"in n.parser.constructs?e(c):t(c)}}const s3={name:"labelStartLink",resolveAll:Sx.resolveAll,tokenize:r3};function r3(i,t,e){const n=this;return r;function r(o){return i.enter("labelLink"),i.enter("labelMarker"),i.consume(o),i.exit("labelMarker"),i.exit("labelLink"),l}function l(o){return o===94&&"_hiddenFootnoteSupport"in n.parser.constructs?e(o):t(o)}}const zA={name:"lineEnding",tokenize:a3};function a3(i,t){return e;function e(n){return i.enter("lineEnding"),i.consume(n),i.exit("lineEnding"),De(i,t,"linePrefix")}}const yy={name:"thematicBreak",tokenize:l3};function l3(i,t,e){let n=0,r;return l;function l(p){return i.enter("thematicBreak"),o(p)}function o(p){return r=p,c(p)}function c(p){return p===r?(i.enter("thematicBreakSequence"),h(p)):n>=3&&(p===null||Pt(p))?(i.exit("thematicBreak"),t(p)):e(p)}function h(p){return p===r?(i.consume(p),n++,h):(i.exit("thematicBreakSequence"),ue(p)?De(i,c,"whitespace")(p):c(p))}}const Si={continuation:{tokenize:h3},exit:f3,name:"list",tokenize:c3},o3={partial:!0,tokenize:p3},u3={partial:!0,tokenize:d3};function c3(i,t,e){const n=this,r=n.events[n.events.length-1];let l=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return c;function c(v){const S=n.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!n.containerState.marker||v===n.containerState.marker:_w(v)){if(n.containerState.type||(n.containerState.type=S,i.enter(S,{_container:!0})),S==="listUnordered")return i.enter("listItemPrefix"),v===42||v===45?i.check(yy,e,p)(v):p(v);if(!n.interrupt||v===49)return i.enter("listItemPrefix"),i.enter("listItemValue"),h(v)}return e(v)}function h(v){return _w(v)&&++o<10?(i.consume(v),h):(!n.interrupt||o<2)&&(n.containerState.marker?v===n.containerState.marker:v===41||v===46)?(i.exit("listItemValue"),p(v)):e(v)}function p(v){return i.enter("listItemMarker"),i.consume(v),i.exit("listItemMarker"),n.containerState.marker=n.containerState.marker||v,i.check(Ub,n.interrupt?e:g,i.attempt(o3,b,y))}function g(v){return n.containerState.initialBlankLine=!0,l++,b(v)}function y(v){return ue(v)?(i.enter("listItemPrefixWhitespace"),i.consume(v),i.exit("listItemPrefixWhitespace"),b):e(v)}function b(v){return n.containerState.size=l+n.sliceSerialize(i.exit("listItemPrefix"),!0).length,t(v)}}function h3(i,t,e){const n=this;return n.containerState._closeFlow=void 0,i.check(Ub,r,l);function r(c){return n.containerState.furtherBlankLines=n.containerState.furtherBlankLines||n.containerState.initialBlankLine,De(i,t,"listItemIndent",n.containerState.size+1)(c)}function l(c){return n.containerState.furtherBlankLines||!ue(c)?(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,o(c)):(n.containerState.furtherBlankLines=void 0,n.containerState.initialBlankLine=void 0,i.attempt(u3,t,o)(c))}function o(c){return n.containerState._closeFlow=!0,n.interrupt=void 0,De(i,i.attempt(Si,t,e),"linePrefix",n.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function d3(i,t,e){const n=this;return De(i,r,"listItemIndent",n.containerState.size+1);function r(l){const o=n.events[n.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===n.containerState.size?t(l):e(l)}}function f3(i){i.exit(this.containerState.type)}function p3(i,t,e){const n=this;return De(i,r,"listItemPrefixWhitespace",n.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(l){const o=n.events[n.events.length-1];return!ue(l)&&o&&o[1].type==="listItemPrefixWhitespace"?t(l):e(l)}}const RT={name:"setextUnderline",resolveTo:g3,tokenize:m3};function g3(i,t){let e=i.length,n,r,l;for(;e--;)if(i[e][0]==="enter"){if(i[e][1].type==="content"){n=e;break}i[e][1].type==="paragraph"&&(r=e)}else i[e][1].type==="content"&&i.splice(e,1),!l&&i[e][1].type==="definition"&&(l=e);const o={type:"setextHeading",start:{...i[n][1].start},end:{...i[i.length-1][1].end}};return i[r][1].type="setextHeadingText",l?(i.splice(r,0,["enter",o,t]),i.splice(l+1,0,["exit",i[n][1],t]),i[n][1].end={...i[l][1].end}):i[n][1]=o,i.push(["exit",o,t]),i}function m3(i,t,e){const n=this;let r;return l;function l(p){let g=n.events.length,y;for(;g--;)if(n.events[g][1].type!=="lineEnding"&&n.events[g][1].type!=="linePrefix"&&n.events[g][1].type!=="content"){y=n.events[g][1].type==="paragraph";break}return!n.parser.lazy[n.now().line]&&(n.interrupt||y)?(i.enter("setextHeadingLine"),r=p,o(p)):e(p)}function o(p){return i.enter("setextHeadingLineSequence"),c(p)}function c(p){return p===r?(i.consume(p),c):(i.exit("setextHeadingLineSequence"),ue(p)?De(i,h,"lineSuffix")(p):h(p))}function h(p){return p===null||Pt(p)?(i.exit("setextHeadingLine"),t(p)):e(p)}}const y3={tokenize:b3};function b3(i){const t=this,e=i.attempt(Ub,n,i.attempt(this.parser.constructs.flowInitial,r,De(i,i.attempt(this.parser.constructs.flow,r,i.attempt(xI,r)),"linePrefix")));return e;function n(l){if(l===null){i.consume(l);return}return i.enter("lineEndingBlank"),i.consume(l),i.exit("lineEndingBlank"),t.currentConstruct=void 0,e}function r(l){if(l===null){i.consume(l);return}return i.enter("lineEnding"),i.consume(l),i.exit("lineEnding"),t.currentConstruct=void 0,e}}const v3={resolveAll:ID()},A3=zD("string"),w3=zD("text");function zD(i){return{resolveAll:ID(i==="text"?S3:void 0),tokenize:t};function t(e){const n=this,r=this.parser.constructs[i],l=e.attempt(r,o,c);return o;function o(g){return p(g)?l(g):c(g)}function c(g){if(g===null){e.consume(g);return}return e.enter("data"),e.consume(g),h}function h(g){return p(g)?(e.exit("data"),l(g)):(e.consume(g),h)}function p(g){if(g===null)return!0;const y=r[g];let b=-1;if(y)for(;++b<y.length;){const v=y[b];if(!v.previous||v.previous.call(n,n.previous))return!0}return!1}}}function ID(i){return t;function t(e,n){let r=-1,l;for(;++r<=e.length;)l===void 0?e[r]&&e[r][1].type==="data"&&(l=r,r++):(!e[r]||e[r][1].type!=="data")&&(r!==l+2&&(e[l][1].end=e[r-1][1].end,e.splice(l+2,r-l-2),r=l+2),l=void 0);return i?i(e,n):e}}function S3(i,t){let e=0;for(;++e<=i.length;)if((e===i.length||i[e][1].type==="lineEnding")&&i[e-1][1].type==="data"){const n=i[e-1][1],r=t.sliceStream(n);let l=r.length,o=-1,c=0,h;for(;l--;){const p=r[l];if(typeof p=="string"){for(o=p.length;p.charCodeAt(o-1)===32;)c++,o--;if(o)break;o=-1}else if(p===-2)h=!0,c++;else if(p!==-1){l++;break}}if(t._contentTypeTextTrailing&&e===i.length&&(c=0),c){const p={type:e===i.length||h||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:l?o:n.start._bufferIndex+o,_index:n.start._index+l,line:n.end.line,column:n.end.column-c,offset:n.end.offset-c},end:{...n.end}};n.end={...p.start},n.start.offset===n.end.offset?Object.assign(n,p):(i.splice(e,0,["enter",p,t],["exit",p,t]),e+=2)}e++}return i}const x3={42:Si,43:Si,45:Si,48:Si,49:Si,50:Si,51:Si,52:Si,53:Si,54:Si,55:Si,56:Si,57:Si,62:DD},E3={91:RI},_3={[-2]:PA,[-1]:PA,32:PA},C3={35:LI,42:yy,45:[RT,yy],60:jI,61:RT,95:yy,96:CT,126:CT},T3={38:MD,92:kD},R3={[-5]:zA,[-4]:zA,[-3]:zA,33:n3,38:MD,42:Cw,60:[sI,GI],91:s3,92:[NI,kD],93:Sx,95:Cw,96:yI},D3={null:[Cw,v3]},k3={null:[42,95]},M3={null:[]},N3=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:k3,contentInitial:E3,disable:M3,document:x3,flow:C3,flowInitial:_3,insideSpan:D3,string:T3,text:R3},Symbol.toStringTag,{value:"Module"}));function O3(i,t,e){let n={_bufferIndex:-1,_index:0,line:e&&e.line||1,column:e&&e.column||1,offset:e&&e.offset||0};const r={},l=[];let o=[],c=[];const h={attempt:B(z),check:B(L),consume:O,enter:N,exit:I,interrupt:B(L,{interrupt:!0})},p={code:null,containerState:{},defineSkip:w,events:[],now:S,parser:i,previous:null,sliceSerialize:b,sliceStream:v,write:y};let g=t.tokenize.call(p,h);return t.resolveAll&&l.push(t),p;function y($){return o=Cs(o,$),_(),o[o.length-1]!==null?[]:(X(t,0),p.events=wx(l,p.events,p),p.events)}function b($,J){return P3(v($),J)}function v($){return L3(o,$)}function S(){const{_bufferIndex:$,_index:J,line:ht,column:tt,offset:dt}=n;return{_bufferIndex:$,_index:J,line:ht,column:tt,offset:dt}}function w($){r[$.line]=$.column,rt()}function _(){let $;for(;n._index<o.length;){const J=o[n._index];if(typeof J=="string")for($=n._index,n._bufferIndex<0&&(n._bufferIndex=0);n._index===$&&n._bufferIndex<J.length;)T(J.charCodeAt(n._bufferIndex));else T(J)}}function T($){g=g($)}function O($){Pt($)?(n.line++,n.column=1,n.offset+=$===-3?2:1,rt()):$!==-1&&(n.column++,n.offset++),n._bufferIndex<0?n._index++:(n._bufferIndex++,n._bufferIndex===o[n._index].length&&(n._bufferIndex=-1,n._index++)),p.previous=$}function N($,J){const ht=J||{};return ht.type=$,ht.start=S(),p.events.push(["enter",ht,p]),c.push(ht),ht}function I($){const J=c.pop();return J.end=S(),p.events.push(["exit",J,p]),J}function z($,J){X($,J.from)}function L($,J){J.restore()}function B($,J){return ht;function ht(tt,dt,F){let G,bt,Et,C;return Array.isArray(tt)?ut(tt):"tokenize"in tt?ut([tt]):K(tt);function K(st){return ct;function ct(yt){const Rt=yt!==null&&st[yt],Ut=yt!==null&&st.null,ge=[...Array.isArray(Rt)?Rt:Rt?[Rt]:[],...Array.isArray(Ut)?Ut:Ut?[Ut]:[]];return ut(ge)(yt)}}function ut(st){return G=st,bt=0,st.length===0?F:k(st[bt])}function k(st){return ct;function ct(yt){return C=Q(),Et=st,st.partial||(p.currentConstruct=st),st.name&&p.parser.constructs.disable.null.includes(st.name)?pt():st.tokenize.call(J?Object.assign(Object.create(p),J):p,h,at,pt)(yt)}}function at(st){return $(Et,C),dt}function pt(st){return C.restore(),++bt<G.length?k(G[bt]):F}}}function X($,J){$.resolveAll&&!l.includes($)&&l.push($),$.resolve&&kr(p.events,J,p.events.length-J,$.resolve(p.events.slice(J),p)),$.resolveTo&&(p.events=$.resolveTo(p.events,p))}function Q(){const $=S(),J=p.previous,ht=p.currentConstruct,tt=p.events.length,dt=Array.from(c);return{from:tt,restore:F};function F(){n=$,p.previous=J,p.currentConstruct=ht,p.events.length=tt,c=dt,rt()}}function rt(){n.line in r&&n.column<2&&(n.column=r[n.line],n.offset+=r[n.line]-1)}}function L3(i,t){const e=t.start._index,n=t.start._bufferIndex,r=t.end._index,l=t.end._bufferIndex;let o;if(e===r)o=[i[e].slice(n,l)];else{if(o=i.slice(e,r),n>-1){const c=o[0];typeof c=="string"?o[0]=c.slice(n):o.shift()}l>0&&o.push(i[r].slice(0,l))}return o}function P3(i,t){let e=-1;const n=[];let r;for(;++e<i.length;){const l=i[e];let o;if(typeof l=="string")o=l;else switch(l){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&r)continue;o=" ";break}default:o=String.fromCharCode(l)}r=l===-2,n.push(o)}return n.join("")}function z3(i){const n={constructs:qz([N3,...(i||{}).extensions||[]]),content:r(Qz),defined:[],document:r(Jz),flow:r(y3),lazy:{},string:r(A3),text:r(w3)};return n;function r(l){return o;function o(c){return O3(n,l,c)}}}function I3(i){for(;!ND(i););return i}const DT=/[\0\t\n\r]/g;function j3(){let i=1,t="",e=!0,n;return r;function r(l,o,c){const h=[];let p,g,y,b,v;for(l=t+(typeof l=="string"?l.toString():new TextDecoder(o||void 0).decode(l)),y=0,t="",e&&(l.charCodeAt(0)===65279&&y++,e=void 0);y<l.length;){if(DT.lastIndex=y,p=DT.exec(l),b=p&&p.index!==void 0?p.index:l.length,v=l.charCodeAt(b),!p){t=l.slice(y);break}if(v===10&&y===b&&n)h.push(-3),n=void 0;else switch(n&&(h.push(-5),n=void 0),y<b&&(h.push(l.slice(y,b)),i+=b-y),v){case 0:{h.push(65533),i++;break}case 9:{for(g=Math.ceil(i/4)*4,h.push(-2);i++<g;)h.push(-1);break}case 10:{h.push(-4),i=1;break}default:n=!0,i=1}y=b+1}return c&&(n&&h.push(-5),t&&h.push(t),h.push(null)),h}}const F3=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function B3(i){return i.replace(F3,H3)}function H3(i,t,e){if(t)return t;if(e.charCodeAt(0)===35){const r=e.charCodeAt(1),l=r===120||r===88;return RD(e.slice(l?2:1),l?16:10)}return Ax(e)||i}const jD={}.hasOwnProperty;function U3(i,t,e){return typeof t!="string"&&(e=t,t=void 0),q3(e)(I3(z3(e).document().write(j3()(i,t,!0))))}function q3(i){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(Ds),autolinkProtocol:Q,autolinkEmail:Q,atxHeading:l(Un),blockQuote:l(Ut),characterEscape:Q,characterReference:Q,codeFenced:l(ge),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:l(ge,o),codeText:l(me,o),codeTextData:Q,data:Q,codeFlowValue:Q,definition:l(te),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:l(Yt),hardBreakEscape:l(Be),hardBreakTrailing:l(Be),htmlFlow:l(He,o),htmlFlowData:Q,htmlText:l(He,o),htmlTextData:Q,image:l(Ye),label:o,link:l(Ds),listItem:l(pi),listItemValue:b,listOrdered:l(Nr,y),listUnordered:l(Nr),paragraph:l(Ia),reference:k,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:l(Un),strong:l(Or),thematicBreak:l(pd)},exit:{atxHeading:h(),atxHeadingSequence:z,autolink:h(),autolinkEmail:Rt,autolinkProtocol:yt,blockQuote:h(),characterEscapeValue:rt,characterReferenceMarkerHexadecimal:pt,characterReferenceMarkerNumeric:pt,characterReferenceValue:st,characterReference:ct,codeFenced:h(_),codeFencedFence:w,codeFencedFenceInfo:v,codeFencedFenceMeta:S,codeFlowValue:rt,codeIndented:h(T),codeText:h(dt),codeTextData:rt,data:rt,definition:h(),definitionDestinationString:I,definitionLabelString:O,definitionTitleString:N,emphasis:h(),hardBreakEscape:h(J),hardBreakTrailing:h(J),htmlFlow:h(ht),htmlFlowData:rt,htmlText:h(tt),htmlTextData:rt,image:h(G),label:Et,labelText:bt,lineEnding:$,link:h(F),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:at,resourceDestinationString:C,resourceTitleString:K,resource:ut,setextHeading:h(X),setextHeadingLineSequence:B,setextHeadingText:L,strong:h(),thematicBreak:h()}};FD(t,(i||{}).mdastExtensions||[]);const e={};return n;function n(nt){let ft={type:"root",children:[]};const Dt={stack:[ft],tokenStack:[],config:t,enter:c,exit:p,buffer:o,resume:g,data:e},kt=[];let re=-1;for(;++re<nt.length;)if(nt[re][1].type==="listOrdered"||nt[re][1].type==="listUnordered")if(nt[re][0]==="enter")kt.push(re);else{const qn=kt.pop();re=r(nt,qn,re)}for(re=-1;++re<nt.length;){const qn=t[nt[re][0]];jD.call(qn,nt[re][1].type)&&qn[nt[re][1].type].call(Object.assign({sliceSerialize:nt[re][2].sliceSerialize},Dt),nt[re][1])}if(Dt.tokenStack.length>0){const qn=Dt.tokenStack[Dt.tokenStack.length-1];(qn[1]||kT).call(Dt,void 0,qn[0])}for(ft.position={start:cl(nt.length>0?nt[0][1].start:{line:1,column:1,offset:0}),end:cl(nt.length>0?nt[nt.length-2][1].end:{line:1,column:1,offset:0})},re=-1;++re<t.transforms.length;)ft=t.transforms[re](ft)||ft;return ft}function r(nt,ft,Dt){let kt=ft-1,re=-1,qn=!1,ks,un,Ni,ei;for(;++kt<=Dt;){const Xe=nt[kt];switch(Xe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Xe[0]==="enter"?re++:re--,ei=void 0;break}case"lineEndingBlank":{Xe[0]==="enter"&&(ks&&!ei&&!re&&!Ni&&(Ni=kt),ei=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ei=void 0}if(!re&&Xe[0]==="enter"&&Xe[1].type==="listItemPrefix"||re===-1&&Xe[0]==="exit"&&(Xe[1].type==="listUnordered"||Xe[1].type==="listOrdered")){if(ks){let ni=kt;for(un=void 0;ni--;){const ii=nt[ni];if(ii[1].type==="lineEnding"||ii[1].type==="lineEndingBlank"){if(ii[0]==="exit")continue;un&&(nt[un][1].type="lineEndingBlank",qn=!0),ii[1].type="lineEnding",un=ni}else if(!(ii[1].type==="linePrefix"||ii[1].type==="blockQuotePrefix"||ii[1].type==="blockQuotePrefixWhitespace"||ii[1].type==="blockQuoteMarker"||ii[1].type==="listItemIndent"))break}Ni&&(!un||Ni<un)&&(ks._spread=!0),ks.end=Object.assign({},un?nt[un][1].start:Xe[1].end),nt.splice(un||kt,0,["exit",ks,Xe[2]]),kt++,Dt++}if(Xe[1].type==="listItemPrefix"){const ni={type:"listItem",_spread:!1,start:Object.assign({},Xe[1].start),end:void 0};ks=ni,nt.splice(kt,0,["enter",ni,Xe[2]]),kt++,Dt++,Ni=void 0,ei=!0}}}return nt[ft][1]._spread=qn,Dt}function l(nt,ft){return Dt;function Dt(kt){c.call(this,nt(kt),kt),ft&&ft.call(this,kt)}}function o(){this.stack.push({type:"fragment",children:[]})}function c(nt,ft,Dt){this.stack[this.stack.length-1].children.push(nt),this.stack.push(nt),this.tokenStack.push([ft,Dt||void 0]),nt.position={start:cl(ft.start),end:void 0}}function h(nt){return ft;function ft(Dt){nt&&nt.call(this,Dt),p.call(this,Dt)}}function p(nt,ft){const Dt=this.stack.pop(),kt=this.tokenStack.pop();if(kt)kt[0].type!==nt.type&&(ft?ft.call(this,nt,kt[0]):(kt[1]||kT).call(this,nt,kt[0]));else throw new Error("Cannot close `"+nt.type+"` ("+Yf({start:nt.start,end:nt.end})+"): it’s not open");Dt.position.end=cl(nt.end)}function g(){return Hz(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function b(nt){if(this.data.expectingFirstListItemValue){const ft=this.stack[this.stack.length-2];ft.start=Number.parseInt(this.sliceSerialize(nt),10),this.data.expectingFirstListItemValue=void 0}}function v(){const nt=this.resume(),ft=this.stack[this.stack.length-1];ft.lang=nt}function S(){const nt=this.resume(),ft=this.stack[this.stack.length-1];ft.meta=nt}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function _(){const nt=this.resume(),ft=this.stack[this.stack.length-1];ft.value=nt.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function T(){const nt=this.resume(),ft=this.stack[this.stack.length-1];ft.value=nt.replace(/(\r?\n|\r)$/g,"")}function O(nt){const ft=this.resume(),Dt=this.stack[this.stack.length-1];Dt.label=ft,Dt.identifier=Kc(this.sliceSerialize(nt)).toLowerCase()}function N(){const nt=this.resume(),ft=this.stack[this.stack.length-1];ft.title=nt}function I(){const nt=this.resume(),ft=this.stack[this.stack.length-1];ft.url=nt}function z(nt){const ft=this.stack[this.stack.length-1];if(!ft.depth){const Dt=this.sliceSerialize(nt).length;ft.depth=Dt}}function L(){this.data.setextHeadingSlurpLineEnding=!0}function B(nt){const ft=this.stack[this.stack.length-1];ft.depth=this.sliceSerialize(nt).codePointAt(0)===61?1:2}function X(){this.data.setextHeadingSlurpLineEnding=void 0}function Q(nt){const Dt=this.stack[this.stack.length-1].children;let kt=Dt[Dt.length-1];(!kt||kt.type!=="text")&&(kt=fd(),kt.position={start:cl(nt.start),end:void 0},Dt.push(kt)),this.stack.push(kt)}function rt(nt){const ft=this.stack.pop();ft.value+=this.sliceSerialize(nt),ft.position.end=cl(nt.end)}function $(nt){const ft=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Dt=ft.children[ft.children.length-1];Dt.position.end=cl(nt.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ft.type)&&(Q.call(this,nt),rt.call(this,nt))}function J(){this.data.atHardBreak=!0}function ht(){const nt=this.resume(),ft=this.stack[this.stack.length-1];ft.value=nt}function tt(){const nt=this.resume(),ft=this.stack[this.stack.length-1];ft.value=nt}function dt(){const nt=this.resume(),ft=this.stack[this.stack.length-1];ft.value=nt}function F(){const nt=this.stack[this.stack.length-1];if(this.data.inReference){const ft=this.data.referenceType||"shortcut";nt.type+="Reference",nt.referenceType=ft,delete nt.url,delete nt.title}else delete nt.identifier,delete nt.label;this.data.referenceType=void 0}function G(){const nt=this.stack[this.stack.length-1];if(this.data.inReference){const ft=this.data.referenceType||"shortcut";nt.type+="Reference",nt.referenceType=ft,delete nt.url,delete nt.title}else delete nt.identifier,delete nt.label;this.data.referenceType=void 0}function bt(nt){const ft=this.sliceSerialize(nt),Dt=this.stack[this.stack.length-2];Dt.label=B3(ft),Dt.identifier=Kc(ft).toLowerCase()}function Et(){const nt=this.stack[this.stack.length-1],ft=this.resume(),Dt=this.stack[this.stack.length-1];if(this.data.inReference=!0,Dt.type==="link"){const kt=nt.children;Dt.children=kt}else Dt.alt=ft}function C(){const nt=this.resume(),ft=this.stack[this.stack.length-1];ft.url=nt}function K(){const nt=this.resume(),ft=this.stack[this.stack.length-1];ft.title=nt}function ut(){this.data.inReference=void 0}function k(){this.data.referenceType="collapsed"}function at(nt){const ft=this.resume(),Dt=this.stack[this.stack.length-1];Dt.label=ft,Dt.identifier=Kc(this.sliceSerialize(nt)).toLowerCase(),this.data.referenceType="full"}function pt(nt){this.data.characterReferenceType=nt.type}function st(nt){const ft=this.sliceSerialize(nt),Dt=this.data.characterReferenceType;let kt;Dt?(kt=RD(ft,Dt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):kt=Ax(ft);const re=this.stack[this.stack.length-1];re.value+=kt}function ct(nt){const ft=this.stack.pop();ft.position.end=cl(nt.end)}function yt(nt){rt.call(this,nt);const ft=this.stack[this.stack.length-1];ft.url=this.sliceSerialize(nt)}function Rt(nt){rt.call(this,nt);const ft=this.stack[this.stack.length-1];ft.url="mailto:"+this.sliceSerialize(nt)}function Ut(){return{type:"blockquote",children:[]}}function ge(){return{type:"code",lang:null,meta:null,value:""}}function me(){return{type:"inlineCode",value:""}}function te(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Yt(){return{type:"emphasis",children:[]}}function Un(){return{type:"heading",depth:0,children:[]}}function Be(){return{type:"break"}}function He(){return{type:"html",value:""}}function Ye(){return{type:"image",title:null,url:"",alt:null}}function Ds(){return{type:"link",title:null,url:"",children:[]}}function Nr(nt){return{type:"list",ordered:nt.type==="listOrdered",start:null,spread:nt._spread,children:[]}}function pi(nt){return{type:"listItem",spread:nt._spread,checked:null,children:[]}}function Ia(){return{type:"paragraph",children:[]}}function Or(){return{type:"strong",children:[]}}function fd(){return{type:"text",value:""}}function pd(){return{type:"thematicBreak"}}}function cl(i){return{line:i.line,column:i.column,offset:i.offset}}function FD(i,t){let e=-1;for(;++e<t.length;){const n=t[e];Array.isArray(n)?FD(i,n):V3(i,n)}}function V3(i,t){let e;for(e in t)if(jD.call(t,e))switch(e){case"canContainEols":{const n=t[e];n&&i[e].push(...n);break}case"transforms":{const n=t[e];n&&i[e].push(...n);break}case"enter":case"exit":{const n=t[e];n&&Object.assign(i[e],n);break}}}function kT(i,t){throw i?new Error("Cannot close `"+i.type+"` ("+Yf({start:i.start,end:i.end})+"): a different token (`"+t.type+"`, "+Yf({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Yf({start:t.start,end:t.end})+") is still open")}function G3(i){const t=this;t.parser=e;function e(n){return U3(n,{...t.data("settings"),...i,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Y3(i,t){const e={type:"element",tagName:"blockquote",properties:{},children:i.wrap(i.all(t),!0)};return i.patch(t,e),i.applyData(t,e)}function X3(i,t){const e={type:"element",tagName:"br",properties:{},children:[]};return i.patch(t,e),[i.applyData(t,e),{type:"text",value:`
`}]}function $3(i,t){const e=t.value?t.value+`
`:"",n={};t.lang&&(n.className=["language-"+t.lang]);let r={type:"element",tagName:"code",properties:n,children:[{type:"text",value:e}]};return t.meta&&(r.data={meta:t.meta}),i.patch(t,r),r=i.applyData(t,r),r={type:"element",tagName:"pre",properties:{},children:[r]},i.patch(t,r),r}function W3(i,t){const e={type:"element",tagName:"del",properties:{},children:i.all(t)};return i.patch(t,e),i.applyData(t,e)}function K3(i,t){const e={type:"element",tagName:"em",properties:{},children:i.all(t)};return i.patch(t,e),i.applyData(t,e)}function Q3(i,t){const e=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",n=String(t.identifier).toUpperCase(),r=cd(n.toLowerCase()),l=i.footnoteOrder.indexOf(n);let o,c=i.footnoteCounts.get(n);c===void 0?(c=0,i.footnoteOrder.push(n),o=i.footnoteOrder.length):o=l+1,c+=1,i.footnoteCounts.set(n,c);const h={type:"element",tagName:"a",properties:{href:"#"+e+"fn-"+r,id:e+"fnref-"+r+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};i.patch(t,h);const p={type:"element",tagName:"sup",properties:{},children:[h]};return i.patch(t,p),i.applyData(t,p)}function Z3(i,t){const e={type:"element",tagName:"h"+t.depth,properties:{},children:i.all(t)};return i.patch(t,e),i.applyData(t,e)}function J3(i,t){if(i.options.allowDangerousHtml){const e={type:"raw",value:t.value};return i.patch(t,e),i.applyData(t,e)}}function BD(i,t){const e=t.referenceType;let n="]";if(e==="collapsed"?n+="[]":e==="full"&&(n+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+n}];const r=i.all(t),l=r[0];l&&l.type==="text"?l.value="["+l.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=n:r.push({type:"text",value:n}),r}function tj(i,t){const e=String(t.identifier).toUpperCase(),n=i.definitionById.get(e);if(!n)return BD(i,t);const r={src:cd(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(r.title=n.title);const l={type:"element",tagName:"img",properties:r,children:[]};return i.patch(t,l),i.applyData(t,l)}function ej(i,t){const e={src:cd(t.url)};t.alt!==null&&t.alt!==void 0&&(e.alt=t.alt),t.title!==null&&t.title!==void 0&&(e.title=t.title);const n={type:"element",tagName:"img",properties:e,children:[]};return i.patch(t,n),i.applyData(t,n)}function nj(i,t){const e={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};i.patch(t,e);const n={type:"element",tagName:"code",properties:{},children:[e]};return i.patch(t,n),i.applyData(t,n)}function ij(i,t){const e=String(t.identifier).toUpperCase(),n=i.definitionById.get(e);if(!n)return BD(i,t);const r={href:cd(n.url||"")};n.title!==null&&n.title!==void 0&&(r.title=n.title);const l={type:"element",tagName:"a",properties:r,children:i.all(t)};return i.patch(t,l),i.applyData(t,l)}function sj(i,t){const e={href:cd(t.url)};t.title!==null&&t.title!==void 0&&(e.title=t.title);const n={type:"element",tagName:"a",properties:e,children:i.all(t)};return i.patch(t,n),i.applyData(t,n)}function rj(i,t,e){const n=i.all(t),r=e?aj(e):HD(t),l={},o=[];if(typeof t.checked=="boolean"){const g=n[0];let y;g&&g.type==="element"&&g.tagName==="p"?y=g:(y={type:"element",tagName:"p",properties:{},children:[]},n.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),l.className=["task-list-item"]}let c=-1;for(;++c<n.length;){const g=n[c];(r||c!==0||g.type!=="element"||g.tagName!=="p")&&o.push({type:"text",value:`
`}),g.type==="element"&&g.tagName==="p"&&!r?o.push(...g.children):o.push(g)}const h=n[n.length-1];h&&(r||h.type!=="element"||h.tagName!=="p")&&o.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:l,children:o};return i.patch(t,p),i.applyData(t,p)}function aj(i){let t=!1;if(i.type==="list"){t=i.spread||!1;const e=i.children;let n=-1;for(;!t&&++n<e.length;)t=HD(e[n])}return t}function HD(i){const t=i.spread;return t??i.children.length>1}function lj(i,t){const e={},n=i.all(t);let r=-1;for(typeof t.start=="number"&&t.start!==1&&(e.start=t.start);++r<n.length;){const o=n[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){e.className=["contains-task-list"];break}}const l={type:"element",tagName:t.ordered?"ol":"ul",properties:e,children:i.wrap(n,!0)};return i.patch(t,l),i.applyData(t,l)}function oj(i,t){const e={type:"element",tagName:"p",properties:{},children:i.all(t)};return i.patch(t,e),i.applyData(t,e)}function uj(i,t){const e={type:"root",children:i.wrap(i.all(t))};return i.patch(t,e),i.applyData(t,e)}function cj(i,t){const e={type:"element",tagName:"strong",properties:{},children:i.all(t)};return i.patch(t,e),i.applyData(t,e)}function hj(i,t){const e=i.all(t),n=e.shift(),r=[];if(n){const o={type:"element",tagName:"thead",properties:{},children:i.wrap([n],!0)};i.patch(t.children[0],o),r.push(o)}if(e.length>0){const o={type:"element",tagName:"tbody",properties:{},children:i.wrap(e,!0)},c=mx(t.children[1]),h=wD(t.children[t.children.length-1]);c&&h&&(o.position={start:c,end:h}),r.push(o)}const l={type:"element",tagName:"table",properties:{},children:i.wrap(r,!0)};return i.patch(t,l),i.applyData(t,l)}function dj(i,t,e){const n=e?e.children:void 0,l=(n?n.indexOf(t):1)===0?"th":"td",o=e&&e.type==="table"?e.align:void 0,c=o?o.length:t.children.length;let h=-1;const p=[];for(;++h<c;){const y=t.children[h],b={},v=o?o[h]:void 0;v&&(b.align=v);let S={type:"element",tagName:l,properties:b,children:[]};y&&(S.children=i.all(y),i.patch(y,S),S=i.applyData(y,S)),p.push(S)}const g={type:"element",tagName:"tr",properties:{},children:i.wrap(p,!0)};return i.patch(t,g),i.applyData(t,g)}function fj(i,t){const e={type:"element",tagName:"td",properties:{},children:i.all(t)};return i.patch(t,e),i.applyData(t,e)}const MT=9,NT=32;function pj(i){const t=String(i),e=/\r?\n|\r/g;let n=e.exec(t),r=0;const l=[];for(;n;)l.push(OT(t.slice(r,n.index),r>0,!0),n[0]),r=n.index+n[0].length,n=e.exec(t);return l.push(OT(t.slice(r),r>0,!1)),l.join("")}function OT(i,t,e){let n=0,r=i.length;if(t){let l=i.codePointAt(n);for(;l===MT||l===NT;)n++,l=i.codePointAt(n)}if(e){let l=i.codePointAt(r-1);for(;l===MT||l===NT;)r--,l=i.codePointAt(r-1)}return r>n?i.slice(n,r):""}function gj(i,t){const e={type:"text",value:pj(String(t.value))};return i.patch(t,e),i.applyData(t,e)}function mj(i,t){const e={type:"element",tagName:"hr",properties:{},children:[]};return i.patch(t,e),i.applyData(t,e)}const yj={blockquote:Y3,break:X3,code:$3,delete:W3,emphasis:K3,footnoteReference:Q3,heading:Z3,html:J3,imageReference:tj,image:ej,inlineCode:nj,linkReference:ij,link:sj,listItem:rj,list:lj,paragraph:oj,root:uj,strong:cj,table:hj,tableCell:fj,tableRow:dj,text:gj,thematicBreak:mj,toml:ry,yaml:ry,definition:ry,footnoteDefinition:ry};function ry(){}const UD=-1,qb=0,$f=1,tb=2,xx=3,Ex=4,_x=5,Cx=6,qD=7,VD=8,LT=typeof self=="object"?self:globalThis,bj=(i,t)=>{const e=(r,l)=>(i.set(l,r),r),n=r=>{if(i.has(r))return i.get(r);const[l,o]=t[r];switch(l){case qb:case UD:return e(o,r);case $f:{const c=e([],r);for(const h of o)c.push(n(h));return c}case tb:{const c=e({},r);for(const[h,p]of o)c[n(h)]=n(p);return c}case xx:return e(new Date(o),r);case Ex:{const{source:c,flags:h}=o;return e(new RegExp(c,h),r)}case _x:{const c=e(new Map,r);for(const[h,p]of o)c.set(n(h),n(p));return c}case Cx:{const c=e(new Set,r);for(const h of o)c.add(n(h));return c}case qD:{const{name:c,message:h}=o;return e(new LT[c](h),r)}case VD:return e(BigInt(o),r);case"BigInt":return e(Object(BigInt(o)),r);case"ArrayBuffer":return e(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:c}=new Uint8Array(o);return e(new DataView(c),o)}}return e(new LT[l](o),r)};return n},PT=i=>bj(new Map,i)(0),Mc="",{toString:vj}={},{keys:Aj}=Object,vf=i=>{const t=typeof i;if(t!=="object"||!i)return[qb,t];const e=vj.call(i).slice(8,-1);switch(e){case"Array":return[$f,Mc];case"Object":return[tb,Mc];case"Date":return[xx,Mc];case"RegExp":return[Ex,Mc];case"Map":return[_x,Mc];case"Set":return[Cx,Mc];case"DataView":return[$f,e]}return e.includes("Array")?[$f,e]:e.includes("Error")?[qD,e]:[tb,e]},ay=([i,t])=>i===qb&&(t==="function"||t==="symbol"),wj=(i,t,e,n)=>{const r=(o,c)=>{const h=n.push(o)-1;return e.set(c,h),h},l=o=>{if(e.has(o))return e.get(o);let[c,h]=vf(o);switch(c){case qb:{let g=o;switch(h){case"bigint":c=VD,g=o.toString();break;case"function":case"symbol":if(i)throw new TypeError("unable to serialize "+h);g=null;break;case"undefined":return r([UD],o)}return r([c,g],o)}case $f:{if(h){let b=o;return h==="DataView"?b=new Uint8Array(o.buffer):h==="ArrayBuffer"&&(b=new Uint8Array(o)),r([h,[...b]],o)}const g=[],y=r([c,g],o);for(const b of o)g.push(l(b));return y}case tb:{if(h)switch(h){case"BigInt":return r([h,o.toString()],o);case"Boolean":case"Number":case"String":return r([h,o.valueOf()],o)}if(t&&"toJSON"in o)return l(o.toJSON());const g=[],y=r([c,g],o);for(const b of Aj(o))(i||!ay(vf(o[b])))&&g.push([l(b),l(o[b])]);return y}case xx:return r([c,o.toISOString()],o);case Ex:{const{source:g,flags:y}=o;return r([c,{source:g,flags:y}],o)}case _x:{const g=[],y=r([c,g],o);for(const[b,v]of o)(i||!(ay(vf(b))||ay(vf(v))))&&g.push([l(b),l(v)]);return y}case Cx:{const g=[],y=r([c,g],o);for(const b of o)(i||!ay(vf(b)))&&g.push(l(b));return y}}const{message:p}=o;return r([c,{name:h,message:p}],o)};return l},zT=(i,{json:t,lossy:e}={})=>{const n=[];return wj(!(t||e),!!t,new Map,n)(i),n},eb=typeof structuredClone=="function"?(i,t)=>t&&("json"in t||"lossy"in t)?PT(zT(i,t)):structuredClone(i):(i,t)=>PT(zT(i,t));function Sj(i,t){const e=[{type:"text",value:"↩"}];return t>1&&e.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),e}function xj(i,t){return"Back to reference "+(i+1)+(t>1?"-"+t:"")}function Ej(i){const t=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",e=i.options.footnoteBackContent||Sj,n=i.options.footnoteBackLabel||xj,r=i.options.footnoteLabel||"Footnotes",l=i.options.footnoteLabelTagName||"h2",o=i.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let h=-1;for(;++h<i.footnoteOrder.length;){const p=i.footnoteById.get(i.footnoteOrder[h]);if(!p)continue;const g=i.all(p),y=String(p.identifier).toUpperCase(),b=cd(y.toLowerCase());let v=0;const S=[],w=i.footnoteCounts.get(y);for(;w!==void 0&&++v<=w;){S.length>0&&S.push({type:"text",value:" "});let O=typeof e=="string"?e:e(h,v);typeof O=="string"&&(O={type:"text",value:O}),S.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+b+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof n=="string"?n:n(h,v),className:["data-footnote-backref"]},children:Array.isArray(O)?O:[O]})}const _=g[g.length-1];if(_&&_.type==="element"&&_.tagName==="p"){const O=_.children[_.children.length-1];O&&O.type==="text"?O.value+=" ":_.children.push({type:"text",value:" "}),_.children.push(...S)}else g.push(...S);const T={type:"element",tagName:"li",properties:{id:t+"fn-"+b},children:i.wrap(g,!0)};i.patch(p,T),c.push(T)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:l,properties:{...eb(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:i.wrap(c,!0)},{type:"text",value:`
`}]}}const GD=function(i){if(i==null)return Rj;if(typeof i=="function")return Vb(i);if(typeof i=="object")return Array.isArray(i)?_j(i):Cj(i);if(typeof i=="string")return Tj(i);throw new Error("Expected function, string, or object as test")};function _j(i){const t=[];let e=-1;for(;++e<i.length;)t[e]=GD(i[e]);return Vb(n);function n(...r){let l=-1;for(;++l<t.length;)if(t[l].apply(this,r))return!0;return!1}}function Cj(i){const t=i;return Vb(e);function e(n){const r=n;let l;for(l in i)if(r[l]!==t[l])return!1;return!0}}function Tj(i){return Vb(t);function t(e){return e&&e.type===i}}function Vb(i){return t;function t(e,n,r){return!!(Dj(e)&&i.call(this,e,typeof n=="number"?n:void 0,r||void 0))}}function Rj(){return!0}function Dj(i){return i!==null&&typeof i=="object"&&"type"in i}const YD=[],kj=!0,IT=!1,Mj="skip";function Nj(i,t,e,n){let r;typeof t=="function"&&typeof e!="function"?(n=e,e=t):r=t;const l=GD(r),o=n?-1:1;c(i,void 0,[])();function c(h,p,g){const y=h&&typeof h=="object"?h:{};if(typeof y.type=="string"){const v=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(h.type+(v?"<"+v+">":""))+")"})}return b;function b(){let v=YD,S,w,_;if((!t||l(h,p,g[g.length-1]||void 0))&&(v=Oj(e(h,g)),v[0]===IT))return v;if("children"in h&&h.children){const T=h;if(T.children&&v[0]!==Mj)for(w=(n?T.children.length:-1)+o,_=g.concat(T);w>-1&&w<T.children.length;){const O=T.children[w];if(S=c(O,w,_)(),S[0]===IT)return S;w=typeof S[1]=="number"?S[1]:w+o}}return v}}}function Oj(i){return Array.isArray(i)?i:typeof i=="number"?[kj,i]:i==null?YD:[i]}function XD(i,t,e,n){let r,l,o;typeof t=="function"?(l=void 0,o=t,r=e):(l=t,o=e,r=n),Nj(i,l,c,r);function c(h,p){const g=p[p.length-1],y=g?g.children.indexOf(h):void 0;return o(h,y,g)}}const Tw={}.hasOwnProperty,Lj={};function Pj(i,t){const e=t||Lj,n=new Map,r=new Map,l=new Map,o={...yj,...e.handlers},c={all:p,applyData:Ij,definitionById:n,footnoteById:r,footnoteCounts:l,footnoteOrder:[],handlers:o,one:h,options:e,patch:zj,wrap:Fj};return XD(i,function(g){if(g.type==="definition"||g.type==="footnoteDefinition"){const y=g.type==="definition"?n:r,b=String(g.identifier).toUpperCase();y.has(b)||y.set(b,g)}}),c;function h(g,y){const b=g.type,v=c.handlers[b];if(Tw.call(c.handlers,b)&&v)return v(c,g,y);if(c.options.passThrough&&c.options.passThrough.includes(b)){if("children"in g){const{children:w,..._}=g,T=eb(_);return T.children=c.all(g),T}return eb(g)}return(c.options.unknownHandler||jj)(c,g,y)}function p(g){const y=[];if("children"in g){const b=g.children;let v=-1;for(;++v<b.length;){const S=c.one(b[v],g);if(S){if(v&&b[v-1].type==="break"&&(!Array.isArray(S)&&S.type==="text"&&(S.value=jT(S.value)),!Array.isArray(S)&&S.type==="element")){const w=S.children[0];w&&w.type==="text"&&(w.value=jT(w.value))}Array.isArray(S)?y.push(...S):y.push(S)}}}return y}}function zj(i,t){i.position&&(t.position=vz(i))}function Ij(i,t){let e=t;if(i&&i.data){const n=i.data.hName,r=i.data.hChildren,l=i.data.hProperties;if(typeof n=="string")if(e.type==="element")e.tagName=n;else{const o="children"in e?e.children:[e];e={type:"element",tagName:n,properties:{},children:o}}e.type==="element"&&l&&Object.assign(e.properties,eb(l)),"children"in e&&e.children&&r!==null&&r!==void 0&&(e.children=r)}return e}function jj(i,t){const e=t.data||{},n="value"in t&&!(Tw.call(e,"hProperties")||Tw.call(e,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:i.all(t)};return i.patch(t,n),i.applyData(t,n)}function Fj(i,t){const e=[];let n=-1;for(t&&e.push({type:"text",value:`
`});++n<i.length;)n&&e.push({type:"text",value:`
`}),e.push(i[n]);return t&&i.length>0&&e.push({type:"text",value:`
`}),e}function jT(i){let t=0,e=i.charCodeAt(t);for(;e===9||e===32;)t++,e=i.charCodeAt(t);return i.slice(t)}function FT(i,t){const e=Pj(i,t),n=e.one(i,void 0),r=Ej(e),l=Array.isArray(n)?{type:"root",children:n}:n||{type:"root",children:[]};return r&&l.children.push({type:"text",value:`
`},r),l}function Bj(i,t){return i&&"run"in i?async function(e,n){const r=FT(e,{file:n,...t});await i.run(r,n)}:function(e,n){return FT(e,{file:n,...i||t})}}function BT(i){if(i)throw i}var IA,HT;function Hj(){if(HT)return IA;HT=1;var i=Object.prototype.hasOwnProperty,t=Object.prototype.toString,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=function(p){return typeof Array.isArray=="function"?Array.isArray(p):t.call(p)==="[object Array]"},l=function(p){if(!p||t.call(p)!=="[object Object]")return!1;var g=i.call(p,"constructor"),y=p.constructor&&p.constructor.prototype&&i.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!g&&!y)return!1;var b;for(b in p);return typeof b>"u"||i.call(p,b)},o=function(p,g){e&&g.name==="__proto__"?e(p,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):p[g.name]=g.newValue},c=function(p,g){if(g==="__proto__")if(i.call(p,g)){if(n)return n(p,g).value}else return;return p[g]};return IA=function h(){var p,g,y,b,v,S,w=arguments[0],_=1,T=arguments.length,O=!1;for(typeof w=="boolean"&&(O=w,w=arguments[1]||{},_=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});_<T;++_)if(p=arguments[_],p!=null)for(g in p)y=c(w,g),b=c(p,g),w!==b&&(O&&b&&(l(b)||(v=r(b)))?(v?(v=!1,S=y&&r(y)?y:[]):S=y&&l(y)?y:{},o(w,{name:g,newValue:h(O,S,b)})):typeof b<"u"&&o(w,{name:g,newValue:b}));return w},IA}var Uj=Hj();const jA=Cg(Uj);function Rw(i){if(typeof i!="object"||i===null)return!1;const t=Object.getPrototypeOf(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)}function qj(){const i=[],t={run:e,use:n};return t;function e(...r){let l=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);c(null,...r);function c(h,...p){const g=i[++l];let y=-1;if(h){o(h);return}for(;++y<r.length;)(p[y]===null||p[y]===void 0)&&(p[y]=r[y]);r=p,g?Vj(g,c)(...p):o(null,...p)}}function n(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return i.push(r),t}}function Vj(i,t){let e;return n;function n(...o){const c=i.length>o.length;let h;c&&o.push(r);try{h=i.apply(this,o)}catch(p){const g=p;if(c&&e)throw g;return r(g)}c||(h&&h.then&&typeof h.then=="function"?h.then(l,r):h instanceof Error?r(h):l(h))}function r(o,...c){e||(e=!0,t(o,...c))}function l(o){r(null,o)}}const hr={basename:Gj,dirname:Yj,extname:Xj,join:$j,sep:"/"};function Gj(i,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Ng(i);let e=0,n=-1,r=i.length,l;if(t===void 0||t.length===0||t.length>i.length){for(;r--;)if(i.codePointAt(r)===47){if(l){e=r+1;break}}else n<0&&(l=!0,n=r+1);return n<0?"":i.slice(e,n)}if(t===i)return"";let o=-1,c=t.length-1;for(;r--;)if(i.codePointAt(r)===47){if(l){e=r+1;break}}else o<0&&(l=!0,o=r+1),c>-1&&(i.codePointAt(r)===t.codePointAt(c--)?c<0&&(n=r):(c=-1,n=o));return e===n?n=o:n<0&&(n=i.length),i.slice(e,n)}function Yj(i){if(Ng(i),i.length===0)return".";let t=-1,e=i.length,n;for(;--e;)if(i.codePointAt(e)===47){if(n){t=e;break}}else n||(n=!0);return t<0?i.codePointAt(0)===47?"/":".":t===1&&i.codePointAt(0)===47?"//":i.slice(0,t)}function Xj(i){Ng(i);let t=i.length,e=-1,n=0,r=-1,l=0,o;for(;t--;){const c=i.codePointAt(t);if(c===47){if(o){n=t+1;break}continue}e<0&&(o=!0,e=t+1),c===46?r<0?r=t:l!==1&&(l=1):r>-1&&(l=-1)}return r<0||e<0||l===0||l===1&&r===e-1&&r===n+1?"":i.slice(r,e)}function $j(...i){let t=-1,e;for(;++t<i.length;)Ng(i[t]),i[t]&&(e=e===void 0?i[t]:e+"/"+i[t]);return e===void 0?".":Wj(e)}function Wj(i){Ng(i);const t=i.codePointAt(0)===47;let e=Kj(i,!t);return e.length===0&&!t&&(e="."),e.length>0&&i.codePointAt(i.length-1)===47&&(e+="/"),t?"/"+e:e}function Kj(i,t){let e="",n=0,r=-1,l=0,o=-1,c,h;for(;++o<=i.length;){if(o<i.length)c=i.codePointAt(o);else{if(c===47)break;c=47}if(c===47){if(!(r===o-1||l===1))if(r!==o-1&&l===2){if(e.length<2||n!==2||e.codePointAt(e.length-1)!==46||e.codePointAt(e.length-2)!==46){if(e.length>2){if(h=e.lastIndexOf("/"),h!==e.length-1){h<0?(e="",n=0):(e=e.slice(0,h),n=e.length-1-e.lastIndexOf("/")),r=o,l=0;continue}}else if(e.length>0){e="",n=0,r=o,l=0;continue}}t&&(e=e.length>0?e+"/..":"..",n=2)}else e.length>0?e+="/"+i.slice(r+1,o):e=i.slice(r+1,o),n=o-r-1;r=o,l=0}else c===46&&l>-1?l++:l=-1}return e}function Ng(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}const Qj={cwd:Zj};function Zj(){return"/"}function Dw(i){return!!(i!==null&&typeof i=="object"&&"href"in i&&i.href&&"protocol"in i&&i.protocol&&i.auth===void 0)}function Jj(i){if(typeof i=="string")i=new URL(i);else if(!Dw(i)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+i+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(i.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return tF(i)}function tF(i){if(i.hostname!==""){const n=new TypeError('File URL host must be "localhost" or empty on darwin');throw n.code="ERR_INVALID_FILE_URL_HOST",n}const t=i.pathname;let e=-1;for(;++e<t.length;)if(t.codePointAt(e)===37&&t.codePointAt(e+1)===50){const n=t.codePointAt(e+2);if(n===70||n===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(t)}const FA=["history","path","basename","stem","extname","dirname"];class $D{constructor(t){let e;t?Dw(t)?e={path:t}:typeof t=="string"||eF(t)?e={value:t}:e=t:e={},this.cwd="cwd"in e?"":Qj.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n=-1;for(;++n<FA.length;){const l=FA[n];l in e&&e[l]!==void 0&&e[l]!==null&&(this[l]=l==="history"?[...e[l]]:e[l])}let r;for(r in e)FA.includes(r)||(this[r]=e[r])}get basename(){return typeof this.path=="string"?hr.basename(this.path):void 0}set basename(t){HA(t,"basename"),BA(t,"basename"),this.path=hr.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?hr.dirname(this.path):void 0}set dirname(t){UT(this.basename,"dirname"),this.path=hr.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?hr.extname(this.path):void 0}set extname(t){if(BA(t,"extname"),UT(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=hr.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Dw(t)&&(t=Jj(t)),HA(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?hr.basename(this.path,this.extname):void 0}set stem(t){HA(t,"stem"),BA(t,"stem"),this.path=hr.join(this.dirname||"",t+(this.extname||""))}fail(t,e,n){const r=this.message(t,e,n);throw r.fatal=!0,r}info(t,e,n){const r=this.message(t,e,n);return r.fatal=void 0,r}message(t,e,n){const r=new ti(t,e,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function BA(i,t){if(i&&i.includes(hr.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+hr.sep+"`")}function HA(i,t){if(!i)throw new Error("`"+t+"` cannot be empty")}function UT(i,t){if(!i)throw new Error("Setting `"+t+"` requires `path` to be set too")}function eF(i){return!!(i&&typeof i=="object"&&"byteLength"in i&&"byteOffset"in i)}const nF=function(i){const n=this.constructor.prototype,r=n[i],l=function(){return r.apply(l,arguments)};return Object.setPrototypeOf(l,n),l},iF={}.hasOwnProperty;class Tx extends nF{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=qj()}copy(){const t=new Tx;let e=-1;for(;++e<this.attachers.length;){const n=this.attachers[e];t.use(...n)}return t.data(jA(!0,{},this.namespace)),t}data(t,e){return typeof t=="string"?arguments.length===2?(VA("data",this.frozen),this.namespace[t]=e,this):iF.call(this.namespace,t)&&this.namespace[t]||void 0:t?(VA("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[e,...n]=this.attachers[this.freezeIndex];if(n[0]===!1)continue;n[0]===!0&&(n[0]=void 0);const r=e.call(t,...n);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const e=ly(t),n=this.parser||this.Parser;return UA("parse",n),n(String(e),e)}process(t,e){const n=this;return this.freeze(),UA("process",this.parser||this.Parser),qA("process",this.compiler||this.Compiler),e?r(void 0,e):new Promise(r);function r(l,o){const c=ly(t),h=n.parse(c);n.run(h,c,function(g,y,b){if(g||!y||!b)return p(g);const v=y,S=n.stringify(v,b);aF(S)?b.value=S:b.result=S,p(g,b)});function p(g,y){g||!y?o(g):l?l(y):e(void 0,y)}}}processSync(t){let e=!1,n;return this.freeze(),UA("processSync",this.parser||this.Parser),qA("processSync",this.compiler||this.Compiler),this.process(t,r),VT("processSync","process",e),n;function r(l,o){e=!0,BT(l),n=o}}run(t,e,n){qT(t),this.freeze();const r=this.transformers;return!n&&typeof e=="function"&&(n=e,e=void 0),n?l(void 0,n):new Promise(l);function l(o,c){const h=ly(e);r.run(t,h,p);function p(g,y,b){const v=y||t;g?c(g):o?o(v):n(void 0,v,b)}}}runSync(t,e){let n=!1,r;return this.run(t,e,l),VT("runSync","run",n),r;function l(o,c){BT(o),r=c,n=!0}}stringify(t,e){this.freeze();const n=ly(e),r=this.compiler||this.Compiler;return qA("stringify",r),qT(t),r(t,n)}use(t,...e){const n=this.attachers,r=this.namespace;if(VA("use",this.frozen),t!=null)if(typeof t=="function")h(t,e);else if(typeof t=="object")Array.isArray(t)?c(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function l(p){if(typeof p=="function")h(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[g,...y]=p;h(g,y)}else o(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function o(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(p.plugins),p.settings&&(r.settings=jA(!0,r.settings,p.settings))}function c(p){let g=-1;if(p!=null)if(Array.isArray(p))for(;++g<p.length;){const y=p[g];l(y)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function h(p,g){let y=-1,b=-1;for(;++y<n.length;)if(n[y][0]===p){b=y;break}if(b===-1)n.push([p,...g]);else if(g.length>0){let[v,...S]=g;const w=n[b][1];Rw(w)&&Rw(v)&&(v=jA(!0,w,v)),n[b]=[p,v,...S]}}}}const sF=new Tx().freeze();function UA(i,t){if(typeof t!="function")throw new TypeError("Cannot `"+i+"` without `parser`")}function qA(i,t){if(typeof t!="function")throw new TypeError("Cannot `"+i+"` without `compiler`")}function VA(i,t){if(t)throw new Error("Cannot call `"+i+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function qT(i){if(!Rw(i)||typeof i.type!="string")throw new TypeError("Expected node, got `"+i+"`")}function VT(i,t,e){if(!e)throw new Error("`"+i+"` finished async. Use `"+t+"` instead")}function ly(i){return rF(i)?i:new $D(i)}function rF(i){return!!(i&&typeof i=="object"&&"message"in i&&"messages"in i)}function aF(i){return typeof i=="string"||lF(i)}function lF(i){return!!(i&&typeof i=="object"&&"byteLength"in i&&"byteOffset"in i)}const oF="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",GT=[],YT={allowDangerousHtml:!0},uF=/^(https?|ircs?|mailto|xmpp)$/i,cF=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function hF(i){const t=dF(i),e=fF(i);return pF(t.runSync(t.parse(e),e),i)}function dF(i){const t=i.rehypePlugins||GT,e=i.remarkPlugins||GT,n=i.remarkRehypeOptions?{...i.remarkRehypeOptions,...YT}:YT;return sF().use(G3).use(e).use(Bj,n).use(t)}function fF(i){const t=i.children||"",e=new $D;return typeof t=="string"&&(e.value=t),e}function pF(i,t){const e=t.allowedElements,n=t.allowElement,r=t.components,l=t.disallowedElements,o=t.skipHtml,c=t.unwrapDisallowed,h=t.urlTransform||gF;for(const g of cF)Object.hasOwn(t,g.from)&&(""+g.from+(g.to?"use `"+g.to+"` instead":"remove it")+oF+g.id,void 0);return XD(i,p),Ez(i,{Fragment:P.Fragment,components:r,ignoreInvalidStyle:!0,jsx:P.jsx,jsxs:P.jsxs,passKeys:!0,passNode:!0});function p(g,y,b){if(g.type==="raw"&&b&&typeof y=="number")return o?b.children.splice(y,1):b.children[y]={type:"text",value:g.value},y;if(g.type==="element"){let v;for(v in LA)if(Object.hasOwn(LA,v)&&Object.hasOwn(g.properties,v)){const S=g.properties[v],w=LA[v];(w===null||w.includes(g.tagName))&&(g.properties[v]=h(String(S||""),v,g))}}if(g.type==="element"){let v=e?!e.includes(g.tagName):l?l.includes(g.tagName):!1;if(!v&&n&&typeof y=="number"&&(v=!n(g,y,b)),v&&b&&typeof y=="number")return c&&g.children?b.children.splice(y,1,...g.children):b.children.splice(y,1),y}}}function gF(i){const t=i.indexOf(":"),e=i.indexOf("?"),n=i.indexOf("#"),r=i.indexOf("/");return t===-1||r!==-1&&t>r||e!==-1&&t>e||n!==-1&&t>n||uF.test(i.slice(0,t))?i:""}function mF({quizList:i}){const[t,e]=et.useState(Array(i.length).fill(void 0)),[n,r]=et.useState(Array(i.length).fill(null)),l=(c,h)=>{const p=[...t];p[c]=h,e(p)},o=()=>{const c=i.map((h,p)=>{var g;return t[p]?((g=t[p])==null?void 0:g.trim().toLowerCase())===h.answer.trim().toLowerCase():null});r(c)};return P.jsxs("div",{children:[i.map((c,h)=>P.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded",children:[P.jsxs("div",{className:"font-bold mb-2",children:[h+1,". ",c.question]}),c.options?P.jsx("div",{children:c.options.map((p,g)=>P.jsxs("label",{className:"block",children:[P.jsx("input",{type:"radio",name:`quiz_${h}`,value:p,checked:t[h]===p,onChange:()=>l(h,p)})," ",p]},g))}):P.jsx("input",{type:"text",className:"border rounded p-1 mt-2",value:t[h]||"",onChange:p=>l(h,p.target.value),placeholder:"请输入答案"}),n[h]!==null&&P.jsx("div",{className:`mt-2 ${n[h]?"text-green-600":"text-red-600"}`,children:n[h]?`✅ 正确！解析：${c.explanation}`:`❌ 错误，正确答案是：${c.answer}。解析：${c.explanation}`})]},h)),P.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded",onClick:o,children:"提交答案"})]})}function yF({filePath:i}){const t=Pa(),[e]=et.useState(null),[n,r]=et.useState(!1),[l]=et.useState(null),o=()=>{t&&(r(!0),t.postMessage({command:"generateSummary",filePath:i}))},c=()=>{t&&(r(!0),t.postMessage({command:"generateQuiz",filePath:i}))},h=e&&typeof e=="string"?e.replace(/\\n/g,`
`):"";return P.jsxs("div",{className:"bg-white shadow p-4 rounded-xl",children:[P.jsx("h2",{className:"text-xl font-semibold mb-4",children:"🤖 AI 生成助手"}),P.jsxs("div",{className:"flex gap-4",children:[P.jsx("button",{className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600",onClick:o,children:"📘 生成课程总结"}),P.jsx("button",{className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600",onClick:c,children:"📝 生成测试题"})]}),P.jsx("div",{className:"mt-4 bg-gray-100 rounded p-4",children:n?"⏳ 正在生成...":e?l==="summary"&&typeof e=="string"?P.jsx("div",{className:"prose max-w-none",children:P.jsx(hF,{children:h})}):l==="quiz"&&Array.isArray(e)?P.jsx(mF,{quizList:e}):null:null})]})}function bF({selectedFile:i}){const[t,e]=et.useState({}),[n,r]=et.useState({}),[l,o]=et.useState({}),c=[{user:"Alice",time:"2025-04-11 14:22",content:"这个文件讲得很清楚👍",page:"Lecture1.pdf",location:"第3页"},{user:"Bob",time:"2025-04-11 16:05",content:"有个地方我没看懂，第三页第二段。",page:"Lecture1.pdf",location:"第3页"},{user:"Cathy",time:"2025-04-10 10:30",content:"建议补充一个例题会更好。",page:"Lecture2.pdf",location:"第5页"}],h=g=>{e(y=>({...y,[g]:(y[g]||0)+1}))},p=g=>{const y=l[g];y&&y.trim()&&(r(b=>({...b,[g]:[...b[g]||[],y.trim()]})),o(b=>({...b,[g]:""})))};return P.jsxs("div",{className:"bg-white shadow p-6 rounded-xl",children:[P.jsx("h2",{className:"text-xl font-bold mb-4",children:"💬 交流评论"}),P.jsxs("div",{className:"space-y-6",children:[c.filter(g=>g.page===i).map((g,y)=>P.jsxs("div",{className:"border-b pb-4",children:[P.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[P.jsxs("span",{children:[g.user," · ",g.location]}),P.jsx("span",{children:g.time})]}),P.jsx("p",{className:"mt-1 text-gray-800",children:g.content}),P.jsx("div",{className:"flex items-center gap-4 mt-2",children:P.jsxs("button",{onClick:()=>h(y),className:"text-sm text-blue-500 hover:underline",children:["👍 点赞 (",t[y]||0,")"]})}),P.jsxs("div",{className:"mt-2",children:[P.jsx("input",{type:"text",value:l[y]||"",onChange:b=>o(v=>({...v,[y]:b.target.value})),placeholder:"写下你的回复...",className:"w-full border rounded p-2 text-sm"}),P.jsx("button",{onClick:()=>p(y),className:"mt-1 text-sm text-green-600 hover:underline",children:"↩️ 回复"})]}),n[y]&&n[y].length>0&&P.jsx("ul",{className:"mt-2 pl-4 list-disc text-sm text-gray-700 space-y-1",children:n[y].map((b,v)=>P.jsx("li",{children:b},v))})]},y)),c.filter(g=>g.page===i).length===0&&P.jsx("p",{className:"text-gray-500",children:"暂无评论"})]})]})}function vF(){const i=[{title:"算法笔记分享",link:"https://example.com/note"},{title:"课后习题答案",link:"https://example.com/answer"},{title:"推荐阅读资料",link:"https://example.com/resource"}];return P.jsxs("div",{className:"bg-white shadow p-6 rounded-xl",children:[P.jsx("h2",{className:"text-xl font-bold mb-4",children:"🔗 相关资源"}),P.jsx("ul",{className:"list-disc list-inside space-y-2 text-blue-600",children:i.map((t,e)=>P.jsx("li",{children:P.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:t.title})},e))})]})}function AF({filePath:i}){console.log("Now loading FilePath:",i);const t=Pa(),e=["Lecture1.pdf","Lecture2.pdf","Lecture3.pdf"],[n,r]=et.useState(e[0]),[l,o]=et.useState(null);return et.useEffect(()=>{const c=h=>{const p=h.data;p.command==="fileDetails"?o(p.details):p.command==="error"&&console.error("出错：",p.error)};return window.addEventListener("message",c),t&&t.postMessage({command:"getFileDetails",filePath:i}),()=>window.removeEventListener("message",c)},[i,t]),t?P.jsxs("div",{className:"max-w-3xl mx-auto space-y-10",children:[P.jsx("h1",{className:"text-3xl font-bold text-center mt-6",children:"📄 文件详情"}),P.jsxs("div",{className:"flex flex-col items-center",children:[P.jsx("label",{className:"mb-2 font-medium",children:"当前文件："}),P.jsx("select",{value:n,onChange:c=>r(c.target.value),className:"border p-2 rounded-md w-full max-w-sm",children:e.map(c=>P.jsx("option",{value:c,children:c},c))}),l&&P.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["文件大小：",l.size,"，类型：",l.type,"，上传时间：",l.uploadedAt]})]}),P.jsx("div",{className:"flex justify-center",children:P.jsx("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-xl text-lg hover:bg-blue-700",onClick:()=>t.postMessage({command:"openFile",filePath:i}),children:"🔍 查看文件"})}),P.jsx(WP,{filePath:i}),P.jsx(yF,{filePath:i}),P.jsx(bF,{selectedFile:n}),P.jsx(vF,{})]}):P.jsx("div",{className:"p-10 text-center text-red-500",children:"无法加载 VSCode API，请确认环境。"})}const WD=et.createContext(void 0),wF=({children:i})=>{const[t,e]=et.useState([]),l={openPanels:t,openPanel:o=>{e(c=>c.find(h=>h.id===o.id)?c:[...c,o])},closePanel:o=>{e(c=>c.filter(h=>h.id!==o))}};return P.jsx(WD.Provider,{value:l,children:i})},Gb=()=>{const i=et.useContext(WD);if(!i)throw new Error("useSidePanel must be used within a SidePanelProvider");return i},hi=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),kw=[.001,0,0,.001,0,0],GA=1.35,es={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},dl={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},SF="pdfjs_internal_editor_",zt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},ee={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},xF={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Xn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},by={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},sn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Lc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Yb={ERRORS:0,WARNINGS:1,INFOS:5},nb={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},oy={moveTo:0,lineTo:1,curveTo:2,closePath:3},EF={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Xb=Yb.WARNINGS;function _F(i){Number.isInteger(i)&&(Xb=i)}function CF(){return Xb}function $b(i){Xb>=Yb.INFOS&&console.log(`Info: ${i}`)}function It(i){Xb>=Yb.WARNINGS&&console.log(`Warning: ${i}`)}function Se(i){throw new Error(i)}function ln(i,t){i||Se(t)}function TF(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function KD(i,t=null,e=null){if(!i)return null;if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const r=i.match(/\./g);(r==null?void 0:r.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=NF(i)}catch{}}const n=t?URL.parse(i,t):URL.parse(i);return TF(n)?n:null}function QD(i,t,e=!1){const n=URL.parse(i);return n?(n.hash=t,n.href):e&&KD(i,"http://example.com")?i.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Jt(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Xu=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class XT extends Xu{constructor(t,e){super(t,"PasswordException"),this.code=e}}class YA extends Xu{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Mw extends Xu{constructor(t){super(t,"InvalidPDFException")}}class ib extends Xu{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class RF extends Xu{constructor(t){super(t,"FormatError")}}class Ql extends Xu{constructor(t){super(t,"AbortException")}}function ZD(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Se("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let r=0;r<t;r+=e){const l=Math.min(r+e,t),o=i.subarray(r,l);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function Og(i){typeof i!="string"&&Se("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function DF(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function kF(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function MF(){try{return new Function(""),!0}catch{return!1}}class Hn{static get isLittleEndian(){return Jt(this,"isLittleEndian",kF())}static get isEvalSupported(){return Jt(this,"isEvalSupported",MF())}static get isOffscreenCanvasSupported(){return Jt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Jt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){if(typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"){const{platform:t,userAgent:e}=navigator;return Jt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}return Jt(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Jt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const XA=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Ma,vy,Nw;class _t{static makeHexColor(t,e,n){return`#${XA[t]}${XA[e]}${XA[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,n=0){const r=t[n],l=t[n+1];t[n]=r*e[0]+l*e[2]+e[4],t[n+1]=r*e[1]+l*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const r=e[0],l=e[1],o=e[2],c=e[3],h=e[4],p=e[5];for(let g=0;g<6;g+=2){const y=t[n+g],b=t[n+g+1];t[n+g]=y*r+b*o+h,t[n+g+1]=y*l+b*c+p}}static applyInverseTransform(t,e){const n=t[0],r=t[1],l=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/l,t[1]=(-n*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/l}static axialAlignedBoundingBox(t,e,n){const r=e[0],l=e[1],o=e[2],c=e[3],h=e[4],p=e[5],g=t[0],y=t[1],b=t[2],v=t[3];let S=r*g+h,w=S,_=r*b+h,T=_,O=c*y+p,N=O,I=c*v+p,z=I;if(l!==0||o!==0){const L=l*g,B=l*b,X=o*y,Q=o*v;S+=X,T+=X,_+=Q,w+=Q,O+=L,z+=L,I+=B,N+=B}n[0]=Math.min(n[0],S,_,w,T),n[1]=Math.min(n[1],O,I,N,z),n[2]=Math.max(n[2],S,_,w,T),n[3]=Math.max(n[3],O,I,N,z)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],r=t[1],l=t[2],o=t[3],c=n**2+r**2,h=n*l+r*o,p=l**2+o**2,g=(c+p)/2,y=Math.sqrt(g**2-(c*p-h**2));e[0]=Math.sqrt(g+y||1),e[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>r)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>o?null:[n,l,r,o]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,r,l){l[0]=Math.min(l[0],t,n),l[1]=Math.min(l[1],e,r),l[2]=Math.max(l[2],t,n),l[3]=Math.max(l[3],e,r)}static bezierBoundingBox(t,e,n,r,l,o,c,h,p){p[0]=Math.min(p[0],t,c),p[1]=Math.min(p[1],e,h),p[2]=Math.max(p[2],t,c),p[3]=Math.max(p[3],e,h),D(this,Ma,Nw).call(this,t,n,l,c,e,r,o,h,3*(-t+3*(n-l)+c),6*(t-2*n+l),3*(n-t),p),D(this,Ma,Nw).call(this,t,n,l,c,e,r,o,h,3*(-e+3*(r-o)+h),6*(e-2*r+o),3*(r-e),p)}}Ma=new WeakSet,vy=function(t,e,n,r,l,o,c,h,p,g){if(p<=0||p>=1)return;const y=1-p,b=p*p,v=b*p,S=y*(y*(y*t+3*p*e)+3*b*n)+v*r,w=y*(y*(y*l+3*p*o)+3*b*c)+v*h;g[0]=Math.min(g[0],S),g[1]=Math.min(g[1],w),g[2]=Math.max(g[2],S),g[3]=Math.max(g[3],w)},Nw=function(t,e,n,r,l,o,c,h,p,g,y,b){if(Math.abs(p)<1e-12){Math.abs(g)>=1e-12&&D(this,Ma,vy).call(this,t,e,n,r,l,o,c,h,-y/g,b);return}const v=g**2-4*y*p;if(v<0)return;const S=Math.sqrt(v),w=2*p;D(this,Ma,vy).call(this,t,e,n,r,l,o,c,h,(-g+S)/w,b),D(this,Ma,vy).call(this,t,e,n,r,l,o,c,h,(-g-S)/w,b)},R(_t,Ma);function NF(i){return decodeURIComponent(escape(i))}let $A=null,$T=null;function OF(i){return $A||($A=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,$T=new Map([["ﬅ","ſt"]])),i.replaceAll($A,(t,e,n)=>e?e.normalize("NFKC"):$T.get(n))}function JD(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),ZD(i)}const Rx="pdfjs_internal_id_";function LF(i,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,r,...l]=e;if(!i(n)&&!Number.isInteger(n)||!t(r))return!1;const o=l.length;let c=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;c=!1;break;default:return!1}for(const h of l)if(!(typeof h=="number"||c&&h===null))return!1;return!0}function di(i,t,e){return Math.min(Math.max(i,t),e)}function tk(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(ZD(i))}function PF(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):Og(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((t,e)=>t+e,0)});const Kr="http://www.w3.org/2000/svg",Do=class Do{};mt(Do,"CSS",96),mt(Do,"PDF",72),mt(Do,"PDF_TO_CSS_UNITS",Do.CSS/Do.PDF);let Zl=Do;async function Lg(i,t="text"){if(Pc(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Pg{constructor({viewBox:t,userUnit:e,scale:n,rotation:r,offsetX:l=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=r,this.offsetX=l,this.offsetY=o,n*=e;const h=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let g,y,b,v;switch(r%=360,r<0&&(r+=360),r){case 180:g=-1,y=0,b=0,v=1;break;case 90:g=0,y=1,b=1,v=0;break;case 270:g=0,y=-1,b=-1,v=0;break;case 0:g=1,y=0,b=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(b=-b,v=-v);let S,w,_,T;g===0?(S=Math.abs(p-t[1])*n+l,w=Math.abs(h-t[0])*n+o,_=(t[3]-t[1])*n,T=(t[2]-t[0])*n):(S=Math.abs(h-t[0])*n+l,w=Math.abs(p-t[1])*n+o,_=(t[2]-t[0])*n,T=(t[3]-t[1])*n),this.transform=[g*n,y*n,b*n,v*n,S-g*n*h-b*n*p,w-y*n*h-v*n*p],this.width=_,this.height=T}get rawDims(){const t=this.viewBox;return Jt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:l=!1}={}){return new Pg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:l})}convertToViewportPoint(t,e){const n=[t,e];return _t.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];_t.applyTransform(e,this.transform);const n=[t[2],t[3]];return _t.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return _t.applyInverseTransform(n,this.transform),n}}class Dx extends Xu{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Wb(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function kx(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function zF(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function IF(i,t="document.pdf"){if(typeof i!="string")return t;if(Wb(i))return It('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=e.exec(i);let l=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(l&&(l=l[0],l.includes("%")))try{l=n.exec(decodeURIComponent(l))[0]}catch{}return l||t}class WT{constructor(){mt(this,"started",Object.create(null));mt(this,"times",[])}time(t){t in this.started&&It(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||It(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:r,end:l}of this.times)t.push(`${n.padEnd(e)} ${l-r}ms
`);return t.join("")}}function Pc(i,t){const e=t?URL.parse(i,t):URL.parse(i);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Zs(i){i.preventDefault()}function an(i){i.preventDefault(),i.stopPropagation()}var ip;class Mx{static toDateObject(t){if(!t||typeof t!="string")return null;f(this,ip)||x(this,ip,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=f(this,ip).exec(t);if(!e)return null;const n=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const p=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(o+=g,c+=y):p==="+"&&(o-=g,c-=y),new Date(Date.UTC(n,r,l,o,c,h))}}ip=new WeakMap,R(Mx,ip);function jF(i,{scale:t=1,rotation:e=0}){const{width:n,height:r}=i.attributes.style,l=[0,0,parseInt(n),parseInt(r)];return new Pg({viewBox:l,userUnit:1,scale:t,rotation:e})}function Nx(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(It(`Not a valid color format: "${i}"`),[0,0,0])}function FF(i){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,Nx(n))}t.remove()}function Fe(i){const{a:t,b:e,c:n,d:r,e:l,f:o}=i.getTransform();return[t,e,n,r,l,o]}function lr(i){const{a:t,b:e,c:n,d:r,e:l,f:o}=i.getTransform().invertSelf();return[t,e,n,r,l,o]}function Fu(i,t,e=!1,n=!0){if(t instanceof Pg){const{pageWidth:r,pageHeight:l}=t.rawDims,{style:o}=i,c=Hn.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,p=`var(--total-scale-factor) * ${l}px`,g=c?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,y=c?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!e||t.rotation%180===0?(o.width=g,o.height=y):(o.width=y,o.height=g)}n&&i.setAttribute("data-main-rotation",t.rotation)}class Oa{constructor(){const{pixelRatio:t}=Oa;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,r){let l=1/0,o=1/0,c=1/0;n>0&&(l=Math.sqrt(n/(t*e))),r!==-1&&(o=r/t,c=r/e);const h=Math.min(l,o,c);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}}const Ow=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var gl,No,bs,ml,sp,th,rp,gb,ek,Bn,nk,ik,Tf,sk,Ay;const Jr=class Jr{constructor(t){R(this,Bn);R(this,gl,null);R(this,No,null);R(this,bs);R(this,ml,null);R(this,sp,null);R(this,th,null);x(this,bs,t),f(Jr,rp)||x(Jr,rp,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=x(this,gl,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=f(this,bs)._uiManager._signal;t.addEventListener("contextmenu",Zs,{signal:e}),t.addEventListener("pointerdown",D(Jr,gb,ek),{signal:e});const n=x(this,ml,document.createElement("div"));n.className="buttons",t.append(n);const r=f(this,bs).toolbarPosition;if(r){const{style:l}=t,o=f(this,bs)._uiManager.direction==="ltr"?1-r[0]:r[0];l.insetInlineEnd=`${100*o}%`,l.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return D(this,Bn,sk).call(this),t}get div(){return f(this,gl)}hide(){var t;f(this,gl).classList.add("hidden"),(t=f(this,No))==null||t.hideDropdown()}show(){var t;f(this,gl).classList.remove("hidden"),(t=f(this,sp))==null||t.shown()}async addAltText(t){const e=await t.render();D(this,Bn,Tf).call(this,e),f(this,ml).prepend(e,f(this,Bn,Ay)),x(this,sp,t)}addColorPicker(t){x(this,No,t);const e=t.renderButton();D(this,Bn,Tf).call(this,e),f(this,ml).prepend(e,f(this,Bn,Ay))}async addEditSignatureButton(t){const e=x(this,th,await t.renderEditButton(f(this,bs)));D(this,Bn,Tf).call(this,e),f(this,ml).prepend(e,f(this,Bn,Ay))}updateEditSignatureButton(t){f(this,th)&&(f(this,th).title=t)}remove(){var t;f(this,gl).remove(),(t=f(this,No))==null||t.destroy(),x(this,No,null)}};gl=new WeakMap,No=new WeakMap,bs=new WeakMap,ml=new WeakMap,sp=new WeakMap,th=new WeakMap,rp=new WeakMap,gb=new WeakSet,ek=function(t){t.stopPropagation()},Bn=new WeakSet,nk=function(t){f(this,bs)._focusEventsAllowed=!1,an(t)},ik=function(t){f(this,bs)._focusEventsAllowed=!0,an(t)},Tf=function(t){const e=f(this,bs)._uiManager._signal;t.addEventListener("focusin",D(this,Bn,nk).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",D(this,Bn,ik).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Zs,{signal:e})},sk=function(){const{editorType:t,_uiManager:e}=f(this,bs),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",f(Jr,rp)[t]),D(this,Bn,Tf).call(this,n),n.addEventListener("click",r=>{e.delete()},{signal:e._signal}),f(this,ml).append(n)},Ay=function(){const t=document.createElement("div");return t.className="divider",t},R(Jr,gb),R(Jr,rp,null);let Lw=Jr;var ap,Oo,Lo,Jl,rk,ak,lk;class BF{constructor(t){R(this,Jl);R(this,ap,null);R(this,Oo,null);R(this,Lo);x(this,Lo,t)}show(t,e,n){const[r,l]=D(this,Jl,ak).call(this,e,n),{style:o}=f(this,Oo)||x(this,Oo,D(this,Jl,rk).call(this));t.append(f(this,Oo)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){f(this,Oo).remove()}}ap=new WeakMap,Oo=new WeakMap,Lo=new WeakMap,Jl=new WeakSet,rk=function(){const t=x(this,Oo,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Zs,{signal:f(this,Lo)._signal});const e=x(this,ap,document.createElement("div"));return e.className="buttons",t.append(e),D(this,Jl,lk).call(this),t},ak=function(t,e){let n=0,r=0;for(const l of t){const o=l.y+l.height;if(o<n)continue;const c=l.x+(e?l.width:0);if(o>n){r=c,n=o;continue}e?c>r&&(r=c):c<r&&(r=c)}return[e?1-r:r,n]},lk=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=f(this,Lo)._signal;t.addEventListener("contextmenu",Zs,{signal:n}),t.addEventListener("click",()=>{f(this,Lo).highlightSelection("floating_button")},{signal:n}),f(this,ap).append(t)};function Ox(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}var mb;class HF{constructor(){R(this,mb,0)}get id(){return`${SF}${ri(this,mb)._++}`}}mb=new WeakMap;var eh,lp,Wn,nh,wy;const Xx=class Xx{constructor(){R(this,nh);R(this,eh,JD());R(this,lp,0);R(this,Wn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const l=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Jt(this,"_isSVGFittingCanvas",l)}async getFromFile(t){const{lastModified:e,name:n,size:r,type:l}=t;return D(this,nh,wy).call(this,`${e}_${n}_${r}_${l}`,t)}async getFromUrl(t){return D(this,nh,wy).call(this,t,t)}async getFromBlob(t,e){const n=await e;return D(this,nh,wy).call(this,t,n)}async getFromId(t){f(this,Wn)||x(this,Wn,new Map);const e=f(this,Wn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){f(this,Wn)||x(this,Wn,new Map);let n=f(this,Wn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${f(this,eh)}_${ri(this,lp)._++}`,refCounter:1,isSvg:!1},f(this,Wn).set(t,n),f(this,Wn).set(n.id,n),n}getSvgUrl(t){const e=f(this,Wn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var r;f(this,Wn)||x(this,Wn,new Map);const e=f(this,Wn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const l=new OffscreenCanvas(n.width,n.height);l.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=l.convertToBlob()}(r=n.close)==null||r.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${f(this,eh)}_`)}};eh=new WeakMap,lp=new WeakMap,Wn=new WeakMap,nh=new WeakSet,wy=async function(t,e){f(this,Wn)||x(this,Wn,new Map);let n=f(this,Wn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${f(this,eh)}_${ri(this,lp)._++}`,refCounter:0,isSvg:!1});let r;if(typeof e=="string"?(n.url=e,r=await Lg(e,"blob")):e instanceof File?r=n.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const l=Xx._isSVGFittingCanvas,o=new FileReader,c=new Image,h=new Promise((p,g)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,p()},o.onload=async()=>{const y=n.svgUrl=o.result;c.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},c.onerror=o.onerror=g});o.readAsDataURL(r),await h}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){It(r),n=null}return f(this,Wn).set(t,n),n&&f(this,Wn).set(n.id,n),n};let Pw=Xx;var Ke,yl,op,je;class UF{constructor(t=128){R(this,Ke,[]);R(this,yl,!1);R(this,op);R(this,je,-1);x(this,op,t)}add({cmd:t,undo:e,post:n,mustExec:r,type:l=NaN,overwriteIfSameType:o=!1,keepUndo:c=!1}){if(r&&t(),f(this,yl))return;const h={cmd:t,undo:e,post:n,type:l};if(f(this,je)===-1){f(this,Ke).length>0&&(f(this,Ke).length=0),x(this,je,0),f(this,Ke).push(h);return}if(o&&f(this,Ke)[f(this,je)].type===l){c&&(h.undo=f(this,Ke)[f(this,je)].undo),f(this,Ke)[f(this,je)]=h;return}const p=f(this,je)+1;p===f(this,op)?f(this,Ke).splice(0,1):(x(this,je,p),p<f(this,Ke).length&&f(this,Ke).splice(p)),f(this,Ke).push(h)}undo(){if(f(this,je)===-1)return;x(this,yl,!0);const{undo:t,post:e}=f(this,Ke)[f(this,je)];t(),e==null||e(),x(this,yl,!1),x(this,je,f(this,je)-1)}redo(){if(f(this,je)<f(this,Ke).length-1){x(this,je,f(this,je)+1),x(this,yl,!0);const{cmd:t,post:e}=f(this,Ke)[f(this,je)];t(),e==null||e(),x(this,yl,!1)}}hasSomethingToUndo(){return f(this,je)!==-1}hasSomethingToRedo(){return f(this,je)<f(this,Ke).length-1}cleanType(t){if(f(this,je)!==-1){for(let e=f(this,je);e>=0;e--)if(f(this,Ke)[e].type!==t){f(this,Ke).splice(e+1,f(this,je)-e),x(this,je,e);return}f(this,Ke).length=0,x(this,je,-1)}}destroy(){x(this,Ke,null)}}Ke=new WeakMap,yl=new WeakMap,op=new WeakMap,je=new WeakMap;var yb,ok;class zg{constructor(t){R(this,yb);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Hn.platform;for(const[n,r,l={}]of t)for(const o of n){const c=o.startsWith("mac+");e&&c?(this.callbacks.set(o.slice(4),{callback:r,options:l}),this.allKeys.add(o.split("+").at(-1))):!e&&!c&&(this.callbacks.set(o,{callback:r,options:l}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(D(this,yb,ok).call(this,e));if(!n)return;const{callback:r,options:{bubbles:l=!1,args:o=[],checker:c=null}}=n;c&&!c(t,e)||(r.bind(t,...o,e)(),l||an(e))}}yb=new WeakSet,ok=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const bb=class bb{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return FF(t),Jt(this,"_colors",t)}convert(t){const e=Nx(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,r]of this._colors)if(r.every((l,o)=>l===e[o]))return bb._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?_t.makeHexColor(...e):t}};mt(bb,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let zw=bb;var ih,Ui,gn,Nn,sh,ea,rh,vs,bl,vl,ah,Po,dr,js,zo,up,cp,lh,hp,fr,Al,oh,wl,pr,vb,Sl,dp,xl,Io,jo,El,fp,Sn,pe,na,_l,Fo,pp,gp,Cl,gr,ia,mp,As,vt,Sy,Iw,uk,ck,xy,hk,dk,fk,jw,pk,Fw,Bw,gk,ai,Qr,mk,yk,Hw,bk,Rf,Uw;const Xc=class Xc{constructor(t,e,n,r,l,o,c,h,p,g,y,b,v,S){R(this,vt);R(this,ih,new AbortController);R(this,Ui,null);R(this,gn,new Map);R(this,Nn,new Map);R(this,sh,null);R(this,ea,null);R(this,rh,null);R(this,vs,new UF);R(this,bl,null);R(this,vl,null);R(this,ah,0);R(this,Po,new Set);R(this,dr,null);R(this,js,null);R(this,zo,new Set);mt(this,"_editorUndoBar",null);R(this,up,!1);R(this,cp,!1);R(this,lh,!1);R(this,hp,null);R(this,fr,null);R(this,Al,null);R(this,oh,null);R(this,wl,!1);R(this,pr,null);R(this,vb,new HF);R(this,Sl,!1);R(this,dp,!1);R(this,xl,null);R(this,Io,null);R(this,jo,null);R(this,El,null);R(this,fp,null);R(this,Sn,zt.NONE);R(this,pe,new Set);R(this,na,null);R(this,_l,null);R(this,Fo,null);R(this,pp,null);R(this,gp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});R(this,Cl,[0,0]);R(this,gr,null);R(this,ia,null);R(this,mp,null);R(this,As,null);const w=this._signal=f(this,ih).signal;x(this,ia,t),x(this,mp,e),x(this,sh,n),x(this,_l,r),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:w}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),l._on("setpreference",this.onSetPreference.bind(this),{signal:w}),l._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:w}),D(this,vt,hk).call(this),D(this,vt,gk).call(this),D(this,vt,jw).call(this),x(this,ea,o.annotationStorage),x(this,hp,o.filterFactory),x(this,Fo,c),x(this,oh,h||null),x(this,up,p),x(this,cp,g),x(this,lh,y),x(this,fp,b||null),this.viewParameters={realScale:Zl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=S!==!1}static get _keyboardManager(){const t=Xc.prototype,e=o=>f(o,ia).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:c})=>{if(c instanceof HTMLInputElement){const{type:h}=c;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return Jt(this,"_keyboardManager",new zg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&f(o,ia).contains(c)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&f(o,ia).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}destroy(){var t,e,n,r,l,o,c,h;(t=f(this,As))==null||t.resolve(),x(this,As,null),(e=f(this,ih))==null||e.abort(),x(this,ih,null),this._signal=null;for(const p of f(this,Nn).values())p.destroy();f(this,Nn).clear(),f(this,gn).clear(),f(this,zo).clear(),(n=f(this,El))==null||n.clear(),x(this,Ui,null),f(this,pe).clear(),f(this,vs).destroy(),(r=f(this,sh))==null||r.destroy(),(l=f(this,_l))==null||l.destroy(),(o=f(this,pr))==null||o.hide(),x(this,pr,null),(c=f(this,jo))==null||c.destroy(),x(this,jo,null),f(this,fr)&&(clearTimeout(f(this,fr)),x(this,fr,null)),f(this,gr)&&(clearTimeout(f(this,gr)),x(this,gr,null)),(h=this._editorUndoBar)==null||h.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return f(this,fp)}get useNewAltTextFlow(){return f(this,cp)}get useNewAltTextWhenAddingImage(){return f(this,lh)}get hcmFilter(){return Jt(this,"hcmFilter",f(this,Fo)?f(this,hp).addHCMFilter(f(this,Fo).foreground,f(this,Fo).background):"none")}get direction(){return Jt(this,"direction",getComputedStyle(f(this,ia)).direction)}get highlightColors(){return Jt(this,"highlightColors",f(this,oh)?new Map(f(this,oh).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Jt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),x(this,vl,t)}setMainHighlightColorPicker(t){x(this,jo,t)}editAltText(t,e=!1){var n;(n=f(this,sh))==null||n.editAltText(this,t,e)}getSignature(t){var e;(e=f(this,_l))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return f(this,_l)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":x(this,lh,e);break}}onPageChanging({pageNumber:t}){x(this,ah,t-1)}focusMainContainer(){f(this,ia).focus()}findParent(t,e){for(const n of f(this,Nn).values()){const{x:r,y:l,width:o,height:c}=n.div.getBoundingClientRect();if(t>=r&&t<=r+o&&e>=l&&e<=l+c)return n}return null}disableUserSelect(t=!1){f(this,mp).classList.toggle("noUserSelect",t)}addShouldRescale(t){f(this,zo).add(t)}removeShouldRescale(t){f(this,zo).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Zl.PDF_TO_CSS_UNITS;for(const n of f(this,zo))n.onScaleChanging();(e=f(this,vl))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:l,focusOffset:o}=e,c=e.toString(),p=D(this,vt,Sy).call(this,e).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;e.empty();const y=D(this,vt,Iw).call(this,p),b=f(this,Sn)===zt.NONE,v=()=>{y==null||y.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:n,anchorOffset:r,focusNode:l,focusOffset:o,text:c}),b&&this.showAllEditors("highlight",!0,!0)};if(b){this.switchToMode(zt.HIGHLIGHT,v);return}v()}addToAnnotationStorage(t){!t.isEmpty()&&f(this,ea)&&!f(this,ea).has(t.id)&&f(this,ea).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,f(this,wl)&&(x(this,wl,!1),D(this,vt,xy).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of f(this,pe))if(e.div.contains(t)){x(this,Io,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!f(this,Io))return;const[t,e]=f(this,Io);x(this,Io,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){D(this,vt,jw).call(this),D(this,vt,Fw).call(this)}removeEditListeners(){D(this,vt,pk).call(this),D(this,vt,Bw).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of f(this,js))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of f(this,js))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=f(this,Ui))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const r of f(this,pe)){const l=r.serialize(!0);l&&e.push(l)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const o of f(this,js))if(o.isHandlingMimeForPasting(l.type)){o.paste(l,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(l){It(`paste: "${l.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const l=[];for(const h of n){const p=await r.deserialize(h);if(!p)return;l.push(p)}const o=()=>{for(const h of l)D(this,vt,Hw).call(this,h);D(this,vt,Uw).call(this,l)},c=()=>{for(const h of l)h.remove()};this.addCommands({cmd:o,undo:c,mustExec:!0})}catch(l){It(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),f(this,Sn)!==zt.NONE&&!this.isEditorHandlingKeyboard&&Xc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,f(this,wl)&&(x(this,wl,!1),D(this,vt,xy).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(D(this,vt,dk).call(this),D(this,vt,Fw).call(this),D(this,vt,ai).call(this,{isEditing:f(this,Sn)!==zt.NONE,isEmpty:D(this,vt,Rf).call(this),hasSomethingToUndo:f(this,vs).hasSomethingToUndo(),hasSomethingToRedo:f(this,vs).hasSomethingToRedo(),hasSelectedEditor:!1})):(D(this,vt,fk).call(this),D(this,vt,Bw).call(this),D(this,vt,ai).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!f(this,js)){x(this,js,t);for(const e of f(this,js))D(this,vt,Qr).call(this,e.defaultPropertiesToUpdate)}}getId(){return f(this,vb).id}get currentLayer(){return f(this,Nn).get(f(this,ah))}getLayer(t){return f(this,Nn).get(t)}get currentPageIndex(){return f(this,ah)}addLayer(t){f(this,Nn).set(t.pageIndex,t),f(this,Sl)?t.enable():t.disable()}removeLayer(t){f(this,Nn).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){var r,l,o;if(f(this,Sn)!==t&&!(f(this,As)&&(await f(this,As).promise,!f(this,As)))){if(x(this,As,Promise.withResolvers()),(r=f(this,vl))==null||r.commitOrRemove(),x(this,Sn,t),t===zt.NONE){this.setEditingState(!1),D(this,vt,yk).call(this),(l=this._editorUndoBar)==null||l.hide(),f(this,As).resolve();return}t===zt.SIGNATURE&&await((o=f(this,_l))==null?void 0:o.loadSignatures()),this.setEditingState(!0),await D(this,vt,mk).call(this),this.unselectAll();for(const c of f(this,Nn).values())c.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),f(this,As).resolve();return}for(const c of f(this,gn).values())c.annotationElementId===e?(this.setSelected(c),c.enterInEditMode()):c.unselect();f(this,As).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==f(this,Sn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(f(this,js)){switch(t){case ee.CREATE:this.currentLayer.addNewEditor(e);return;case ee.HIGHLIGHT_DEFAULT_COLOR:(n=f(this,jo))==null||n.updateColor(e);break;case ee.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(f(this,pp)||x(this,pp,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const r of f(this,pe))r.updateParams(t,e);for(const r of f(this,js))r.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var l;for(const o of f(this,gn).values())o.editorType===t&&o.show(e);(((l=f(this,pp))==null?void 0:l.get(ee.HIGHLIGHT_SHOW_ALL))??!0)!==e&&D(this,vt,Qr).call(this,[[ee.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(f(this,dp)!==t){x(this,dp,t);for(const e of f(this,Nn).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of f(this,gn).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return f(this,gn).get(t)}addEditor(t){f(this,gn).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(f(this,fr)&&clearTimeout(f(this,fr)),x(this,fr,setTimeout(()=>{this.focusMainContainer(),x(this,fr,null)},0))),f(this,gn).delete(t.id),t.annotationElementId&&((e=f(this,El))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!f(this,Po).has(t.annotationElementId))&&((n=f(this,ea))==null||n.remove(t.id))}addDeletedAnnotationElement(t){f(this,Po).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return f(this,Po).has(t)}removeDeletedAnnotationElement(t){f(this,Po).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){f(this,Ui)!==t&&(x(this,Ui,t),t&&D(this,vt,Qr).call(this,t.propertiesToUpdate))}updateUI(t){f(this,vt,bk)===t&&D(this,vt,Qr).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){D(this,vt,Qr).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(f(this,pe).has(t)){f(this,pe).delete(t),t.unselect(),D(this,vt,ai).call(this,{hasSelectedEditor:this.hasSelection});return}f(this,pe).add(t),t.select(),D(this,vt,Qr).call(this,t.propertiesToUpdate),D(this,vt,ai).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=f(this,vl))==null||e.commitOrRemove();for(const n of f(this,pe))n!==t&&n.unselect();f(this,pe).clear(),f(this,pe).add(t),t.select(),D(this,vt,Qr).call(this,t.propertiesToUpdate),D(this,vt,ai).call(this,{hasSelectedEditor:!0})}isSelected(t){return f(this,pe).has(t)}get firstSelectedEditor(){return f(this,pe).values().next().value}unselect(t){t.unselect(),f(this,pe).delete(t),D(this,vt,ai).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return f(this,pe).size!==0}get isEnterHandled(){return f(this,pe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;f(this,vs).undo(),D(this,vt,ai).call(this,{hasSomethingToUndo:f(this,vs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:D(this,vt,Rf).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){f(this,vs).redo(),D(this,vt,ai).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:f(this,vs).hasSomethingToRedo(),isEmpty:D(this,vt,Rf).call(this)})}addCommands(t){f(this,vs).add(t),D(this,vt,ai).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:D(this,vt,Rf).call(this)})}cleanUndoStack(t){f(this,vs).cleanType(t)}delete(){var l;this.commitOrRemove();const t=(l=this.currentLayer)==null?void 0:l.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...f(this,pe)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,e.length===1?e[0].editorType:e.length);for(const c of e)c.remove()},r=()=>{for(const o of e)D(this,vt,Hw).call(this,o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var t;(t=f(this,Ui))==null||t.commitOrRemove()}hasSomethingToControl(){return f(this,Ui)||this.hasSelection}selectAll(){for(const t of f(this,pe))t.commit();D(this,vt,Uw).call(this,f(this,gn).values())}unselectAll(){var t;if(!(f(this,Ui)&&(f(this,Ui).commitOrRemove(),f(this,Sn)!==zt.NONE))&&!((t=f(this,vl))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of f(this,pe))e.unselect();f(this,pe).clear(),D(this,vt,ai).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;f(this,Cl)[0]+=t,f(this,Cl)[1]+=e;const[r,l]=f(this,Cl),o=[...f(this,pe)],c=1e3;f(this,gr)&&clearTimeout(f(this,gr)),x(this,gr,setTimeout(()=>{x(this,gr,null),f(this,Cl)[0]=f(this,Cl)[1]=0,this.addCommands({cmd:()=>{for(const h of o)f(this,gn).has(h.id)&&(h.translateInPage(r,l),h.translationDone())},undo:()=>{for(const h of o)f(this,gn).has(h.id)&&(h.translateInPage(-r,-l),h.translationDone())},mustExec:!1})},c));for(const h of o)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,dr,new Map);for(const t of f(this,pe))f(this,dr).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!f(this,dr))return!1;this.disableUserSelect(!1);const t=f(this,dr);x(this,dr,null);let e=!1;for(const[{x:r,y:l,pageIndex:o},c]of t)c.newX=r,c.newY=l,c.newPageIndex=o,e||(e=r!==c.savedX||l!==c.savedY||o!==c.savedPageIndex);if(!e)return!1;const n=(r,l,o,c)=>{if(f(this,gn).has(r.id)){const h=f(this,Nn).get(c);h?r._setParentAndPosition(h,l,o):(r.pageIndex=c,r.x=l,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:l,newY:o,newPageIndex:c}]of t)n(r,l,o,c)},undo:()=>{for(const[r,{savedX:l,savedY:o,savedPageIndex:c}]of t)n(r,l,o,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(f(this,dr))for(const n of f(this,dr).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||f(this,pe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return f(this,Ui)===t}getActive(){return f(this,Ui)}getMode(){return f(this,Sn)}get imageManager(){return Jt(this,"imageManager",new Pw)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,g=e.rangeCount;p<g;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:r,width:l,height:o}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(p,g,y,b)=>({x:(g-r)/o,y:1-(p+y-n)/l,width:b/o,height:y/l});break;case"180":c=(p,g,y,b)=>({x:1-(p+y-n)/l,y:1-(g+b-r)/o,width:y/l,height:b/o});break;case"270":c=(p,g,y,b)=>({x:1-(g+b-r)/o,y:(p-n)/l,width:b/o,height:y/l});break;default:c=(p,g,y,b)=>({x:(p-n)/l,y:(g-r)/o,width:y/l,height:b/o});break}const h=[];for(let p=0,g=e.rangeCount;p<g;p++){const y=e.getRangeAt(p);if(!y.collapsed)for(const{x:b,y:v,width:S,height:w}of y.getClientRects())S===0||w===0||h.push(c(b,v,S,w))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(f(this,rh)||x(this,rh,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=f(this,rh))==null||e.delete(t)}renderAnnotationElement(t){var r;const e=(r=f(this,rh))==null?void 0:r.get(t.data.id);if(!e)return;const n=f(this,ea).getRawValue(e);n&&(f(this,Sn)===zt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var l;const r=(l=f(this,El))==null?void 0:l.get(t);r&&(r.setCanvas(e,n),f(this,El).delete(t))}addMissingCanvas(t,e){(f(this,El)||x(this,El,new Map)).set(t,e)}};ih=new WeakMap,Ui=new WeakMap,gn=new WeakMap,Nn=new WeakMap,sh=new WeakMap,ea=new WeakMap,rh=new WeakMap,vs=new WeakMap,bl=new WeakMap,vl=new WeakMap,ah=new WeakMap,Po=new WeakMap,dr=new WeakMap,js=new WeakMap,zo=new WeakMap,up=new WeakMap,cp=new WeakMap,lh=new WeakMap,hp=new WeakMap,fr=new WeakMap,Al=new WeakMap,oh=new WeakMap,wl=new WeakMap,pr=new WeakMap,vb=new WeakMap,Sl=new WeakMap,dp=new WeakMap,xl=new WeakMap,Io=new WeakMap,jo=new WeakMap,El=new WeakMap,fp=new WeakMap,Sn=new WeakMap,pe=new WeakMap,na=new WeakMap,_l=new WeakMap,Fo=new WeakMap,pp=new WeakMap,gp=new WeakMap,Cl=new WeakMap,gr=new WeakMap,ia=new WeakMap,mp=new WeakMap,As=new WeakMap,vt=new WeakSet,Sy=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Iw=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of f(this,Nn).values())if(n.hasTextLayer(t))return n;return null},uk=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=D(this,vt,Sy).call(this,t).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(f(this,pr)||x(this,pr,new BF(this)),f(this,pr).show(n,r,this.direction==="ltr"))},ck=function(){var l,o,c;const t=document.getSelection();if(!t||t.isCollapsed){f(this,na)&&((l=f(this,pr))==null||l.hide(),x(this,na,null),D(this,vt,ai).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===f(this,na))return;const r=D(this,vt,Sy).call(this,t).closest(".textLayer");if(!r){f(this,na)&&((o=f(this,pr))==null||o.hide(),x(this,na,null),D(this,vt,ai).call(this,{hasSelectedText:!1}));return}if((c=f(this,pr))==null||c.hide(),x(this,na,e),D(this,vt,ai).call(this,{hasSelectedText:!0}),!(f(this,Sn)!==zt.HIGHLIGHT&&f(this,Sn)!==zt.NONE)&&(f(this,Sn)===zt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,wl,this.isShiftKeyDown),!this.isShiftKeyDown)){const h=f(this,Sn)===zt.HIGHLIGHT?D(this,vt,Iw).call(this,r):null;h==null||h.toggleDrawing();const p=new AbortController,g=this.combinedSignal(p),y=b=>{b.type==="pointerup"&&b.button!==0||(p.abort(),h==null||h.toggleDrawing(!0),b.type==="pointerup"&&D(this,vt,xy).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("blur",y,{signal:g})}},xy=function(t=""){f(this,Sn)===zt.HIGHLIGHT?this.highlightSelection(t):f(this,up)&&D(this,vt,uk).call(this)},hk=function(){document.addEventListener("selectionchange",D(this,vt,ck).bind(this),{signal:this._signal})},dk=function(){if(f(this,Al))return;x(this,Al,new AbortController);const t=this.combinedSignal(f(this,Al));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},fk=function(){var t;(t=f(this,Al))==null||t.abort(),x(this,Al,null)},jw=function(){if(f(this,xl))return;x(this,xl,new AbortController);const t=this.combinedSignal(f(this,xl));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},pk=function(){var t;(t=f(this,xl))==null||t.abort(),x(this,xl,null)},Fw=function(){if(f(this,bl))return;x(this,bl,new AbortController);const t=this.combinedSignal(f(this,bl));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Bw=function(){var t;(t=f(this,bl))==null||t.abort(),x(this,bl,null)},gk=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},ai=function(t){Object.entries(t).some(([n,r])=>f(this,gp)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(f(this,gp),t)}),f(this,Sn)===zt.HIGHLIGHT&&t.hasSelectedEditor===!1&&D(this,vt,Qr).call(this,[[ee.HIGHLIGHT_FREE,!0]]))},Qr=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},mk=async function(){if(!f(this,Sl)){x(this,Sl,!0);const t=[];for(const e of f(this,Nn).values())t.push(e.enable());await Promise.all(t);for(const e of f(this,gn).values())e.enable()}},yk=function(){if(this.unselectAll(),f(this,Sl)){x(this,Sl,!1);for(const t of f(this,Nn).values())t.disable();for(const t of f(this,gn).values())t.disable()}},Hw=function(t){const e=f(this,Nn).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},bk=function(){let t=null;for(t of f(this,pe));return t},Rf=function(){if(f(this,gn).size===0)return!0;if(f(this,gn).size===1)for(const t of f(this,gn).values())return t.isEmpty();return!1},Uw=function(t){for(const e of f(this,pe))e.unselect();f(this,pe).clear();for(const e of t)e.isEmpty()||(f(this,pe).add(e),e.select());D(this,vt,ai).call(this,{hasSelectedEditor:this.hasSelection})},mt(Xc,"TRANSLATE_SMALL",1),mt(Xc,"TRANSLATE_BIG",10);let Bu=Xc;var xn,mr,Fs,uh,yr,qi,ch,br,_i,sa,Bo,vr,Tl,Ks,Df,Ey;const li=class li{constructor(t){R(this,Ks);R(this,xn,null);R(this,mr,!1);R(this,Fs,null);R(this,uh,null);R(this,yr,null);R(this,qi,null);R(this,ch,!1);R(this,br,null);R(this,_i,null);R(this,sa,null);R(this,Bo,null);R(this,vr,!1);x(this,_i,t),x(this,vr,t._uiManager.useNewAltTextFlow),f(li,Tl)||x(li,Tl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){li._l10n??(li._l10n=t)}async render(){const t=x(this,Fs,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=x(this,uh,document.createElement("span"));t.append(e),f(this,vr)?(t.classList.add("new"),t.setAttribute("data-l10n-id",f(li,Tl).missing),e.setAttribute("data-l10n-id",f(li,Tl)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=f(this,_i)._uiManager._signal;t.addEventListener("contextmenu",Zs,{signal:n}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:n});const r=l=>{l.preventDefault(),f(this,_i)._uiManager.editAltText(f(this,_i)),f(this,vr)&&f(this,_i)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:f(this,Ks,Df)}})};return t.addEventListener("click",r,{capture:!0,signal:n}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(x(this,ch,!0),r(l))},{signal:n}),await D(this,Ks,Ey).call(this),t}finish(){f(this,Fs)&&(f(this,Fs).focus({focusVisible:f(this,ch)}),x(this,ch,!1))}isEmpty(){return f(this,vr)?f(this,xn)===null:!f(this,xn)&&!f(this,mr)}hasData(){return f(this,vr)?f(this,xn)!==null||!!f(this,sa):this.isEmpty()}get guessedText(){return f(this,sa)}async setGuessedText(t){f(this,xn)===null&&(x(this,sa,t),x(this,Bo,await li._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),D(this,Ks,Ey).call(this))}toggleAltTextBadge(t=!1){var e;if(!f(this,vr)||f(this,xn)){(e=f(this,br))==null||e.remove(),x(this,br,null);return}if(!f(this,br)){const n=x(this,br,document.createElement("div"));n.className="noAltTextBadge",f(this,_i).div.append(n)}f(this,br).classList.toggle("hidden",!t)}serialize(t){let e=f(this,xn);return!t&&f(this,sa)===e&&(e=f(this,Bo)),{altText:e,decorative:f(this,mr),guessedText:f(this,sa),textWithDisclaimer:f(this,Bo)}}get data(){return{altText:f(this,xn),decorative:f(this,mr)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:r,cancel:l=!1}){n&&(x(this,sa,n),x(this,Bo,r)),!(f(this,xn)===t&&f(this,mr)===e)&&(l||(x(this,xn,t),x(this,mr,e)),D(this,Ks,Ey).call(this))}toggle(t=!1){f(this,Fs)&&(!t&&f(this,qi)&&(clearTimeout(f(this,qi)),x(this,qi,null)),f(this,Fs).disabled=!t)}shown(){f(this,_i)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:f(this,Ks,Df)}})}destroy(){var t,e;(t=f(this,Fs))==null||t.remove(),x(this,Fs,null),x(this,uh,null),x(this,yr,null),(e=f(this,br))==null||e.remove(),x(this,br,null)}};xn=new WeakMap,mr=new WeakMap,Fs=new WeakMap,uh=new WeakMap,yr=new WeakMap,qi=new WeakMap,ch=new WeakMap,br=new WeakMap,_i=new WeakMap,sa=new WeakMap,Bo=new WeakMap,vr=new WeakMap,Tl=new WeakMap,Ks=new WeakSet,Df=function(){return f(this,xn)&&"added"||f(this,xn)===null&&this.guessedText&&"review"||"missing"},Ey=async function(){var r,l,o;const t=f(this,Fs);if(!t)return;if(f(this,vr)){if(t.classList.toggle("done",!!f(this,xn)),t.setAttribute("data-l10n-id",f(li,Tl)[f(this,Ks,Df)]),(r=f(this,uh))==null||r.setAttribute("data-l10n-id",f(li,Tl)[`${f(this,Ks,Df)}-label`]),!f(this,xn)){(l=f(this,yr))==null||l.remove();return}}else{if(!f(this,xn)&&!f(this,mr)){t.classList.remove("done"),(o=f(this,yr))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=f(this,yr);if(!e){x(this,yr,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${f(this,_i).id}`;const c=100,h=f(this,_i)._uiManager._signal;h.addEventListener("abort",()=>{clearTimeout(f(this,qi)),x(this,qi,null)},{once:!0}),t.addEventListener("mouseenter",()=>{x(this,qi,setTimeout(()=>{x(this,qi,null),f(this,yr).classList.add("show"),f(this,_i)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:h}),t.addEventListener("mouseleave",()=>{var p;f(this,qi)&&(clearTimeout(f(this,qi)),x(this,qi,null)),(p=f(this,yr))==null||p.classList.remove("show")},{signal:h})}f(this,mr)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=f(this,xn)),e.parentNode||t.append(e);const n=f(this,_i).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},R(li,Tl,null),mt(li,"_l10n",null);let sb=li;var hh,Ho,yp,bp,vp,Ap,wp,ra,Uo,aa,qo,la,to,vk,Ak,wk;const $x=class $x{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:l=null,onPinchEnd:o=null,signal:c}){R(this,to);R(this,hh);R(this,Ho,!1);R(this,yp,null);R(this,bp);R(this,vp);R(this,Ap);R(this,wp);R(this,ra,null);R(this,Uo);R(this,aa,null);R(this,qo);R(this,la,null);x(this,hh,t),x(this,yp,n),x(this,bp,e),x(this,vp,r),x(this,Ap,l),x(this,wp,o),x(this,qo,new AbortController),x(this,Uo,AbortSignal.any([c,f(this,qo).signal])),t.addEventListener("touchstart",D(this,to,vk).bind(this),{passive:!1,signal:f(this,Uo)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Oa.pixelRatio}destroy(){var t,e;(t=f(this,qo))==null||t.abort(),x(this,qo,null),(e=f(this,ra))==null||e.abort(),x(this,ra,null)}};hh=new WeakMap,Ho=new WeakMap,yp=new WeakMap,bp=new WeakMap,vp=new WeakMap,Ap=new WeakMap,wp=new WeakMap,ra=new WeakMap,Uo=new WeakMap,aa=new WeakMap,qo=new WeakMap,la=new WeakMap,to=new WeakSet,vk=function(t){var r,l,o;if((r=f(this,bp))!=null&&r.call(this))return;if(t.touches.length===1){if(f(this,ra))return;const c=x(this,ra,new AbortController),h=AbortSignal.any([f(this,Uo),c.signal]),p=f(this,hh),g={capture:!0,signal:h,passive:!1},y=b=>{var v;b.pointerType==="touch"&&((v=f(this,ra))==null||v.abort(),x(this,ra,null))};p.addEventListener("pointerdown",b=>{b.pointerType==="touch"&&(an(b),y(b))},g),p.addEventListener("pointerup",y,g),p.addEventListener("pointercancel",y,g);return}if(!f(this,la)){x(this,la,new AbortController);const c=AbortSignal.any([f(this,Uo),f(this,la).signal]),h=f(this,hh),p={signal:c,capture:!1,passive:!1};h.addEventListener("touchmove",D(this,to,Ak).bind(this),p);const g=D(this,to,wk).bind(this);h.addEventListener("touchend",g,p),h.addEventListener("touchcancel",g,p),p.capture=!0,h.addEventListener("pointerdown",an,p),h.addEventListener("pointermove",an,p),h.addEventListener("pointercancel",an,p),h.addEventListener("pointerup",an,p),(l=f(this,vp))==null||l.call(this)}if(an(t),t.touches.length!==2||(o=f(this,yp))!=null&&o.call(this)){x(this,aa,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),x(this,aa,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},Ak=function(t){var I;if(!f(this,aa)||t.touches.length!==2)return;an(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:r,screenY:l}=e,{screenX:o,screenY:c}=n,h=f(this,aa),{touch0X:p,touch0Y:g,touch1X:y,touch1Y:b}=h,v=y-p,S=b-g,w=o-r,_=c-l,T=Math.hypot(w,_)||1,O=Math.hypot(v,S)||1;if(!f(this,Ho)&&Math.abs(O-T)<=$x.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=l,h.touch1X=o,h.touch1Y=c,!f(this,Ho)){x(this,Ho,!0);return}const N=[(r+o)/2,(l+c)/2];(I=f(this,Ap))==null||I.call(this,N,O,T)},wk=function(t){var e;t.touches.length>=2||(f(this,la)&&(f(this,la).abort(),x(this,la,null),(e=f(this,wp))==null||e.call(this)),f(this,aa)&&(an(t),x(this,aa,null),x(this,Ho,!1)))};let rb=$x;var Vo,Bs,Me,dh,Rl,Sp,Go,On,Yo,oa,Dl,xp,Xo,Vi,Ep,$o,ua,Ar,fh,ph,ws,Wo,_p,Ab,Nt,qw,Cp,Vw,_y,Sk,xk,Gw,Cy,Yw,Ek,_k,Ck,Xw,Tk,$w,Rk,Dk,kk,Ww,kf;const Vt=class Vt{constructor(t){R(this,Nt);R(this,Vo,null);R(this,Bs,null);R(this,Me,null);R(this,dh,!1);R(this,Rl,null);R(this,Sp,"");R(this,Go,!1);R(this,On,null);R(this,Yo,null);R(this,oa,null);R(this,Dl,null);R(this,xp,"");R(this,Xo,!1);R(this,Vi,null);R(this,Ep,!1);R(this,$o,!1);R(this,ua,!1);R(this,Ar,null);R(this,fh,0);R(this,ph,0);R(this,ws,null);R(this,Wo,null);mt(this,"_isCopy",!1);mt(this,"_editToolbar",null);mt(this,"_initialOptions",Object.create(null));mt(this,"_initialData",null);mt(this,"_isVisible",!0);mt(this,"_uiManager",null);mt(this,"_focusEventsAllowed",!0);R(this,_p,!1);R(this,Ab,Vt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:r,pageX:l,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[l,o];const[c,h]=this.parentDimensions;this.x=t.x/c,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Vt.prototype._resizeWithKeyboard,e=Bu.TRANSLATE_SMALL,n=Bu.TRANSLATE_BIG;return Jt(this,"_resizerKeyboardManager",new zg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Vt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Jt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new qF({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Vt._l10n??(Vt._l10n=t),Vt._l10nResizer||(Vt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Vt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Vt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Se("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return f(this,_p)}set _isDraggable(t){var e;x(this,_p,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=f(this,Ab)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):D(this,Nt,kf).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(f(this,Xo)?x(this,Xo,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,r){const[l,o]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(t+n)/l,this.y=(e+r)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,r]=this.parentDimensions;this.setAt(t*n,e*r,this.width*n,this.height*r),this._onTranslated()}translate(t,e){D(this,Nt,qw).call(this,this.parentDimensions,t,e)}translateInPage(t,e){f(this,Vi)||x(this,Vi,[this.x,this.y,this.width,this.height]),D(this,Nt,qw).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){f(this,Vi)||x(this,Vi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,l]}=this;if(this.x+=t/r,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[h,p]=this.getBaseTranslation();o+=h,c+=p;const{style:g}=n;g.left=`${(100*o).toFixed(2)}%`,g.top=`${(100*c).toFixed(2)}%`,this._onTranslating(o,c),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!f(this,Vi)&&(f(this,Vi)[0]!==this.x||f(this,Vi)[1]!==this.y)}get _hasBeenResized(){return!!f(this,Vi)&&(f(this,Vi)[2]!==this.width||f(this,Vi)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Vt,r=n/t,l=n/e;switch(this.rotation){case 90:return[-r,l];case 180:return[r,l];case 270:return[r,-l];default:return[-r,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,r]}=this;let{x:l,y:o,width:c,height:h}=this;if(c*=n,h*=r,l*=n,o*=r,this._mustFixPosition)switch(t){case 0:l=di(l,0,n-c),o=di(o,0,r-h);break;case 90:l=di(l,0,n-h),o=di(o,c,r);break;case 180:l=di(l,c,n),o=di(o,h,r);break;case 270:l=di(l,h,n),o=di(o,0,r-c);break}this.x=l/=n,this.y=o/=r;const[p,g]=this.getBaseTranslation();l+=p,o+=g,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return D(n=Vt,Cp,Vw).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return D(n=Vt,Cp,Vw).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,r]=this.parentDimensions,{style:l}=this.div;l.width=`${(100*t/n).toFixed(2)}%`,f(this,Go)||(l.height=`${(100*e/r).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,r=n.endsWith("%"),l=!f(this,Go)&&e.endsWith("%");if(r&&l)return;const[o,c]=this.parentDimensions;r||(t.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!f(this,Go)&&!l&&(t.height=`${(100*parseFloat(e)/c).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=f(this,Me))==null||t.finish()}async addEditToolbar(){return this._editToolbar||f(this,$o)?this._editToolbar:(this._editToolbar=new Lw(this),this.div.append(this._editToolbar.render()),f(this,Me)&&await this._editToolbar.addAltText(f(this,Me)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=f(this,Me))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){f(this,Me)||(sb.initialize(Vt._l10n),x(this,Me,new sb(this)),f(this,Vo)&&(f(this,Me).data=f(this,Vo),x(this,Vo,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=f(this,Me))==null?void 0:t.data}set altTextData(t){f(this,Me)&&(f(this,Me).data=t)}get guessedAltText(){var t;return(t=f(this,Me))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=f(this,Me))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=f(this,Me))==null?void 0:e.serialize(t)}hasAltText(){return!!f(this,Me)&&!f(this,Me).isEmpty()}hasAltTextData(){var t;return((t=f(this,Me))==null?void 0:t.hasData())??!1}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=f(this,dh)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),D(this,Nt,$w).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[r,l]=this.getInitialTranslation();return this.translate(r,l),Ox(this,t,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(f(this,Wo)||x(this,Wo,new rb({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:D(this,Nt,Ek).bind(this),onPinching:D(this,Nt,_k).bind(this),onPinchEnd:D(this,Nt,Ck).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=Hn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(x(this,Xo,!0),this._isDraggable){D(this,Nt,Tk).call(this,t);return}D(this,Nt,Xw).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){f(this,Ar)&&clearTimeout(f(this,Ar)),x(this,Ar,setTimeout(()=>{var t;x(this,Ar,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const r=this.parentScale,[l,o]=this.pageDimensions,[c,h]=this.pageTranslation,p=t/r,g=e/r,y=this.x*l,b=this.y*o,v=this.width*l,S=this.height*o;switch(n){case 0:return[y+p+c,o-b-g-S+h,y+p+v+c,o-b-g+h];case 90:return[y+g+c,o-b+p+h,y+g+S+c,o-b+p+v+h];case 180:return[y-p-v+c,o-b+g+h,y-p+c,o-b+g+S+h];case 270:return[y-g-S+c,o-b-p-v+h,y-g+c,o-b-p+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,r,l,o]=t,c=l-n,h=o-r;switch(this.rotation){case 0:return[n,e-o,c,h];case 90:return[n,e-r,h,c];case 180:return[l,e-r,c,h];case 270:return[l,e-o,h,c];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){x(this,$o,!0)}disableEditMode(){x(this,$o,!1)}isInEditMode(){return f(this,$o)}shouldGetKeyboardEvents(){return f(this,ua)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:l,innerWidth:o}=window;return e<o&&r>0&&t<l&&n>0}rebuild(){D(this,Nt,$w).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Se("An editor must be serializable")}static async deserialize(t,e,n){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});r.rotation=t.rotation,x(r,Vo,t.accessibilityData),r._isCopy=t.isCopy||!1;const[l,o]=r.pageDimensions,[c,h,p,g]=r.getRectInCurrentCoords(t.rect,o);return r.x=c/l,r.y=h/o,r.width=p/l,r.height=g/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=f(this,Dl))==null||t.abort(),x(this,Dl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),f(this,Ar)&&(clearTimeout(f(this,Ar)),x(this,Ar,null)),D(this,Nt,kf).call(this),this.removeEditToolbar(),f(this,ws)){for(const n of f(this,ws).values())clearTimeout(n);x(this,ws,null)}this.parent=null,(e=f(this,Wo))==null||e.destroy(),x(this,Wo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(D(this,Nt,Sk).call(this),f(this,On).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),x(this,oa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=f(this,On).children;if(!f(this,Bs)){x(this,Bs,Array.from(e));const o=D(this,Nt,Rk).bind(this),c=D(this,Nt,Dk).bind(this),h=this._uiManager._signal;for(const p of f(this,Bs)){const g=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",o,{signal:h}),p.addEventListener("blur",c,{signal:h}),p.addEventListener("focus",D(this,Nt,kk).bind(this,g),{signal:h}),p.setAttribute("data-l10n-id",Vt._l10nResizer[g])}}const n=f(this,Bs)[0];let r=0;for(const o of e){if(o===n)break;r++}const l=(360-this.rotation+this.parentRotation)%360/90*(f(this,Bs).length/4);if(l!==r){if(l<r)for(let c=0;c<r-l;c++)f(this,On).append(f(this,On).firstChild);else if(l>r)for(let c=0;c<l-r;c++)f(this,On).firstChild.before(f(this,On).lastChild);let o=0;for(const c of e){const p=f(this,Bs)[o++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Vt._l10nResizer[p])}}D(this,Nt,Ww).call(this,0),x(this,ua,!0),f(this,On).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){f(this,ua)&&D(this,Nt,Yw).call(this,f(this,xp),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){D(this,Nt,kf).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,l;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((l=this._editToolbar)==null||l.show())});return}(e=this._editToolbar)==null||e.show(),(n=f(this,Me))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,r,l;(t=f(this,On))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(l=f(this,Me))==null||l.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return f(this,Ep)}set isEditing(t){x(this,Ep,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){x(this,Go,!0);const n=t/e,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){f(this,ws)||x(this,ws,new Map);const{action:n}=t;let r=f(this,ws).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),f(this,ws).delete(n),f(this,ws).size===0&&x(this,ws,null)},Vt._telemetryTimeout),f(this,ws).set(n,r);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),x(this,dh,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,dh,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Vo=new WeakMap,Bs=new WeakMap,Me=new WeakMap,dh=new WeakMap,Rl=new WeakMap,Sp=new WeakMap,Go=new WeakMap,On=new WeakMap,Yo=new WeakMap,oa=new WeakMap,Dl=new WeakMap,xp=new WeakMap,Xo=new WeakMap,Vi=new WeakMap,Ep=new WeakMap,$o=new WeakMap,ua=new WeakMap,Ar=new WeakMap,fh=new WeakMap,ph=new WeakMap,ws=new WeakMap,Wo=new WeakMap,_p=new WeakMap,Ab=new WeakMap,Nt=new WeakSet,qw=function([t,e],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Cp=new WeakSet,Vw=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},_y=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},Sk=function(){if(f(this,On))return;x(this,On,document.createElement("div")),f(this,On).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const r=document.createElement("div");f(this,On).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",D(this,Nt,xk).bind(this,n),{signal:e}),r.addEventListener("contextmenu",Zs,{signal:e}),r.tabIndex=-1}this.div.prepend(f(this,On))},xk=function(t,e){var g;e.preventDefault();const{isMac:n}=Hn.platform;if(e.button!==0||e.ctrlKey&&n)return;(g=f(this,Me))==null||g.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,x(this,Yo,[e.screenX,e.screenY]);const l=new AbortController,o=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",D(this,Nt,Yw).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",an,{passive:!1,signal:o}),window.addEventListener("contextmenu",Zs,{signal:o}),x(this,oa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const c=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var y;l.abort(),this.parent.togglePointerEvents(!0),(y=f(this,Me))==null||y.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=c,this.div.style.cursor=h,D(this,Nt,Cy).call(this)};window.addEventListener("pointerup",p,{signal:o}),window.addEventListener("blur",p,{signal:o})},Gw=function(t,e,n,r){this.width=n,this.height=r,this.x=t,this.y=e;const[l,o]=this.parentDimensions;this.setDims(l*n,o*r),this.fixAndSetPosition(),this._onResized()},Cy=function(){if(!f(this,oa))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:r}=f(this,oa);x(this,oa,null);const l=this.x,o=this.y,c=this.width,h=this.height;l===t&&o===e&&c===n&&h===r||this.addCommands({cmd:D(this,Nt,Gw).bind(this,l,o,c,h),undo:D(this,Nt,Gw).bind(this,t,e,n,r),mustExec:!0})},Yw=function(t,e){const[n,r]=this.parentDimensions,l=this.x,o=this.y,c=this.width,h=this.height,p=Vt.MIN_SIZE/n,g=Vt.MIN_SIZE/r,y=D(this,Nt,_y).call(this,this.rotation),b=(F,G)=>[y[0]*F+y[2]*G,y[1]*F+y[3]*G],v=D(this,Nt,_y).call(this,360-this.rotation),S=(F,G)=>[v[0]*F+v[2]*G,v[1]*F+v[3]*G];let w,_,T=!1,O=!1;switch(t){case"topLeft":T=!0,w=(F,G)=>[0,0],_=(F,G)=>[F,G];break;case"topMiddle":w=(F,G)=>[F/2,0],_=(F,G)=>[F/2,G];break;case"topRight":T=!0,w=(F,G)=>[F,0],_=(F,G)=>[0,G];break;case"middleRight":O=!0,w=(F,G)=>[F,G/2],_=(F,G)=>[0,G/2];break;case"bottomRight":T=!0,w=(F,G)=>[F,G],_=(F,G)=>[0,0];break;case"bottomMiddle":w=(F,G)=>[F/2,G],_=(F,G)=>[F/2,0];break;case"bottomLeft":T=!0,w=(F,G)=>[0,G],_=(F,G)=>[F,0];break;case"middleLeft":O=!0,w=(F,G)=>[0,G/2],_=(F,G)=>[F,G/2];break}const N=w(c,h),I=_(c,h);let z=b(...I);const L=Vt._round(l+z[0]),B=Vt._round(o+z[1]);let X=1,Q=1,rt,$;if(e.fromKeyboard)({deltaX:rt,deltaY:$}=e);else{const{screenX:F,screenY:G}=e,[bt,Et]=f(this,Yo);[rt,$]=this.screenToPageTranslation(F-bt,G-Et),f(this,Yo)[0]=F,f(this,Yo)[1]=G}if([rt,$]=S(rt/n,$/r),T){const F=Math.hypot(c,h);X=Q=Math.max(Math.min(Math.hypot(I[0]-N[0]-rt,I[1]-N[1]-$)/F,1/c,1/h),p/c,g/h)}else O?X=di(Math.abs(I[0]-N[0]-rt),p,1)/c:Q=di(Math.abs(I[1]-N[1]-$),g,1)/h;const J=Vt._round(c*X),ht=Vt._round(h*Q);z=b(..._(J,ht));const tt=L-z[0],dt=B-z[1];f(this,Vi)||x(this,Vi,[this.x,this.y,this.width,this.height]),this.width=J,this.height=ht,this.x=tt,this.y=dt,this.setDims(n*J,r*ht),this.fixAndSetPosition(),this._onResizing()},Ek=function(){var t;x(this,oa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=f(this,Me))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},_k=function(t,e,n){let l=.7*(n/e)+1-.7;if(l===1)return;const o=D(this,Nt,_y).call(this,this.rotation),c=(L,B)=>[o[0]*L+o[2]*B,o[1]*L+o[3]*B],[h,p]=this.parentDimensions,g=this.x,y=this.y,b=this.width,v=this.height,S=Vt.MIN_SIZE/h,w=Vt.MIN_SIZE/p;l=Math.max(Math.min(l,1/b,1/v),S/b,w/v);const _=Vt._round(b*l),T=Vt._round(v*l);if(_===b&&T===v)return;f(this,Vi)||x(this,Vi,[g,y,b,v]);const O=c(b/2,v/2),N=Vt._round(g+O[0]),I=Vt._round(y+O[1]),z=c(_/2,T/2);this.x=N-z[0],this.y=I-z[1],this.width=_,this.height=T,this.setDims(h*_,p*T),this.fixAndSetPosition(),this._onResizing()},Ck=function(){var t;(t=f(this,Me))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),D(this,Nt,Cy).call(this)},Xw=function(t){const{isMac:e}=Hn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},Tk=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,l=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:l},c=p=>{r.abort(),x(this,Rl,null),x(this,Xo,!1),this._uiManager.endDragSession()||D(this,Nt,Xw).call(this,p),n&&this._onStopDragging()};e&&(x(this,fh,t.clientX),x(this,ph,t.clientY),x(this,Rl,t.pointerId),x(this,Sp,t.pointerType),window.addEventListener("pointermove",p=>{n||(n=!0,this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=p;if(b!==f(this,Rl)){an(p);return}const[v,S]=this.screenToPageTranslation(g-f(this,fh),y-f(this,ph));x(this,fh,g),x(this,ph,y),this._uiManager.dragSelectedEditors(v,S)},o),window.addEventListener("touchmove",an,o),window.addEventListener("pointerdown",p=>{p.pointerType===f(this,Sp)&&(f(this,Wo)||p.isPrimary)&&c(p),an(p)},o));const h=p=>{if(!f(this,Rl)||f(this,Rl)===p.pointerId){c(p);return}an(p)};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})},$w=function(){if(f(this,Dl)||!this.div)return;x(this,Dl,new AbortController);const t=this._uiManager.combinedSignal(f(this,Dl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},Rk=function(t){Vt._resizerKeyboardManager.exec(this,t)},Dk=function(t){var e;f(this,ua)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==f(this,On)&&D(this,Nt,kf).call(this)},kk=function(t){x(this,xp,f(this,ua)?t:"")},Ww=function(t){if(f(this,Bs))for(const e of f(this,Bs))e.tabIndex=t},kf=function(){x(this,ua,!1),D(this,Nt,Ww).call(this,-1),D(this,Nt,Cy).call(this)},R(Vt,Cp),mt(Vt,"_l10n",null),mt(Vt,"_l10nResizer",null),mt(Vt,"_borderLineWidth",-1),mt(Vt,"_colorManager",new zw),mt(Vt,"_zIndex",1),mt(Vt,"_telemetryTimeout",1e3);let ke=Vt;class qF extends ke{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const KT=3285377520,ys=4294901760,or=65535;class Mk{constructor(t){this.h1=t?t&4294967295:KT,this.h2=t?t&4294967295:KT}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let w=0,_=t.length;w<_;w++){const T=t.charCodeAt(w);T<=255?e[n++]=T:(e[n++]=T>>>8,e[n++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,l=n-r*4,o=new Uint32Array(e.buffer,0,r);let c=0,h=0,p=this.h1,g=this.h2;const y=3432918353,b=461845907,v=y&or,S=b&or;for(let w=0;w<r;w++)w&1?(c=o[w],c=c*y&ys|c*v&or,c=c<<15|c>>>17,c=c*b&ys|c*S&or,p^=c,p=p<<13|p>>>19,p=p*5+3864292196):(h=o[w],h=h*y&ys|h*v&or,h=h<<15|h>>>17,h=h*b&ys|h*S&or,g^=h,g=g<<13|g>>>19,g=g*5+3864292196);switch(c=0,l){case 3:c^=e[r*4+2]<<16;case 2:c^=e[r*4+1]<<8;case 1:c^=e[r*4],c=c*y&ys|c*v&or,c=c<<15|c>>>17,c=c*b&ys|c*S&or,r&1?p^=c:g^=c}this.h1=p,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ys|t*36045&or,e=e*4283543511&ys|((e<<16|t>>>16)*2950163797&ys)>>>16,t^=e>>>1,t=t*444984403&ys|t*60499&or,e=e*3301882366&ys|((e<<16|t>>>16)*3120437893&ys)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Kw=Object.freeze({map:null,hash:"",transfer:void 0});var Ko,Qo,Ln,wb,Nk;class Lx{constructor(){R(this,wb);R(this,Ko,!1);R(this,Qo,null);R(this,Ln,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=f(this,Ln).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return f(this,Ln).get(t)}remove(t){if(f(this,Ln).delete(t),f(this,Ln).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of f(this,Ln).values())if(e instanceof ke)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=f(this,Ln).get(t);let r=!1;if(n!==void 0)for(const[l,o]of Object.entries(e))n[l]!==o&&(r=!0,n[l]=o);else r=!0,f(this,Ln).set(t,e);r&&D(this,wb,Nk).call(this),e instanceof ke&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return f(this,Ln).has(t)}get size(){return f(this,Ln).size}resetModified(){f(this,Ko)&&(x(this,Ko,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ok(this)}get serializable(){if(f(this,Ln).size===0)return Kw;const t=new Map,e=new Mk,n=[],r=Object.create(null);let l=!1;for(const[o,c]of f(this,Ln)){const h=c instanceof ke?c.serialize(!1,r):c;h&&(t.set(o,h),e.update(`${o}:${JSON.stringify(h)}`),l||(l=!!h.bitmap))}if(l)for(const o of t.values())o.bitmap&&n.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Kw}get editorStats(){let t=null;const e=new Map;for(const n of f(this,Ln).values()){if(!(n instanceof ke))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:l}=r;e.has(l)||e.set(l,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const o=t[l]||(t[l]=new Map);for(const[c,h]of Object.entries(r)){if(c==="type")continue;let p=o.get(c);p||(p=new Map,o.set(c,p));const g=p.get(h)??0;p.set(h,g+1)}}for(const[n,r]of e)t[n]=r.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){x(this,Qo,null)}get modifiedIds(){if(f(this,Qo))return f(this,Qo);const t=[];for(const e of f(this,Ln).values())!(e instanceof ke)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return x(this,Qo,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return f(this,Ln).entries()}}Ko=new WeakMap,Qo=new WeakMap,Ln=new WeakMap,wb=new WeakSet,Nk=function(){f(this,Ko)||(x(this,Ko,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Tp;class Ok extends Lx{constructor(e){super();R(this,Tp);const{map:n,hash:r,transfer:l}=e.serializable,o=structuredClone(n,l?{transfer:l}:null);x(this,Tp,{map:o,hash:r,transfer:l})}get print(){Se("Should not call PrintAnnotationStorage.print")}get serializable(){return f(this,Tp)}get modifiedIds(){return Jt(this,"modifiedIds",{ids:new Set,hash:""})}}Tp=new WeakMap;var gh;class VF{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){R(this,gh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),f(this,gh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||f(this,gh).has(t.loadedName))){if(ln(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:l,style:o}=t,c=new FontFace(r,l,o);this.addNativeFontFace(c);try{await c.load(),f(this,gh).add(r),n==null||n(t)}catch{It(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}Se("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw It(`Failed to load font '${n.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Jt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Jt(this,"isSyncFontLoadingSupported",hi||Hn.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ln(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const l=n.shift();setTimeout(l.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:e,callback:t};return n.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Jt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(I,z){return I.charCodeAt(z)<<24|I.charCodeAt(z+1)<<16|I.charCodeAt(z+2)<<8|I.charCodeAt(z+3)&255}function r(I,z,L,B){const X=I.substring(0,z),Q=I.substring(z+L);return X+B+Q}let l,o;const c=this._document.createElement("canvas");c.width=1,c.height=1;const h=c.getContext("2d");let p=0;function g(I,z){if(++p>30){It("Load test font never loaded."),z();return}if(h.font="30px "+I,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(g.bind(null,I,z))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const S=16,w=1482184792;let _=n(b,S);for(l=0,o=y.length-3;l<o;l+=4)_=_-w+n(y,l)|0;l<y.length&&(_=_-w+n(y+"XXX",l)|0),b=r(b,S,4,DF(_));const T=`url(data:font/opentype;base64,${btoa(b)});`,O=`@font-face {font-family:"${y}";src:${T}}`;this.insertRule(O);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const I of[t.loadedName,y]){const z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=I,N.append(z)}this._document.body.append(N),g(y,()=>{N.remove(),e.complete()})}}gh=new WeakMap;class GF{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${tk(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let r;try{r=t.get(n)}catch(o){It(`getPathGenerator - ignoring character: "${o}".`)}const l=new Path2D(r||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=l}}const uy={DATA:1,ERROR:2},nn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function QT(){}function xi(i){if(i instanceof Ql||i instanceof Mw||i instanceof XT||i instanceof ib||i instanceof YA)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||Se('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Ql(i.message);case"InvalidPDFException":return new Mw(i.message);case"PasswordException":return new XT(i.message,i.code);case"ResponseException":return new ib(i.message,i.status,i.missing);case"UnknownErrorException":return new YA(i.message,i.details)}return new YA(i.message,i.toString())}var mh,Rs,Lk,Pk,zk,Ty;class Mf{constructor(t,e,n){R(this,Rs);R(this,mh,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",D(this,Rs,Lk).bind(this),{signal:f(this,mh).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[r]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(o){l.reject(o)}return l.promise}sendWithStream(t,e,n,r){const l=this.streamId++,o=this.sourceName,c=this.targetName,h=this.comObj;return new ReadableStream({start:p=>{const g=Promise.withResolvers();return this.streamControllers[l]={controller:p,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:o,targetName:c,action:t,streamId:l,data:e,desiredSize:p.desiredSize},r),g.promise},pull:p=>{const g=Promise.withResolvers();return this.streamControllers[l].pullCall=g,h.postMessage({sourceName:o,targetName:c,stream:nn.PULL,streamId:l,desiredSize:p.desiredSize}),g.promise},cancel:p=>{ln(p instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[l].cancelCall=g,this.streamControllers[l].isClosed=!0,h.postMessage({sourceName:o,targetName:c,stream:nn.CANCEL,streamId:l,reason:xi(p)}),g.promise}},n)}destroy(){var t;(t=f(this,mh))==null||t.abort(),x(this,mh,null)}}mh=new WeakMap,Rs=new WeakSet,Lk=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){D(this,Rs,zk).call(this,t);return}if(t.callback){const n=t.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===uy.DATA)r.resolve(t.data);else if(t.callback===uy.ERROR)r.reject(xi(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,r=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(o){l.postMessage({sourceName:n,targetName:r,callback:uy.DATA,callbackId:t.callbackId,data:o})},function(o){l.postMessage({sourceName:n,targetName:r,callback:uy.ERROR,callbackId:t.callbackId,reason:xi(o)})});return}if(t.streamId){D(this,Rs,Pk).call(this,t);return}e(t.data)},Pk=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,l=this.comObj,o=this,c=this.actionHandler[t.action],h={enqueue(p,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:n,targetName:r,stream:nn.ENQUEUE,streamId:e,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:r,stream:nn.CLOSE,streamId:e}),delete o.streamSinks[e])},error(p){ln(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:n,targetName:r,stream:nn.ERROR,streamId:e,reason:xi(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(c,t.data,h).then(function(){l.postMessage({sourceName:n,targetName:r,stream:nn.START_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:n,targetName:r,stream:nn.START_COMPLETE,streamId:e,reason:xi(p)})})},zk=function(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,l=this.comObj,o=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case nn.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(xi(t.reason));break;case nn.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(xi(t.reason));break;case nn.PULL:if(!c){l.postMessage({sourceName:n,targetName:r,stream:nn.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||QT).then(function(){l.postMessage({sourceName:n,targetName:r,stream:nn.PULL_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:n,targetName:r,stream:nn.PULL_COMPLETE,streamId:e,reason:xi(p)})});break;case nn.ENQUEUE:if(ln(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case nn.CLOSE:if(ln(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),D(this,Rs,Ty).call(this,o,e);break;case nn.ERROR:ln(o,"error should have stream controller"),o.controller.error(xi(t.reason)),D(this,Rs,Ty).call(this,o,e);break;case nn.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(xi(t.reason)),D(this,Rs,Ty).call(this,o,e);break;case nn.CANCEL:if(!c)break;const h=xi(t.reason);Promise.try(c.onCancel||QT,h).then(function(){l.postMessage({sourceName:n,targetName:r,stream:nn.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:n,targetName:r,stream:nn.CANCEL_COMPLETE,streamId:e,reason:xi(p)})}),c.sinkCapability.reject(h),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Ty=async function(t,e){var n,r,l;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(r=t.pullCall)==null?void 0:r.promise,(l=t.cancelCall)==null?void 0:l.promise]),delete this.streamControllers[e]};var Rp;class Ik{constructor({enableHWA:t=!1}){R(this,Rp,!1);x(this,Rp,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!f(this,Rp)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Se("Abstract method `_createCanvas` called.")}}Rp=new WeakMap;class YF extends Ik{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class jk{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Se("Abstract method `_fetch` called.")}}class ZT extends jk{async _fetch(t){const e=await Lg(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Og(e)}}class Fk{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,r,l){return"none"}destroy(t=!1){}}var Zo,yh,ca,ha,Kn,Jo,tu,At,$n,Nf,zc,Ry,Ic,Bk,Qw,jc,Of,Lf,Zw,Pf;class XF extends Fk{constructor({docId:e,ownerDocument:n=globalThis.document}){super();R(this,At);R(this,Zo);R(this,yh);R(this,ca);R(this,ha);R(this,Kn);R(this,Jo);R(this,tu,0);x(this,ha,e),x(this,Kn,n)}addFilter(e){if(!e)return"none";let n=f(this,At,$n).get(e);if(n)return n;const[r,l,o]=D(this,At,Ry).call(this,e),c=e.length===1?r:`${r}${l}${o}`;if(n=f(this,At,$n).get(c),n)return f(this,At,$n).set(e,n),n;const h=`g_${f(this,ha)}_transfer_map_${ri(this,tu)._++}`,p=D(this,At,Ic).call(this,h);f(this,At,$n).set(e,p),f(this,At,$n).set(c,p);const g=D(this,At,jc).call(this,h);return D(this,At,Lf).call(this,r,l,o,g),p}addHCMFilter(e,n){var S;const r=`${e}-${n}`,l="base";let o=f(this,At,Nf).get(l);if((o==null?void 0:o.key)===r||(o?((S=o.filter)==null||S.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},f(this,At,Nf).set(l,o)),!e||!n))return o.url;const c=D(this,At,Pf).call(this,e);e=_t.makeHexColor(...c);const h=D(this,At,Pf).call(this,n);if(n=_t.makeHexColor(...h),f(this,At,zc).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return o.url;const p=new Array(256);for(let w=0;w<=255;w++){const _=w/255;p[w]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const g=p.join(","),y=`g_${f(this,ha)}_hcm_filter`,b=o.filter=D(this,At,jc).call(this,y);D(this,At,Lf).call(this,g,g,g,b),D(this,At,Qw).call(this,b);const v=(w,_)=>{const T=c[w]/255,O=h[w]/255,N=new Array(_+1);for(let I=0;I<=_;I++)N[I]=T+I/_*(O-T);return N.join(",")};return D(this,At,Lf).call(this,v(0,5),v(1,5),v(2,5),b),o.url=D(this,At,Ic).call(this,y),o.url}addAlphaFilter(e){let n=f(this,At,$n).get(e);if(n)return n;const[r]=D(this,At,Ry).call(this,[e]),l=`alpha_${r}`;if(n=f(this,At,$n).get(l),n)return f(this,At,$n).set(e,n),n;const o=`g_${f(this,ha)}_alpha_map_${ri(this,tu)._++}`,c=D(this,At,Ic).call(this,o);f(this,At,$n).set(e,c),f(this,At,$n).set(l,c);const h=D(this,At,jc).call(this,o);return D(this,At,Zw).call(this,r,h),c}addLuminosityFilter(e){let n=f(this,At,$n).get(e||"luminosity");if(n)return n;let r,l;if(e?([r]=D(this,At,Ry).call(this,[e]),l=`luminosity_${r}`):l="luminosity",n=f(this,At,$n).get(l),n)return f(this,At,$n).set(e,n),n;const o=`g_${f(this,ha)}_luminosity_map_${ri(this,tu)._++}`,c=D(this,At,Ic).call(this,o);f(this,At,$n).set(e,c),f(this,At,$n).set(l,c);const h=D(this,At,jc).call(this,o);return D(this,At,Bk).call(this,h),e&&D(this,At,Zw).call(this,r,h),c}addHighlightHCMFilter(e,n,r,l,o){var O;const c=`${n}-${r}-${l}-${o}`;let h=f(this,At,Nf).get(e);if((h==null?void 0:h.key)===c||(h?((O=h.filter)==null||O.remove(),h.key=c,h.url="none",h.filter=null):(h={key:c,url:"none",filter:null},f(this,At,Nf).set(e,h)),!n||!r))return h.url;const[p,g]=[n,r].map(D(this,At,Pf).bind(this));let y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),b=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),[v,S]=[l,o].map(D(this,At,Pf).bind(this));b<y&&([y,b,v,S]=[b,y,S,v]),f(this,At,zc).style.color="";const w=(N,I,z)=>{const L=new Array(256),B=(b-y)/z,X=N/255,Q=(I-N)/(255*z);let rt=0;for(let $=0;$<=z;$++){const J=Math.round(y+$*B),ht=X+$*Q;for(let tt=rt;tt<=J;tt++)L[tt]=ht;rt=J+1}for(let $=rt;$<256;$++)L[$]=L[rt-1];return L.join(",")},_=`g_${f(this,ha)}_hcm_${e}_filter`,T=h.filter=D(this,At,jc).call(this,_);return D(this,At,Qw).call(this,T),D(this,At,Lf).call(this,w(v[0],S[0],5),w(v[1],S[1],5),w(v[2],S[2],5),T),h.url=D(this,At,Ic).call(this,_),h.url}destroy(e=!1){var n,r,l,o;e&&((n=f(this,Jo))!=null&&n.size)||((r=f(this,ca))==null||r.parentNode.parentNode.remove(),x(this,ca,null),(l=f(this,yh))==null||l.clear(),x(this,yh,null),(o=f(this,Jo))==null||o.clear(),x(this,Jo,null),x(this,tu,0))}}Zo=new WeakMap,yh=new WeakMap,ca=new WeakMap,ha=new WeakMap,Kn=new WeakMap,Jo=new WeakMap,tu=new WeakMap,At=new WeakSet,$n=function(){return f(this,yh)||x(this,yh,new Map)},Nf=function(){return f(this,Jo)||x(this,Jo,new Map)},zc=function(){if(!f(this,ca)){const e=f(this,Kn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=f(this,Kn).createElementNS(Kr,"svg");r.setAttribute("width",0),r.setAttribute("height",0),x(this,ca,f(this,Kn).createElementNS(Kr,"defs")),e.append(r),r.append(f(this,ca)),f(this,Kn).body.append(e)}return f(this,ca)},Ry=function(e){if(e.length===1){const p=e[0],g=new Array(256);for(let b=0;b<256;b++)g[b]=p[b]/255;const y=g.join(",");return[y,y,y]}const[n,r,l]=e,o=new Array(256),c=new Array(256),h=new Array(256);for(let p=0;p<256;p++)o[p]=n[p]/255,c[p]=r[p]/255,h[p]=l[p]/255;return[o.join(","),c.join(","),h.join(",")]},Ic=function(e){if(f(this,Zo)===void 0){x(this,Zo,"");const n=f(this,Kn).URL;n!==f(this,Kn).baseURI&&(Wb(n)?It('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,Zo,QD(n,"")))}return`url(${f(this,Zo)}#${e})`},Bk=function(e){const n=f(this,Kn).createElementNS(Kr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},Qw=function(e){const n=f(this,Kn).createElementNS(Kr,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},jc=function(e){const n=f(this,Kn).createElementNS(Kr,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),f(this,At,zc).append(n),n},Of=function(e,n,r){const l=f(this,Kn).createElementNS(Kr,n);l.setAttribute("type","discrete"),l.setAttribute("tableValues",r),e.append(l)},Lf=function(e,n,r,l){const o=f(this,Kn).createElementNS(Kr,"feComponentTransfer");l.append(o),D(this,At,Of).call(this,o,"feFuncR",e),D(this,At,Of).call(this,o,"feFuncG",n),D(this,At,Of).call(this,o,"feFuncB",r)},Zw=function(e,n){const r=f(this,Kn).createElementNS(Kr,"feComponentTransfer");n.append(r),D(this,At,Of).call(this,r,"feFuncA",e)},Pf=function(e){return f(this,At,zc).style.color=e,Nx(getComputedStyle(f(this,At,zc)).getPropertyValue("color"))};class Hk{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Se("Abstract method `_fetch` called.")}}class JT extends Hk{async _fetch(t){const e=await Lg(t,"arraybuffer");return new Uint8Array(e)}}class Uk{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Se("Abstract method `_fetch` called.")}}class tR extends Uk{async _fetch(t){const e=await Lg(t,"arraybuffer");return new Uint8Array(e)}}hi&&It("Please use the `legacy` build in Node.js environments.");async function Px(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class $F extends Fk{}class WF extends Ik{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class KF extends jk{async _fetch(t){return Px(t)}}class QF extends Hk{async _fetch(t){return Px(t)}}class ZF extends Uk{async _fetch(t){return Px(t)}}const In={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Jw(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,n),i.clip(r)}class zx{isModifyingCurrentTransform(){return!1}getPattern(){Se("Abstract method `getPattern` called.")}}class JF extends zx{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,r){let l;if(r===In.STROKE||r===In.FILL){const o=e.current.getClippedPathBoundingBox(r,Fe(t))||[0,0,0,0],c=Math.ceil(o[2]-o[0])||1,h=Math.ceil(o[3]-o[1])||1,p=e.cachedCanvases.getCanvas("pattern",c,h),g=p.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-o[0],-o[1]),n=_t.transform(n,[1,0,0,1,o[0],o[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),Jw(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),l=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(n);l.setTransform(y)}else Jw(t,this._bbox),l=this._createGradient(t);return l}}function WA(i,t,e,n,r,l,o,c){const h=t.coords,p=t.colors,g=i.data,y=i.width*4;let b;h[e+1]>h[n+1]&&(b=e,e=n,n=b,b=l,l=o,o=b),h[n+1]>h[r+1]&&(b=n,n=r,r=b,b=o,o=c,c=b),h[e+1]>h[n+1]&&(b=e,e=n,n=b,b=l,l=o,o=b);const v=(h[e]+t.offsetX)*t.scaleX,S=(h[e+1]+t.offsetY)*t.scaleY,w=(h[n]+t.offsetX)*t.scaleX,_=(h[n+1]+t.offsetY)*t.scaleY,T=(h[r]+t.offsetX)*t.scaleX,O=(h[r+1]+t.offsetY)*t.scaleY;if(S>=O)return;const N=p[l],I=p[l+1],z=p[l+2],L=p[o],B=p[o+1],X=p[o+2],Q=p[c],rt=p[c+1],$=p[c+2],J=Math.round(S),ht=Math.round(O);let tt,dt,F,G,bt,Et,C,K;for(let ut=J;ut<=ht;ut++){if(ut<_){const ct=ut<S?0:(S-ut)/(S-_);tt=v-(v-w)*ct,dt=N-(N-L)*ct,F=I-(I-B)*ct,G=z-(z-X)*ct}else{let ct;ut>O?ct=1:_===O?ct=0:ct=(_-ut)/(_-O),tt=w-(w-T)*ct,dt=L-(L-Q)*ct,F=B-(B-rt)*ct,G=X-(X-$)*ct}let k;ut<S?k=0:ut>O?k=1:k=(S-ut)/(S-O),bt=v-(v-T)*k,Et=N-(N-Q)*k,C=I-(I-rt)*k,K=z-(z-$)*k;const at=Math.round(Math.min(tt,bt)),pt=Math.round(Math.max(tt,bt));let st=y*ut+at*4;for(let ct=at;ct<=pt;ct++)k=(tt-ct)/(tt-bt),k<0?k=0:k>1&&(k=1),g[st++]=dt-(dt-Et)*k|0,g[st++]=F-(F-C)*k|0,g[st++]=G-(G-K)*k|0,g[st++]=255}}function tB(i,t,e){const n=t.coords,r=t.colors;let l,o;switch(t.type){case"lattice":const c=t.verticesPerRow,h=Math.floor(n.length/c)-1,p=c-1;for(l=0;l<h;l++){let g=l*c;for(let y=0;y<p;y++,g++)WA(i,e,n[g],n[g+1],n[g+c],r[g],r[g+1],r[g+c]),WA(i,e,n[g+c+1],n[g+1],n[g+c],r[g+c+1],r[g+1],r[g+c])}break;case"triangles":for(l=0,o=n.length;l<o;l+=3)WA(i,e,n[l],n[l+1],n[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class eB extends zx{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const c=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-c,g=Math.ceil(this._bounds[3])-h,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),v=p/y,S=g/b,w={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-h,scaleX:1/v,scaleY:1/S},_=y+2*2,T=b+2*2,O=n.getCanvas("mesh",_,T),N=O.context,I=N.createImageData(y,b);if(e){const L=I.data;for(let B=0,X=L.length;B<X;B+=4)L[B]=e[0],L[B+1]=e[1],L[B+2]=e[2],L[B+3]=255}for(const L of this._figures)tB(I,L,w);return N.putImageData(I,2,2),{canvas:O.canvas,offsetX:c-2*v,offsetY:h-2*S,scaleX:v,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,r){Jw(t,this._bbox);const l=new Float32Array(2);if(r===In.SHADING)_t.singularValueDecompose2dScale(Fe(t),l);else if(this.matrix){_t.singularValueDecompose2dScale(this.matrix,l);const[c,h]=l;_t.singularValueDecompose2dScale(e.baseTransform,l),l[0]*=c,l[1]*=h}else _t.singularValueDecompose2dScale(e.baseTransform,l);const o=this._createMeshCanvas(l,r===In.SHADING?null:this._background,e.cachedCanvases);return r!==In.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class nB extends zx{getPattern(){return"hotpink"}}function iB(i){switch(i[0]){case"RadialAxial":return new JF(i);case"Mesh":return new eB(i);case"Dummy":return new nB}throw new Error(`Unknown IR type: ${i[0]}`)}const eR={COLORED:1,UNCOLORED:2},Sb=class Sb{constructor(t,e,n,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:r,tilingType:l,color:o,canvasGraphicsFactory:c}=this;let{xstep:h,ystep:p}=this;h=Math.abs(h),p=Math.abs(p),$b("TilingType: "+l);const g=e[0],y=e[1],b=e[2],v=e[3],S=b-g,w=v-y,_=new Float32Array(2);_t.singularValueDecompose2dScale(this.matrix,_);const[T,O]=_;_t.singularValueDecompose2dScale(this.baseTransform,_);const N=T*_[0],I=O*_[1];let z=S,L=w,B=!1,X=!1;const Q=Math.ceil(h*N),rt=Math.ceil(p*I),$=Math.ceil(S*N),J=Math.ceil(w*I);Q>=$?z=h:B=!0,rt>=J?L=p:X=!0;const ht=this.getSizeAndScale(z,this.ctx.canvas.width,N),tt=this.getSizeAndScale(L,this.ctx.canvas.height,I),dt=t.cachedCanvases.getCanvas("pattern",ht.size,tt.size),F=dt.context,G=c.createCanvasGraphics(F);if(G.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(G,r,o),F.translate(-ht.scale*g,-tt.scale*y),G.transform(ht.scale,0,0,tt.scale,0,0),F.save(),this.clipBbox(G,g,y,b,v),G.baseTransform=Fe(G.ctx),G.executeOperatorList(n),G.endDrawing(),F.restore(),B||X){const bt=dt.canvas;B&&(z=h),X&&(L=p);const Et=this.getSizeAndScale(z,this.ctx.canvas.width,N),C=this.getSizeAndScale(L,this.ctx.canvas.height,I),K=Et.size,ut=C.size,k=t.cachedCanvases.getCanvas("pattern-workaround",K,ut),at=k.context,pt=B?Math.floor(S/h):0,st=X?Math.floor(w/p):0;for(let ct=0;ct<=pt;ct++)for(let yt=0;yt<=st;yt++)at.drawImage(bt,K*ct,ut*yt,K,ut,0,0,K,ut);return{canvas:k.canvas,scaleX:Et.scale,scaleY:C.scale,offsetX:g,offsetY:y}}return{canvas:dt.canvas,scaleX:ht.scale,scaleY:tt.scale,offsetX:g,offsetY:y}}getSizeAndScale(t,e,n){const r=Math.max(Sb.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*n);return l>=r?l=r:n=l/t,{scale:n,size:l}}clipBbox(t,e,n,r,l){const o=r-e,c=l-n;t.ctx.rect(e,n,o,c),_t.axialAlignedBoundingBox([e,n,r,l],Fe(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const r=t.ctx,l=t.current;switch(e){case eR.COLORED:const o=this.ctx;r.fillStyle=o.fillStyle,r.strokeStyle=o.strokeStyle,l.fillColor=o.fillStyle,l.strokeColor=o.strokeStyle;break;case eR.UNCOLORED:const c=_t.makeHexColor(n[0],n[1],n[2]);r.fillStyle=c,r.strokeStyle=c,l.fillColor=c,l.strokeColor=c;break;default:throw new RF(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,r){let l=n;r!==In.SHADING&&(l=_t.transform(l,e.baseTransform),this.matrix&&(l=_t.transform(l,this.matrix)));const o=this.createPatternCanvas(e);let c=new DOMMatrix(l);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);const h=t.createPattern(o.canvas,"repeat");return h.setTransform(c),h}};mt(Sb,"MAX_PATTERN_SIZE",3e3);let tS=Sb;function sB({src:i,srcPos:t=0,dest:e,width:n,height:r,nonBlackColor:l=4294967295,inverseDecode:o=!1}){const c=Hn.isLittleEndian?4278190080:255,[h,p]=o?[l,c]:[c,l],g=n>>3,y=n&7,b=i.length;e=new Uint32Array(e.buffer);let v=0;for(let S=0;S<r;S++){for(const _=t+g;t<_;t++){const T=t<b?i[t]:255;e[v++]=T&128?p:h,e[v++]=T&64?p:h,e[v++]=T&32?p:h,e[v++]=T&16?p:h,e[v++]=T&8?p:h,e[v++]=T&4?p:h,e[v++]=T&2?p:h,e[v++]=T&1?p:h}if(y===0)continue;const w=t<b?i[t++]:255;for(let _=0;_<y;_++)e[v++]=w&1<<7-_?p:h}return{srcPos:t,destPos:v}}const nR=16,iR=100,rB=15,sR=10,Ri=16,KA=new DOMMatrix,is=new Float32Array(2),Gc=new Float32Array([1/0,1/0,-1/0,-1/0]);function aB(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},i.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},i.transform=function(e,n,r,l,o,c){t.transform(e,n,r,l,o,c),this.__originalTransform(e,n,r,l,o,c)},i.setTransform=function(e,n,r,l,o,c){t.setTransform(e,n,r,l,o,c),this.__originalSetTransform(e,n,r,l,o,c)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,r,l,o,c){t.bezierCurveTo(e,n,r,l,o,c),this.__originalBezierCurveTo(e,n,r,l,o,c)},i.rect=function(e,n,r,l){t.rect(e,n,r,l),this.__originalRect(e,n,r,l)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class lB{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,n)):(r=this.canvasFactory.create(e,n),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function cy(i,t,e,n,r,l,o,c,h,p){const[g,y,b,v,S,w]=Fe(i);if(y===0&&b===0){const O=o*g+S,N=Math.round(O),I=c*v+w,z=Math.round(I),L=(o+h)*g+S,B=Math.abs(Math.round(L)-N)||1,X=(c+p)*v+w,Q=Math.abs(Math.round(X)-z)||1;return i.setTransform(Math.sign(g),0,0,Math.sign(v),N,z),i.drawImage(t,e,n,r,l,0,0,B,Q),i.setTransform(g,y,b,v,S,w),[B,Q]}if(g===0&&v===0){const O=c*b+S,N=Math.round(O),I=o*y+w,z=Math.round(I),L=(c+p)*b+S,B=Math.abs(Math.round(L)-N)||1,X=(o+h)*y+w,Q=Math.abs(Math.round(X)-z)||1;return i.setTransform(0,Math.sign(y),Math.sign(b),0,N,z),i.drawImage(t,e,n,r,l,0,0,Q,B),i.setTransform(g,y,b,v,S,w),[Q,B]}i.drawImage(t,e,n,r,l,o,c,h,p);const _=Math.hypot(g,y),T=Math.hypot(b,v);return[_*h,T*p]}class rR{constructor(t,e){mt(this,"alphaIsShape",!1);mt(this,"fontSize",0);mt(this,"fontSizeScale",1);mt(this,"textMatrix",null);mt(this,"textMatrixScale",1);mt(this,"fontMatrix",kw);mt(this,"leading",0);mt(this,"x",0);mt(this,"y",0);mt(this,"lineX",0);mt(this,"lineY",0);mt(this,"charSpacing",0);mt(this,"wordSpacing",0);mt(this,"textHScale",1);mt(this,"textRenderingMode",Xn.FILL);mt(this,"textRise",0);mt(this,"fillColor","#000000");mt(this,"strokeColor","#000000");mt(this,"patternFill",!1);mt(this,"patternStroke",!1);mt(this,"fillAlpha",1);mt(this,"strokeAlpha",1);mt(this,"lineWidth",1);mt(this,"activeSMask",null);mt(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Gc.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=In.FILL,e=null){const n=this.minMax.slice();if(t===In.STROKE){e||Se("Stroke bounding box must include transform."),_t.singularValueDecompose2dScale(e,is);const r=is[0]*this.lineWidth/2,l=is[1]*this.lineWidth/2;n[0]-=r,n[1]-=l,n[2]+=r,n[3]+=l}return n}updateClipFromPath(){const t=_t.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Gc,0)}getClippedPathBoundingBox(t=In.FILL,e=null){return _t.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function aR(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,r=e%Ri,l=(e-r)/Ri,o=r===0?l:l+1,c=i.createImageData(n,Ri);let h=0,p;const g=t.data,y=c.data;let b,v,S,w;if(t.kind===by.GRAYSCALE_1BPP){const _=g.byteLength,T=new Uint32Array(y.buffer,0,y.byteLength>>2),O=T.length,N=n+7>>3,I=4294967295,z=Hn.isLittleEndian?4278190080:255;for(b=0;b<o;b++){for(S=b<l?Ri:r,p=0,v=0;v<S;v++){const L=_-h;let B=0;const X=L>N?n:L*8-7,Q=X&-8;let rt=0,$=0;for(;B<Q;B+=8)$=g[h++],T[p++]=$&128?I:z,T[p++]=$&64?I:z,T[p++]=$&32?I:z,T[p++]=$&16?I:z,T[p++]=$&8?I:z,T[p++]=$&4?I:z,T[p++]=$&2?I:z,T[p++]=$&1?I:z;for(;B<X;B++)rt===0&&($=g[h++],rt=128),T[p++]=$&rt?I:z,rt>>=1}for(;p<O;)T[p++]=0;i.putImageData(c,0,b*Ri)}}else if(t.kind===by.RGBA_32BPP){for(v=0,w=n*Ri*4,b=0;b<l;b++)y.set(g.subarray(h,h+w)),h+=w,i.putImageData(c,0,v),v+=Ri;b<o&&(w=n*r*4,y.set(g.subarray(h,h+w)),i.putImageData(c,0,v))}else if(t.kind===by.RGB_24BPP)for(S=Ri,w=n*S,b=0;b<o;b++){for(b>=l&&(S=r,w=n*S),p=0,v=w;v--;)y[p++]=g[h++],y[p++]=g[h++],y[p++]=g[h++],y[p++]=255;i.putImageData(c,0,b*Ri)}else throw new Error(`bad image kind: ${t.kind}`)}function lR(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,r=e%Ri,l=(e-r)/Ri,o=r===0?l:l+1,c=i.createImageData(n,Ri);let h=0;const p=t.data,g=c.data;for(let y=0;y<o;y++){const b=y<l?Ri:r;({srcPos:h}=sB({src:p,srcPos:h,dest:g,width:n,height:b,nonBlackColor:0})),i.putImageData(c,0,y*Ri)}}function Af(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function hy(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}function oR(i,t){if(t)return!0;_t.singularValueDecompose2dScale(i,is);const e=Math.fround(Oa.pixelRatio*Zl.PDF_TO_CSS_UNITS);return is[0]<=e&&is[1]<=e}const oB=["butt","round","square"],uB=["miter","round","bevel"],cB={},uR={};var Js,eS,nS,iS;const Wx=class Wx{constructor(t,e,n,r,l,{optionalContentConfig:o,markedContentStack:c=null},h,p){R(this,Js);this.ctx=t,this.current=new rR(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=r,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=o,this.cachedCanvases=new lB(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:r=null}){const l=this.ctx.canvas.width,o=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,l,o),this.ctx.fillStyle=c,n){const h=this.cachedCanvases.getCanvas("transparent",l,o);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...Fe(this.compositeCtx))}this.ctx.save(),hy(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Fe(this.ctx)}executeOperatorList(t,e,n,r){const l=t.argsArray,o=t.fnArray;let c=e||0;const h=l.length;if(h===c)return c;const p=h-c>sR&&typeof n=="function",g=p?Date.now()+rB:0;let y=0;const b=this.commonObjs,v=this.objs;let S;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,n),c;if(S=o[c],S!==nb.dependency)this[S].apply(this,l[c]);else for(const w of l[c]){const _=w.startsWith("g_")?b:v;if(!_.has(w))return _.get(w,n),c}if(c++,c===h)return c;if(p&&++y>sR){if(Date.now()>g)return n(),c;y=0}}}endDrawing(){D(this,Js,eS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),D(this,Js,nS).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,r=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),c=n,h=r,p="prescale1",g,y;for(;l>2&&c>1||o>2&&h>1;){let b=c,v=h;l>2&&c>1&&(b=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),l/=c/b),o>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/v),g=this.cachedCanvases.getCanvas(p,b,v),y=g.context,y.clearRect(0,0,b,v),y.drawImage(t,0,0,c,h,0,0,b,v),t=g.canvas,c=b,h=v,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:h}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:r}=t,l=this.current.fillColor,o=this.current.patternFill,c=Fe(e);let h,p,g,y;if((t.bitmap||t.data)&&t.count>1){const Q=t.bitmap||t.data.buffer;p=JSON.stringify(o?c:[c.slice(0,4),l]),h=this._cachedBitmapsMap.get(Q),h||(h=new Map,this._cachedBitmapsMap.set(Q,h));const rt=h.get(p);if(rt&&!o){const $=Math.round(Math.min(c[0],c[2])+c[4]),J=Math.round(Math.min(c[1],c[3])+c[5]);return{canvas:rt,offsetX:$,offsetY:J}}g=rt}g||(y=this.cachedCanvases.getCanvas("maskCanvas",n,r),lR(y.context,t));let b=_t.transform(c,[1/n,0,0,-1/r,0,0]);b=_t.transform(b,[1,0,0,1,0,-r]);const v=Gc.slice();_t.axialAlignedBoundingBox([0,0,n,r],b,v);const[S,w,_,T]=v,O=Math.round(_-S)||1,N=Math.round(T-w)||1,I=this.cachedCanvases.getCanvas("fillCanvas",O,N),z=I.context,L=S,B=w;z.translate(-L,-B),z.transform(...b),g||(g=this._scaleImage(y.canvas,lr(z)),g=g.img,h&&o&&h.set(p,g)),z.imageSmoothingEnabled=oR(Fe(z),t.interpolate),cy(z,g,0,0,g.width,g.height,0,0,n,r),z.globalCompositeOperation="source-in";const X=_t.transform(lr(z),[1,0,0,1,-L,-B]);return z.fillStyle=o?l.getPattern(e,this,X,In.FILL):l,z.fillRect(0,0,n,r),h&&!o&&(this.cachedCanvases.delete("fillCanvas"),h.set(p,I.canvas)),{canvas:I.canvas,offsetX:Math.round(L),offsetY:Math.round(B)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=oB[t]}setLineJoin(t){this.ctx.lineJoin=uB[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx;const l=this.ctx=r.context;l.setTransform(this.suspendedCtx.getTransform()),Af(this.suspendedCtx,l),aB(l,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Af(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,r){const l=r[0],o=r[1],c=r[2]-l,h=r[3]-o;c===0||h===0||(this.genericComposeSMask(e.context,n,c,h,e.subtype,e.backdrop,e.transferMap,l,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,r,l,o,c,h,p,g,y){let b=t.canvas,v=h-g,S=p-y;if(o){const _=_t.makeHexColor(...o);if(v<0||S<0||v+n>b.width||S+r>b.height){const T=this.cachedCanvases.getCanvas("maskExtension",n,r),O=T.context;O.drawImage(b,-v,-S),O.globalCompositeOperation="destination-atop",O.fillStyle=_,O.fillRect(0,0,n,r),O.globalCompositeOperation="source-over",b=T.canvas,v=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(v,S,n,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=_,t.fillRect(v,S,n,r),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const w=new Path2D;w.rect(h,p,n,r),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(b,v,S,n,r,h,p,n,r),e.restore()}save(){this.inSMaskMode&&Af(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Af(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,r,l,o){this.ctx.transform(t,e,n,r,l,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){let[r]=e;if(!n){r||(r=e[0]=new Path2D),this[t](r);return}if(!(r instanceof Path2D)){const l=e[0]=new Path2D;for(let o=0,c=r.length;o<c;)switch(r[o++]){case oy.moveTo:l.moveTo(r[o++],r[o++]);break;case oy.lineTo:l.lineTo(r[o++],r[o++]);break;case oy.curveTo:l.bezierCurveTo(r[o++],r[o++],r[o++],r[o++],r[o++],r[o++]);break;case oy.closePath:l.closePath();break;default:It(`Unrecognized drawing path operator: ${r[o-1]}`);break}r=l}_t.axialAlignedBoundingBox(n,Fe(this.ctx),this.current.minMax),this[t](r)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const n=this.ctx,r=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const l=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=r.getPattern(n,this,lr(n),In.STROKE),l){const o=new Path2D;o.addPath(t,n.getTransform().invertSelf().multiplySelf(l)),t=o}this.rescaleAndStroke(t,!1),n.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(In.STROKE,Fe(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const n=this.ctx,r=this.current.fillColor,l=this.current.patternFill;let o=!1;if(l){const h=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=r.getPattern(n,this,lr(n),In.FILL),h){const p=new Path2D;p.addPath(t,n.getTransform().invertSelf().multiplySelf(h)),t=p}o=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(n.fill(t,"evenodd"),this.pendingEOFill=!1):n.fill(t)),o&&n.restore(),e&&this.consumePath(t,c)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=cB}eoClip(){this.pendingClip=uR}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const n=new Path2D,r=e.getTransform().invertSelf();for(const{transform:l,x:o,y:c,fontSize:h,path:p}of t)n.addPath(p,new DOMMatrix(l).preMultiplySelf(r).translate(o,c).scale(h,-h));e.clip(n),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var g;const n=this.commonObjs.get(t),r=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=n.fontMatrix||kw,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&It("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const l=n.loadedName||"sans-serif",o=((g=n.systemFontInfo)==null?void 0:g.css)||`"${l}", ${n.fallbackName}`;let c="normal";n.black?c="900":n.bold&&(c="bold");const h=n.italic?"italic":"normal";let p=e;e<nR?p=nR:e>iR&&(p=iR),this.current.fontSizeScale=e/p,this.ctx.font=`${h} ${c} ${p}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,r,l){const o=this.ctx,c=this.current,h=c.font,p=c.textRenderingMode,g=c.fontSize/c.fontSizeScale,y=p&Xn.FILL_STROKE_MASK,b=!!(p&Xn.ADD_TO_PATH_FLAG),v=c.patternFill&&!h.missingFile,S=c.patternStroke&&!h.missingFile;let w;if((h.disableFontFace||b||v||S)&&(w=h.getPathGenerator(this.commonObjs,t)),h.disableFontFace||v||S){o.save(),o.translate(e,n),o.scale(g,-g);let _;if((y===Xn.FILL||y===Xn.FILL_STROKE)&&(r?(_=o.getTransform(),o.setTransform(...r),o.fill(D(this,Js,iS).call(this,w,_,r))):o.fill(w)),y===Xn.STROKE||y===Xn.FILL_STROKE)if(l){_||(_=o.getTransform()),o.setTransform(...l);const{a:T,b:O,c:N,d:I}=_,z=_t.inverseTransform(l),L=_t.transform([T,O,N,I,0,0],z);_t.singularValueDecompose2dScale(L,is),o.lineWidth*=Math.max(is[0],is[1])/g,o.stroke(D(this,Js,iS).call(this,w,_,l))}else o.lineWidth/=g,o.stroke(w);o.restore()}else(y===Xn.FILL||y===Xn.FILL_STROKE)&&o.fillText(t,e,n),(y===Xn.STROKE||y===Xn.FILL_STROKE)&&o.strokeText(t,e,n);b&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Fe(o),x:e,y:n,fontSize:g,path:w})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){n=!0;break}return Jt(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const r=e.fontSize;if(r===0)return;const l=this.ctx,o=e.fontSizeScale,c=e.charSpacing,h=e.wordSpacing,p=e.fontDirection,g=e.textHScale*p,y=t.length,b=n.vertical,v=b?1:-1,S=n.defaultVMetrics,w=r*e.fontMatrix[0],_=e.textRenderingMode===Xn.FILL&&!n.disableFontFace&&!e.patternFill;l.save(),e.textMatrix&&l.transform(...e.textMatrix),l.translate(e.x,e.y+e.textRise),p>0?l.scale(g,-1):l.scale(g,1);let T,O;if(e.patternFill){l.save();const B=e.fillColor.getPattern(l,this,lr(l),In.FILL);T=Fe(l),l.restore(),l.fillStyle=B}if(e.patternStroke){l.save();const B=e.strokeColor.getPattern(l,this,lr(l),In.STROKE);O=Fe(l),l.restore(),l.strokeStyle=B}let N=e.lineWidth;const I=e.textMatrixScale;if(I===0||N===0){const B=e.textRenderingMode&Xn.FILL_STROKE_MASK;(B===Xn.STROKE||B===Xn.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=I;if(o!==1&&(l.scale(o,o),N/=o),l.lineWidth=N,n.isInvalidPDFjsFont){const B=[];let X=0;for(const Q of t)B.push(Q.unicode),X+=Q.width;l.fillText(B.join(""),0,0),e.x+=X*w*g,l.restore(),this.compose();return}let z=0,L;for(L=0;L<y;++L){const B=t[L];if(typeof B=="number"){z+=v*B*r/1e3;continue}let X=!1;const Q=(B.isSpace?h:0)+c,rt=B.fontChar,$=B.accent;let J,ht,tt=B.width;if(b){const F=B.vmetric||S,G=-(B.vmetric?F[1]:tt*.5)*w,bt=F[2]*w;tt=F?-F[0]:tt,J=G/o,ht=(z+bt)/o}else J=z/o,ht=0;if(n.remeasure&&tt>0){const F=l.measureText(rt).width*1e3/r*o;if(tt<F&&this.isFontSubpixelAAEnabled){const G=tt/F;X=!0,l.save(),l.scale(G,1),J/=G}else tt!==F&&(J+=(tt-F)/2e3*r/o)}if(this.contentVisible&&(B.isInFont||n.missingFile)){if(_&&!$)l.fillText(rt,J,ht);else if(this.paintChar(rt,J,ht,T,O),$){const F=J+r*$.offset.x/o,G=ht-r*$.offset.y/o;this.paintChar($.fontChar,F,G,T,O)}}const dt=b?tt*w-Q*p:tt*w+Q*p;z+=dt,X&&l.restore()}b?e.y-=z:e.x+=z*g,l.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,r=n.font,l=n.fontSize,o=n.fontDirection,c=r.vertical?1:-1,h=n.charSpacing,p=n.wordSpacing,g=n.textHScale*o,y=n.fontMatrix||kw,b=t.length,v=n.textRenderingMode===Xn.INVISIBLE;let S,w,_,T;if(!(v||l===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),n.textMatrix&&e.transform(...n.textMatrix),e.translate(n.x,n.y+n.textRise),e.scale(g,o),S=0;S<b;++S){if(w=t[S],typeof w=="number"){T=c*w*l/1e3,this.ctx.translate(T,0),n.x+=T*g;continue}const O=(w.isSpace?p:0)+h,N=r.charProcOperatorList[w.operatorListId];N?this.contentVisible&&(this.save(),e.scale(l,l),e.transform(...y),this.executeOperatorList(N),this.restore()):It(`Type3 character "${w.operatorListId}" is not available.`);const I=[w.width,0];_t.applyTransform(I,y),_=I[0]*l+O,e.translate(_,0),n.x+=_*g}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,r,l,o){const c=new Path2D;c.rect(n,r,l-n,o-r),this.ctx.clip(c),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=this.baseTransform||Fe(this.ctx),r={createCanvasGraphics:l=>new Wx(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new tS(t,this.ctx,r,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=_t.makeHexColor(t,e,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=_t.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=iB(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,lr(e),In.SHADING);const r=lr(e);if(r){const{width:l,height:o}=e.canvas,c=Gc.slice();_t.axialAlignedBoundingBox([0,0,l,o],r,c);const[h,p,g,y]=c;this.ctx.fillRect(h,p,g-h,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Se("Should not call beginInlineImage")}beginImageData(){Se("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Fe(this.ctx),e)){_t.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[n,r,l,o]=e,c=new Path2D;c.rect(n,r,l-n,o-r),this.ctx.clip(c),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||$b("TODO: Support non-isolated groups."),t.knockout&&It("Knockout groups not supported.");const n=Fe(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Gc.slice();_t.axialAlignedBoundingBox(t.bbox,Fe(e),r);const l=[0,0,e.canvas.width,e.canvas.height];r=_t.intersect(r,l)||[0,0,0,0];const o=Math.floor(r[0]),c=Math.floor(r[1]),h=Math.max(Math.ceil(r[2])-o,1),p=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,h,p]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(g,h,p),b=y.context;b.translate(-o,-c),b.transform(...n);let v=new Path2D;const[S,w,_,T]=t.bbox;if(v.rect(S,w,_-S,T-w),t.matrix){const O=new Path2D;O.addPath(v,new DOMMatrix(t.matrix)),v=O}b.clip(v),t.smask?this.smaskStack.push({canvas:y.canvas,context:b,offsetX:o,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,c),e.save()),Af(e,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Fe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const l=Gc.slice();_t.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],r,l),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,n,r,l){if(D(this,Js,eS).call(this),hy(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],c=e[3]-e[1];if(l&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=c,_t.singularValueDecompose2dScale(Fe(this.ctx),is);const{viewportScale:h}=this,p=Math.ceil(o*this.outputScaleX*h),g=Math.ceil(c*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:y,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(is[0],0,0,-is[1],0,c*is[1]),hy(this.ctx)}else{hy(this.ctx),this.endPath();const h=new Path2D;h.rect(e[0],e[1],o,c),this.ctx.clip(h)}}this.current=new rR(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),D(this,Js,nS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,r=this._createMaskCanvas(t),l=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(l,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,r=0,l,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const c=this.ctx;c.save();const h=Fe(c);c.transform(e,n,r,l,0,0);const p=this._createMaskCanvas(t);c.setTransform(1,0,0,1,p.offsetX-h[4],p.offsetY-h[5]);for(let g=0,y=o.length;g<y;g+=2){const b=_t.transform(h,[e,n,r,l,o[g],o[g+1]]);c.drawImage(p.canvas,b[4],b[5])}c.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const l of t){const{data:o,width:c,height:h,transform:p}=l,g=this.cachedCanvases.getCanvas("maskCanvas",c,h),y=g.context;y.save();const b=this.getObject(o,l);lR(y,b),y.globalCompositeOperation="source-in",y.fillStyle=r?n.getPattern(y,this,lr(e),In.FILL):n,y.fillRect(0,0,c,h),y.restore(),e.save(),e.transform(...p),e.scale(1,-1),cy(e,g.canvas,0,0,c,h,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){It("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,r){if(!this.contentVisible)return;const l=this.getObject(t);if(!l){It("Dependent image isn't ready yet");return}const o=l.width,c=l.height,h=[];for(let p=0,g=r.length;p<g;p+=2)h.push({transform:[e,0,0,n,r[p],r[p+1]],x:0,y:0,w:o,h:c});this.paintInlineImageXObjectGroup(l,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:r}=t,l=this.cachedCanvases.getCanvas("inlineImage",n,r),o=l.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",l.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,r=this.ctx;this.save();const{filter:l}=r;l!=="none"&&l!==""&&(r.filter="none"),r.scale(1/e,-1/n);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",e,n).context;aR(p,t),o=this.applyTransferMapsToCanvas(p)}const c=this._scaleImage(o,lr(r));r.imageSmoothingEnabled=oR(Fe(r),t.interpolate),cy(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const l=t.width,o=t.height,h=this.cachedCanvases.getCanvas("inlineImage",l,o).context;aR(h,t),r=this.applyTransferMapsToCanvas(h)}for(const l of e)n.save(),n.transform(...l.transform),n.scale(1,-1),cy(n,r,l.x,l.y,l.w,l.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(n||(this.pendingClip===uR?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Fe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:r,d:l}=this.ctx.getTransform();let o,c;if(n===0&&r===0){const h=Math.abs(e),p=Math.abs(l);if(h===p)if(t===0)o=c=1/h;else{const g=h*t;o=c=g<1?1/g:1}else if(t===0)o=1/h,c=1/p;else{const g=h*t,y=p*t;o=g<1?1/g:1,c=y<1?1/y:1}}else{const h=Math.abs(e*l-n*r),p=Math.hypot(e,n),g=Math.hypot(r,l);if(t===0)o=g/h,c=p/h;else{const y=t*h;o=g>y?g/y:1,c=p>y?p/y:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:r}}=this,[l,o]=this.getScaleForStroking();if(l===o){n.lineWidth=(r||1)*l,n.stroke(t);return}const c=n.getLineDash();e&&n.save(),n.scale(l,o),KA.a=1/l,KA.d=1/o;const h=new Path2D;if(h.addPath(t,KA),c.length>0){const p=Math.max(l,o);n.setLineDash(c.map(g=>g/p)),n.lineDashOffset/=p}n.lineWidth=r||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Js=new WeakSet,eS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},nS=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},iS=function(t,e,n){const r=new Path2D;return r.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),r};let Qc=Wx;for(const i in nb)Qc.prototype[i]!==void 0&&(Qc.prototype[nb[i]]=Qc.prototype[i]);var Dp,kp;class Dr{static get workerPort(){return f(this,Dp)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");x(this,Dp,t)}static get workerSrc(){return f(this,kp)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");x(this,kp,t)}}Dp=new WeakMap,kp=new WeakMap,R(Dr,Dp,null),R(Dr,kp,"");var bh,Mp;class hB{constructor({parsedData:t,rawData:e}){R(this,bh);R(this,Mp);x(this,bh,t),x(this,Mp,e)}getRaw(){return f(this,Mp)}get(t){return f(this,bh).get(t)??null}[Symbol.iterator](){return f(this,bh).entries()}}bh=new WeakMap,Mp=new WeakMap;const Fc=Symbol("INTERNAL");var Np,Op,Lp,vh;class dB{constructor(t,{name:e,intent:n,usage:r,rbGroups:l}){R(this,Np,!1);R(this,Op,!1);R(this,Lp,!1);R(this,vh,!0);x(this,Np,!!(t&es.DISPLAY)),x(this,Op,!!(t&es.PRINT)),this.name=e,this.intent=n,this.usage=r,this.rbGroups=l}get visible(){if(f(this,Lp))return f(this,vh);if(!f(this,vh))return!1;const{print:t,view:e}=this.usage;return f(this,Np)?(e==null?void 0:e.viewState)!=="OFF":f(this,Op)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Fc&&Se("Internal method `_setVisible` called."),x(this,Lp,n),x(this,vh,e)}}Np=new WeakMap,Op=new WeakMap,Lp=new WeakMap,vh=new WeakMap;var kl,Ae,Ah,wh,Pp,sS;class fB{constructor(t,e=es.DISPLAY){R(this,Pp);R(this,kl,null);R(this,Ae,new Map);R(this,Ah,null);R(this,wh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,x(this,wh,t.order);for(const n of t.groups)f(this,Ae).set(n.id,new dB(e,n));if(t.baseState==="OFF")for(const n of f(this,Ae).values())n._setVisible(Fc,!1);for(const n of t.on)f(this,Ae).get(n)._setVisible(Fc,!0);for(const n of t.off)f(this,Ae).get(n)._setVisible(Fc,!1);x(this,Ah,this.getHash())}}isVisible(t){if(f(this,Ae).size===0)return!0;if(!t)return $b("Optional content group not defined."),!0;if(t.type==="OCG")return f(this,Ae).has(t.id)?f(this,Ae).get(t.id).visible:(It(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return D(this,Pp,sS).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!f(this,Ae).has(e))return It(`Optional content group not found: ${e}`),!0;if(f(this,Ae).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!f(this,Ae).has(e))return It(`Optional content group not found: ${e}`),!0;if(!f(this,Ae).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!f(this,Ae).has(e))return It(`Optional content group not found: ${e}`),!0;if(!f(this,Ae).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!f(this,Ae).has(e))return It(`Optional content group not found: ${e}`),!0;if(f(this,Ae).get(e).visible)return!1}return!0}return It(`Unknown optional content policy ${t.policy}.`),!0}return It(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var l;const r=f(this,Ae).get(t);if(!r){It(`Optional content group not found: ${t}`);return}if(n&&e&&r.rbGroups.length)for(const o of r.rbGroups)for(const c of o)c!==t&&((l=f(this,Ae).get(c))==null||l._setVisible(Fc,!1,!0));r._setVisible(Fc,!!e,!0),x(this,kl,null)}setOCGState({state:t,preserveRB:e}){let n;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const l=f(this,Ae).get(r);if(l)switch(n){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!l.visible,e);break}}x(this,kl,null)}get hasInitialVisibility(){return f(this,Ah)===null||this.getHash()===f(this,Ah)}getOrder(){return f(this,Ae).size?f(this,wh)?f(this,wh).slice():[...f(this,Ae).keys()]:null}getGroup(t){return f(this,Ae).get(t)||null}getHash(){if(f(this,kl)!==null)return f(this,kl);const t=new Mk;for(const[e,n]of f(this,Ae))t.update(`${e}:${n.visible}`);return x(this,kl,t.hexdigest())}[Symbol.iterator](){return f(this,Ae).entries()}}kl=new WeakMap,Ae=new WeakMap,Ah=new WeakMap,wh=new WeakMap,Pp=new WeakSet,sS=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let r=1;r<e;r++){const l=t[r];let o;if(Array.isArray(l))o=D(this,Pp,sS).call(this,l);else if(f(this,Ae).has(l))o=f(this,Ae).get(l).visible;else return It(`Optional content group not found: ${l}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class pB{constructor(t,{disableRange:e=!1,disableStream:n=!1}){ln(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:l,progressiveDone:o,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=c,(l==null?void 0:l.length)>0){const h=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,p)=>{this._onReceiveData({begin:h,chunk:p})}),t.addProgressListener((h,p)=>{this._onProgress({loaded:h,total:p})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(n),!0)});ln(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,r,l;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(l=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||l.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ln(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new gB(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new mB(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class gB{constructor(t,e,n=!1,r=null){this._stream=t,this._done=n||!1,this._filename=kx(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class mB{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function yB(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let g=c(e);return g=unescape(g),g=h(g),g=p(g),l(g)}if(e=o(i),e){const g=p(e);return l(g)}if(e=n("filename","i").exec(i),e){e=e[1];let g=c(e);return g=p(g),l(g)}function n(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),v=Og(y);y=b.decode(v),t=!1}catch{}}return y}function l(g){return t&&/[\x80-\xff]/.test(g)&&(g=r("utf-8",g),t&&(g=r("iso-8859-1",g))),g}function o(g){const y=[];let b;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=v.exec(g))!==null;){let[,w,_,T]=b;if(w=parseInt(w,10),w in y){if(w===0)break;continue}y[w]=[_,T]}const S=[];for(let w=0;w<y.length&&w in y;++w){let[_,T]=y[w];T=c(T),_&&(T=unescape(T),w===0&&(T=h(T))),S.push(T)}return S.join("")}function c(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const v=y[b].indexOf('"');v!==-1&&(y[b]=y[b].slice(0,v),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function h(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),S=g.slice(y+1).replace(/^[^']*'/,"");return r(b,S)}function p(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,v,S){if(v==="q"||v==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,_){return String.fromCharCode(parseInt(_,16))}),r(b,S);try{S=atob(S)}catch{}return r(b,S)})}return""}function qk(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const r=t[n];r!==void 0&&e.append(n,r)}return e}function Kb(i){var t;return((t=URL.parse(i))==null?void 0:t.origin)??null}function Vk({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(i.get("Content-Length"),10);return!Number.isInteger(l)||(r.suggestedLength=l,l<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Gk(i){const t=i.get("Content-Disposition");if(t){let e=yB(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(kx(e))return e}return null}function Ig(i,t){return new ib(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i,i===404||i===0&&t.startsWith("file:"))}function Yk(i){return i===200||i===206}function Xk(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function $k(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(It(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class cR{constructor(t){mt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=qk(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ln(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new bB(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new vB(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class bB{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),r=e.url;fetch(r,Xk(n,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=Kb(l.url),!Yk(l.status))throw Ig(l.status,r);this._reader=l.body.getReader(),this._headersCapability.resolve();const o=l.headers,{allowRangeRequests:c,suggestedLength:h}=Vk({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=h||this._contentLength,this._filename=Gk(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ql("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:$k(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class vB{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${e}-${n-1}`);const o=r.url;fetch(o,Xk(l,this._withCredentials,this._abortController)).then(c=>{const h=Kb(c.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!Yk(c.status))throw Ig(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:$k(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const QA=200,ZA=206;function AB(i){const t=i.response;return typeof t!="string"?t:Og(t).buffer}class wB{constructor({url:t,httpHeaders:e,withCredentials:n}){mt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=qk(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[l,o]of this.headers)e.setRequestHeader(l,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=ZA):r.expectedStatus=QA,e.responseType="arraybuffer",ln(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var r;const n=this.pendingRequests[t];n&&((r=n.onProgress)==null||r.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){n.onError(r.status);return}const l=r.status||QA;if(!(l===QA&&n.expectedStatus===ZA)&&l!==n.expectedStatus){n.onError(r.status);return}const c=AB(r);if(l===ZA){const h=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);p?n.onDone({begin:parseInt(p[1],10),chunk:c}):(It('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class SB{constructor(t){this._source=t,this._manager=new wB(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ln(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new xB(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new EB(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class xB{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Kb(e.responseURL);const n=e.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[h,...p]=c.split(": ");return[h,p.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:o}=Vk({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=Gk(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Ig(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class EB{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Kb((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Ig(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const _B=/^[a-z][a-z0-9\-+.]+:/i;function CB(i){if(_B.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class TB{constructor(t){this.source=t,this.url=CB(t.url),ln(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ln(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new RB(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new DB(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class RB{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Ig(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ql("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class DB{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const kB=1e5,hR=30;var BR,Ml,Ci,zp,Ip,eu,da,jp,Fp,nu,Sh,xh,Nl,Eh,Bp,_h,iu,Hp,Up,Ch,su,qp,Ol,Th,La,Wk,Kk,rS,ls,Dy,aS,Qk,Zk;const fn=class fn{constructor({textContentSource:t,container:e,viewport:n}){R(this,La);R(this,Ml,Promise.withResolvers());R(this,Ci,null);R(this,zp,!1);R(this,Ip,!!((BR=globalThis.FontInspector)!=null&&BR.enabled));R(this,eu,null);R(this,da,null);R(this,jp,0);R(this,Fp,0);R(this,nu,null);R(this,Sh,null);R(this,xh,0);R(this,Nl,0);R(this,Eh,Object.create(null));R(this,Bp,[]);R(this,_h,null);R(this,iu,[]);R(this,Hp,new WeakMap);R(this,Up,null);var h;if(t instanceof ReadableStream)x(this,_h,t);else if(typeof t=="object")x(this,_h,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,Ci,x(this,Sh,e)),x(this,Nl,n.scale*Oa.pixelRatio),x(this,xh,n.rotation),x(this,da,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:l,pageX:o,pageY:c}=n.rawDims;x(this,Up,[1,0,0,-1,-o,c+l]),x(this,Fp,r),x(this,jp,l),D(h=fn,ls,Qk).call(h),Fu(e,n),f(this,Ml).promise.finally(()=>{f(fn,Th).delete(this),x(this,da,null),x(this,Eh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Hn.platform;return Jt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{f(this,nu).read().then(({value:e,done:n})=>{if(n){f(this,Ml).resolve();return}f(this,eu)??x(this,eu,e.lang),Object.assign(f(this,Eh),e.styles),D(this,La,Wk).call(this,e.items),t()},f(this,Ml).reject)};return x(this,nu,f(this,_h).getReader()),f(fn,Th).add(this),t(),f(this,Ml).promise}update({viewport:t,onBefore:e=null}){var l;const n=t.scale*Oa.pixelRatio,r=t.rotation;if(r!==f(this,xh)&&(e==null||e(),x(this,xh,r),Fu(f(this,Sh),{rotation:r})),n!==f(this,Nl)){e==null||e(),x(this,Nl,n);const o={div:null,properties:null,ctx:D(l=fn,ls,Dy).call(l,f(this,eu))};for(const c of f(this,iu))o.properties=f(this,Hp).get(c),o.div=c,D(this,La,rS).call(this,o)}}cancel(){var e;const t=new Ql("TextLayer task cancelled.");(e=f(this,nu))==null||e.cancel(t).catch(()=>{}),x(this,nu,null),f(this,Ml).reject(t)}get textDivs(){return f(this,iu)}get textContentItemsStr(){return f(this,Bp)}static cleanup(){if(!(f(this,Th).size>0)){f(this,Ch).clear();for(const{canvas:t}of f(this,su).values())t.remove();f(this,su).clear()}}};Ml=new WeakMap,Ci=new WeakMap,zp=new WeakMap,Ip=new WeakMap,eu=new WeakMap,da=new WeakMap,jp=new WeakMap,Fp=new WeakMap,nu=new WeakMap,Sh=new WeakMap,xh=new WeakMap,Nl=new WeakMap,Eh=new WeakMap,Bp=new WeakMap,_h=new WeakMap,iu=new WeakMap,Hp=new WeakMap,Up=new WeakMap,Ch=new WeakMap,su=new WeakMap,qp=new WeakMap,Ol=new WeakMap,Th=new WeakMap,La=new WeakSet,Wk=function(t){var r,l;if(f(this,zp))return;(l=f(this,da)).ctx??(l.ctx=D(r=fn,ls,Dy).call(r,f(this,eu)));const e=f(this,iu),n=f(this,Bp);for(const o of t){if(e.length>kB){It("Ignoring additional textDivs for performance reasons."),x(this,zp,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const c=f(this,Ci);x(this,Ci,document.createElement("span")),f(this,Ci).classList.add("markedContent"),o.id!==null&&f(this,Ci).setAttribute("id",`${o.id}`),c.append(f(this,Ci))}else o.type==="endMarkedContent"&&x(this,Ci,f(this,Ci).parentNode);continue}n.push(o.str),D(this,La,Kk).call(this,o)}},Kk=function(t){var w;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};f(this,iu).push(e);const r=_t.transform(f(this,Up),t.transform);let l=Math.atan2(r[1],r[0]);const o=f(this,Eh)[t.fontName];o.vertical&&(l+=Math.PI/2);let c=f(this,Ip)&&o.fontSubstitution||o.fontFamily;c=fn.fontFamilyMap.get(c)||c;const h=Math.hypot(r[2],r[3]),p=h*D(w=fn,ls,Zk).call(w,c,o,f(this,eu));let g,y;l===0?(g=r[4],y=r[5]-p):(g=r[4]+p*Math.sin(l),y=r[5]-p*Math.cos(l));const b="calc(var(--total-scale-factor) *",v=e.style;f(this,Ci)===f(this,Sh)?(v.left=`${(100*g/f(this,Fp)).toFixed(2)}%`,v.top=`${(100*y/f(this,jp)).toFixed(2)}%`):(v.left=`${b}${g.toFixed(2)}px)`,v.top=`${b}${y.toFixed(2)}px)`),v.fontSize=`${b}${(f(fn,Ol)*h).toFixed(2)}px)`,v.fontFamily=c,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,f(this,Ip)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),l!==0&&(n.angle=l*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const _=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);_!==T&&Math.max(_,T)/Math.min(_,T)>1.5&&(S=!0)}if(S&&(n.canvasWidth=o.vertical?t.height:t.width),f(this,Hp).set(e,n),f(this,da).div=e,f(this,da).properties=n,D(this,La,rS).call(this,f(this,da)),n.hasText&&f(this,Ci).append(e),n.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),f(this,Ci).append(_)}},rS=function(t){var c;const{div:e,properties:n,ctx:r}=t,{style:l}=e;let o="";if(f(fn,Ol)>1&&(o=`scale(${1/f(fn,Ol)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:h}=l,{canvasWidth:p,fontSize:g}=n;D(c=fn,ls,aS).call(c,r,g*f(this,Nl),h);const{width:y}=r.measureText(e.textContent);y>0&&(o=`scaleX(${p*f(this,Nl)/y}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(l.transform=o)},ls=new WeakSet,Dy=function(t=null){let e=f(this,su).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),f(this,su).set(t,e),f(this,qp).set(e,{size:0,family:""})}return e},aS=function(t,e,n){const r=f(this,qp).get(t);e===r.size&&n===r.family||(t.font=`${e}px ${n}`,r.size=e,r.family=n)},Qk=function(){if(f(this,Ol)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),x(this,Ol,t.getBoundingClientRect().height),t.remove()},Zk=function(t,e,n){const r=f(this,Ch).get(t);if(r)return r;const l=D(this,ls,Dy).call(this,n);l.canvas.width=l.canvas.height=hR,D(this,ls,aS).call(this,l,hR,t);const o=l.measureText(""),c=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let p=.8;return c?p=c/(c+h):(Hn.platform.isFirefox&&It("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?p=e.ascent:e.descent&&(p=1+e.descent)),f(this,Ch).set(t,p),p},R(fn,ls),R(fn,Ch,new Map),R(fn,su,new Map),R(fn,qp,new WeakMap),R(fn,Ol,null),R(fn,Th,new Set);let Zf=fn;class Jf{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function r(l){var h;if(!l)return;let o=null;const c=l.name;if(c==="#text")o=l.value;else if(Jf.shouldBuildText(c))(h=l==null?void 0:l.attributes)!=null&&h.textContent?o=l.attributes.textContent:l.value&&(o=l.value);else return;if(o!==null&&e.push({str:o}),!!l.children)for(const p of l.children)r(p)}return r(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const MB=65536,NB=100;function Jk(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new oS,{docId:e}=t,n=i.url?OB(i.url):null,r=i.data?LB(i.data):null,l=i.httpHeaders||null,o=i.withCredentials===!0,c=i.password??null,h=i.range instanceof tM?i.range:null,p=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:MB;let g=i.worker instanceof Zc?i.worker:null;const y=i.verbosity,b=typeof i.docBaseUrl=="string"&&!Wb(i.docBaseUrl)?i.docBaseUrl:null,v=dy(i.cMapUrl),S=i.cMapPacked!==!1,w=i.CMapReaderFactory||(hi?KF:ZT),_=dy(i.iccUrl),T=dy(i.standardFontDataUrl),O=i.StandardFontDataFactory||(hi?QF:JT),N=dy(i.wasmUrl),I=i.WasmFactory||(hi?ZF:tR),z=i.stopAtErrors!==!0,L=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,B=i.isEvalSupported!==!1,X=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!hi,Q=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!hi&&(Hn.platform.isFirefox||!globalThis.chrome),rt=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,$=typeof i.disableFontFace=="boolean"?i.disableFontFace:hi,J=i.fontExtraProperties===!0,ht=i.enableXfa===!0,tt=i.ownerDocument||globalThis.document,dt=i.disableRange===!0,F=i.disableStream===!0,G=i.disableAutoFetch===!0,bt=i.pdfBug===!0,Et=i.CanvasFactory||(hi?WF:YF),C=i.FilterFactory||(hi?$F:XF),K=i.enableHWA===!0,ut=i.useWasm!==!1,k=h?h.length:i.length??NaN,at=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!hi&&!$,pt=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(w===ZT&&O===JT&&I===tR&&v&&T&&N&&Pc(v,document.baseURI)&&Pc(T,document.baseURI)&&Pc(N,document.baseURI)),st=null;_F(y);const ct={canvasFactory:new Et({ownerDocument:tt,enableHWA:K}),filterFactory:new C({docId:e,ownerDocument:tt}),cMapReaderFactory:pt?null:new w({baseUrl:v,isCompressed:S}),standardFontDataFactory:pt?null:new O({baseUrl:T}),wasmFactory:pt?null:new I({baseUrl:N})};if(!g){const Ut={verbosity:y,port:Dr.workerPort};g=Ut.port?Zc.fromPort(Ut):new Zc(Ut),t._worker=g}const yt={docId:e,apiVersion:"5.2.133",data:r,password:c,disableAutoFetch:G,rangeChunkSize:p,length:k,docBaseUrl:b,enableXfa:ht,evaluatorOptions:{maxImageSize:L,disableFontFace:$,ignoreErrors:z,isEvalSupported:B,isOffscreenCanvasSupported:X,isImageDecoderSupported:Q,canvasMaxAreaInBytes:rt,fontExtraProperties:J,useSystemFonts:at,useWasm:ut,useWorkerFetch:pt,cMapUrl:v,iccUrl:_,standardFontDataUrl:T,wasmUrl:N}},Rt={ownerDocument:tt,pdfBug:bt,styleElement:st,loadingParams:{disableAutoFetch:G,enableXfa:ht}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Ut=g.messageHandler.sendWithPromise("GetDocRequest",yt,r?[r.buffer]:null);let ge;if(h)ge=new pB(h,{disableRange:dt,disableStream:F});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let me;if(hi)if(Pc(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");me=cR}else me=TB;else me=Pc(n)?cR:SB;ge=new me({url:n,length:k,httpHeaders:l,withCredentials:o,rangeChunkSize:p,disableRange:dt,disableStream:F})}return Ut.then(me=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const te=new Mf(e,me,g.port),Yt=new BB(te,t,ge,Rt,ct);t._transport=Yt,te.send("Ready",null)})}).catch(t._capability.reject),t}function OB(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(hi)return i;const t=URL.parse(i,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function LB(i){if(hi&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Og(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function dy(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const lS=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,PB=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",zB=LF.bind(null,lS,PB);var xb;const Eb=class Eb{constructor(){mt(this,"_capability",Promise.withResolvers());mt(this,"_transport",null);mt(this,"_worker",null);mt(this,"docId",`d${ri(Eb,xb)._++}`);mt(this,"destroyed",!1);mt(this,"onPassword",null);mt(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,r;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(l){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,l}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};xb=new WeakMap,R(Eb,xb,0);let oS=Eb;class tM{constructor(t,e,n=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Se("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class IB{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Jt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var fa,ru,zf;class jB{constructor(t,e,n,r=!1){R(this,ru);R(this,fa,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=r?new WT:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new eM,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:l=!1}={}){return new Pg({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:r,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Jt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:r=dl.ENABLE,transform:l=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:h=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:y=!1}){var I,z;(I=this._stats)==null||I.time("Overall");const b=this._transport.getRenderingIntent(n,r,g,y),{renderingIntent:v,cacheKey:S}=b;x(this,fa,!1),c||(c=this._transport.getOptionalContentConfig(v));let w=this._intentStates.get(S);w||(w=Object.create(null),this._intentStates.set(S,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const _=!!(v&es.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(z=this._stats)==null||z.time("Page Request"),this._pumpOperatorList(b));const T=L=>{var B;w.renderTasks.delete(O),_&&x(this,fa,!0),D(this,ru,zf).call(this),L?(O.capability.reject(L),this._abortOperatorList({intentState:w,reason:L instanceof Error?L:new Error(L)})):O.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(B=globalThis.Stats)!=null&&B.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},O=new cS({callback:T,params:{canvasContext:t,viewport:e,transform:l,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:p});(w.renderTasks||(w.renderTasks=new Set)).add(O);const N=O.task;return Promise.all([w.displayReadyCapability.promise,c]).then(([L,B])=>{var X;if(this.destroyed){T();return}if((X=this._stats)==null||X.time("Rendering"),!(B.renderingIntent&v))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");O.initializeGraphics({transparency:L,optionalContentConfig:B}),O.operatorListChanged()}).catch(T),N}getOperatorList({intent:t="display",annotationMode:e=dl.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var p;function l(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(h))}const o=this._transport.getRenderingIntent(t,e,n,r,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let h;return c.opListReadCapability||(h=Object.create(null),h.operatorListChanged=l,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(h),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Jf.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,r){function l(){o.read().then(function({value:h,done:p}){if(p){n(c);return}c.lang??(c.lang=h.lang),Object.assign(c.styles,h.styles),c.items.push(...h.items),l()},r)}const o=e.getReader(),c={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),x(this,fa,!1),Promise.all(t)}cleanup(t=!1){x(this,fa,!0);const e=D(this,ru,zf).call(this);return t&&e&&this._stats&&(this._stats=new WT),e}_startRenderPage(t,e){var r,l;const n=this._intentStates.get(e);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(l=n.displayReadyCapability)==null||l.resolve(t))}_renderPageChunk(t,e){for(let n=0,r=t.length;n<r;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&D(this,ru,zf).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:r}){const{map:l,transfer:o}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:r},o).getReader(),p=this._intentStates.get(e);p.streamReader=h;const g=()=>{h.read().then(({value:y,done:b})=>{if(b){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),g())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const b of p.renderTasks)b.operatorListChanged();D(this,ru,zf).call(this)}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Dx){let r=NB;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new Ql(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,l]of this._intentStates)if(l===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}fa=new WeakMap,ru=new WeakSet,zf=function(){if(!f(this,fa)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,fa,!1),!0};var pa,_b;class FB{constructor(){R(this,pa,new Map);R(this,_b,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};f(this,_b).then(()=>{for(const[r]of f(this,pa))r.call(this,n)})}addEventListener(t,e,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:l}=n;if(l.aborted){It("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);r=()=>l.removeEventListener("abort",o),l.addEventListener("abort",o)}f(this,pa).set(e,r)}removeEventListener(t,e){const n=f(this,pa).get(e);n==null||n(),f(this,pa).delete(e)}terminate(){for(const[,t]of f(this,pa))t==null||t();f(this,pa).clear()}}pa=new WeakMap,_b=new WeakMap;var Cb,au,lu,Rh,ky,Dh,My;const Oe=class Oe{constructor({name:t=null,port:e=null,verbosity:n=CF()}={}){R(this,Rh);var r;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((r=f(Oe,lu))!=null&&r.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(f(Oe,lu)||x(Oe,lu,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Mf("main","worker",t),this._messageHandler.on("ready",function(){}),D(this,Rh,ky).call(this)}_initialize(){if(f(Oe,au)||f(Oe,Dh,My)){this._setupFakeWorker();return}let{workerSrc:t}=Oe;try{Oe._isSameOrigin(window.location,t)||(t=Oe._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Mf("main","worker",e),r=()=>{l.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},l=new AbortController;e.addEventListener("error",()=>{this._webWorker||r()},{signal:l.signal}),n.on("test",c=>{if(l.abort(),this.destroyed||!c){r();return}this._messageHandler=n,this._port=e,this._webWorker=e,D(this,Rh,ky).call(this)}),n.on("ready",c=>{if(l.abort(),this.destroyed){r();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};o();return}catch{$b("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){f(Oe,au)||(It("Setting up fake worker."),x(Oe,au,!0)),Oe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new FB;this._port=e;const n=`fake${ri(Oe,Cb)._++}`,r=new Mf(n+"_worker",n,e);t.setup(r,e),this._messageHandler=new Mf(n,n+"_worker",e),D(this,Rh,ky).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,n;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=f(Oe,lu))==null||e.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=f(this,lu))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Oe(t)}static get workerSrc(){if(Dr.workerSrc)return Dr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Jt(this,"_setupFakeWorkerGlobal",(async()=>f(this,Dh,My)?f(this,Dh,My):(await import(this.workerSrc)).WorkerMessageHandler)())}};Cb=new WeakMap,au=new WeakMap,lu=new WeakMap,Rh=new WeakSet,ky=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Dh=new WeakSet,My=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},R(Oe,Dh),R(Oe,Cb,0),R(Oe,au,!1),R(Oe,lu),hi&&(x(Oe,au,!0),Dr.workerSrc||(Dr.workerSrc="./pdf.worker.mjs")),Oe._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(e,n);return n.origin===r.origin},Oe._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Zc=Oe;var ga,wr,kh,Mh,ma,ou,If;class BB{constructor(t,e,n,r,l){R(this,ou);R(this,ga,new Map);R(this,wr,new Map);R(this,kh,new Map);R(this,Mh,new Map);R(this,ma,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new eM,this.fontLoader=new VF({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Jt(this,"annotationStorage",new Lx)}getRenderingIntent(t,e=dl.ENABLE,n=null,r=!1,l=!1){let o=es.DISPLAY,c=Kw;switch(t){case"any":o=es.ANY;break;case"display":break;case"print":o=es.PRINT;break;default:It(`getRenderingIntent - invalid intent: ${t}`)}const h=o&es.PRINT&&n instanceof Ok?n:this.annotationStorage;switch(e){case dl.DISABLE:o+=es.ANNOTATIONS_DISABLE;break;case dl.ENABLE:break;case dl.ENABLE_FORMS:o+=es.ANNOTATIONS_FORMS;break;case dl.ENABLE_STORAGE:o+=es.ANNOTATIONS_STORAGE,c=h.serializable;break;default:It(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(o+=es.IS_EDITING),l&&(o+=es.OPLIST);const{ids:p,hash:g}=h.modifiedIds,y=[o,c.hash,g];return{renderingIntent:o,cacheKey:y.join("_"),annotationStorageSerializable:c,modifiedIds:p}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=f(this,ma))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of f(this,wr).values())t.push(r._destroy());f(this,wr).clear(),f(this,kh).clear(),f(this,Mh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var r,l;this.commonObjs.clear(),this.fontLoader.clear(),f(this,ga).clear(),this.filterFactory.destroy(),Zf.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Ql("Worker was terminated.")),(l=this.messageHandler)==null||l.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,r)=>{ln(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},r.onPull=()=>{this._fullReader.read().then(function({value:l,done:o}){if(o){r.close();return}ln(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{this._fullReader.cancel(l),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async n=>{var c;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:l,contentLength:o}=this._fullReader;return(!r||!l)&&(this._lastProgress&&((c=e.onProgress)==null||c.call(e,this._lastProgress)),this._fullReader.onProgress=h=>{var p;(p=e.onProgress)==null||p.call(e,{loaded:h.loaded,total:h.total})}),{isStreamingSupported:r,isRangeSupported:l,contentLength:o}}),t.on("GetRangeReader",(n,r)=>{ln(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(n.begin,n.end);if(!l){r.close();return}r.onPull=()=>{l.read().then(function({value:o,done:c}){if(c){r.close();return}ln(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{l.cancel(o),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new IB(n,this))}),t.on("DocException",n=>{e._capability.reject(xi(n))}),t.on("PasswordRequest",n=>{x(this,ma,Promise.withResolvers());try{if(!e.onPassword)throw xi(n);const r=l=>{l instanceof Error?f(this,ma).reject(l):f(this,ma).resolve({password:l})};e.onPassword(r,n.code)}catch(r){f(this,ma).reject(r)}return f(this,ma).promise}),t.on("DataLoaded",n=>{var r;(r=e.onProgress)==null||r.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;f(this,wr).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,r,l])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in l){const g=l.error;It(`Error during font loading: ${g}`),this.commonObjs.resolve(n,g);break}const c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(g,y)=>globalThis.FontInspector.fontAdded(g,y):null,h=new GF(l,c);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h.fontExtraProperties&&h.data&&(h.data=null),this.commonObjs.resolve(n,h)});break;case"CopyLocalImage":const{imageRef:p}=l;ln(p,"The imageRef must be defined.");for(const g of f(this,wr).values())for(const[,y]of g.objs)if((y==null?void 0:y.ref)===p)return y.dataLen?(this.commonObjs.resolve(n,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,l);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([n,r,l,o])=>{var h;if(this.destroyed)return;const c=f(this,wr).get(r);if(!c.objs.has(n)){if(c._intentStates.size===0){(h=o==null?void 0:o.bitmap)==null||h.close();return}switch(l){case"Image":case"Pattern":c.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",n=>{var r;this.destroyed||(r=e.onProgress)==null||r.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&It("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=f(this,kh).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&f(this,Mh).set(l.refStr,t);const o=new jB(e,l,this,this._params.pdfBug);return f(this,wr).set(e,o),o});return f(this,kh).set(e,r),r}getPageIndex(t){return lS(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return D(this,ou,If).call(this,"GetFieldObjects")}hasJSActions(){return D(this,ou,If).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return D(this,ou,If).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return D(this,ou,If).call(this,"GetOptionalContentConfig").then(e=>new fB(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=f(this,ga).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(r=>{var l,o;return{info:r[0],metadata:r[1]?new hB(r[1]):null,contentDispositionFilename:((l=this._fullReader)==null?void 0:l.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return f(this,ga).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of f(this,wr).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),f(this,ga).clear(),this.filterFactory.destroy(!0),Zf.cleanup()}}cachedPageNumber(t){if(!lS(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return f(this,Mh).get(e)??null}}ga=new WeakMap,wr=new WeakMap,kh=new WeakMap,Mh=new WeakMap,ma=new WeakMap,ou=new WeakSet,If=function(t,e=null){const n=f(this,ga).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise(t,e);return f(this,ga).set(t,r),r};const wf=Symbol("INITIAL_DATA");var Gi,Vp,uS;class eM{constructor(){R(this,Vp);R(this,Gi,Object.create(null))}get(t,e=null){if(e){const r=D(this,Vp,uS).call(this,t);return r.promise.then(()=>e(r.data)),null}const n=f(this,Gi)[t];if(!n||n.data===wf)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=f(this,Gi)[t];return!!e&&e.data!==wf}delete(t){const e=f(this,Gi)[t];return!e||e.data===wf?!1:(delete f(this,Gi)[t],!0)}resolve(t,e=null){const n=D(this,Vp,uS).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in f(this,Gi)){const{data:n}=f(this,Gi)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}x(this,Gi,Object.create(null))}*[Symbol.iterator](){for(const t in f(this,Gi)){const{data:e}=f(this,Gi)[t];e!==wf&&(yield[t,e])}}}Gi=new WeakMap,Vp=new WeakSet,uS=function(t){var e;return(e=f(this,Gi))[t]||(e[t]={...Promise.withResolvers(),data:wf})};var Ll;class HB{constructor(t){R(this,Ll,null);mt(this,"onContinue",null);mt(this,"onError",null);x(this,Ll,t)}get promise(){return f(this,Ll).capability.promise}cancel(t=0){f(this,Ll).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=f(this,Ll).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=f(this,Ll);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Ll=new WeakMap;var Pl,uu;const ko=class ko{constructor({callback:t,params:e,objs:n,commonObjs:r,annotationCanvasMap:l,operatorList:o,pageIndex:c,canvasFactory:h,filterFactory:p,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null}){R(this,Pl,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=c,this.canvasFactory=h,this.filterFactory=p,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new HB(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,h;if(this.cancelled)return;if(this._canvas){if(f(ko,uu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");f(ko,uu).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:l,background:o}=this.params;this.gfx=new Qc(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:l,viewport:r,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(h=this.graphicsReadyCallback)==null||h.call(this)}cancel(t=null,e=0){var n,r,l;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),f(this,Pl)&&(window.cancelAnimationFrame(f(this,Pl)),x(this,Pl,null)),f(ko,uu).delete(this._canvas),t||(t=new Dx(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(l=(r=this.task).onError)==null||l.call(r,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,Pl,window.requestAnimationFrame(()=>{x(this,Pl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),f(ko,uu).delete(this._canvas),this.callback())))}};Pl=new WeakMap,uu=new WeakMap,R(ko,uu,new WeakSet);let cS=ko;const UB="5.2.133",qB="4f7761353";function dR(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Sf(i){return Math.max(0,Math.min(255,255*i))}class fR{static CMYK_G([t,e,n,r]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Sf(t),[t,t,t]}static G_HTML([t]){const e=dR(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Sf)}static RGB_HTML(t){return`#${t.map(dR).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,n,r]){return[Sf(1-Math.min(1,t+r)),Sf(1-Math.min(1,n+r)),Sf(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const r=1-t,l=1-e,o=1-n,c=Math.min(r,l,o);return["CMYK",r,l,o,c]}}class VB{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Se("Abstract method `_createSVG` called.")}}class ab extends VB{_createSVG(t){return document.createElementNS(Kr,t)}}class nM{static setupStorage(t,e,n,r,l){const o=r.getValue(e,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),l==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",c=>{r.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),l==="print")break;t.addEventListener("input",c=>{r.setValue(e,{value:c.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const c of n.children)c.attributes.value===o.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const h=c.target.options,p=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:r,linkService:l}){const{attributes:o}=e,c=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[h,p]of Object.entries(o))if(p!=null)switch(h){case"class":p.length&&t.setAttribute(h,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!c||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,p)}c&&l.addLinkAttributes(t,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(t,o.dataId,e,n)}static render(t){var y,b;const e=t.annotationStorage,n=t.linkService,r=t.xfaHtml,l=t.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:l,linkService:n});const c=l!=="richText",h=t.div;if(h.append(o),t.viewport){const v=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=v}c&&h.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const v=document.createTextNode(r.value);o.append(v),c&&Jf.shouldBuildText(r.name)&&p.push(v)}return{textDivs:p}}const g=[[r,-1,o]];for(;g.length>0;){const[v,S,w]=g.at(-1);if(S+1===v.children.length){g.pop();continue}const _=v.children[++g.at(-1)[1]];if(_===null)continue;const{name:T}=_;if(T==="#text"){const N=document.createTextNode(_.value);p.push(N),w.append(N);continue}const O=(y=_==null?void 0:_.attributes)!=null&&y.xmlns?document.createElementNS(_.attributes.xmlns,T):document.createElement(T);if(w.append(O),_.attributes&&this.setAttributes({html:O,element:_,storage:e,intent:l,linkService:n}),((b=_.children)==null?void 0:b.length)>0)g.push([_,-1,O]);else if(_.value){const N=document.createTextNode(_.value);c&&Jf.shouldBuildText(T)&&p.push(N),O.append(N)}}for(const v of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const jg=1e3,GB=9,Hu=new WeakSet;class pR{static create(t){switch(t.data.annotationType){case sn.LINK:return new iM(t);case sn.TEXT:return new YB(t);case sn.WIDGET:switch(t.data.fieldType){case"Tx":return new XB(t);case"Btn":return t.data.radioButton?new aM(t):t.data.checkBox?new WB(t):new KB(t);case"Ch":return new QB(t);case"Sig":return new $B(t)}return new $u(t);case sn.POPUP:return new dS(t);case sn.FREETEXT:return new hM(t);case sn.LINE:return new JB(t);case sn.SQUARE:return new tH(t);case sn.CIRCLE:return new eH(t);case sn.POLYLINE:return new dM(t);case sn.CARET:return new iH(t);case sn.INK:return new Ix(t);case sn.POLYGON:return new nH(t);case sn.HIGHLIGHT:return new fM(t);case sn.UNDERLINE:return new sH(t);case sn.SQUIGGLY:return new rH(t);case sn.STRIKEOUT:return new aH(t);case sn.STAMP:return new pM(t);case sn.FILEATTACHMENT:return new lH(t);default:return new Ze(t)}}}var cu,Nh,Oh,Gp,hS;const Kx=class Kx{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){R(this,Gp);R(this,cu,null);R(this,Nh,!1);R(this,Oh,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Kx._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;f(this,cu)||x(this,cu,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&D(this,Gp,hS).call(this,e),(n=f(this,Oh))==null||n.popup.updateEdited(t)}resetEdited(){var t;f(this,cu)&&(D(this,Gp,hS).call(this,f(this,cu).rect),(t=f(this,Oh))==null||t.popup.resetEdited(),x(this,cu,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:r}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),this instanceof $u||(l.tabIndex=jg);const{style:o}=l;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof dS){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,l),l}const{width:c,height:h}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(w>0||_>0){const O=`calc(${w}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;o.borderRadius=O}else if(this instanceof aM){const O=`calc(${c}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;o.borderRadius=O}switch(e.borderStyle.style){case Lc.SOLID:o.borderStyle="solid";break;case Lc.DASHED:o.borderStyle="dashed";break;case Lc.BEVELED:It("Unimplemented border style: beveled");break;case Lc.INSET:It("Unimplemented border style: inset");break;case Lc.UNDERLINE:o.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(x(this,Nh,!0),o.borderColor=_t.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):o.borderWidth=0}const p=_t.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:v}=r.rawDims;o.left=`${100*(p[0]-b)/g}%`,o.top=`${100*(p[1]-v)/y}%`;const{rotation:S}=e;return e.hasOwnCanvas||S===0?(o.width=`${100*c/g}%`,o.height=`${100*h/y}%`):this.setRotation(S,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:l,height:o}=this;t%180!==0&&([l,o]=[o,l]),e.style.width=`${100*l/n}%`,e.style.height=`${100*o/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,r)=>{const l=r.detail[e],o=l[0],c=l.slice(1);r.target.style[n]=fR[`${o}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:fR[`${o}_rgb`](c)})};return Jt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const r of Object.keys(e.detail)){const l=t[r]||n[r];l==null||l(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[r,l]of Object.entries(e)){const o=n[r];if(o){const c={detail:{[r]:l},target:t};o(c),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,r,l]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,_,T,O]=t.subarray(2,6);if(r===w&&l===_&&e===T&&n===O)return}const{style:o}=this.container;let c;if(f(this,Nh)){const{borderColor:w,borderWidth:_}=o;o.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const h=r-e,p=l-n,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0);const b=g.createElement("defs");y.append(b);const v=g.createElement("clipPath"),S=`clippath_${this.data.id}`;v.setAttribute("id",S),v.setAttribute("clipPathUnits","objectBoundingBox"),b.append(v);for(let w=2,_=t.length;w<_;w+=8){const T=t[w],O=t[w+1],N=t[w+2],I=t[w+3],z=g.createElement("rect"),L=(N-e)/h,B=(l-O)/p,X=(T-N)/h,Q=(O-I)/p;z.setAttribute("x",L),z.setAttribute("y",B),z.setAttribute("width",X),z.setAttribute("height",Q),v.append(z),c==null||c.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${B}" width="${X}" height="${Q}"/>`)}f(this,Nh)&&(c.push("</g></svg>')"),o.backgroundImage=c.join("")),this.container.append(y),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:t}=this,e=x(this,Oh,new dS({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Se("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:l,id:o,exportValues:c}of r){if(l===-1||o===e)continue;const h=typeof c=="string"?c:null,p=document.querySelector(`[data-element-id="${o}"]`);if(p&&!Hu.has(p)){It(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:h,domElement:p})}return n}for(const r of document.getElementsByName(t)){const{exportValue:l}=r,o=r.getAttribute("data-element-id");o!==e&&Hu.has(r)&&n.push({id:o,exportValue:l,domElement:r})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};cu=new WeakMap,Nh=new WeakMap,Oh=new WeakMap,Gp=new WeakSet,hS=function(t){const{container:{style:e},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:o,pageX:c,pageY:h}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-c)/l}%`,e.top=`${100*(o-t[3]+h)/o}%`,r===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(r)};let Ze=Kx;var ss,Co,sM,rM;class iM extends Ze{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});R(this,ss);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let l=!1;return e.url?(n.addLinkAttributes(r,e.url,e.newWindow),l=!0):e.action?(this._bindNamedAction(r,e.action),l=!0):e.attachment?(D(this,ss,sM).call(this,r,e.attachment,e.attachmentDest),l=!0):e.setOCGState?(D(this,ss,rM).call(this,r,e.setOCGState),l=!0):e.dest?(this._bindLink(r,e.dest),l=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),l=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),l=!0):this.isTooltipOnly&&!l&&(this._bindLink(r,""),l=!0)),this.container.classList.add("linkAnnotation"),l&&this.container.append(r),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&D(this,ss,Co).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),D(this,ss,Co).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const l of Object.keys(n.actions)){const o=r.get(l);o&&(e[o]=()=>{var c;return(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:l}}),!1})}e.onclick||(e.onclick=()=>!1),D(this,ss,Co).call(this)}_bindResetFormAction(e,n){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),D(this,ss,Co).call(this),!this._fieldObjects){It('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{var y;r==null||r();const{fields:l,refs:o,include:c}=n,h=[];if(l.length!==0||o.length!==0){const b=new Set(o);for(const v of l){const S=this._fieldObjects[v]||[];for(const{id:w}of S)b.add(w)}for(const v of Object.values(this._fieldObjects))for(const S of v)b.has(S.id)===c&&h.push(S)}else for(const b of Object.values(this._fieldObjects))h.push(...b);const p=this.annotationStorage,g=[];for(const b of h){const{id:v}=b;switch(g.push(v),b.type){case"text":{const w=b.defaultValue||"";p.setValue(v,{value:w});break}case"checkbox":case"radiobutton":{const w=b.defaultValue===b.exportValues;p.setValue(v,{value:w});break}case"combobox":case"listbox":{const w=b.defaultValue||"";p.setValue(v,{value:w});break}default:continue}const S=document.querySelector(`[data-element-id="${v}"]`);if(S){if(!Hu.has(S)){It(`_bindResetFormAction - element not allowed: ${v}`);continue}}else continue;S.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:g,name:"ResetForm"}})),!1}}}ss=new WeakSet,Co=function(){this.container.setAttribute("data-internal-link","")},sM=function(e,n,r=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var l;return(l=this.downloadManager)==null||l.openOrDownloadData(n.content,n.filename,r),!1},D(this,ss,Co).call(this)},rM=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),D(this,ss,Co).call(this)};class YB extends Ze{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class $u extends Ze{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Hn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,r,l){n.includes("mouse")?t.addEventListener(n,o=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(n,o=>{var c;if(n==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}l&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(o)}}))})}_setEventListeners(t,e,n,r){var l,o,c;for(const[h,p]of n)(p==="Action"||(l=this.data.actions)!=null&&l[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,h,p,r),p==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":_t.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||GB,l=t.style;let o;const c=2,h=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c),g=Math.round(p/(GA*r))||1,y=p/g;o=Math.min(r,h(y/GA))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-c);o=Math.min(r,h(p/GA))}l.fontSize=`calc(${o}px * var(--total-scale-factor))`,l.color=_t.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class XB extends $u{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,r){const l=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=n),l.setValue(o.id,{[r]:n})}render(){var r,l;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let c=o.value||"";const h=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;h&&c.length>h&&(c=c.slice(0,h));let p=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const g={userValue:c,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p??c,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",p??c),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Hu.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=jg,this._setRequired(n,this.data.required),h&&(n.maxLength=h),n.addEventListener("input",b=>{t.setValue(e,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),g.formattedValue=null}),n.addEventListener("resetform",b=>{const v=this.data.defaultFieldValue??"";n.value=g.userValue=v,g.formattedValue=null});let y=b=>{const{formattedValue:v}=g;v!=null&&(b.target.value=v),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",v=>{var w;if(g.focused)return;const{target:S}=v;g.userValue&&(S.value=g.userValue),g.lastCommittedValue=S.value,g.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(g.focused=!0)}),n.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const S={value(w){g.userValue=w.detail.value??"",t.setValue(e,{value:g.userValue.toString()}),w.target.value=g.userValue},formattedValue(w){const{formattedValue:_}=w.detail;g.formattedValue=_,_!=null&&w.target!==document.activeElement&&(w.target.value=_),t.setValue(e,{formattedValue:_})},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var N;const{charLimit:_}=w.detail,{target:T}=w;if(_===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",_);let O=g.userValue;!O||O.length<=_||(O=O.slice(0,_),T.value=g.userValue=O,t.setValue(e,{value:O}),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(S,v)}),n.addEventListener("keydown",v=>{var _;g.commitKey=1;let S=-1;if(v.key==="Escape"?S=0:v.key==="Enter"&&!this.data.multiLine?S=2:v.key==="Tab"&&(g.commitKey=3),S===-1)return;const{value:w}=v.target;g.lastCommittedValue!==w&&(g.lastCommittedValue=w,g.userValue=w,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:S,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const b=y;y=null,n.addEventListener("blur",v=>{var w,_;if(!g.focused||!v.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(g.focused=!1);const{value:S}=v.target;g.userValue=S,g.lastCommittedValue!==S&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:g.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),b(v)}),(l=this.data.actions)!=null&&l.Keystroke&&n.addEventListener("beforeinput",v=>{var z;g.lastCommittedValue=null;const{data:S,target:w}=v,{value:_,selectionStart:T,selectionEnd:O}=w;let N=T,I=O;switch(v.inputType){case"deleteWordBackward":{const L=_.substring(0,T).match(/\w*[^\w]*$/);L&&(N-=L[0].length);break}case"deleteWordForward":{const L=_.substring(T).match(/^[^\w]*\w*/);L&&(I+=L[0].length);break}case"deleteContentBackward":T===O&&(N-=1);break;case"deleteContentForward":T===O&&(I+=1);break}v.preventDefault(),(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,change:S||"",willCommit:!1,selStart:N,selEnd:I}})}),this._setEventListeners(n,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/h;n.classList.add("comb"),n.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class $B extends $u{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class WB extends $u{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return Hu.add(l),l.setAttribute("data-element-id",n),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,r&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=jg,l.addEventListener("change",o=>{const{name:c,checked:h}=o.target;for(const p of this._getElementsByName(c,n)){const g=h&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=g),t.setValue(p.id,{value:g})}t.setValue(n,{value:h})}),l.addEventListener("resetform",o=>{const c=e.defaultFieldValue||"Off";o.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",o=>{const c={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class aM extends $u{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let r=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(n,{value:r})),r)for(const o of this._getElementsByName(e.fieldName,n))t.setValue(o.id,{value:!1});const l=document.createElement("input");if(Hu.add(l),l.setAttribute("data-element-id",n),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=jg,l.addEventListener("change",o=>{const{name:c,checked:h}=o.target;for(const p of this._getElementsByName(c,n))t.setValue(p.id,{value:!1});t.setValue(n,{value:h})}),l.addEventListener("resetform",o=>{const c=e.defaultFieldValue;o.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;l.addEventListener("updatefromsandbox",c=>{const h={value:p=>{const g=o===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const b=g&&y.id===n;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class KB extends iM{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class QB extends $u{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Hu.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=jg;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,n.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),l=!1),r.append(y)}let o=null;if(l){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),r.prepend(g),o=()=>{g.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const c=g=>{const y=g?"value":"textContent",{options:b,multiple:v}=r;return v?Array.prototype.filter.call(b,S=>S.selected).map(S=>S[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let h=c(!1);const p=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",g=>{const y={value(b){o==null||o();const v=b.detail.value,S=new Set(Array.isArray(v)?v:[v]);for(const w of r.options)w.selected=S.has(w.value);t.setValue(e,{value:c(!0)}),h=c(!1)},multipleSelection(b){r.multiple=!0},remove(b){const v=r.options,S=b.detail.remove;v[S].selected=!1,r.remove(S),v.length>0&&Array.prototype.findIndex.call(v,_=>_.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:c(!0),items:p(b)}),h=c(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),h=c(!1)},insert(b){const{index:v,displayValue:S,exportValue:w}=b.detail.insert,_=r.children[v],T=document.createElement("option");T.textContent=S,T.value=w,_?_.before(T):r.append(T),t.setValue(e,{value:c(!0),items:p(b)}),h=c(!1)},items(b){const{items:v}=b.detail;for(;r.length!==0;)r.remove(0);for(const S of v){const{displayValue:w,exportValue:_}=S,T=document.createElement("option");T.textContent=w,T.value=_,r.append(T)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:c(!0),items:p(b)}),h=c(!1)},indices(b){const v=new Set(b.detail.indices);for(const S of b.target.options)S.selected=v.has(S.index);t.setValue(e,{value:c(!0)}),h=c(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),r.addEventListener("input",g=>{var v;const y=c(!0),b=c(!1);t.setValue(e,{value:y}),g.preventDefault(),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):r.addEventListener("input",function(g){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class dS extends Ze{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Ze._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new ZB({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${Rx}${n}`).join(",")),this.container}}var Lh,Tb,Rb,Ph,zh,Ve,ya,Ih,Yp,Xp,jh,ba,Hs,va,$p,Aa,Wp,hu,du,xe,Ny,fS,lM,oM,uM,cM,Oy,Ly,pS;class ZB{constructor({container:t,color:e,elements:n,titleObj:r,modificationDate:l,contentsObj:o,richText:c,parent:h,rect:p,parentRect:g,open:y}){R(this,xe);R(this,Lh,D(this,xe,uM).bind(this));R(this,Tb,D(this,xe,pS).bind(this));R(this,Rb,D(this,xe,Ly).bind(this));R(this,Ph,D(this,xe,Oy).bind(this));R(this,zh,null);R(this,Ve,null);R(this,ya,null);R(this,Ih,null);R(this,Yp,null);R(this,Xp,null);R(this,jh,null);R(this,ba,!1);R(this,Hs,null);R(this,va,null);R(this,$p,null);R(this,Aa,null);R(this,Wp,null);R(this,hu,null);R(this,du,!1);var b;x(this,Ve,t),x(this,Wp,r),x(this,ya,o),x(this,Aa,c),x(this,Xp,h),x(this,zh,e),x(this,$p,p),x(this,jh,g),x(this,Yp,n),x(this,Ih,Mx.toDateObject(l)),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup());for(const v of this.trigger)v.addEventListener("click",f(this,Ph)),v.addEventListener("mouseenter",f(this,Rb)),v.addEventListener("mouseleave",f(this,Tb)),v.classList.add("popupTriggerArea");for(const v of n)(b=v.container)==null||b.addEventListener("keydown",f(this,Lh));f(this,Ve).hidden=!0,y&&D(this,xe,Oy).call(this)}render(){if(f(this,Hs))return;const t=x(this,Hs,document.createElement("div"));if(t.className="popup",f(this,zh)){const l=t.style.outlineColor=_t.makeHexColor(...f(this,zh));t.style.backgroundColor=`color-mix(in srgb, ${l} 30%, white)`}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=f(this,Wp),t.append(e),f(this,Ih)){const l=document.createElement("span");l.classList.add("popupDate"),l.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),l.setAttribute("data-l10n-args",JSON.stringify({dateObj:f(this,Ih).valueOf()})),e.append(l)}const r=f(this,xe,Ny);if(r)nM.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const l=this._formatContents(f(this,ya));t.append(l)}f(this,Ve).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const r=t.split(/(?:\r\n?|\n)/);for(let l=0,o=r.length;l<o;++l){const c=r[l];n.append(document.createTextNode(c)),l<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;f(this,hu)||x(this,hu,{contentsObj:f(this,ya),richText:f(this,Aa)}),t&&x(this,va,null),e&&(x(this,Aa,D(this,xe,oM).call(this,e)),x(this,ya,null)),(n=f(this,Hs))==null||n.remove(),x(this,Hs,null)}resetEdited(){var t;f(this,hu)&&({contentsObj:ri(this,ya)._,richText:ri(this,Aa)._}=f(this,hu),x(this,hu,null),(t=f(this,Hs))==null||t.remove(),x(this,Hs,null),x(this,va,null))}forceHide(){x(this,du,this.isVisible),f(this,du)&&(f(this,Ve).hidden=!0)}maybeShow(){f(this,du)&&(f(this,Hs)||D(this,xe,Ly).call(this),x(this,du,!1),f(this,Ve).hidden=!1)}get isVisible(){return f(this,Ve).hidden===!1}}Lh=new WeakMap,Tb=new WeakMap,Rb=new WeakMap,Ph=new WeakMap,zh=new WeakMap,Ve=new WeakMap,ya=new WeakMap,Ih=new WeakMap,Yp=new WeakMap,Xp=new WeakMap,jh=new WeakMap,ba=new WeakMap,Hs=new WeakMap,va=new WeakMap,$p=new WeakMap,Aa=new WeakMap,Wp=new WeakMap,hu=new WeakMap,du=new WeakMap,xe=new WeakSet,Ny=function(){const t=f(this,Aa),e=f(this,ya);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&f(this,Aa).html||null},fS=function(){var t,e,n;return((n=(e=(t=f(this,xe,Ny))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},lM=function(){var t,e,n;return((n=(e=(t=f(this,xe,Ny))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},oM=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:f(this,xe,lM),fontSize:f(this,xe,fS)?`calc(${f(this,xe,fS)}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:r});return n},uM=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&f(this,ba))&&D(this,xe,Oy).call(this)},cM=function(){if(f(this,va)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:r,pageY:l}}}=f(this,Xp);let o=!!f(this,jh),c=o?f(this,jh):f(this,$p);for(const S of f(this,Yp))if(!c||_t.intersect(S.data.rect,c)!==null){c=S.data.rect,o=!0;break}const h=_t.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),g=o?c[2]-c[0]+5:0,y=h[0]+g,b=h[1];x(this,va,[100*(y-r)/e,100*(b-l)/n]);const{style:v}=f(this,Ve);v.left=`${f(this,va)[0]}%`,v.top=`${f(this,va)[1]}%`},Oy=function(){x(this,ba,!f(this,ba)),f(this,ba)?(D(this,xe,Ly).call(this),f(this,Ve).addEventListener("click",f(this,Ph)),f(this,Ve).addEventListener("keydown",f(this,Lh))):(D(this,xe,pS).call(this),f(this,Ve).removeEventListener("click",f(this,Ph)),f(this,Ve).removeEventListener("keydown",f(this,Lh)))},Ly=function(){f(this,Hs)||this.render(),this.isVisible?f(this,ba)&&f(this,Ve).classList.add("focused"):(D(this,xe,cM).call(this),f(this,Ve).hidden=!1,f(this,Ve).style.zIndex=parseInt(f(this,Ve).style.zIndex)+1e3)},pS=function(){f(this,Ve).classList.remove("focused"),!(f(this,ba)||!this.isVisible)&&(f(this,Ve).hidden=!0,f(this,Ve).style.zIndex=parseInt(f(this,Ve).style.zIndex)-1e3)};class hM extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=zt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Kp;class JB extends Ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,Kp,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:r}=this,l=this.svgFactory.create(n,r,!0),o=x(this,Kp,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),l.append(o),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Kp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kp=new WeakMap;var Qp;class tH extends Ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,Qp,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:r}=this,l=this.svgFactory.create(n,r,!0),o=e.borderStyle.width,c=x(this,Qp,this.svgFactory.createElement("svg:rect"));return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",n-o),c.setAttribute("height",r-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Qp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qp=new WeakMap;var Zp;class eH extends Ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,Zp,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:r}=this,l=this.svgFactory.create(n,r,!0),o=e.borderStyle.width,c=x(this,Zp,this.svgFactory.createElement("svg:ellipse"));return c.setAttribute("cx",n/2),c.setAttribute("cy",r/2),c.setAttribute("rx",n/2-o/2),c.setAttribute("ry",r/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Zp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zp=new WeakMap;var Jp;class dM extends Ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,Jp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:r,popupRef:l},width:o,height:c}=this;if(!n)return this.container;const h=this.svgFactory.create(o,c,!0);let p=[];for(let y=0,b=n.length;y<b;y+=2){const v=n[y]-e[0],S=e[3]-n[y+1];p.push(`${v},${S}`)}p=p.join(" ");const g=x(this,Jp,this.svgFactory.createElement(this.svgElementName));return g.setAttribute("points",p),g.setAttribute("stroke-width",r.width||1),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),h.append(g),this.container.append(h),!l&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Jp)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jp=new WeakMap;class nH extends dM{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class iH extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var tg,fu,eg,gS;class Ix extends Ze{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});R(this,eg);R(this,tg,null);R(this,fu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?zt.HIGHLIGHT:zt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:r,borderStyle:l,popupRef:o}}=this,{transform:c,width:h,height:p}=D(this,eg,gS).call(this,n,e),g=this.svgFactory.create(h,p,!0),y=x(this,tg,this.svgFactory.createElement("svg:g"));g.append(y),y.setAttribute("stroke-width",l.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",c);for(let b=0,v=r.length;b<v;b++){const S=this.svgFactory.createElement(this.svgElementName);f(this,fu).push(S),S.setAttribute("points",r[b].join(",")),y.append(S)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(g),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:r,rect:l}=e,o=f(this,tg);if(n>=0&&o.setAttribute("stroke-width",n||1),r)for(let c=0,h=f(this,fu).length;c<h;c++)f(this,fu)[c].setAttribute("points",r[c].join(","));if(l){const{transform:c,width:h,height:p}=D(this,eg,gS).call(this,this.data.rotation,l);o.parentElement.setAttribute("viewBox",`0 0 ${h} ${p}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return f(this,fu)}addHighlightArea(){this.container.classList.add("highlightArea")}}tg=new WeakMap,fu=new WeakMap,eg=new WeakSet,gS=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class fM extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=zt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class sH extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class rH extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class aH extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class pM extends Ze{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=zt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ng,ig,mS;class lH extends Ze{constructor(e){var r;super(e,{isRenderable:!0});R(this,ig);R(this,ng,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",D(this,ig,mS).bind(this)),x(this,ng,r);const{isMac:l}=Hn.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(l?o.metaKey:o.ctrlKey)&&D(this,ig,mS).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return f(this,ng)}addHighlightArea(){this.container.classList.add("highlightArea")}}ng=new WeakMap,ig=new WeakSet,mS=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var sg,pu,zl,rg,eo,bS,vS;const Qx=class Qx{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:r,page:l,viewport:o,structTreeLayer:c}){R(this,eo);R(this,sg,null);R(this,pu,null);R(this,zl,new Map);R(this,rg,null);this.div=t,x(this,sg,e),x(this,pu,n),x(this,rg,c||null),this.page=l,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return f(this,zl).size>0}async render(t){var o;const{annotations:e}=t,n=this.div;Fu(n,this.viewport);const r=new Map,l={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ab,annotationStorage:t.annotationStorage||new Lx,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const h=c.annotationType===sn.POPUP;if(h){const y=r.get(c.id);if(!y)continue;l.elements=y}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;l.data=c;const p=pR.create(l);if(!p.isRenderable)continue;if(!h&&c.popupRef){const y=r.get(c.popupRef);y?y.push(p):r.set(c.popupRef,[p])}const g=p.render();c.hidden&&(g.style.visibility="hidden"),await D(this,eo,bS).call(this,g,c.id),p._isEditable&&(f(this,zl).set(p.data.id,p),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(p))}D(this,eo,vS).call(this)}async addLinkAnnotations(t,e){const n={data:null,layer:this.div,linkService:e,svgFactory:new ab,parent:this};for(const r of t){r.borderStyle||(r.borderStyle=Qx._defaultBorderStyle),n.data=r;const l=pR.create(n);if(!l.isRenderable)continue;const o=l.render();await D(this,eo,bS).call(this,o,r.id)}}update({viewport:t}){const e=this.div;this.viewport=t,Fu(e,{rotation:t.rotation}),D(this,eo,vS).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(f(this,zl).values())}getEditableAnnotation(t){return f(this,zl).get(t)}static get _defaultBorderStyle(){return Jt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Lc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};sg=new WeakMap,pu=new WeakMap,zl=new WeakMap,rg=new WeakMap,eo=new WeakSet,bS=async function(t,e){var o,c;const n=t.firstChild||t,r=n.id=`${Rx}${e}`,l=await((o=f(this,rg))==null?void 0:o.getAriaAttributes(r));if(l)for(const[h,p]of l)n.setAttribute(h,p);this.div.append(t),(c=f(this,sg))==null||c.moveElementInDOM(this.div,t,n,!1)},vS=function(){var e;if(!f(this,pu))return;const t=this.div;for(const[n,r]of f(this,pu)){const l=t.querySelector(`[data-annotation-id="${n}"]`);if(!l)continue;r.className="annotationContent";const{firstChild:o}=l;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):l.append(r);const c=f(this,zl).get(n);c&&(c._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,l.id,r),c._hasNoCanvas=!1):c.canvas=r)}f(this,pu).clear()};let yS=Qx;const fy=/\r\n?|\n/g;var Us,Yi,ag,gu,Xi,on,gM,mM,yM,Py,Na,zy,Iy,bM,wS,vM;const Te=class Te extends ke{constructor(e){super({...e,name:"freeTextEditor"});R(this,on);R(this,Us);R(this,Yi,"");R(this,ag,`${this.id}-editor`);R(this,gu,null);R(this,Xi);x(this,Us,e.color||Te._defaultColor||ke._defaultLineColor),x(this,Xi,e.fontSize||Te._defaultFontSize)}static get _keyboardManager(){const e=Te.prototype,n=o=>o.isEmpty(),r=Bu.TRANSLATE_SMALL,l=Bu.TRANSLATE_BIG;return Jt(this,"_keyboardManager",new zg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-l,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[l,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-l],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,l],checker:n}]]))}static initialize(e,n){ke.initialize(e,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case ee.FREETEXT_SIZE:Te._defaultFontSize=n;break;case ee.FREETEXT_COLOR:Te._defaultColor=n;break}}updateParams(e,n){switch(e){case ee.FREETEXT_SIZE:D(this,on,gM).call(this,n);break;case ee.FREETEXT_COLOR:D(this,on,mM).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ee.FREETEXT_SIZE,Te._defaultFontSize],[ee.FREETEXT_COLOR,Te._defaultColor||ke._defaultLineColor]]}get propertiesToUpdate(){return[[ee.FREETEXT_SIZE,f(this,Xi)],[ee.FREETEXT_COLOR,f(this,Us)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Te._internalPadding*e,-(Te._internalPadding+f(this,Xi))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(zt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,gu,new AbortController);const e=this._uiManager.combinedSignal(f(this,gu));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",f(this,ag)),this._isDraggable=!0,(e=f(this,gu))==null||e.abort(),x(this,gu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=f(this,Yi),n=x(this,Yi,D(this,on,yM).call(this).trimEnd());if(e===n)return;const r=l=>{if(x(this,Yi,l),!l){this.remove();return}D(this,on,Iy).call(this),this._uiManager.rebuild(this),D(this,on,Py).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(e)},mustExec:!1}),D(this,on,Py).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Te._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",f(this,ag)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${f(this,Xi)}px * var(--total-scale-factor))`,r.color=f(this,Us),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Ox(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){const[l,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[h,p]=this.getInitialTranslation();[h,p]=this.pageTranslationToScreen(h,p);const[g,y]=this.pageDimensions,[b,v]=this.pageTranslation;let S,w;switch(this.rotation){case 0:S=e+(c[0]-b)/g,w=n+this.height-(c[1]-v)/y;break;case 90:S=e+(c[0]-b)/g,w=n-(c[1]-v)/y,[h,p]=[p,-h];break;case 180:S=e-this.width+(c[0]-b)/g,w=n-(c[1]-v)/y,[h,p]=[-h,-p];break;case 270:S=e+(c[0]-b-this.height*y)/g,w=n+(c[1]-v-this.width*g)/y,[h,p]=[-p,h];break}this.setAt(S*l,w*o,h,p)}else this._moveAfterPaste(e,n);D(this,on,Iy).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var S,w,_;const n=e.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const l=D(S=Te,Na,wS).call(S,n.getData("text")||"").replaceAll(fy,`
`);if(!l)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!l.includes(`
`)){c.insertNode(document.createTextNode(l)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:h,startOffset:p}=c,g=[],y=[];if(h.nodeType===Node.TEXT_NODE){const T=h.parentElement;if(y.push(h.nodeValue.slice(p).replaceAll(fy,"")),T!==this.editorDiv){let O=g;for(const N of this.editorDiv.childNodes){if(N===T){O=y;continue}O.push(D(w=Te,Na,zy).call(w,N))}}g.push(h.nodeValue.slice(0,p).replaceAll(fy,""))}else if(h===this.editorDiv){let T=g,O=0;for(const N of this.editorDiv.childNodes)O++===p&&(T=y),T.push(D(_=Te,Na,zy).call(_,N))}x(this,Yi,`${g.join(`
`)}${l}${y.join(`
`)}`),D(this,on,Iy).call(this);const b=new Range;let v=Math.sumPrecise(g.map(T=>T.length));for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const O=T.nodeValue.length;if(v<=O){b.setStart(T,v),b.setEnd(T,v);break}v-=O}o.removeAllRanges(),o.addRange(b)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,r){var c;let l=null;if(e instanceof hM){const{data:{defaultAppearanceData:{fontSize:h,fontColor:p},rect:g,rotation:y,id:b,popupRef:v},textContent:S,textPosition:w,parent:{page:{pageNumber:_}}}=e;if(!S||S.length===0)return null;l=e={annotationType:zt.FREETEXT,color:Array.from(p),fontSize:h,value:S.join(`
`),position:w,pageIndex:_-1,rect:g.slice(0),rotation:y,id:b,deleted:!1,popupRef:v}}const o=await super.deserialize(e,n,r);return x(o,Xi,e.fontSize),x(o,Us,_t.makeHexColor(...e.color)),x(o,Yi,D(c=Te,Na,wS).call(c,e.value)),o.annotationElementId=e.id||null,o._initialData=l,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Te._internalPadding*this.parentScale,r=this.getRect(n,n),l=ke._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:f(this,Us)),o={annotationType:zt.FREETEXT,color:l,fontSize:f(this,Xi),value:D(this,on,bM).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!D(this,on,vM).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:r}=n;r.fontSize=`calc(${f(this,Xi)}px * var(--total-scale-factor))`,r.color=f(this,Us),n.replaceChildren();for(const o of f(this,Yi).split(`
`)){const c=document.createElement("div");c.append(o?document.createTextNode(o):document.createElement("br")),n.append(c)}const l=Te._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(l,l),popupContent:f(this,Yi)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Us=new WeakMap,Yi=new WeakMap,ag=new WeakMap,gu=new WeakMap,Xi=new WeakMap,on=new WeakSet,gM=function(e){const n=l=>{this.editorDiv.style.fontSize=`calc(${l}px * var(--total-scale-factor))`,this.translate(0,-(l-f(this,Xi))*this.parentScale),x(this,Xi,l),D(this,on,Py).call(this)},r=f(this,Xi);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},mM=function(e){const n=l=>{x(this,Us,this.editorDiv.style.color=l)},r=f(this,Us);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},yM=function(){var r;const e=[];this.editorDiv.normalize();let n=null;for(const l of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&l.nodeName==="BR"||(e.push(D(r=Te,Na,zy).call(r,l)),n=l);return e.join(`
`)},Py=function(){const[e,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:l,div:o}=this,c=o.style.display,h=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",l.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/n):(this.width=r.height/e,this.height=r.width/n),this.fixAndSetPosition()},Na=new WeakSet,zy=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(fy,"")},Iy=function(){if(this.editorDiv.replaceChildren(),!!f(this,Yi))for(const e of f(this,Yi).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},bM=function(){return f(this,Yi).replaceAll(" "," ")},wS=function(e){return e.replaceAll(" "," ")},vM=function(e){const{value:n,fontSize:r,color:l,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==r||e.color.some((c,h)=>c!==l[h])||e.pageIndex!==o},R(Te,Na),mt(Te,"_freeTextDefaultContent",""),mt(Te,"_internalPadding",0),mt(Te,"_defaultColor",null),mt(Te,"_defaultFontSize",10),mt(Te,"_type","freetext"),mt(Te,"_editorType",zt.FREETEXT);let AS=Te;class wt{toSVGPath(){Se("Abstract method `toSVGPath` must be implemented.")}get box(){Se("Abstract getter `box` must be implemented.")}serialize(t,e){Se("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,r,l,o){o||(o=new Float32Array(t.length));for(let c=0,h=t.length;c<h;c+=2)o[c]=e+t[c]*r,o[c+1]=n+t[c+1]*l;return o}static _rescaleAndSwap(t,e,n,r,l,o){o||(o=new Float32Array(t.length));for(let c=0,h=t.length;c<h;c+=2)o[c]=e+t[c+1]*r,o[c+1]=n+t[c]*l;return o}static _translate(t,e,n,r){r||(r=new Float32Array(t.length));for(let l=0,o=t.length;l<o;l+=2)r[l]=e+t[l],r[l+1]=n+t[l+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,r,l){switch(l){case 90:return[1-e/n,t/r];case 180:return[1-t/n,1-e/r];case 270:return[e/n,1-t/r];default:return[t/n,e/r]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,r,l,o){return[(t+5*n)/6,(e+5*r)/6,(5*n+l)/6,(5*r+o)/6,(n+l)/2,(r+o)/2]}}mt(wt,"PRECISION",1e-4);var $i,qs,Fh,Bh,Sr,Kt,mu,yu,lg,og,Hh,Uh,Il,ug,Db,kb,yn,jf,AM,wM,SM,xM,EM,_M;const ta=class ta{constructor({x:t,y:e},n,r,l,o,c=0){R(this,yn);R(this,$i);R(this,qs,[]);R(this,Fh);R(this,Bh);R(this,Sr,[]);R(this,Kt,new Float32Array(18));R(this,mu);R(this,yu);R(this,lg);R(this,og);R(this,Hh);R(this,Uh);R(this,Il,[]);x(this,$i,n),x(this,Uh,l*r),x(this,Bh,o),f(this,Kt).set([NaN,NaN,NaN,NaN,t,e],6),x(this,Fh,c),x(this,og,f(ta,ug)*r),x(this,lg,f(ta,kb)*r),x(this,Hh,r),f(this,Il).push(t,e)}isEmpty(){return isNaN(f(this,Kt)[8])}add({x:t,y:e}){var Q;x(this,mu,t),x(this,yu,e);const[n,r,l,o]=f(this,$i);let[c,h,p,g]=f(this,Kt).subarray(8,12);const y=t-p,b=e-g,v=Math.hypot(y,b);if(v<f(this,lg))return!1;const S=v-f(this,og),w=S/v,_=w*y,T=w*b;let O=c,N=h;c=p,h=g,p+=_,g+=T,(Q=f(this,Il))==null||Q.push(t,e);const I=-T/S,z=_/S,L=I*f(this,Uh),B=z*f(this,Uh);return f(this,Kt).set(f(this,Kt).subarray(2,8),0),f(this,Kt).set([p+L,g+B],4),f(this,Kt).set(f(this,Kt).subarray(14,18),12),f(this,Kt).set([p-L,g-B],16),isNaN(f(this,Kt)[6])?(f(this,Sr).length===0&&(f(this,Kt).set([c+L,h+B],2),f(this,Sr).push(NaN,NaN,NaN,NaN,(c+L-n)/l,(h+B-r)/o),f(this,Kt).set([c-L,h-B],14),f(this,qs).push(NaN,NaN,NaN,NaN,(c-L-n)/l,(h-B-r)/o)),f(this,Kt).set([O,N,c,h,p,g],6),!this.isEmpty()):(f(this,Kt).set([O,N,c,h,p,g],6),Math.abs(Math.atan2(N-h,O-c)-Math.atan2(T,_))<Math.PI/2?([c,h,p,g]=f(this,Kt).subarray(2,6),f(this,Sr).push(NaN,NaN,NaN,NaN,((c+p)/2-n)/l,((h+g)/2-r)/o),[c,h,O,N]=f(this,Kt).subarray(14,18),f(this,qs).push(NaN,NaN,NaN,NaN,((O+c)/2-n)/l,((N+h)/2-r)/o),!0):([O,N,c,h,p,g]=f(this,Kt).subarray(0,6),f(this,Sr).push(((O+5*c)/6-n)/l,((N+5*h)/6-r)/o,((5*c+p)/6-n)/l,((5*h+g)/6-r)/o,((c+p)/2-n)/l,((h+g)/2-r)/o),[p,g,c,h,O,N]=f(this,Kt).subarray(12,18),f(this,qs).push(((O+5*c)/6-n)/l,((N+5*h)/6-r)/o,((5*c+p)/6-n)/l,((5*h+g)/6-r)/o,((c+p)/2-n)/l,((h+g)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=f(this,Sr),e=f(this,qs);if(isNaN(f(this,Kt)[6])&&!this.isEmpty())return D(this,yn,AM).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);D(this,yn,SM).call(this,n);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return D(this,yn,wM).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,r,l,o){return new CM(t,e,n,r,l,o)}getOutlines(){var y;const t=f(this,Sr),e=f(this,qs),n=f(this,Kt),[r,l,o,c]=f(this,$i),h=new Float32Array((((y=f(this,Il))==null?void 0:y.length)??0)+2);for(let b=0,v=h.length-2;b<v;b+=2)h[b]=(f(this,Il)[b]-r)/o,h[b+1]=(f(this,Il)[b+1]-l)/c;if(h[h.length-2]=(f(this,mu)-r)/o,h[h.length-1]=(f(this,yu)-l)/c,isNaN(n[6])&&!this.isEmpty())return D(this,yn,xM).call(this,h);const p=new Float32Array(f(this,Sr).length+24+f(this,qs).length);let g=t.length;for(let b=0;b<g;b+=2){if(isNaN(t[b])){p[b]=p[b+1]=NaN;continue}p[b]=t[b],p[b+1]=t[b+1]}g=D(this,yn,_M).call(this,p,g);for(let b=e.length-6;b>=6;b-=6)for(let v=0;v<6;v+=2){if(isNaN(e[b+v])){p[g]=p[g+1]=NaN,g+=2;continue}p[g]=e[b+v],p[g+1]=e[b+v+1],g+=2}return D(this,yn,EM).call(this,p,g),this.newFreeDrawOutline(p,h,f(this,$i),f(this,Hh),f(this,Fh),f(this,Bh))}};$i=new WeakMap,qs=new WeakMap,Fh=new WeakMap,Bh=new WeakMap,Sr=new WeakMap,Kt=new WeakMap,mu=new WeakMap,yu=new WeakMap,lg=new WeakMap,og=new WeakMap,Hh=new WeakMap,Uh=new WeakMap,Il=new WeakMap,ug=new WeakMap,Db=new WeakMap,kb=new WeakMap,yn=new WeakSet,jf=function(){const t=f(this,Kt).subarray(4,6),e=f(this,Kt).subarray(16,18),[n,r,l,o]=f(this,$i);return[(f(this,mu)+(t[0]-e[0])/2-n)/l,(f(this,yu)+(t[1]-e[1])/2-r)/o,(f(this,mu)+(e[0]-t[0])/2-n)/l,(f(this,yu)+(e[1]-t[1])/2-r)/o]},AM=function(){const[t,e,n,r]=f(this,$i),[l,o,c,h]=D(this,yn,jf).call(this);return`M${(f(this,Kt)[2]-t)/n} ${(f(this,Kt)[3]-e)/r} L${(f(this,Kt)[4]-t)/n} ${(f(this,Kt)[5]-e)/r} L${l} ${o} L${c} ${h} L${(f(this,Kt)[16]-t)/n} ${(f(this,Kt)[17]-e)/r} L${(f(this,Kt)[14]-t)/n} ${(f(this,Kt)[15]-e)/r} Z`},wM=function(t){const e=f(this,qs);t.push(`L${e[4]} ${e[5]} Z`)},SM=function(t){const[e,n,r,l]=f(this,$i),o=f(this,Kt).subarray(4,6),c=f(this,Kt).subarray(16,18),[h,p,g,y]=D(this,yn,jf).call(this);t.push(`L${(o[0]-e)/r} ${(o[1]-n)/l} L${h} ${p} L${g} ${y} L${(c[0]-e)/r} ${(c[1]-n)/l}`)},xM=function(t){const e=f(this,Kt),[n,r,l,o]=f(this,$i),[c,h,p,g]=D(this,yn,jf).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-n)/l,(e[3]-r)/o,NaN,NaN,NaN,NaN,(e[4]-n)/l,(e[5]-r)/o,NaN,NaN,NaN,NaN,c,h,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(e[16]-n)/l,(e[17]-r)/o,NaN,NaN,NaN,NaN,(e[14]-n)/l,(e[15]-r)/o],0),this.newFreeDrawOutline(y,t,f(this,$i),f(this,Hh),f(this,Fh),f(this,Bh))},EM=function(t,e){const n=f(this,qs);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},_M=function(t,e){const n=f(this,Kt).subarray(4,6),r=f(this,Kt).subarray(16,18),[l,o,c,h]=f(this,$i),[p,g,y,b]=D(this,yn,jf).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-l)/c,(n[1]-o)/h,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-l)/c,(r[1]-o)/h],e),e+=24},R(ta,ug,8),R(ta,Db,2),R(ta,kb,f(ta,ug)+f(ta,Db));let lb=ta;var qh,bu,wa,cg,Wi,hg,Qe,Mb,TM;class CM extends wt{constructor(e,n,r,l,o,c){super();R(this,Mb);R(this,qh);R(this,bu,new Float32Array(4));R(this,wa);R(this,cg);R(this,Wi);R(this,hg);R(this,Qe);x(this,Qe,e),x(this,Wi,n),x(this,qh,r),x(this,hg,l),x(this,wa,o),x(this,cg,c),this.lastPoint=[NaN,NaN],D(this,Mb,TM).call(this,c);const[h,p,g,y]=f(this,bu);for(let b=0,v=e.length;b<v;b+=2)e[b]=(e[b]-h)/g,e[b+1]=(e[b+1]-p)/y;for(let b=0,v=n.length;b<v;b+=2)n[b]=(n[b]-h)/g,n[b+1]=(n[b+1]-p)/y}toSVGPath(){const e=[`M${f(this,Qe)[4]} ${f(this,Qe)[5]}`];for(let n=6,r=f(this,Qe).length;n<r;n+=6){if(isNaN(f(this,Qe)[n])){e.push(`L${f(this,Qe)[n+4]} ${f(this,Qe)[n+5]}`);continue}e.push(`C${f(this,Qe)[n]} ${f(this,Qe)[n+1]} ${f(this,Qe)[n+2]} ${f(this,Qe)[n+3]} ${f(this,Qe)[n+4]} ${f(this,Qe)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,r,l],o){const c=r-e,h=l-n;let p,g;switch(o){case 0:p=wt._rescale(f(this,Qe),e,l,c,-h),g=wt._rescale(f(this,Wi),e,l,c,-h);break;case 90:p=wt._rescaleAndSwap(f(this,Qe),e,n,c,h),g=wt._rescaleAndSwap(f(this,Wi),e,n,c,h);break;case 180:p=wt._rescale(f(this,Qe),r,n,-c,h),g=wt._rescale(f(this,Wi),r,n,-c,h);break;case 270:p=wt._rescaleAndSwap(f(this,Qe),r,l,-c,-h),g=wt._rescaleAndSwap(f(this,Wi),r,l,-c,-h);break}return{outline:Array.from(p),points:[Array.from(g)]}}get box(){return f(this,bu)}newOutliner(e,n,r,l,o,c=0){return new lb(e,n,r,l,o,c)}getNewOutline(e,n){const[r,l,o,c]=f(this,bu),[h,p,g,y]=f(this,qh),b=o*g,v=c*y,S=r*g+h,w=l*y+p,_=this.newOutliner({x:f(this,Wi)[0]*b+S,y:f(this,Wi)[1]*v+w},f(this,qh),f(this,hg),e,f(this,cg),n??f(this,wa));for(let T=2;T<f(this,Wi).length;T+=2)_.add({x:f(this,Wi)[T]*b+S,y:f(this,Wi)[T+1]*v+w});return _.getOutlines()}}qh=new WeakMap,bu=new WeakMap,wa=new WeakMap,cg=new WeakMap,Wi=new WeakMap,hg=new WeakMap,Qe=new WeakMap,Mb=new WeakSet,TM=function(e){const n=f(this,Qe);let r=n[4],l=n[5];const o=[r,l,r,l];let c=r,h=l;const p=e?Math.max:Math.min;for(let y=6,b=n.length;y<b;y+=6){const v=n[y+4],S=n[y+5];if(isNaN(n[y]))_t.pointBoundingBox(v,S,o),h<S?(c=v,h=S):h===S&&(c=p(c,v));else{const w=[1/0,1/0,-1/0,-1/0];_t.bezierBoundingBox(r,l,...n.slice(y,y+6),w),_t.rectBoundingBox(...w,o),h<w[3]?(c=w[2],h=w[3]):h===w[3]&&(c=p(c,w[2]))}r=v,l=S}const g=f(this,bu);g[0]=o[0]-f(this,wa),g[1]=o[1]-f(this,wa),g[2]=o[2]-o[0]+2*f(this,wa),g[3]=o[3]-o[1]+2*f(this,wa),this.lastPoint=[c,h]};var dg,fg,jl,Vs,fi,RM,jy,DM,kM,xS;class SS{constructor(t,e=0,n=0,r=!0){R(this,fi);R(this,dg);R(this,fg);R(this,jl,[]);R(this,Vs,[]);const l=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:v,y:S,width:w,height:_}of t){const T=Math.floor((v-e)/o)*o,O=Math.ceil((v+w+e)/o)*o,N=Math.floor((S-e)/o)*o,I=Math.ceil((S+_+e)/o)*o,z=[T,N,I,!0],L=[O,N,I,!1];f(this,jl).push(z,L),_t.rectBoundingBox(T,N,O,I,l)}const c=l[2]-l[0]+2*n,h=l[3]-l[1]+2*n,p=l[0]-n,g=l[1]-n,y=f(this,jl).at(r?-1:-2),b=[y[0],y[2]];for(const v of f(this,jl)){const[S,w,_]=v;v[0]=(S-p)/c,v[1]=(w-g)/h,v[2]=(_-g)/h}x(this,dg,new Float32Array([p,g,c,h])),x(this,fg,b)}getOutlines(){f(this,jl).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of f(this,jl))e[3]?(t.push(...D(this,fi,xS).call(this,e)),D(this,fi,DM).call(this,e)):(D(this,fi,kM).call(this,e),t.push(...D(this,fi,xS).call(this,e)));return D(this,fi,RM).call(this,t)}}dg=new WeakMap,fg=new WeakMap,jl=new WeakMap,Vs=new WeakMap,fi=new WeakSet,RM=function(t){const e=[],n=new Set;for(const o of t){const[c,h,p]=o;e.push([c,h,o],[c,p,o])}e.sort((o,c)=>o[1]-c[1]||o[0]-c[0]);for(let o=0,c=e.length;o<c;o+=2){const h=e[o][2],p=e[o+1][2];h.push(p),p.push(h),n.add(h),n.add(p)}const r=[];let l;for(;n.size>0;){const o=n.values().next().value;let[c,h,p,g,y]=o;n.delete(o);let b=c,v=h;for(l=[c,p],r.push(l);;){let S;if(n.has(g))S=g;else if(n.has(y))S=y;else break;n.delete(S),[c,h,p,g,y]=S,b!==c&&(l.push(b,v,c,v===h?h:p),b=c),v=v===h?p:h}l.push(b,v)}return new oH(r,f(this,dg),f(this,fg))},jy=function(t){const e=f(this,Vs);let n=0,r=e.length-1;for(;n<=r;){const l=n+r>>1,o=e[l][0];if(o===t)return l;o<t?n=l+1:r=l-1}return r+1},DM=function([,t,e]){const n=D(this,fi,jy).call(this,t);f(this,Vs).splice(n,0,[t,e])},kM=function([,t,e]){const n=D(this,fi,jy).call(this,t);for(let r=n;r<f(this,Vs).length;r++){const[l,o]=f(this,Vs)[r];if(l!==t)break;if(l===t&&o===e){f(this,Vs).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[l,o]=f(this,Vs)[r];if(l!==t)break;if(l===t&&o===e){f(this,Vs).splice(r,1);return}}},xS=function(t){const[e,n,r]=t,l=[[e,n,r]],o=D(this,fi,jy).call(this,r);for(let c=0;c<o;c++){const[h,p]=f(this,Vs)[c];for(let g=0,y=l.length;g<y;g++){const[,b,v]=l[g];if(!(p<=b||v<=h)){if(b>=h){if(v>p)l[g][1]=p;else{if(y===1)return[];l.splice(g,1),g--,y--}continue}l[g][2]=h,v>p&&l.push([e,p,v])}}}return l};var pg,Vh;class oH extends wt{constructor(e,n,r){super();R(this,pg);R(this,Vh);x(this,Vh,e),x(this,pg,n),this.lastPoint=r}toSVGPath(){const e=[];for(const n of f(this,Vh)){let[r,l]=n;e.push(`M${r} ${l}`);for(let o=2;o<n.length;o+=2){const c=n[o],h=n[o+1];c===r?(e.push(`V${h}`),l=h):h===l&&(e.push(`H${c}`),r=c)}e.push("Z")}return e.join(" ")}serialize([e,n,r,l],o){const c=[],h=r-e,p=l-n;for(const g of f(this,Vh)){const y=new Array(g.length);for(let b=0;b<g.length;b+=2)y[b]=e+g[b]*h,y[b+1]=l-g[b+1]*p;c.push(y)}return c}get box(){return f(this,pg)}get classNamesForOutlining(){return["highlightOutline"]}}pg=new WeakMap,Vh=new WeakMap;class ES extends lb{newFreeDrawOutline(t,e,n,r,l,o){return new uH(t,e,n,r,l,o)}}class uH extends CM{newOutliner(t,e,n,r,l,o=0){return new ES(t,e,n,r,l,o)}}var Gs,vu,Gh,mn,gg,Yh,mg,yg,Fl,Ys,Xh,bg,we,_S,CS,TS,To,MM,hl;const Ei=class Ei{constructor({editor:t=null,uiManager:e=null}){R(this,we);R(this,Gs,null);R(this,vu,null);R(this,Gh);R(this,mn,null);R(this,gg,!1);R(this,Yh,!1);R(this,mg,null);R(this,yg);R(this,Fl,null);R(this,Ys,null);R(this,Xh);var n;t?(x(this,Yh,!1),x(this,Xh,ee.HIGHLIGHT_COLOR),x(this,mg,t)):(x(this,Yh,!0),x(this,Xh,ee.HIGHLIGHT_DEFAULT_COLOR)),x(this,Ys,(t==null?void 0:t._uiManager)||e),x(this,yg,f(this,Ys)._eventBus),x(this,Gh,(t==null?void 0:t.color)||((n=f(this,Ys))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),f(Ei,bg)||x(Ei,bg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Jt(this,"_keyboardManager",new zg([[["Escape","mac+Escape"],Ei.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ei.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ei.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ei.prototype._moveToPrevious],[["Home","mac+Home"],Ei.prototype._moveToBeginning],[["End","mac+End"],Ei.prototype._moveToEnd]]))}renderButton(){const t=x(this,Gs,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=f(this,Ys)._signal;t.addEventListener("click",D(this,we,To).bind(this),{signal:e}),t.addEventListener("keydown",D(this,we,TS).bind(this),{signal:e});const n=x(this,vu,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=f(this,Gh),t.append(n),t}renderMainDropdown(){const t=x(this,mn,D(this,we,_S).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===f(this,Gs)){D(this,we,To).call(this,t);return}const e=t.target.getAttribute("data-color");e&&D(this,we,CS).call(this,e,t)}_moveToNext(t){var e,n;if(!f(this,we,hl)){D(this,we,To).call(this,t);return}if(t.target===f(this,Gs)){(e=f(this,mn).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=f(this,mn))==null?void 0:e.firstChild)||t.target===f(this,Gs)){f(this,we,hl)&&this._hideDropdownFromKeyboard();return}f(this,we,hl)||D(this,we,To).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!f(this,we,hl)){D(this,we,To).call(this,t);return}(e=f(this,mn).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!f(this,we,hl)){D(this,we,To).call(this,t);return}(e=f(this,mn).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=f(this,mn))==null||t.classList.add("hidden"),(e=f(this,Fl))==null||e.abort(),x(this,Fl,null)}_hideDropdownFromKeyboard(){var t;if(!f(this,Yh)){if(!f(this,we,hl)){(t=f(this,mg))==null||t.unselect();return}this.hideDropdown(),f(this,Gs).focus({preventScroll:!0,focusVisible:f(this,gg)})}}updateColor(t){if(f(this,vu)&&(f(this,vu).style.backgroundColor=t),!f(this,mn))return;const e=f(this,Ys).highlightColors.values();for(const n of f(this,mn).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=f(this,Gs))==null||t.remove(),x(this,Gs,null),x(this,vu,null),(e=f(this,mn))==null||e.remove(),x(this,mn,null)}};Gs=new WeakMap,vu=new WeakMap,Gh=new WeakMap,mn=new WeakMap,gg=new WeakMap,Yh=new WeakMap,mg=new WeakMap,yg=new WeakMap,Fl=new WeakMap,Ys=new WeakMap,Xh=new WeakMap,bg=new WeakMap,we=new WeakSet,_S=function(){const t=document.createElement("div"),e=f(this,Ys)._signal;t.addEventListener("contextmenu",Zs,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of f(this,Ys).highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",r),l.title=n,l.setAttribute("data-l10n-id",f(Ei,bg)[n]);const o=document.createElement("span");l.append(o),o.className="swatch",o.style.backgroundColor=r,l.setAttribute("aria-selected",r===f(this,Gh)),l.addEventListener("click",D(this,we,CS).bind(this,r),{signal:e}),t.append(l)}return t.addEventListener("keydown",D(this,we,TS).bind(this),{signal:e}),t},CS=function(t,e){e.stopPropagation(),f(this,yg).dispatch("switchannotationeditorparams",{source:this,type:f(this,Xh),value:t})},TS=function(t){Ei._keyboardManager.exec(this,t)},To=function(t){if(f(this,we,hl)){this.hideDropdown();return}if(x(this,gg,t.detail===0),f(this,Fl)||(x(this,Fl,new AbortController),window.addEventListener("pointerdown",D(this,we,MM).bind(this),{signal:f(this,Ys).combinedSignal(f(this,Fl))})),f(this,mn)){f(this,mn).classList.remove("hidden");return}const e=x(this,mn,D(this,we,_S).call(this));f(this,Gs).append(e)},MM=function(t){var e;(e=f(this,mn))!=null&&e.contains(t.target)||this.hideDropdown()},hl=function(){return f(this,mn)&&!f(this,mn).classList.contains("hidden")},R(Ei,bg,null);let ob=Ei;var $h,vg,Sa,Au,Wh,Ti,Ag,wg,wu,Ss,Ki,Pn,Kh,xa,Qn,Qh,xs,Sg,Ht,RS,Fy,NM,OM,LM,DS,Ro,Ts,Bc,PM,By,Ff,zM,IM,jM,FM,BM;const oe=class oe extends ke{constructor(e){super({...e,name:"highlightEditor"});R(this,Ht);R(this,$h,null);R(this,vg,0);R(this,Sa);R(this,Au,null);R(this,Wh,null);R(this,Ti,null);R(this,Ag,null);R(this,wg,0);R(this,wu,null);R(this,Ss,null);R(this,Ki,null);R(this,Pn,!1);R(this,Kh,null);R(this,xa);R(this,Qn,null);R(this,Qh,"");R(this,xs);R(this,Sg,"");this.color=e.color||oe._defaultColor,x(this,xs,e.thickness||oe._defaultThickness),x(this,xa,e.opacity||oe._defaultOpacity),x(this,Sa,e.boxes||null),x(this,Sg,e.methodOfCreation||""),x(this,Qh,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(x(this,Pn,!0),D(this,Ht,Fy).call(this,e),D(this,Ht,Ro).call(this)):f(this,Sa)&&(x(this,$h,e.anchorNode),x(this,vg,e.anchorOffset),x(this,Ag,e.focusNode),x(this,wg,e.focusOffset),D(this,Ht,RS).call(this),D(this,Ht,Ro).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=oe.prototype;return Jt(this,"_keyboardManager",new zg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:f(this,Pn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:f(this,xs),methodOfCreation:f(this,Sg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var r;ke.initialize(e,n),oe._defaultColor||(oe._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case ee.HIGHLIGHT_DEFAULT_COLOR:oe._defaultColor=n;break;case ee.HIGHLIGHT_THICKNESS:oe._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return f(this,Kh)}updateParams(e,n){switch(e){case ee.HIGHLIGHT_COLOR:D(this,Ht,NM).call(this,n);break;case ee.HIGHLIGHT_THICKNESS:D(this,Ht,OM).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ee.HIGHLIGHT_DEFAULT_COLOR,oe._defaultColor],[ee.HIGHLIGHT_THICKNESS,oe._defaultThickness]]}get propertiesToUpdate(){return[[ee.HIGHLIGHT_COLOR,this.color||oe._defaultColor],[ee.HIGHLIGHT_THICKNESS,f(this,xs)||oe._defaultThickness],[ee.HIGHLIGHT_FREE,f(this,Pn)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(x(this,Wh,new ob({editor:this})),e.addColorPicker(f(this,Wh))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(D(this,Ht,Ff).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,D(this,Ht,Ff).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){D(this,Ht,DS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,Ht,Ro).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?D(this,Ht,DS).call(this):e&&(D(this,Ht,Ro).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var l,o,c;const{drawLayer:n}=this.parent;let r;f(this,Pn)?(e=(e-this.rotation+360)%360,r=D(l=oe,Ts,Bc).call(l,f(this,Ss).box,e)):r=D(o=oe,Ts,Bc).call(o,[this.x,this.y,this.width,this.height],e),n.updateProperties(f(this,Ki),{bbox:r,root:{"data-main-rotation":e}}),n.updateProperties(f(this,Qn),{bbox:D(c=oe,Ts,Bc).call(c,f(this,Ti).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();f(this,Qh)&&(e.setAttribute("aria-label",f(this,Qh)),e.setAttribute("role","mark")),f(this,Pn)?e.classList.add("free"):this.div.addEventListener("keydown",D(this,Ht,PM).bind(this),{signal:this._uiManager._signal});const n=x(this,wu,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=f(this,Au);const[r,l]=this.parentDimensions;return this.setDims(this.width*r,this.height*l),Ox(this,f(this,wu),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(f(this,Qn),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(f(this,Qn),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:D(this,Ht,By).call(this,!0);break;case 1:case 3:D(this,Ht,By).call(this,!1);break}}select(){var e;super.select(),f(this,Qn)&&((e=this.parent)==null||e.drawLayer.updateProperties(f(this,Qn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),f(this,Qn)&&((e=this.parent)==null||e.drawLayer.updateProperties(f(this,Qn),{rootClass:{selected:!1}}),f(this,Pn)||D(this,Ht,By).call(this,!1))}get _mustFixPosition(){return!f(this,Pn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(f(this,Ki),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(f(this,Qn),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:r,x:l,y:o}){const{x:c,y:h,width:p,height:g}=r.getBoundingClientRect(),y=new AbortController,b=e.combinedSignal(y),v=S=>{y.abort(),D(this,Ts,FM).call(this,e,S)};window.addEventListener("blur",v,{signal:b}),window.addEventListener("pointerup",v,{signal:b}),window.addEventListener("pointerdown",an,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Zs,{signal:b}),r.addEventListener("pointermove",D(this,Ts,jM).bind(this,e),{signal:b}),this._freeHighlight=new ES({x:l,y:o},[c,h,p,g],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,r){var w,_,T,O;let l=null;if(e instanceof fM){const{data:{quadPoints:N,rect:I,rotation:z,id:L,color:B,opacity:X,popupRef:Q},parent:{page:{pageNumber:rt}}}=e;l=e={annotationType:zt.HIGHLIGHT,color:Array.from(B),opacity:X,quadPoints:N,boxes:null,pageIndex:rt-1,rect:I.slice(0),rotation:z,id:L,deleted:!1,popupRef:Q}}else if(e instanceof Ix){const{data:{inkLists:N,rect:I,rotation:z,id:L,color:B,borderStyle:{rawWidth:X},popupRef:Q},parent:{page:{pageNumber:rt}}}=e;l=e={annotationType:zt.HIGHLIGHT,color:Array.from(B),thickness:X,inkLists:N,boxes:null,pageIndex:rt-1,rect:I.slice(0),rotation:z,id:L,deleted:!1,popupRef:Q}}const{color:o,quadPoints:c,inkLists:h,opacity:p}=e,g=await super.deserialize(e,n,r);g.color=_t.makeHexColor(...o),x(g,xa,p||1),h&&x(g,xs,e.thickness),g.annotationElementId=e.id||null,g._initialData=l;const[y,b]=g.pageDimensions,[v,S]=g.pageTranslation;if(c){const N=x(g,Sa,[]);for(let I=0;I<c.length;I+=8)N.push({x:(c[I]-v)/y,y:1-(c[I+1]-S)/b,width:(c[I+2]-c[I])/y,height:(c[I+1]-c[I+5])/b});D(w=g,Ht,RS).call(w),D(_=g,Ht,Ro).call(_),g.rotate(g.rotation)}else if(h){x(g,Pn,!0);const N=h[0],I={x:N[0]-v,y:b-(N[1]-S)},z=new ES(I,[0,0,y,b],1,f(g,xs)/2,!0,.001);for(let X=0,Q=N.length;X<Q;X+=2)I.x=N[X]-v,I.y=b-(N[X+1]-S),z.add(I);const{id:L,clipPathId:B}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:g.color,"fill-opacity":g._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:z.toSVGPath()}},!0,!0);D(T=g,Ht,Fy).call(T,{highlightOutlines:z.getOutlines(),highlightId:L,clipPathId:B}),D(O=g,Ht,Ro).call(O),g.rotate(g.parentRotation)}return g}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),r=ke._colorManager.convert(this.color),l={annotationType:zt.HIGHLIGHT,color:r,opacity:f(this,xa),thickness:f(this,xs),quadPoints:D(this,Ht,zM).call(this),outlines:D(this,Ht,IM).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:D(this,Ht,Ff).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!D(this,Ht,BM).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};$h=new WeakMap,vg=new WeakMap,Sa=new WeakMap,Au=new WeakMap,Wh=new WeakMap,Ti=new WeakMap,Ag=new WeakMap,wg=new WeakMap,wu=new WeakMap,Ss=new WeakMap,Ki=new WeakMap,Pn=new WeakMap,Kh=new WeakMap,xa=new WeakMap,Qn=new WeakMap,Qh=new WeakMap,xs=new WeakMap,Sg=new WeakMap,Ht=new WeakSet,RS=function(){const e=new SS(f(this,Sa),.001);x(this,Ss,e.getOutlines()),[this.x,this.y,this.width,this.height]=f(this,Ss).box;const n=new SS(f(this,Sa),.0025,.001,this._uiManager.direction==="ltr");x(this,Ti,n.getOutlines());const{lastPoint:r}=f(this,Ti);x(this,Kh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Fy=function({highlightOutlines:e,highlightId:n,clipPathId:r}){var y,b;if(x(this,Ss,e),x(this,Ti,e.getNewOutline(f(this,xs)/2+1.5,.0025)),n>=0)x(this,Ki,n),x(this,Au,r),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),x(this,Qn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:f(this,Ti).box,path:{d:f(this,Ti).toSVGPath()}},!0));else if(this.parent){const v=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(f(this,Ki),{bbox:D(y=oe,Ts,Bc).call(y,f(this,Ss).box,(v-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(f(this,Qn),{bbox:D(b=oe,Ts,Bc).call(b,f(this,Ti).box,v),path:{d:f(this,Ti).toSVGPath()}})}const[o,c,h,p]=e.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=h,this.height=p;break;case 90:{const[v,S]=this.parentDimensions;this.x=c,this.y=1-o,this.width=h*S/v,this.height=p*v/S;break}case 180:this.x=1-o,this.y=1-c,this.width=h,this.height=p;break;case 270:{const[v,S]=this.parentDimensions;this.x=1-c,this.y=o,this.width=h*S/v,this.height=p*v/S;break}}const{lastPoint:g}=f(this,Ti);x(this,Kh,[(g[0]-o)/h,(g[1]-c)/p])},NM=function(e){const n=(o,c)=>{var h,p;this.color=o,x(this,xa,c),(h=this.parent)==null||h.drawLayer.updateProperties(f(this,Ki),{root:{fill:o,"fill-opacity":c}}),(p=f(this,Wh))==null||p.updateColor(o)},r=this.color,l=f(this,xa);this.addCommands({cmd:n.bind(this,e,oe._defaultOpacity),undo:n.bind(this,r,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},OM=function(e){const n=f(this,xs),r=l=>{x(this,xs,l),D(this,Ht,LM).call(this,l)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ee.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},LM=function(e){if(!f(this,Pn))return;D(this,Ht,Fy).call(this,{highlightOutlines:f(this,Ss).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},DS=function(){f(this,Ki)===null||!this.parent||(this.parent.drawLayer.remove(f(this,Ki)),x(this,Ki,null),this.parent.drawLayer.remove(f(this,Qn)),x(this,Qn,null))},Ro=function(e=this.parent){f(this,Ki)===null&&({id:ri(this,Ki)._,clipPathId:ri(this,Au)._}=e.drawLayer.draw({bbox:f(this,Ss).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":f(this,xa)},rootClass:{highlight:!0,free:f(this,Pn)},path:{d:f(this,Ss).toSVGPath()}},!1,!0),x(this,Qn,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:f(this,Pn)},bbox:f(this,Ti).box,path:{d:f(this,Ti).toSVGPath()}},f(this,Pn))),f(this,wu)&&(f(this,wu).style.clipPath=f(this,Au)))},Ts=new WeakSet,Bc=function([e,n,r,l],o){switch(o){case 90:return[1-n-l,e,l,r];case 180:return[1-e-r,1-n-l,r,l];case 270:return[n,1-e-r,l,r]}return[e,n,r,l]},PM=function(e){oe._keyboardManager.exec(this,e)},By=function(e){if(!f(this,$h))return;const n=window.getSelection();e?n.setPosition(f(this,$h),f(this,vg)):n.setPosition(f(this,Ag),f(this,wg))},Ff=function(){return f(this,Pn)?this.rotation:0},zM=function(){if(f(this,Pn))return null;const[e,n]=this.pageDimensions,[r,l]=this.pageTranslation,o=f(this,Sa),c=new Float32Array(o.length*8);let h=0;for(const{x:p,y:g,width:y,height:b}of o){const v=p*e+r,S=(1-g)*n+l;c[h]=c[h+4]=v,c[h+1]=c[h+3]=S,c[h+2]=c[h+6]=v+y*e,c[h+5]=c[h+7]=S-b*n,h+=8}return c},IM=function(e){return f(this,Ss).serialize(e,D(this,Ht,Ff).call(this))},jM=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},FM=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},BM=function(e){const{color:n}=this._initialData;return e.color.some((r,l)=>r!==n[l])},R(oe,Ts),mt(oe,"_defaultColor",null),mt(oe,"_defaultOpacity",1),mt(oe,"_defaultThickness",12),mt(oe,"_type","highlight"),mt(oe,"_editorType",zt.HIGHLIGHT),mt(oe,"_freeHighlightId",-1),mt(oe,"_freeHighlight",null),mt(oe,"_freeHighlightClipId","");let ub=oe;var Su;class HM{constructor(){R(this,Su,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){f(this,Su)[t]=e}toSVGProperties(){const t=f(this,Su);return x(this,Su,Object.create(null)),{root:t}}reset(){x(this,Su,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Se("Not implemented")}}Su=new WeakMap;var Qi,Zh,En,xu,Eu,Bl,Hl,Ul,_u,ie,kS,MS,NS,Bf,UM,Hy,Hf,Hc;const St=class St extends ke{constructor(e){super(e);R(this,ie);R(this,Qi,null);R(this,Zh);mt(this,"_drawId",null);x(this,Zh,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(D(this,ie,kS).call(this,e),D(this,ie,Bf).call(this))}static _mergeSVGProperties(e,n){const r=new Set(Object.keys(e));for(const[l,o]of Object.entries(n))r.has(l)?Object.assign(e[l],o):e[l]=o;return e}static getDefaultDrawingOptions(e){Se("Not implemented")}static get typesMap(){Se("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(f(St,En).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[r,l]of this.typesMap)e.push([r,n[l]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[r,l]of this.constructor.typesMap)e.push([r,n[l]]);return e}_updateProperty(e,n,r){const l=this._drawingOptions,o=l[n],c=h=>{var g;l.updateProperty(n,h);const p=f(this,Qi).updateProperty(n,h);p&&D(this,ie,Hf).call(this,p),(g=this.parent)==null||g.drawLayer.updateProperties(this._drawId,l.toSVGProperties())};this.addCommands({cmd:c.bind(this,r),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,St._mergeSVGProperties(f(this,Qi).getPathResizingSVGProperties(D(this,ie,Hy).call(this)),{bbox:D(this,ie,Hc).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,St._mergeSVGProperties(f(this,Qi).getPathResizedSVGProperties(D(this,ie,Hy).call(this)),{bbox:D(this,ie,Hc).call(this)}))}_onTranslating(e,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:D(this,ie,Hc).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,St._mergeSVGProperties(f(this,Qi).getPathTranslatedSVGProperties(D(this,ie,Hy).call(this),this.parentDimensions),{bbox:D(this,ie,Hc).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,f(this,Zh)&&(x(this,Zh,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){D(this,ie,NS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(D(this,ie,Bf).call(this),D(this,ie,Hf).call(this,f(this,Qi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var r;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),D(this,ie,NS).call(this)):e&&(this._uiManager.addShouldRescale(this),D(this,ie,Bf).call(this,e),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,St._mergeSVGProperties({bbox:D(this,ie,Hc).call(this)},f(this,Qi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&D(this,ie,Hf).call(this,f(this,Qi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const r=super.render();r.classList.add("draw");const l=document.createElement("div");r.append(l),l.setAttribute("aria-hidden","true"),l.className="internal";const[o,c]=this.parentDimensions;return this.setDims(this.width*o,this.height*c),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),r}static createDrawerInstance(e,n,r,l,o){Se("Not implemented")}static startDrawing(e,n,r,l){var _;const{target:o,offsetX:c,offsetY:h,pointerId:p,pointerType:g}=l;if(f(St,Hl)&&f(St,Hl)!==g)return;const{viewport:{rotation:y}}=e,{width:b,height:v}=o.getBoundingClientRect(),S=x(St,xu,new AbortController),w=e.combinedSignal(S);if(f(St,Bl)||x(St,Bl,p),f(St,Hl)??x(St,Hl,g),window.addEventListener("pointerup",T=>{var O;f(St,Bl)===T.pointerId?this._endDraw(T):(O=f(St,Ul))==null||O.delete(T.pointerId)},{signal:w}),window.addEventListener("pointercancel",T=>{var O;f(St,Bl)===T.pointerId?this._currentParent.endDrawingSession():(O=f(St,Ul))==null||O.delete(T.pointerId)},{signal:w}),window.addEventListener("pointerdown",T=>{f(St,Hl)===T.pointerType&&((f(St,Ul)||x(St,Ul,new Set)).add(T.pointerId),f(St,En).isCancellable()&&(f(St,En).removeLastElement(),f(St,En).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Zs,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",T=>{T.timeStamp===f(St,_u)&&an(T)},{signal:w}),e.toggleDrawing(),(_=n._editorUndoBar)==null||_.hide(),f(St,En)){e.drawLayer.updateProperties(this._currentDrawId,f(St,En).startNew(c,h,b,v,y));return}n.updateUIForDefaultProperties(this),x(St,En,this.createDrawerInstance(c,h,b,v,y)),x(St,Eu,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(f(St,Eu).toSVGProperties(),f(St,En).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(x(St,_u,-1),!f(St,En))return;const{offsetX:n,offsetY:r,pointerId:l}=e;if(f(St,Bl)===l){if(((o=f(St,Ul))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,f(St,En).add(n,r)),x(St,_u,e.timeStamp),an(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,x(St,En,null),x(St,Eu,null),x(St,Hl,null),x(St,_u,NaN)),f(St,xu)&&(f(St,xu).abort(),x(St,xu,null),x(St,Bl,NaN),x(St,Ul,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,f(St,En).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=f(St,En),l=this._currentDrawId,o=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(l,r.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(l,r.removeLastElement())},mustExec:!1,type:ee.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(ee.DRAW_STEP),!f(St,En).isEmpty()){const{pageDimensions:[r,l],scale:o}=n,c=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:f(St,En).getOutlines(r*o,l*o,o,this._INNER_MARGIN),drawingOptions:f(St,Eu),mustBeCommitted:!e});return this._cleanup(!0),c}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,r,l,o,c){Se("Not implemented")}static async deserialize(e,n,r){var y,b;const{rawDims:{pageWidth:l,pageHeight:o,pageX:c,pageY:h}}=n.viewport,p=this.deserializeDraw(c,h,l,o,this._INNER_MARGIN,e),g=await super.deserialize(e,n,r);return g.createDrawingOptions(e),D(y=g,ie,kS).call(y,{drawOutlines:p}),D(b=g,ie,Bf).call(b),g.onScaleChanging(),g.rotate(),g}serializeDraw(e){const[n,r]=this.pageTranslation,[l,o]=this.pageDimensions;return f(this,Qi).serialize([n,r,l,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Qi=new WeakMap,Zh=new WeakMap,En=new WeakMap,xu=new WeakMap,Eu=new WeakMap,Bl=new WeakMap,Hl=new WeakMap,Ul=new WeakMap,_u=new WeakMap,ie=new WeakSet,kS=function({drawOutlines:e,drawId:n,drawingOptions:r}){x(this,Qi,e),this._drawingOptions||(this._drawingOptions=r),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=D(this,ie,MS).call(this,e,this.parent),D(this,ie,Hf).call(this,e.box)},MS=function(e,n){const{id:r}=n.drawLayer.draw(St._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r},NS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Bf=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=D(this,ie,MS).call(this,f(this,Qi),e)}},UM=function([e,n,r,l]){const{parentDimensions:[o,c],rotation:h}=this;switch(h){case 90:return[n,1-e,r*(c/o),l*(o/c)];case 180:return[1-e,1-n,r,l];case 270:return[1-n,e,r*(c/o),l*(o/c)];default:return[e,n,r,l]}},Hy=function(){const{x:e,y:n,width:r,height:l,parentDimensions:[o,c],rotation:h}=this;switch(h){case 90:return[1-n,e,r*(o/c),l*(c/o)];case 180:return[1-e,1-n,r,l];case 270:return[n,1-e,r*(o/c),l*(c/o)];default:return[e,n,r,l]}},Hf=function(e){if([this.x,this.y,this.width,this.height]=D(this,ie,UM).call(this,e),this.div){this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)}this._onResized()},Hc=function(){const{x:e,y:n,width:r,height:l,rotation:o,parentRotation:c,parentDimensions:[h,p]}=this;switch((o*4+c)/90){case 1:return[1-n-l,e,l,r];case 2:return[1-e-r,1-n-l,r,l];case 3:return[n,1-e-r,l,r];case 4:return[e,n-r*(h/p),l*(p/h),r*(h/p)];case 5:return[1-n,e,r*(h/p),l*(p/h)];case 6:return[1-e-l*(p/h),1-n,l*(p/h),r*(h/p)];case 7:return[n-r*(h/p),1-e-l*(p/h),r*(h/p),l*(p/h)];case 8:return[e-r,n-l,r,l];case 9:return[1-n,e-r,l,r];case 10:return[1-e,1-n,r,l];case 11:return[n-l,1-e,l,r];case 12:return[e-l*(p/h),n,l*(p/h),r*(h/p)];case 13:return[1-n-r*(h/p),e-l*(p/h),r*(h/p),l*(p/h)];case 14:return[1-e,1-n-r*(h/p),l*(p/h),r*(h/p)];case 15:return[n,1-e,r*(h/p),l*(p/h)];default:return[e,n,r,l]}},mt(St,"_currentDrawId",-1),mt(St,"_currentParent",null),R(St,En,null),R(St,xu,null),R(St,Eu,null),R(St,Bl,NaN),R(St,Hl,null),R(St,Ul,null),R(St,_u,NaN),mt(St,"_INNER_MARGIN",3);let cb=St;var xr,_n,Cn,Cu,Jh,oi,zn,Es,Tu,Ru,Du,td,Uy;class cH{constructor(t,e,n,r,l,o){R(this,td);R(this,xr,new Float64Array(6));R(this,_n);R(this,Cn);R(this,Cu);R(this,Jh);R(this,oi);R(this,zn,"");R(this,Es,0);R(this,Tu,new Fg);R(this,Ru);R(this,Du);x(this,Ru,n),x(this,Du,r),x(this,Cu,l),x(this,Jh,o),[t,e]=D(this,td,Uy).call(this,t,e);const c=x(this,_n,[NaN,NaN,NaN,NaN,t,e]);x(this,oi,[t,e]),x(this,Cn,[{line:c,points:f(this,oi)}]),f(this,xr).set(c,0)}updateProperty(t,e){t==="stroke-width"&&x(this,Jh,e)}isEmpty(){return!f(this,Cn)||f(this,Cn).length===0}isCancellable(){return f(this,oi).length<=10}add(t,e){[t,e]=D(this,td,Uy).call(this,t,e);const[n,r,l,o]=f(this,xr).subarray(2,6),c=t-l,h=e-o;return Math.hypot(f(this,Ru)*c,f(this,Du)*h)<=2?null:(f(this,oi).push(t,e),isNaN(n)?(f(this,xr).set([l,o,t,e],2),f(this,_n).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(f(this,xr)[0])&&f(this,_n).splice(6,6),f(this,xr).set([n,r,l,o,t,e],0),f(this,_n).push(...wt.createBezierPoints(n,r,l,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(f(this,oi).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,r,l){x(this,Ru,n),x(this,Du,r),x(this,Cu,l),[t,e]=D(this,td,Uy).call(this,t,e);const o=x(this,_n,[NaN,NaN,NaN,NaN,t,e]);x(this,oi,[t,e]);const c=f(this,Cn).at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),f(this,Cn).push({line:o,points:f(this,oi)}),f(this,xr).set(o,0),x(this,Es,0),this.toSVGPath(),null}getLastElement(){return f(this,Cn).at(-1)}setLastElement(t){return f(this,Cn)?(f(this,Cn).push(t),x(this,_n,t.line),x(this,oi,t.points),x(this,Es,0),{path:{d:this.toSVGPath()}}):f(this,Tu).setLastElement(t)}removeLastElement(){if(!f(this,Cn))return f(this,Tu).removeLastElement();f(this,Cn).pop(),x(this,zn,"");for(let t=0,e=f(this,Cn).length;t<e;t++){const{line:n,points:r}=f(this,Cn)[t];x(this,_n,n),x(this,oi,r),x(this,Es,0),this.toSVGPath()}return{path:{d:f(this,zn)}}}toSVGPath(){const t=wt.svgRound(f(this,_n)[4]),e=wt.svgRound(f(this,_n)[5]);if(f(this,oi).length===2)return x(this,zn,`${f(this,zn)} M ${t} ${e} Z`),f(this,zn);if(f(this,oi).length<=6){const r=f(this,zn).lastIndexOf("M");x(this,zn,`${f(this,zn).slice(0,r)} M ${t} ${e}`),x(this,Es,6)}if(f(this,oi).length===4){const r=wt.svgRound(f(this,_n)[10]),l=wt.svgRound(f(this,_n)[11]);return x(this,zn,`${f(this,zn)} L ${r} ${l}`),x(this,Es,12),f(this,zn)}const n=[];f(this,Es)===0&&(n.push(`M ${t} ${e}`),x(this,Es,6));for(let r=f(this,Es),l=f(this,_n).length;r<l;r+=6){const[o,c,h,p,g,y]=f(this,_n).slice(r,r+6).map(wt.svgRound);n.push(`C${o} ${c} ${h} ${p} ${g} ${y}`)}return x(this,zn,f(this,zn)+n.join(" ")),x(this,Es,f(this,_n).length),f(this,zn)}getOutlines(t,e,n,r){const l=f(this,Cn).at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),f(this,Tu).build(f(this,Cn),t,e,n,f(this,Cu),f(this,Jh),r),x(this,xr,null),x(this,_n,null),x(this,Cn,null),x(this,zn,null),f(this,Tu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}xr=new WeakMap,_n=new WeakMap,Cn=new WeakMap,Cu=new WeakMap,Jh=new WeakMap,oi=new WeakMap,zn=new WeakMap,Es=new WeakMap,Tu=new WeakMap,Ru=new WeakMap,Du=new WeakMap,td=new WeakSet,Uy=function(t,e){return wt._normalizePoint(t,e,f(this,Ru),f(this,Du),f(this,Cu))};var ui,xg,Eg,Zi,Er,_r,ed,nd,ku,jn,Zr,qM,VM,GM;class Fg extends wt{constructor(){super(...arguments);R(this,jn);R(this,ui);R(this,xg,0);R(this,Eg);R(this,Zi);R(this,Er);R(this,_r);R(this,ed);R(this,nd);R(this,ku)}build(e,n,r,l,o,c,h){x(this,Er,n),x(this,_r,r),x(this,ed,l),x(this,nd,o),x(this,ku,c),x(this,Eg,h??0),x(this,Zi,e),D(this,jn,VM).call(this)}get thickness(){return f(this,ku)}setLastElement(e){return f(this,Zi).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return f(this,Zi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of f(this,Zi)){if(e.push(`M${wt.svgRound(n[4])} ${wt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${wt.svgRound(n[10])} ${wt.svgRound(n[11])}`);continue}for(let r=6,l=n.length;r<l;r+=6){const[o,c,h,p,g,y]=n.subarray(r,r+6).map(wt.svgRound);e.push(`C${o} ${c} ${h} ${p} ${g} ${y}`)}}return e.join("")}serialize([e,n,r,l],o){const c=[],h=[],[p,g,y,b]=D(this,jn,qM).call(this);let v,S,w,_,T,O,N,I,z;switch(f(this,nd)){case 0:z=wt._rescale,v=e,S=n+l,w=r,_=-l,T=e+p*r,O=n+(1-g-b)*l,N=e+(p+y)*r,I=n+(1-g)*l;break;case 90:z=wt._rescaleAndSwap,v=e,S=n,w=r,_=l,T=e+g*r,O=n+p*l,N=e+(g+b)*r,I=n+(p+y)*l;break;case 180:z=wt._rescale,v=e+r,S=n,w=-r,_=l,T=e+(1-p-y)*r,O=n+g*l,N=e+(1-p)*r,I=n+(g+b)*l;break;case 270:z=wt._rescaleAndSwap,v=e+r,S=n+l,w=-r,_=-l,T=e+(1-g-b)*r,O=n+(1-p-y)*l,N=e+(1-g)*r,I=n+(1-p)*l;break}for(const{line:L,points:B}of f(this,Zi))c.push(z(L,v,S,w,_,o?new Array(L.length):null)),h.push(z(B,v,S,w,_,o?new Array(B.length):null));return{lines:c,points:h,rect:[T,O,N,I]}}static deserialize(e,n,r,l,o,{paths:{lines:c,points:h},rotation:p,thickness:g}){const y=[];let b,v,S,w,_;switch(p){case 0:_=wt._rescale,b=-e/r,v=n/l+1,S=1/r,w=-1/l;break;case 90:_=wt._rescaleAndSwap,b=-n/l,v=-e/r,S=1/l,w=1/r;break;case 180:_=wt._rescale,b=e/r+1,v=-n/l,S=-1/r,w=1/l;break;case 270:_=wt._rescaleAndSwap,b=n/l+1,v=e/r+1,S=-1/l,w=-1/r;break}if(!c){c=[];for(const O of h){const N=O.length;if(N===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1]]));continue}if(N===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,O[0],O[1],NaN,NaN,NaN,NaN,O[2],O[3]]));continue}const I=new Float32Array(3*(N-2));c.push(I);let[z,L,B,X]=O.subarray(0,4);I.set([NaN,NaN,NaN,NaN,z,L],0);for(let Q=4;Q<N;Q+=2){const rt=O[Q],$=O[Q+1];I.set(wt.createBezierPoints(z,L,B,X,rt,$),(Q-2)*3),[z,L,B,X]=[B,X,rt,$]}}}for(let O=0,N=c.length;O<N;O++)y.push({line:_(c[O].map(I=>I??NaN),b,v,S,w),points:_(h[O].map(I=>I??NaN),b,v,S,w)});const T=new this.prototype.constructor;return T.build(y,r,l,1,p,g,o),T}get box(){return f(this,ui)}updateProperty(e,n){return e==="stroke-width"?D(this,jn,GM).call(this,n):null}updateParentDimensions([e,n],r){const[l,o]=D(this,jn,Zr).call(this);x(this,Er,e),x(this,_r,n),x(this,ed,r);const[c,h]=D(this,jn,Zr).call(this),p=c-l,g=h-o,y=f(this,ui);return y[0]-=p,y[1]-=g,y[2]+=2*p,y[3]+=2*g,y}updateRotation(e){return x(this,xg,e),{path:{transform:this.rotationTransform}}}get viewBox(){return f(this,ui).map(wt.svgRound).join(" ")}get defaultProperties(){const[e,n]=f(this,ui);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${wt.svgRound(e)} ${wt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=f(this,ui);let r=0,l=0,o=0,c=0,h=0,p=0;switch(f(this,xg)){case 90:l=n/e,o=-e/n,h=e;break;case 180:r=-1,c=-1,h=e,p=n;break;case 270:l=-n/e,o=e/n,p=n;break;default:return""}return`matrix(${r} ${l} ${o} ${c} ${wt.svgRound(h)} ${wt.svgRound(p)})`}getPathResizingSVGProperties([e,n,r,l]){const[o,c]=D(this,jn,Zr).call(this),[h,p,g,y]=f(this,ui);if(Math.abs(g-o)<=wt.PRECISION||Math.abs(y-c)<=wt.PRECISION){const _=e+r/2-(h+g/2),T=n+l/2-(p+y/2);return{path:{"transform-origin":`${wt.svgRound(e)} ${wt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${_} ${T})`}}}const b=(r-2*o)/(g-2*o),v=(l-2*c)/(y-2*c),S=g/r,w=y/l;return{path:{"transform-origin":`${wt.svgRound(h)} ${wt.svgRound(p)}`,transform:`${this.rotationTransform} scale(${S} ${w}) translate(${wt.svgRound(o)} ${wt.svgRound(c)}) scale(${b} ${v}) translate(${wt.svgRound(-o)} ${wt.svgRound(-c)})`}}}getPathResizedSVGProperties([e,n,r,l]){const[o,c]=D(this,jn,Zr).call(this),h=f(this,ui),[p,g,y,b]=h;if(h[0]=e,h[1]=n,h[2]=r,h[3]=l,Math.abs(y-o)<=wt.PRECISION||Math.abs(b-c)<=wt.PRECISION){const T=e+r/2-(p+y/2),O=n+l/2-(g+b/2);for(const{line:N,points:I}of f(this,Zi))wt._translate(N,T,O,N),wt._translate(I,T,O,I);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${wt.svgRound(e)} ${wt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(r-2*o)/(y-2*o),S=(l-2*c)/(b-2*c),w=-v*(p+o)+e+o,_=-S*(g+c)+n+c;if(v!==1||S!==1||w!==0||_!==0)for(const{line:T,points:O}of f(this,Zi))wt._rescale(T,w,_,v,S,T),wt._rescale(O,w,_,v,S,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${wt.svgRound(e)} ${wt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],r){const[l,o]=r,c=f(this,ui),h=e-c[0],p=n-c[1];if(f(this,Er)===l&&f(this,_r)===o)for(const{line:g,points:y}of f(this,Zi))wt._translate(g,h,p,g),wt._translate(y,h,p,y);else{const g=f(this,Er)/l,y=f(this,_r)/o;x(this,Er,l),x(this,_r,o);for(const{line:b,points:v}of f(this,Zi))wt._rescale(b,h,p,g,y,b),wt._rescale(v,h,p,g,y,v);c[2]*=g,c[3]*=y}return c[0]=e,c[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${wt.svgRound(e)} ${wt.svgRound(n)}`}}}get defaultSVGProperties(){const e=f(this,ui);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${wt.svgRound(e[0])} ${wt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}ui=new WeakMap,xg=new WeakMap,Eg=new WeakMap,Zi=new WeakMap,Er=new WeakMap,_r=new WeakMap,ed=new WeakMap,nd=new WeakMap,ku=new WeakMap,jn=new WeakSet,Zr=function(e=f(this,ku)){const n=f(this,Eg)+e/2*f(this,ed);return f(this,nd)%180===0?[n/f(this,Er),n/f(this,_r)]:[n/f(this,_r),n/f(this,Er)]},qM=function(){const[e,n,r,l]=f(this,ui),[o,c]=D(this,jn,Zr).call(this,0);return[e+o,n+c,r-2*o,l-2*c]},VM=function(){const e=x(this,ui,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:l}of f(this,Zi)){if(l.length<=12){for(let h=4,p=l.length;h<p;h+=6)_t.pointBoundingBox(l[h],l[h+1],e);continue}let o=l[4],c=l[5];for(let h=6,p=l.length;h<p;h+=6){const[g,y,b,v,S,w]=l.subarray(h,h+6);_t.bezierBoundingBox(o,c,g,y,b,v,S,w,e),o=S,c=w}}const[n,r]=D(this,jn,Zr).call(this);e[0]=di(e[0]-n,0,1),e[1]=di(e[1]-r,0,1),e[2]=di(e[2]+n,0,1),e[3]=di(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]},GM=function(e){const[n,r]=D(this,jn,Zr).call(this);x(this,ku,e);const[l,o]=D(this,jn,Zr).call(this),[c,h]=[l-n,o-r],p=f(this,ui);return p[0]-=c,p[1]-=h,p[2]+=2*c,p[3]+=2*h,p};class Qb extends HM{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ke._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Qb(this._viewParameters);return t.updateAll(this),t}}var Nb,YM;const $c=class $c extends cb{constructor(e){super({...e,name:"inkEditor"});R(this,Nb);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){ke.initialize(e,n),this._defaultDrawingOptions=new Qb(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Jt(this,"typesMap",new Map([[ee.INK_THICKNESS,"stroke-width"],[ee.INK_COLOR,"stroke"],[ee.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,r,l,o){return new cH(e,n,r,l,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,r,l,o,c){return Fg.deserialize(e,n,r,l,o,c)}static async deserialize(e,n,r){let l=null;if(e instanceof Ix){const{data:{inkLists:c,rect:h,rotation:p,id:g,color:y,opacity:b,borderStyle:{rawWidth:v},popupRef:S},parent:{page:{pageNumber:w}}}=e;l=e={annotationType:zt.INK,color:Array.from(y),thickness:v,opacity:b,paths:{points:c},boxes:null,pageIndex:w-1,rect:h.slice(0),rotation:p,id:g,deleted:!1,popupRef:S}}const o=await super.deserialize(e,n,r);return o.annotationElementId=e.id||null,o._initialData=l,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:r}){this._drawingOptions=$c.getDefaultDrawingOptions({stroke:_t.makeHexColor(...e),"stroke-width":n,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r,rect:l}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":c,"stroke-width":h}}=this,p={annotationType:zt.INK,color:ke._colorManager.convert(o),opacity:c,thickness:h,paths:{lines:n,points:r},pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(p.isCopy=!0,p):this.annotationElementId&&!D(this,Nb,YM).call(this,p)?null:(p.id=this.annotationElementId,p)}renderAnnotationElement(e){const{points:n,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n}),null}};Nb=new WeakSet,YM=function(e){const{color:n,thickness:r,opacity:l,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((c,h)=>c!==n[h])||e.thickness!==r||e.opacity!==l||e.pageIndex!==o},mt($c,"_type","ink"),mt($c,"_editorType",zt.INK),mt($c,"_defaultDrawingOptions",null);let OS=$c;class LS extends Fg{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const py=8,xf=3;var Mu,ce,PS,Xs,XM,$M,zS,qy,WM,KM,QM,IS,jS,ZM;class Da{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:r},l,o,c,h){let p=new OffscreenCanvas(1,1),g=p.getContext("2d",{alpha:!1});const y=200,b=g.font=`${n} ${r} ${y}px ${e}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:S,actualBoundingBoxAscent:w,actualBoundingBoxDescent:_,fontBoundingBoxAscent:T,fontBoundingBoxDescent:O,width:N}=g.measureText(t),I=1.5,z=Math.ceil(Math.max(Math.abs(v)+Math.abs(S)||0,N)*I),L=Math.ceil(Math.max(Math.abs(w)+Math.abs(_)||y,Math.abs(T)+Math.abs(O)||y)*I);p=new OffscreenCanvas(z,L),g=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,z,L),g.fillStyle="black",g.fillText(t,z*(I-1)/2,L*(3-I)/2);const B=D(this,ce,IS).call(this,g.getImageData(0,0,z,L).data),X=D(this,ce,QM).call(this,B),Q=D(this,ce,jS).call(this,X),rt=D(this,ce,zS).call(this,B,z,L,Q);return this.processDrawnLines({lines:{curves:rt,width:z,height:L},pageWidth:l,pageHeight:o,rotation:c,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,r,l){const[o,c,h]=D(this,ce,ZM).call(this,t),[p,g]=D(this,ce,KM).call(this,o,c,h,Math.hypot(c,h)*f(this,Mu).sigmaSFactor,f(this,Mu).sigmaR,f(this,Mu).kernelSize),y=D(this,ce,jS).call(this,g),b=D(this,ce,zS).call(this,p,c,h,y);return this.processDrawnLines({lines:{curves:b,width:c,height:h},pageWidth:e,pageHeight:n,rotation:r,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:r,innerMargin:l,mustSmooth:o,areContours:c}){r%180!==0&&([e,n]=[n,e]);const{curves:h,width:p,height:g}=t,y=t.thickness??0,b=[],v=Math.min(e/p,n/g),S=v/e,w=v/n,_=[];for(const{points:O}of h){const N=o?D(this,ce,WM).call(this,O):O;if(!N)continue;_.push(N);const I=N.length,z=new Float32Array(I),L=new Float32Array(3*(I===2?2:I-2));if(b.push({line:L,points:z}),I===2){z[0]=N[0]*S,z[1]=N[1]*w,L.set([NaN,NaN,NaN,NaN,z[0],z[1]],0);continue}let[B,X,Q,rt]=N;B*=S,X*=w,Q*=S,rt*=w,z.set([B,X,Q,rt],0),L.set([NaN,NaN,NaN,NaN,B,X],0);for(let $=4;$<I;$+=2){const J=z[$]=N[$]*S,ht=z[$+1]=N[$+1]*w;L.set(wt.createBezierPoints(B,X,Q,rt,J,ht),($-2)*3),[B,X,Q,rt]=[Q,rt,J,ht]}}if(b.length===0)return null;const T=c?new LS:new Fg;return T.build(b,e,n,1,r,c?0:y,l),{outline:T,newCurves:_,areContours:c,thickness:y,width:p,height:g}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:r,height:l}){let o=1/0,c=-1/0,h=0;for(const N of t){h+=N.length;for(let I=2,z=N.length;I<z;I++){const L=N[I]-N[I-2];o=Math.min(o,L),c=Math.max(c,L)}}let p;o>=-128&&c<=127?p=Int8Array:o>=-32768&&c<=32767?p=Int16Array:p=Int32Array;const g=t.length,y=py+xf*g,b=new Uint32Array(y);let v=0;b[v++]=y*Uint32Array.BYTES_PER_ELEMENT+(h-2*g)*p.BYTES_PER_ELEMENT,b[v++]=0,b[v++]=r,b[v++]=l,b[v++]=e?0:1,b[v++]=Math.max(0,Math.floor(n??0)),b[v++]=g,b[v++]=p.BYTES_PER_ELEMENT;for(const N of t)b[v++]=N.length-2,b[v++]=N[0],b[v++]=N[1];const S=new CompressionStream("deflate-raw"),w=S.writable.getWriter();await w.ready,w.write(b);const _=p.prototype.constructor;for(const N of t){const I=new _(N.length-2);for(let z=2,L=N.length;z<L;z++)I[z-2]=N[z]-N[z-2];w.write(I)}w.close();const T=await new Response(S.readable).arrayBuffer(),O=new Uint8Array(T);return tk(O)}static async decompressSignature(t){try{const e=PF(t),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),l=r.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let o=null,c=0;for await(const N of n)o||(o=new Uint8Array(new Uint32Array(N.buffer,0,4)[0])),o.set(N,c),c+=N.length;const h=new Uint32Array(o.buffer,0,o.length>>2),p=h[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const g=h[2],y=h[3],b=h[4]===0,v=h[5],S=h[6],w=h[7],_=[],T=(py+xf*S)*Uint32Array.BYTES_PER_ELEMENT;let O;switch(w){case Int8Array.BYTES_PER_ELEMENT:O=new Int8Array(o.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:O=new Int16Array(o.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:O=new Int32Array(o.buffer,T);break}c=0;for(let N=0;N<S;N++){const I=h[xf*N+py],z=new Float32Array(I+2);_.push(z);for(let L=0;L<xf-1;L++)z[L]=h[xf*N+py+L+1];for(let L=0;L<I;L++)z[L+2]=z[L]+O[c++]}return{areContours:b,thickness:v,outlines:_,width:g,height:y}}catch(e){return It(`decompressSignature: ${e}`),null}}}Mu=new WeakMap,ce=new WeakSet,PS=function(t,e,n,r){return n-=t,r-=e,n===0?r>0?0:4:n===1?r+6:2-r},Xs=new WeakMap,XM=function(t,e,n,r,l,o,c){const h=D(this,ce,PS).call(this,n,r,l,o);for(let p=0;p<8;p++){const g=(-p+h-c+16)%8,y=f(this,Xs)[2*g],b=f(this,Xs)[2*g+1];if(t[(n+y)*e+(r+b)]!==0)return g}return-1},$M=function(t,e,n,r,l,o,c){const h=D(this,ce,PS).call(this,n,r,l,o);for(let p=0;p<8;p++){const g=(p+h+c+16)%8,y=f(this,Xs)[2*g],b=f(this,Xs)[2*g+1];if(t[(n+y)*e+(r+b)]!==0)return g}return-1},zS=function(t,e,n,r){const l=t.length,o=new Int32Array(l);for(let g=0;g<l;g++)o[g]=t[g]<=r?1:0;for(let g=1;g<n-1;g++)o[g*e]=o[g*e+e-1]=0;for(let g=0;g<e;g++)o[g]=o[e*n-1-g]=0;let c=1,h;const p=[];for(let g=1;g<n-1;g++){h=1;for(let y=1;y<e-1;y++){const b=g*e+y,v=o[b];if(v===0)continue;let S=g,w=y;if(v===1&&o[b-1]===0)c+=1,w-=1;else if(v>=1&&o[b+1]===0)c+=1,w+=1,v>1&&(h=v);else{v!==1&&(h=Math.abs(v));continue}const _=[y,g],T=w===y+1,O={isHole:T,points:_,id:c,parent:0};p.push(O);let N;for(const $ of p)if($.id===h){N=$;break}N?N.isHole?O.parent=T?N.parent:h:O.parent=T?h:N.parent:O.parent=T?h:0;const I=D(this,ce,XM).call(this,o,e,g,y,S,w,0);if(I===-1){o[b]=-c,o[b]!==1&&(h=Math.abs(o[b]));continue}let z=f(this,Xs)[2*I],L=f(this,Xs)[2*I+1];const B=g+z,X=y+L;S=B,w=X;let Q=g,rt=y;for(;;){const $=D(this,ce,$M).call(this,o,e,Q,rt,S,w,1);z=f(this,Xs)[2*$],L=f(this,Xs)[2*$+1];const J=Q+z,ht=rt+L;_.push(ht,J);const tt=Q*e+rt;if(o[tt+1]===0?o[tt]=-c:o[tt]===1&&(o[tt]=c),J===g&&ht===y&&Q===B&&rt===X){o[b]!==1&&(h=Math.abs(o[b]));break}else S=Q,w=rt,Q=J,rt=ht}}}return p},qy=function(t,e,n,r){if(n-e<=4){for(let B=e;B<n-2;B+=2)r.push(t[B],t[B+1]);return}const l=t[e],o=t[e+1],c=t[n-4]-l,h=t[n-3]-o,p=Math.hypot(c,h),g=c/p,y=h/p,b=g*o-y*l,v=h/c,S=1/p,w=Math.atan(v),_=Math.cos(w),T=Math.sin(w),O=S*(Math.abs(_)+Math.abs(T)),N=S*(1-O+O**2),I=Math.max(Math.atan(Math.abs(T+_)*N),Math.atan(Math.abs(T-_)*N));let z=0,L=e;for(let B=e+2;B<n-2;B+=2){const X=Math.abs(b-g*t[B+1]+y*t[B]);X>z&&(L=B,z=X)}z>(p*I)**2?(D(this,ce,qy).call(this,t,e,L+2,r),D(this,ce,qy).call(this,t,L,n,r)):r.push(l,o)},WM=function(t){const e=[],n=t.length;return D(this,ce,qy).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},KM=function(t,e,n,r,l,o){const c=new Float32Array(o**2),h=-2*r**2,p=o>>1;for(let w=0;w<o;w++){const _=(w-p)**2;for(let T=0;T<o;T++)c[w*o+T]=Math.exp((_+(T-p)**2)/h)}const g=new Float32Array(256),y=-2*l**2;for(let w=0;w<256;w++)g[w]=Math.exp(w**2/y);const b=t.length,v=new Uint8Array(b),S=new Uint32Array(256);for(let w=0;w<n;w++)for(let _=0;_<e;_++){const T=w*e+_,O=t[T];let N=0,I=0;for(let L=0;L<o;L++){const B=w+L-p;if(!(B<0||B>=n))for(let X=0;X<o;X++){const Q=_+X-p;if(Q<0||Q>=e)continue;const rt=t[B*e+Q],$=c[L*o+X]*g[Math.abs(rt-O)];N+=rt*$,I+=$}}const z=v[T]=Math.round(N/I);S[z]++}return[v,S]},QM=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},IS=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let r=-1/0,l=1/0;for(let c=0,h=n.length;c<h;c++){if(t[(c<<2)+3]===0){r=n[c]=255;continue}const g=n[c]=t[c<<2];g>r&&(r=g),g<l&&(l=g)}const o=255/(r-l);for(let c=0;c<e;c++)n[c]=(n[c]-l)*o;return n},jS=function(t){let e,n=-1/0,r=-1/0;const l=t.findIndex(h=>h!==0);let o=l,c=l;for(e=l;e<256;e++){const h=t[e];h>n&&(e-o>r&&(r=e-o,c=e-1),n=h,o=e)}for(e=c-1;e>=0&&!(t[e]>t[e+1]);e--);return e},ZM=function(t){const e=t,{width:n,height:r}=t,{maxDim:l}=f(this,Mu);let o=n,c=r;if(n>l||r>l){let b=n,v=r,S=Math.log2(Math.max(n,r)/l);const w=Math.floor(S);S=S===w?w-1:w;for(let T=0;T<S;T++){o=b,c=v,o>l&&(o=Math.ceil(o/2)),c>l&&(c=Math.ceil(c/2));const O=new OffscreenCanvas(o,c);O.getContext("2d").drawImage(t,0,0,b,v,0,0,o,c),b=o,v=c,t!==e&&t.close(),t=O.transferToImageBitmap()}const _=Math.min(l/o,l/c);o=Math.round(o*_),c=Math.round(c*_)}const p=new OffscreenCanvas(o,c).getContext("2d",{willReadFrequently:!0});p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,o,c);const g=p.getImageData(0,0,o,c).data;return[D(this,ce,IS).call(this,g),o,c]},R(Da,ce),R(Da,Mu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),R(Da,Xs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class jx extends HM{constructor(){super(),super.updateProperties({fill:ke._defaultLineColor,"stroke-width":0})}clone(){const t=new jx;return t.updateAll(this),t}}class Fx extends Qb{constructor(t){super(t),super.updateProperties({stroke:ke._defaultLineColor,"stroke-width":1})}clone(){const t=new Fx(this._viewParameters);return t.updateAll(this),t}}var ql,Ji,Vl,Gl;const Hi=class Hi extends cb{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});R(this,ql,!1);R(this,Ji,null);R(this,Vl,null);R(this,Gl,null);this._willKeepAspectRatio=!0,x(this,Vl,e.signatureData||null),x(this,Ji,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){ke.initialize(e,n),this._defaultDrawingOptions=new jx,this._defaultDrawnSignatureOptions=new Fx(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Jt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!f(this,Ji)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(f(this,Vl)){const{lines:l,mustSmooth:o,areContours:c,description:h,uuid:p,heightInPage:g}=f(this,Vl),{rawDims:{pageWidth:y,pageHeight:b},rotation:v}=this.parent.viewport,S=Da.processDrawnLines({lines:l,pageWidth:y,pageHeight:b,rotation:v,innerMargin:Hi._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(S,g,h,p)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return r&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){x(this,Gl,e),this.addEditToolbar()}getUuid(){return f(this,Gl)}get description(){return f(this,Ji)}set description(e){x(this,Ji,e),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:r,width:l,height:o}=f(this,Vl),c=Math.max(l,o),h=Da.processDrawnLines({lines:{curves:e.map(p=>({points:p})),thickness:r,width:l,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:h.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&f(this,Ji)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,f(this,Gl),f(this,Ji)),e.show()),e):null}addSignature(e,n,r,l){const{x:o,y:c}=this,{outline:h}=x(this,Vl,e);x(this,ql,h instanceof LS),x(this,Ji,r),this.div.setAttribute("data-l10n-args",JSON.stringify({description:r}));let p;f(this,ql)?p=Hi.getDefaultDrawingOptions():(p=Hi._defaultDrawnSignatureOptions.clone(),p.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:p});const[g,y]=this.parentDimensions,[,b]=this.pageDimensions;let v=n/b;v=v>=1?.5:v,this.width*=v/this.height,this.width>=1&&(v*=.9/this.width,this.width=.9),this.height=v,this.setDims(g*this.width,y*this.height),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(l),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!l,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:l}=this.parent.viewport;return Da.process(e,n,r,l,Hi._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:r,pageHeight:l},rotation:o}=this.parent.viewport;return Da.extractContoursFromText(e,n,r,l,o,Hi._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:l}=this.parent.viewport;return Da.processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:l,innerMargin:Hi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=Hi.getDefaultDrawingOptions():(this._drawingOptions=Hi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:r,rect:l}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,c={annotationType:zt.SIGNATURE,isSignature:!0,areContours:f(this,ql),color:[0,0,0],thickness:f(this,ql)?0:o,pageIndex:this.pageIndex,rect:l,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(c.paths={lines:n,points:r},c.uuid=f(this,Gl),c.isCopy=!0):c.lines=n,f(this,Ji)&&(c.accessibilityData={type:"Figure",alt:f(this,Ji)}),c}static deserializeDraw(e,n,r,l,o,c){return c.areContours?LS.deserialize(e,n,r,l,o,c):Fg.deserialize(e,n,r,l,o,c)}static async deserialize(e,n,r){var o;const l=await super.deserialize(e,n,r);return x(l,ql,e.areContours),x(l,Ji,((o=e.accessibilityData)==null?void 0:o.alt)||""),x(l,Gl,e.uuid),l}};ql=new WeakMap,Ji=new WeakMap,Vl=new WeakMap,Gl=new WeakMap,mt(Hi,"_type","signature"),mt(Hi,"_editorType",zt.SIGNATURE),mt(Hi,"_defaultDrawingOptions",null);let FS=Hi;var Le,Tn,Yl,Ea,Xl,id,_a,Nu,Cr,ts,sd,se,Uf,qf,Vy,Gy,Yy,HS,Xy,JM;class BS extends ke{constructor(e){super({...e,name:"stampEditor"});R(this,se);R(this,Le,null);R(this,Tn,null);R(this,Yl,null);R(this,Ea,null);R(this,Xl,null);R(this,id,"");R(this,_a,null);R(this,Nu,!1);R(this,Cr,null);R(this,ts,!1);R(this,sd,!1);x(this,Ea,e.bitmapUrl),x(this,Xl,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){ke.initialize(e,n)}static isHandlingMimeForPasting(e){return Ow.includes(e)}static paste(e,n){n.pasteEditor(zt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:l,width:o,height:c}=e||this.copyCanvas(null,null,!0).imageData,h=await r.guess({name:"altText",request:{data:l,width:o,height:c,channels:l.length/(o*c)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const p=h.output;return await this.setGuessedAltText(p),n&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e;f(this,Tn)&&(x(this,Le,null),this._uiManager.imageManager.deleteId(f(this,Tn)),(e=f(this,_a))==null||e.remove(),x(this,_a,null),f(this,Cr)&&(clearTimeout(f(this,Cr)),x(this,Cr,null))),super.remove()}rebuild(){if(!this.parent){f(this,Tn)&&D(this,se,Vy).call(this);return}super.rebuild(),this.div!==null&&(f(this,Tn)&&f(this,_a)===null&&D(this,se,Vy).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(f(this,Yl)||f(this,Le)||f(this,Ea)||f(this,Xl)||f(this,Tn)||f(this,Nu))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),f(this,Nu)||(f(this,Le)?D(this,se,Gy).call(this):D(this,se,Vy).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:r,bitmap:l}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(x(this,Tn,r),l&&x(this,Le,l),x(this,Nu,!1),D(this,se,Gy).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;f(this,Cr)!==null&&clearTimeout(f(this,Cr)),x(this,Cr,setTimeout(()=>{x(this,Cr,null),D(this,se,HS).call(this)},200))}copyCanvas(e,n,r=!1){var v;e||(e=224);const{width:l,height:o}=f(this,Le),c=new Oa;let h=f(this,Le),p=l,g=o,y=null;if(n){if(l>n||o>n){const X=Math.min(n/l,n/o);p=Math.floor(l*X),g=Math.floor(o*X)}y=document.createElement("canvas");const S=y.width=Math.ceil(p*c.sx),w=y.height=Math.ceil(g*c.sy);f(this,ts)||(h=D(this,se,Yy).call(this,S,w));const _=y.getContext("2d");_.filter=this._uiManager.hcmFilter;let T="white",O="#cfcfd8";this._uiManager.hcmFilter!=="none"?O="black":(v=window.matchMedia)!=null&&v.call(window,"(prefers-color-scheme: dark)").matches&&(T="#8f8f9d",O="#42414d");const N=15,I=N*c.sx,z=N*c.sy,L=new OffscreenCanvas(I*2,z*2),B=L.getContext("2d");B.fillStyle=T,B.fillRect(0,0,I*2,z*2),B.fillStyle=O,B.fillRect(0,0,I,z),B.fillRect(I,z,I,z),_.fillStyle=_.createPattern(L,"repeat"),_.fillRect(0,0,S,w),_.drawImage(h,0,0,h.width,h.height,0,0,S,w)}let b=null;if(r){let S,w;if(c.symmetric&&h.width<e&&h.height<e)S=h.width,w=h.height;else if(h=f(this,Le),l>e||o>e){const O=Math.min(e/l,e/o);S=Math.floor(l*O),w=Math.floor(o*O),f(this,ts)||(h=D(this,se,Yy).call(this,S,w))}const T=new OffscreenCanvas(S,w).getContext("2d",{willReadFrequently:!0});T.drawImage(h,0,0,h.width,h.height,0,0,S,w),b={width:S,height:w,data:T.getImageData(0,0,S,w).data}}return{canvas:y,width:p,height:g,imageData:b}}static async deserialize(e,n,r){var _;let l=null,o=!1;if(e instanceof pM){const{data:{rect:T,rotation:O,id:N,structParent:I,popupRef:z},container:L,parent:{page:{pageNumber:B}},canvas:X}=e;let Q,rt;X?(delete e.canvas,{id:Q,bitmap:rt}=r.imageManager.getFromCanvas(L.id,X),X.remove()):(o=!0,e._hasNoCanvas=!0);const $=((_=await n._structTree.getAriaAttributes(`${Rx}${N}`))==null?void 0:_.get("aria-label"))||"";l=e={annotationType:zt.STAMP,bitmapId:Q,bitmap:rt,pageIndex:B-1,rect:T.slice(0),rotation:O,id:N,deleted:!1,accessibilityData:{decorative:!1,altText:$},isSvg:!1,structParent:I,popupRef:z}}const c=await super.deserialize(e,n,r),{rect:h,bitmap:p,bitmapUrl:g,bitmapId:y,isSvg:b,accessibilityData:v}=e;o?(r.addMissingCanvas(e.id,c),x(c,Nu,!0)):y&&r.imageManager.isValidId(y)?(x(c,Tn,y),p&&x(c,Le,p)):x(c,Ea,g),x(c,ts,b);const[S,w]=c.pageDimensions;return c.width=(h[2]-h[0])/S,c.height=(h[3]-h[1])/w,c.annotationElementId=e.id||null,v&&(c.altTextData=v),c._initialData=l,x(c,sd,!!l),c}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:zt.STAMP,bitmapId:f(this,Tn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:f(this,ts),structTreeParentId:this._structTreeParentId};if(e)return r.bitmapUrl=D(this,se,Xy).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:l,altText:o}=this.serializeAltText(!1);if(!l&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const h=D(this,se,JM).call(this,r);if(h.isSame)return null;h.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const c=f(this,ts)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(f(this,Tn)))n.stamps.set(f(this,Tn),{area:c,serialized:r}),r.bitmap=D(this,se,Xy).call(this,!1);else if(f(this,ts)){const h=n.stamps.get(f(this,Tn));c>h.area&&(h.area=c,h.serialized.bitmap.close(),h.serialized.bitmap=D(this,se,Xy).call(this,!1))}return r}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}Le=new WeakMap,Tn=new WeakMap,Yl=new WeakMap,Ea=new WeakMap,Xl=new WeakMap,id=new WeakMap,_a=new WeakMap,Nu=new WeakMap,Cr=new WeakMap,ts=new WeakMap,sd=new WeakMap,se=new WeakSet,Uf=function(e,n=!1){if(!e){this.remove();return}x(this,Le,e.bitmap),n||(x(this,Tn,e.id),x(this,ts,e.isSvg)),e.file&&x(this,id,e.file.name),D(this,se,Gy).call(this)},qf=function(){if(x(this,Yl,null),this._uiManager.enableWaiting(!1),!!f(this,_a)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,Le)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,Le)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Vy=function(){if(f(this,Tn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(f(this,Tn)).then(r=>D(this,se,Uf).call(this,r,!0)).finally(()=>D(this,se,qf).call(this));return}if(f(this,Ea)){const r=f(this,Ea);x(this,Ea,null),this._uiManager.enableWaiting(!0),x(this,Yl,this._uiManager.imageManager.getFromUrl(r).then(l=>D(this,se,Uf).call(this,l)).finally(()=>D(this,se,qf).call(this)));return}if(f(this,Xl)){const r=f(this,Xl);x(this,Xl,null),this._uiManager.enableWaiting(!0),x(this,Yl,this._uiManager.imageManager.getFromFile(r).then(l=>D(this,se,Uf).call(this,l)).finally(()=>D(this,se,qf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Ow.join(",");const n=this._uiManager._signal;x(this,Yl,new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const l=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),D(this,se,Uf).call(this,l)}r()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>D(this,se,qf).call(this))),e.click()},Gy=function(){var y;const{div:e}=this;let{width:n,height:r}=f(this,Le);const[l,o]=this.pageDimensions,c=.75;if(this.width)n=this.width*l,r=this.height*o;else if(n>c*l||r>c*o){const b=Math.min(c*l/n,c*o/r);n*=b,r*=b}const[h,p]=this.parentDimensions;this.setDims(n*h/l,r*p/o),this._uiManager.enableWaiting(!1);const g=x(this,_a,document.createElement("canvas"));g.setAttribute("role","img"),this.addContainer(g),this.width=n/l,this.height=r/o,(y=this._initialOptions)!=null&&y.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),D(this,se,HS).call(this),f(this,sd)||(this.parent.addUndoableEditor(this),x(this,sd,!0)),this._reportTelemetry({action:"inserted_image"}),f(this,id)&&this.div.setAttribute("aria-description",f(this,id))},Yy=function(e,n){const{width:r,height:l}=f(this,Le);let o=r,c=l,h=f(this,Le);for(;o>2*e||c>2*n;){const p=o,g=c;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*n&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const y=new OffscreenCanvas(o,c);y.getContext("2d").drawImage(h,0,0,p,g,0,0,o,c),h=y.transferToImageBitmap()}return h},HS=function(){const[e,n]=this.parentDimensions,{width:r,height:l}=this,o=new Oa,c=Math.ceil(r*e*o.sx),h=Math.ceil(l*n*o.sy),p=f(this,_a);if(!p||p.width===c&&p.height===h)return;p.width=c,p.height=h;const g=f(this,ts)?f(this,Le):D(this,se,Yy).call(this,c,h),y=p.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(g,0,0,g.width,g.height,0,0,c,h)},Xy=function(e){if(e){if(f(this,ts)){const l=this._uiManager.imageManager.getSvgUrl(f(this,Tn));if(l)return l}const n=document.createElement("canvas");return{width:n.width,height:n.height}=f(this,Le),n.getContext("2d").drawImage(f(this,Le),0,0),n.toDataURL()}if(f(this,ts)){const[n,r]=this.pageDimensions,l=Math.round(this.width*n*Zl.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*Zl.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(l,o);return c.getContext("2d").drawImage(f(this,Le),0,0,f(this,Le).width,f(this,Le).height,0,0,l,o),c.transferToImageBitmap()}return structuredClone(f(this,Le))},JM=function(e){var c;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,l=e.pageIndex===n,o=(((c=e.accessibilityData)==null?void 0:c.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&l&&o,isSameAltText:o}},mt(BS,"_type","stamp"),mt(BS,"_editorType",zt.STAMP);var Ou,rd,Tr,$l,Ca,_s,Wl,ad,Lu,$s,Ta,Zn,Ra,Ct,Kl,Pe,tN,cr,qS,VS,$y;const Is=class Is{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:r,accessibilityManager:l,annotationLayer:o,drawLayer:c,textLayer:h,viewport:p,l10n:g}){R(this,Pe);R(this,Ou);R(this,rd,!1);R(this,Tr,null);R(this,$l,null);R(this,Ca,null);R(this,_s,new Map);R(this,Wl,!1);R(this,ad,!1);R(this,Lu,!1);R(this,$s,null);R(this,Ta,null);R(this,Zn,null);R(this,Ra,null);R(this,Ct);const y=[...f(Is,Kl).values()];if(!Is._initialized){Is._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),x(this,Ct,t),this.pageIndex=e,this.div=n,x(this,Ou,l),x(this,Tr,o),this.viewport=p,x(this,Zn,h),this.drawLayer=c,this._structTree=r,f(this,Ct).addLayer(this)}get isEmpty(){return f(this,_s).size===0}get isInvisible(){return this.isEmpty&&f(this,Ct).getMode()===zt.NONE}updateToolbar(t){f(this,Ct).updateToolbar(t)}updateMode(t=f(this,Ct).getMode()){switch(D(this,Pe,$y).call(this),t){case zt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case zt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case zt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of f(Is,Kl).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=f(this,Zn))==null?void 0:e.div)}setEditingState(t){f(this,Ct).setEditingState(t)}addCommands(t){f(this,Ct).addCommands(t)}cleanUndoStack(t){f(this,Ct).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=f(this,Tr))==null||e.div.classList.toggle("disabled",!t)}async enable(){x(this,Lu,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of f(this,_s).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(f(this,Ct).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!f(this,Tr)){x(this,Lu,!1);return}const e=f(this,Tr).getEditableAnnotations();for(const n of e){if(n.hide(),f(this,Ct).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}x(this,Lu,!1)}disable(){var r;x(this,ad,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const l of f(this,_s).values())if(l.disableEditing(),!!l.annotationElementId){if(l.serialize()!==null){t.set(l.annotationElementId,l);continue}else e.set(l.annotationElementId,l);(r=this.getEditableAnnotation(l.annotationElementId))==null||r.show(),l.remove()}if(f(this,Tr)){const l=f(this,Tr).getEditableAnnotations();for(const o of l){const{id:c}=o.data;if(f(this,Ct).isDeletedAnnotationElement(c))continue;let h=e.get(c);if(h){h.resetAnnotationElement(o),h.show(!1),o.show();continue}h=t.get(c),h&&(f(this,Ct).addChangedExistingAnnotation(h),h.renderAnnotationElement(o)&&h.show(!1)),o.show()}}D(this,Pe,$y).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const l of f(Is,Kl).values())n.remove(`${l._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,ad,!1)}getEditableAnnotation(t){var e;return((e=f(this,Tr))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){f(this,Ct).getActive()!==t&&f(this,Ct).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=f(this,Zn))!=null&&t.div&&!f(this,Ra)){x(this,Ra,new AbortController);const e=f(this,Ct).combinedSignal(f(this,Ra));f(this,Zn).div.addEventListener("pointerdown",D(this,Pe,tN).bind(this),{signal:e}),f(this,Zn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=f(this,Zn))!=null&&t.div&&f(this,Ra)&&(f(this,Ra).abort(),x(this,Ra,null),f(this,Zn).div.classList.remove("highlighting"))}enableClick(){if(f(this,$l))return;x(this,$l,new AbortController);const t=f(this,Ct).combinedSignal(f(this,$l));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=f(this,$l))==null||t.abort(),x(this,$l,null)}attach(t){f(this,_s).set(t.id,t);const{annotationElementId:e}=t;e&&f(this,Ct).isDeletedAnnotationElement(e)&&f(this,Ct).removeDeletedAnnotationElement(t)}detach(t){var e;f(this,_s).delete(t.id),(e=f(this,Ou))==null||e.removePointerInTextLayer(t.contentDiv),!f(this,ad)&&t.annotationElementId&&f(this,Ct).addDeletedAnnotationElement(t)}remove(t){this.detach(t),f(this,Ct).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(f(this,Ct).addDeletedAnnotationElement(t.annotationElementId),ke.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),f(this,Ct).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!f(this,Lu)),f(this,Ct).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!f(this,Ca)&&(t._focusEventsAllowed=!1,x(this,Ca,setTimeout(()=>{x(this,Ca,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:f(this,Ct)._signal}),e.focus())},0))),t._structTreeParentId=(n=f(this,Ou))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return f(this,Ct).getId()}combinedSignal(t){return f(this,Ct).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=f(this,Pe,cr))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){f(this,Ct).updateToolbar(t),await f(this,Ct).updateMode(t);const{offsetX:n,offsetY:r}=D(this,Pe,VS).call(this),l=this.getNextId(),o=D(this,Pe,qS).call(this,{parent:this,id:l,x:n,y:r,uiManager:f(this,Ct),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=f(Is,Kl).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,f(this,Ct)))||null}createAndAddNewEditor(t,e,n={}){const r=this.getNextId(),l=D(this,Pe,qS).call(this,{parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:f(this,Ct),isCentered:e,...n});return l&&this.add(l),l}addNewEditor(t={}){this.createAndAddNewEditor(D(this,Pe,VS).call(this),!0,t)}setSelected(t){f(this,Ct).setSelected(t)}toggleSelected(t){f(this,Ct).toggleSelected(t)}unselect(t){f(this,Ct).unselect(t)}pointerup(t){var r;const{isMac:e}=Hn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!f(this,Wl)||(x(this,Wl,!1),(r=f(this,Pe,cr))!=null&&r.isDrawer&&f(this,Pe,cr).supportMultipleDrawings))return;if(!f(this,rd)){x(this,rd,!0);return}const n=f(this,Ct).getMode();if(n===zt.STAMP||n===zt.SIGNATURE){f(this,Ct).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var r;if(f(this,Ct).getMode()===zt.HIGHLIGHT&&this.enableTextSelection(),f(this,Wl)){x(this,Wl,!1);return}const{isMac:e}=Hn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(x(this,Wl,!0),(r=f(this,Pe,cr))!=null&&r.isDrawer){this.startDrawingSession(t);return}const n=f(this,Ct).getActive();x(this,rd,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),f(this,$s)){f(this,Pe,cr).startDrawing(this,f(this,Ct),!1,t);return}f(this,Ct).setCurrentDrawingSession(this),x(this,$s,new AbortController);const e=f(this,Ct).combinedSignal(f(this,$s));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(x(this,Ta,null),this.commitOrRemove())},{signal:e}),f(this,Pe,cr).startDrawing(this,f(this,Ct),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&x(this,Ta,e);return}f(this,Ta)&&setTimeout(()=>{var e;(e=f(this,Ta))==null||e.focus(),x(this,Ta,null)},0)}endDrawingSession(t=!1){return f(this,$s)?(f(this,Ct).setCurrentDrawingSession(null),f(this,$s).abort(),x(this,$s,null),x(this,Ta,null),f(this,Pe,cr).endDrawing(t)):null}findNewParent(t,e,n){const r=f(this,Ct).findParent(e,n);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return f(this,$s)?(this.endDrawingSession(),!0):!1}onScaleChanging(){f(this,$s)&&f(this,Pe,cr).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=f(this,Ct).getActive())==null?void 0:t.parent)===this&&(f(this,Ct).commitOrRemove(),f(this,Ct).setActiveEditor(null)),f(this,Ca)&&(clearTimeout(f(this,Ca)),x(this,Ca,null));for(const n of f(this,_s).values())(e=f(this,Ou))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,f(this,_s).clear(),f(this,Ct).removeLayer(this)}render({viewport:t}){this.viewport=t,Fu(this.div,t);for(const e of f(this,Ct).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){f(this,Ct).commitOrRemove(),D(this,Pe,$y).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Fu(this.div,{rotation:n}),e!==n)for(const r of f(this,_s).values())r.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return f(this,Ct).viewParameters.realScale}};Ou=new WeakMap,rd=new WeakMap,Tr=new WeakMap,$l=new WeakMap,Ca=new WeakMap,_s=new WeakMap,Wl=new WeakMap,ad=new WeakMap,Lu=new WeakMap,$s=new WeakMap,Ta=new WeakMap,Zn=new WeakMap,Ra=new WeakMap,Ct=new WeakMap,Kl=new WeakMap,Pe=new WeakSet,tN=function(t){f(this,Ct).unselectAll();const{target:e}=t;if(e===f(this,Zn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&f(this,Zn).div.contains(e)){const{isMac:n}=Hn.platform;if(t.button!==0||t.ctrlKey&&n)return;f(this,Ct).showAllEditors("highlight",!0,!0),f(this,Zn).div.classList.add("free"),this.toggleDrawing(),ub.startHighlighting(this,f(this,Ct).direction==="ltr",{target:f(this,Zn).div,x:t.x,y:t.y}),f(this,Zn).div.addEventListener("pointerup",()=>{f(this,Zn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:f(this,Ct)._signal}),t.preventDefault()}},cr=function(){return f(Is,Kl).get(f(this,Ct).getMode())},qS=function(t){const e=f(this,Pe,cr);return e?new e.prototype.constructor(t):null},VS=function(){const{x:t,y:e,width:n,height:r}=this.div.getBoundingClientRect(),l=Math.max(0,t),o=Math.max(0,e),c=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+r),p=(l+c)/2-t,g=(o+h)/2-e,[y,b]=this.viewport.rotation%180===0?[p,g]:[g,p];return{offsetX:y,offsetY:b}},$y=function(){for(const t of f(this,_s).values())t.isEmpty()&&t.remove()},mt(Is,"_initialized",!1),R(Is,Kl,new Map([AS,OS,BS,ub,FS].map(t=>[t._editorType,t])));let US=Is;var Ws,ci,Pu,_g,Ob,eN,Mr,YS,nN,XS;const pn=class pn{constructor({pageIndex:t}){R(this,Mr);R(this,Ws,null);R(this,ci,new Map);R(this,Pu,new Map);this.pageIndex=t}setParent(t){if(!f(this,Ws)){x(this,Ws,t);return}if(f(this,Ws)!==t){if(f(this,ci).size>0)for(const e of f(this,ci).values())e.remove(),t.append(e);x(this,Ws,t)}}static get _svgFactory(){return Jt(this,"_svgFactory",new ab)}draw(t,e=!1,n=!1){const r=ri(pn,_g)._++,l=D(this,Mr,YS).call(this),o=pn._svgFactory.createElement("defs");l.append(o);const c=pn._svgFactory.createElement("path");o.append(c);const h=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke"),e&&f(this,Pu).set(r,c);const p=n?D(this,Mr,nN).call(this,o,h):null,g=pn._svgFactory.createElement("use");return l.append(g),g.setAttribute("href",`#${h}`),this.updateProperties(l,t),f(this,ci).set(r,l),{id:r,clipPathId:`url(#${p})`}}drawOutline(t,e){const n=ri(pn,_g)._++,r=D(this,Mr,YS).call(this),l=pn._svgFactory.createElement("defs");r.append(l);const o=pn._svgFactory.createElement("path");l.append(o);const c=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const y=pn._svgFactory.createElement("mask");l.append(y),h=`mask_p${this.pageIndex}_${n}`,y.setAttribute("id",h),y.setAttribute("maskUnits","objectBoundingBox");const b=pn._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const v=pn._svgFactory.createElement("use");y.append(v),v.setAttribute("href",`#${c}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const p=pn._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${c}`),h&&p.setAttribute("mask",`url(#${h})`);const g=p.cloneNode();return r.append(g),p.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(r,t),f(this,ci).set(n,r),n}finalizeDraw(t,e){f(this,Pu).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var h;if(!e)return;const{root:n,bbox:r,rootClass:l,path:o}=e,c=typeof t=="number"?f(this,ci).get(t):t;if(c){if(n&&D(this,Mr,XS).call(this,c,n),r&&D(h=pn,Ob,eN).call(h,c,r),l){const{classList:p}=c;for(const[g,y]of Object.entries(l))p.toggle(g,y)}if(o){const g=c.firstChild.firstChild;D(this,Mr,XS).call(this,g,o)}}}updateParent(t,e){if(e===this)return;const n=f(this,ci).get(t);n&&(f(e,Ws).append(n),f(this,ci).delete(t),f(e,ci).set(t,n))}remove(t){f(this,Pu).delete(t),f(this,Ws)!==null&&(f(this,ci).get(t).remove(),f(this,ci).delete(t))}destroy(){x(this,Ws,null);for(const t of f(this,ci).values())t.remove();f(this,ci).clear(),f(this,Pu).clear()}};Ws=new WeakMap,ci=new WeakMap,Pu=new WeakMap,_g=new WeakMap,Ob=new WeakSet,eN=function(t,[e,n,r,l]){const{style:o}=t;o.top=`${100*n}%`,o.left=`${100*e}%`,o.width=`${100*r}%`,o.height=`${100*l}%`},Mr=new WeakSet,YS=function(){const t=pn._svgFactory.create(1,1,!0);return f(this,Ws).append(t),t.setAttribute("aria-hidden",!0),t},nN=function(t,e){const n=pn._svgFactory.createElement("clipPath");t.append(n);const r=`clip_${e}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const l=pn._svgFactory.createElement("use");return n.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),r},XS=function(t,e){for(const[n,r]of Object.entries(e))r===null?t.removeAttribute(n):t.setAttribute(n,r)},R(pn,Ob),R(pn,_g,0);let GS=pn;globalThis.pdfjsTestingUtils={HighlightOutliner:SS};globalThis.pdfjsLib={AbortException:Ql,AnnotationEditorLayer:US,AnnotationEditorParamsType:ee,AnnotationEditorType:zt,AnnotationEditorUIManager:Bu,AnnotationLayer:yS,AnnotationMode:dl,AnnotationType:sn,build:qB,ColorPicker:ob,createValidAbsoluteUrl:KD,DOMSVGFactory:ab,DrawLayer:GS,FeatureTest:Hn,fetchData:Lg,getDocument:Jk,getFilenameFromUrl:zF,getPdfFilenameFromUrl:IF,getUuid:JD,getXfaPageViewport:jF,GlobalWorkerOptions:Dr,ImageKind:by,InvalidPDFException:Mw,isDataScheme:Wb,isPdfFile:kx,isValidExplicitDest:zB,MathClamp:di,noContextMenu:Zs,normalizeUnicode:OF,OPS:nb,OutputScale:Oa,PasswordResponses:EF,PDFDataRangeTransport:tM,PDFDateString:Mx,PDFWorker:Zc,PermissionFlag:xF,PixelsPerInch:Zl,RenderingCancelledException:Dx,ResponseException:ib,setLayerDimensions:Fu,shadow:Jt,SignatureExtractor:Da,stopEvent:an,SupportedImageMimeTypes:Ow,TextLayer:Zf,TouchManager:rb,updateUrlHash:QD,Util:_t,VerbosityLevel:Yb,version:UB,XfaLayer:nM};const iN=et.createContext(null),gR=({children:i})=>{const[t,e]=et.useState(null),[n,r]=et.useState(null),[l,o]=et.useState(null),[c,h]=et.useState([]),p=et.useRef([]),g=Pa();return et.useEffect(()=>{const y=b=>{const v=b.data;v.command==="demoPdfPath"&&e(v.filePath),v.command==="PdfWorkerPath"&&r(v.path)};return window.addEventListener("message",y),g.postMessage({command:"getDemoPdfPath"}),g.postMessage({command:"getPdfWorkerPath"}),()=>window.removeEventListener("message",y)},[]),et.useEffect(()=>{if(!t||!n)return;Dr.workerSrc=n;let y=!1;return(async()=>{try{const v=await Jk(t).promise;if(y)return;o(v);const S=[];let w=0;const _=1;for(let T=1;T<=v.numPages;T++){const N=(await v.getPage(T)).getViewport({scale:_});S.push({width:N.width,height:N.height,offsetY:w}),w+=N.height+10}y||h(S)}catch(b){console.error("PDF 加载失败:",b)}})(),()=>{y=!0}},[t,n]),et.useEffect(()=>{if(!l||c.length===0)return;const y=1;c.forEach((b,v)=>{const S=p.current[v];S&&l.getPage(v+1).then(w=>{const _=w.getViewport({scale:y});S.width=_.width,S.height=_.height;const T=S.getContext("2d");T&&w.render({canvasContext:T,viewport:_})})})},[l,c]),c.length===0?P.jsx("div",{className:"text-center text-gray-500",children:"Loading PDF…"}):P.jsxs("div",{className:"relative bg-gray-100 overflow-auto h-full",children:[c.map((y,b)=>P.jsx("div",{className:"mx-auto relative mb-2",style:{width:y.width,height:y.height},children:P.jsx("canvas",{ref:v=>{v&&(p.current[b]=v)},className:"block"})},b)),P.jsx(iN.Provider,{value:{pageMetrics:c},children:i})]})},sN=()=>{const i=et.useContext(iN);if(!i)throw new Error("usePDFMetrics 必须在 <PDFViewer> 内使用");return i.pageMetrics},mR=({data:i})=>{const{openPanel:t}=Gb(),e=sN(),n=r=>{t({id:r.id,type:"comment",content:r.content,author:r.author,time:r.time})};return P.jsx(P.Fragment,{children:i.map(r=>{const l=e[r.page-1];if(!l)return null;const o=r.position.x*l.width,c=l.offsetY+r.position.y*l.height;return P.jsx("div",{className:"comment-icon absolute cursor-pointer",style:{left:o,top:c},onClick:()=>n(r),title:"查看评论",children:"💬"},r.id)})})},yR=({data:i})=>{const t=sN(),{openPanel:e}=Gb(),[n,r]=et.useState(null),l=c=>{const h=c.id;r(p=>p===h?null:h),e({id:h,type:"code",code:c.content,language:""})},o=c=>{navigator.clipboard.writeText(c).catch(h=>console.error("复制失败:",h))};return P.jsx(P.Fragment,{children:i.map(c=>{const h=t[c.page-1];if(!h)return null;const{id:p,content:g,position:{x:y,y:b,width:v,height:S}}=c,w=y*h.width,_=h.offsetY+b*h.height,T=v*h.width,O=S*h.height,N=n===p;return P.jsxs(Lb.Fragment,{children:[P.jsx("div",{style:{position:"absolute",left:w,top:_,width:T,height:O},className:"bg-green-200 bg-opacity-30 border border-green-500 cursor-pointer",onClick:()=>l(c),children:P.jsx("span",{style:{pointerEvents:"none"},children:"</>"})}),N&&P.jsxs("div",{style:{position:"absolute",left:w,top:_+O+4,width:Math.max(T,200)},className:"bg-white border border-gray-300 shadow-lg p-2 z-10",children:[P.jsxs("div",{className:"flex justify-between items-center mb-1",children:[P.jsx("strong",{className:"text-xs text-gray-700",children:"代码片段"}),P.jsx("button",{className:"text-xs text-gray-500 hover:text-gray-800",onClick:()=>r(null),children:"关闭"})]}),P.jsx("pre",{contentEditable:!0,suppressContentEditableWarning:!0,className:"bg-gray-100 p-2 text-xs overflow-auto",style:{maxHeight:"150px"},children:g}),P.jsxs("div",{className:"text-right mt-1",children:[P.jsx("button",{className:"text-xs text-blue-500 hover:underline mr-2",onClick:()=>o(g),children:"复制"}),P.jsx("button",{className:"text-xs text-green-600 hover:underline",onClick:()=>alert("保存已提交"),children:"保存"})]})]})]},p)})})},hH=({data:i,onClose:t})=>P.jsxs("div",{className:"border border-gray-300 bg-white shadow-lg rounded-xl overflow-hidden mb-4",children:[P.jsxs("div",{className:"flex justify-between items-center bg-blue-500 text-white p-2",children:[P.jsx("div",{className:"text-sm font-semibold",children:i.author}),P.jsx("div",{className:"text-xs",children:i.time}),P.jsx("button",{className:"text-white hover:text-gray-200 text-xs",onClick:t,children:"✕"})]}),P.jsx("div",{className:"p-4 text-sm text-gray-700 whitespace-pre-wrap",children:i.content})]}),dH=({data:i,onClose:t})=>{const[e,n]=Lb.useState(i.code),r=()=>{navigator.clipboard.writeText(e)},l=()=>{console.log("保存代码:",e)};return P.jsxs("div",{className:"border border-gray-300 bg-white shadow-lg rounded-xl overflow-hidden mb-4",children:[P.jsxs("div",{className:"flex justify-between items-center bg-green-500 text-white p-2",children:[P.jsxs("div",{className:"text-sm font-semibold",children:["代码片段 ",i.language&&`(${i.language})`]}),P.jsxs("div",{className:"space-x-2 text-xs",children:[P.jsx("button",{className:"hover:text-gray-200",onClick:r,children:"复制"}),P.jsx("button",{className:"hover:text-gray-200",onClick:l,children:"保存"}),P.jsx("button",{className:"hover:text-gray-200",onClick:t,children:"✕"})]})]}),P.jsx("textarea",{className:"w-full h-40 p-3 font-mono text-sm bg-gray-50 border-t border-b border-gray-200 resize-y outline-none",value:e,onChange:o=>n(o.target.value)}),P.jsxs("div",{className:"p-3 bg-gray-100 text-sm",children:[P.jsx("strong",{children:"运行结果:"}),P.jsx("div",{className:"mt-2 text-gray-600",children:"(结果输出区域)"})]})]})},fH=()=>{const{openPanels:i,closePanel:t}=Gb();return i.length===0?null:P.jsx("div",{className:"p-4 overflow-auto h-full bg-gray-50",children:i.map(e=>e.type==="comment"?P.jsx(hH,{data:{content:e.content,author:e.author,time:e.time},onClose:()=>t(e.id)},e.id):e.type==="code"?P.jsx(dH,{data:{code:e.code,language:e.language},onClose:()=>t(e.id)},e.id):null)})},Zb=et.createContext(null);Zb.displayName="PanelGroupContext";const Ge={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Bx=10,Iu=et.useLayoutEffect,bR=oL.useId,pH=typeof bR=="function"?bR:()=>null;let gH=0;function Hx(i=null){const t=pH(),e=et.useRef(i||t||null);return e.current===null&&(e.current=""+gH++),i??e.current}function rN({children:i,className:t="",collapsedSize:e,collapsible:n,defaultSize:r,forwardedRef:l,id:o,maxSize:c,minSize:h,onCollapse:p,onExpand:g,onResize:y,order:b,style:v,tagName:S="div",...w}){const _=et.useContext(Zb);if(_===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:T,expandPanel:O,getPanelSize:N,getPanelStyle:I,groupId:z,isPanelCollapsed:L,reevaluatePanelConstraints:B,registerPanel:X,resizePanel:Q,unregisterPanel:rt}=_,$=Hx(o),J=et.useRef({callbacks:{onCollapse:p,onExpand:g,onResize:y},constraints:{collapsedSize:e,collapsible:n,defaultSize:r,maxSize:c,minSize:h},id:$,idIsFromProps:o!==void 0,order:b});et.useRef({didLogMissingDefaultSizeWarning:!1}),Iu(()=>{const{callbacks:tt,constraints:dt}=J.current,F={...dt};J.current.id=$,J.current.idIsFromProps=o!==void 0,J.current.order=b,tt.onCollapse=p,tt.onExpand=g,tt.onResize=y,dt.collapsedSize=e,dt.collapsible=n,dt.defaultSize=r,dt.maxSize=c,dt.minSize=h,(F.collapsedSize!==dt.collapsedSize||F.collapsible!==dt.collapsible||F.maxSize!==dt.maxSize||F.minSize!==dt.minSize)&&B(J.current,F)}),Iu(()=>{const tt=J.current;return X(tt),()=>{rt(tt)}},[b,$,X,rt]),et.useImperativeHandle(l,()=>({collapse:()=>{T(J.current)},expand:tt=>{O(J.current,tt)},getId(){return $},getSize(){return N(J.current)},isCollapsed(){return L(J.current)},isExpanded(){return!L(J.current)},resize:tt=>{Q(J.current,tt)}}),[T,O,N,L,$,Q]);const ht=I(J.current,r);return et.createElement(S,{...w,children:i,className:t,id:$,style:{...ht,...v},[Ge.groupId]:z,[Ge.panel]:"",[Ge.panelCollapsible]:n||void 0,[Ge.panelId]:$,[Ge.panelSize]:parseFloat(""+ht.flexGrow).toFixed(1)})}const $S=et.forwardRef((i,t)=>et.createElement(rN,{...i,forwardedRef:t}));rN.displayName="Panel";$S.displayName="forwardRef(Panel)";let WS=null,Wy=-1,fl=null;function mH(i,t){if(t){const e=(t&cN)!==0,n=(t&hN)!==0,r=(t&dN)!==0,l=(t&fN)!==0;if(e)return r?"se-resize":l?"ne-resize":"e-resize";if(n)return r?"sw-resize":l?"nw-resize":"w-resize";if(r)return"s-resize";if(l)return"n-resize"}switch(i){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function yH(){fl!==null&&(document.head.removeChild(fl),WS=null,fl=null,Wy=-1)}function JA(i,t){var e,n;const r=mH(i,t);if(WS!==r){if(WS=r,fl===null&&(fl=document.createElement("style"),document.head.appendChild(fl)),Wy>=0){var l;(l=fl.sheet)===null||l===void 0||l.removeRule(Wy)}Wy=(e=(n=fl.sheet)===null||n===void 0?void 0:n.insertRule(`*{cursor: ${r} !important;}`))!==null&&e!==void 0?e:-1}}function aN(i){return i.type==="keydown"}function lN(i){return i.type.startsWith("pointer")}function oN(i){return i.type.startsWith("mouse")}function Jb(i){if(lN(i)){if(i.isPrimary)return{x:i.clientX,y:i.clientY}}else if(oN(i))return{x:i.clientX,y:i.clientY};return{x:1/0,y:1/0}}function bH(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function vH(i,t,e){return i.x<t.x+t.width&&i.x+i.width>t.x&&i.y<t.y+t.height&&i.y+i.height>t.y}function AH(i,t){if(i===t)throw new Error("Cannot compare node with itself");const e={a:wR(i),b:wR(t)};let n;for(;e.a.at(-1)===e.b.at(-1);)i=e.a.pop(),t=e.b.pop(),n=i;Gt(n,"Stacking order can only be calculated for elements with a common ancestor");const r={a:AR(vR(e.a)),b:AR(vR(e.b))};if(r.a===r.b){const l=n.childNodes,o={a:e.a.at(-1),b:e.b.at(-1)};let c=l.length;for(;c--;){const h=l[c];if(h===o.a)return 1;if(h===o.b)return-1}}return Math.sign(r.a-r.b)}const wH=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function SH(i){var t;const e=getComputedStyle((t=uN(i))!==null&&t!==void 0?t:i).display;return e==="flex"||e==="inline-flex"}function xH(i){const t=getComputedStyle(i);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||SH(i))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||wH.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function vR(i){let t=i.length;for(;t--;){const e=i[t];if(Gt(e,"Missing node"),xH(e))return e}return null}function AR(i){return i&&Number(getComputedStyle(i).zIndex)||0}function wR(i){const t=[];for(;i;)t.push(i),i=uN(i);return t}function uN(i){const{parentNode:t}=i;return t&&t instanceof ShadowRoot?t.host:t}const cN=1,hN=2,dN=4,fN=8,EH=bH()==="coarse";let Qs=[],Jc=!1,pl=new Map,tv=new Map;const tp=new Set;function _H(i,t,e,n,r){var l;const{ownerDocument:o}=t,c={direction:e,element:t,hitAreaMargins:n,setResizeHandlerState:r},h=(l=pl.get(o))!==null&&l!==void 0?l:0;return pl.set(o,h+1),tp.add(c),hb(),function(){var g;tv.delete(i),tp.delete(c);const y=(g=pl.get(o))!==null&&g!==void 0?g:1;if(pl.set(o,y-1),hb(),y===1&&pl.delete(o),Qs.includes(c)){const b=Qs.indexOf(c);b>=0&&Qs.splice(b,1),qx(),r("up",!0,null)}}}function CH(i){const{target:t}=i,{x:e,y:n}=Jb(i);Jc=!0,Ux({target:t,x:e,y:n}),hb(),Qs.length>0&&(db("down",i),i.preventDefault(),pN(t)||i.stopImmediatePropagation())}function tw(i){const{x:t,y:e}=Jb(i);if(Jc&&i.buttons===0&&(Jc=!1,db("up",i)),!Jc){const{target:n}=i;Ux({target:n,x:t,y:e})}db("move",i),qx(),Qs.length>0&&i.preventDefault()}function ew(i){const{target:t}=i,{x:e,y:n}=Jb(i);tv.clear(),Jc=!1,Qs.length>0&&(i.preventDefault(),pN(t)||i.stopImmediatePropagation()),db("up",i),Ux({target:t,x:e,y:n}),qx(),hb()}function pN(i){let t=i;for(;t;){if(t.hasAttribute(Ge.resizeHandle))return!0;t=t.parentElement}return!1}function Ux({target:i,x:t,y:e}){Qs.splice(0);let n=null;(i instanceof HTMLElement||i instanceof SVGElement)&&(n=i),tp.forEach(r=>{const{element:l,hitAreaMargins:o}=r,c=l.getBoundingClientRect(),{bottom:h,left:p,right:g,top:y}=c,b=EH?o.coarse:o.fine;if(t>=p-b&&t<=g+b&&e>=y-b&&e<=h+b){if(n!==null&&document.contains(n)&&l!==n&&!l.contains(n)&&!n.contains(l)&&AH(n,l)>0){let S=n,w=!1;for(;S&&!S.contains(l);){if(vH(S.getBoundingClientRect(),c)){w=!0;break}S=S.parentElement}if(w)return}Qs.push(r)}})}function nw(i,t){tv.set(i,t)}function qx(){let i=!1,t=!1;Qs.forEach(n=>{const{direction:r}=n;r==="horizontal"?i=!0:t=!0});let e=0;tv.forEach(n=>{e|=n}),i&&t?JA("intersection",e):i?JA("horizontal",e):t?JA("vertical",e):yH()}let iw=new AbortController;function hb(){iw.abort(),iw=new AbortController;const i={capture:!0,signal:iw.signal};tp.size&&(Jc?(Qs.length>0&&pl.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("contextmenu",ew,i),n.addEventListener("pointerleave",tw,i),n.addEventListener("pointermove",tw,i))}),pl.forEach((t,e)=>{const{body:n}=e;n.addEventListener("pointerup",ew,i),n.addEventListener("pointercancel",ew,i)})):pl.forEach((t,e)=>{const{body:n}=e;t>0&&(n.addEventListener("pointerdown",CH,i),n.addEventListener("pointermove",tw,i))}))}function db(i,t){tp.forEach(e=>{const{setResizeHandlerState:n}=e,r=Qs.includes(e);n(i,r,t)})}function TH(){const[i,t]=et.useState(0);return et.useCallback(()=>t(e=>e+1),[])}function Gt(i,t){if(!i)throw console.error(t),Error(t)}function Uu(i,t,e=Bx){return i.toFixed(e)===t.toFixed(e)?0:i>t?1:-1}function ka(i,t,e=Bx){return Uu(i,t,e)===0}function ns(i,t,e){return Uu(i,t,e)===0}function RH(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){const r=i[n],l=t[n];if(!ns(r,l,e))return!1}return!0}function Yc({panelConstraints:i,panelIndex:t,size:e}){const n=i[t];Gt(n!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:r=0,collapsible:l,maxSize:o=100,minSize:c=0}=n;if(Uu(e,c)<0)if(l){const h=(r+c)/2;Uu(e,h)<0?e=r:e=c}else e=c;return e=Math.min(o,e),e=parseFloat(e.toFixed(Bx)),e}function Vf({delta:i,initialLayout:t,panelConstraints:e,pivotIndices:n,prevLayout:r,trigger:l}){if(ns(i,0))return t;const o=[...t],[c,h]=n;Gt(c!=null,"Invalid first pivot index"),Gt(h!=null,"Invalid second pivot index");let p=0;if(l==="keyboard"){{const y=i<0?h:c,b=e[y];Gt(b,`Panel constraints not found for index ${y}`);const{collapsedSize:v=0,collapsible:S,minSize:w=0}=b;if(S){const _=t[y];if(Gt(_!=null,`Previous layout not found for panel index ${y}`),ns(_,v)){const T=w-_;Uu(T,Math.abs(i))>0&&(i=i<0?0-T:T)}}}{const y=i<0?c:h,b=e[y];Gt(b,`No panel constraints found for index ${y}`);const{collapsedSize:v=0,collapsible:S,minSize:w=0}=b;if(S){const _=t[y];if(Gt(_!=null,`Previous layout not found for panel index ${y}`),ns(_,w)){const T=_-v;Uu(T,Math.abs(i))>0&&(i=i<0?0-T:T)}}}}{const y=i<0?1:-1;let b=i<0?h:c,v=0;for(;;){const w=t[b];Gt(w!=null,`Previous layout not found for panel index ${b}`);const T=Yc({panelConstraints:e,panelIndex:b,size:100})-w;if(v+=T,b+=y,b<0||b>=e.length)break}const S=Math.min(Math.abs(i),Math.abs(v));i=i<0?0-S:S}{let b=i<0?c:h;for(;b>=0&&b<e.length;){const v=Math.abs(i)-Math.abs(p),S=t[b];Gt(S!=null,`Previous layout not found for panel index ${b}`);const w=S-v,_=Yc({panelConstraints:e,panelIndex:b,size:w});if(!ns(S,_)&&(p+=S-_,o[b]=_,p.toPrecision(3).localeCompare(Math.abs(i).toPrecision(3),void 0,{numeric:!0})>=0))break;i<0?b--:b++}}if(RH(r,o))return r;{const y=i<0?h:c,b=t[y];Gt(b!=null,`Previous layout not found for panel index ${y}`);const v=b+p,S=Yc({panelConstraints:e,panelIndex:y,size:v});if(o[y]=S,!ns(S,v)){let w=v-S,T=i<0?h:c;for(;T>=0&&T<e.length;){const O=o[T];Gt(O!=null,`Previous layout not found for panel index ${T}`);const N=O+w,I=Yc({panelConstraints:e,panelIndex:T,size:N});if(ns(O,I)||(w-=I-O,o[T]=I),ns(w,0))break;i>0?T--:T++}}}const g=o.reduce((y,b)=>b+y,0);return ns(g,100)?o:r}function DH({layout:i,panelsArray:t,pivotIndices:e}){let n=0,r=100,l=0,o=0;const c=e[0];Gt(c!=null,"No pivot index found"),t.forEach((y,b)=>{const{constraints:v}=y,{maxSize:S=100,minSize:w=0}=v;b===c?(n=w,r=S):(l+=w,o+=S)});const h=Math.min(r,100-l),p=Math.max(n,100-o),g=i[c];return{valueMax:h,valueMin:p,valueNow:g}}function ep(i,t=document){return Array.from(t.querySelectorAll(`[${Ge.resizeHandleId}][data-panel-group-id="${i}"]`))}function gN(i,t,e=document){const r=ep(i,e).findIndex(l=>l.getAttribute(Ge.resizeHandleId)===t);return r??null}function mN(i,t,e){const n=gN(i,t,e);return n!=null?[n,n+1]:[-1,-1]}function yN(i,t=document){var e;if(t instanceof HTMLElement&&(t==null||(e=t.dataset)===null||e===void 0?void 0:e.panelGroupId)==i)return t;const n=t.querySelector(`[data-panel-group][data-panel-group-id="${i}"]`);return n||null}function ev(i,t=document){const e=t.querySelector(`[${Ge.resizeHandleId}="${i}"]`);return e||null}function kH(i,t,e,n=document){var r,l,o,c;const h=ev(t,n),p=ep(i,n),g=h?p.indexOf(h):-1,y=(r=(l=e[g])===null||l===void 0?void 0:l.id)!==null&&r!==void 0?r:null,b=(o=(c=e[g+1])===null||c===void 0?void 0:c.id)!==null&&o!==void 0?o:null;return[y,b]}function MH({committedValuesRef:i,eagerValuesRef:t,groupId:e,layout:n,panelDataArray:r,panelGroupElement:l,setLayout:o}){et.useRef({didWarnAboutMissingResizeHandle:!1}),Iu(()=>{if(!l)return;const c=ep(e,l);for(let h=0;h<r.length-1;h++){const{valueMax:p,valueMin:g,valueNow:y}=DH({layout:n,panelsArray:r,pivotIndices:[h,h+1]}),b=c[h];if(b!=null){const v=r[h];Gt(v,`No panel data found for index "${h}"`),b.setAttribute("aria-controls",v.id),b.setAttribute("aria-valuemax",""+Math.round(p)),b.setAttribute("aria-valuemin",""+Math.round(g)),b.setAttribute("aria-valuenow",y!=null?""+Math.round(y):"")}}return()=>{c.forEach((h,p)=>{h.removeAttribute("aria-controls"),h.removeAttribute("aria-valuemax"),h.removeAttribute("aria-valuemin"),h.removeAttribute("aria-valuenow")})}},[e,n,r,l]),et.useEffect(()=>{if(!l)return;const c=t.current;Gt(c,"Eager values not found");const{panelDataArray:h}=c,p=yN(e,l);Gt(p!=null,`No group found for id "${e}"`);const g=ep(e,l);Gt(g,`No resize handles found for group id "${e}"`);const y=g.map(b=>{const v=b.getAttribute(Ge.resizeHandleId);Gt(v,"Resize handle element has no handle id attribute");const[S,w]=kH(e,v,h,l);if(S==null||w==null)return()=>{};const _=T=>{if(!T.defaultPrevented)switch(T.key){case"Enter":{T.preventDefault();const O=h.findIndex(N=>N.id===S);if(O>=0){const N=h[O];Gt(N,`No panel data found for index ${O}`);const I=n[O],{collapsedSize:z=0,collapsible:L,minSize:B=0}=N.constraints;if(I!=null&&L){const X=Vf({delta:ns(I,z)?B-z:z-I,initialLayout:n,panelConstraints:h.map(Q=>Q.constraints),pivotIndices:mN(e,v,l),prevLayout:n,trigger:"keyboard"});n!==X&&o(X)}}break}}};return b.addEventListener("keydown",_),()=>{b.removeEventListener("keydown",_)}});return()=>{y.forEach(b=>b())}},[l,i,t,e,n,r,o])}function SR(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!==t[e])return!1;return!0}function bN(i,t){const e=i==="horizontal",{x:n,y:r}=Jb(t);return e?n:r}function NH(i,t,e,n,r){const l=e==="horizontal",o=ev(t,r);Gt(o,`No resize handle element found for id "${t}"`);const c=o.getAttribute(Ge.groupId);Gt(c,"Resize handle element has no group id attribute");let{initialCursorPosition:h}=n;const p=bN(e,i),g=yN(c,r);Gt(g,`No group element found for id "${c}"`);const y=g.getBoundingClientRect(),b=l?y.width:y.height;return(p-h)/b*100}function OH(i,t,e,n,r,l){if(aN(i)){const o=e==="horizontal";let c=0;i.shiftKey?c=100:r!=null?c=r:c=10;let h=0;switch(i.key){case"ArrowDown":h=o?0:c;break;case"ArrowLeft":h=o?-c:0;break;case"ArrowRight":h=o?c:0;break;case"ArrowUp":h=o?0:-c;break;case"End":h=100;break;case"Home":h=-100;break}return h}else return n==null?0:NH(i,t,e,n,l)}function LH({panelDataArray:i}){const t=Array(i.length),e=i.map(l=>l.constraints);let n=0,r=100;for(let l=0;l<i.length;l++){const o=e[l];Gt(o,`Panel constraints not found for index ${l}`);const{defaultSize:c}=o;c!=null&&(n++,t[l]=c,r-=c)}for(let l=0;l<i.length;l++){const o=e[l];Gt(o,`Panel constraints not found for index ${l}`);const{defaultSize:c}=o;if(c!=null)continue;const h=i.length-n,p=r/h;n++,t[l]=p,r-=p}return t}function Nc(i,t,e){t.forEach((n,r)=>{const l=i[r];Gt(l,`Panel data not found for index ${r}`);const{callbacks:o,constraints:c,id:h}=l,{collapsedSize:p=0,collapsible:g}=c,y=e[h];if(y==null||n!==y){e[h]=n;const{onCollapse:b,onExpand:v,onResize:S}=o;S&&S(n,y),g&&(b||v)&&(v&&(y==null||ka(y,p))&&!ka(n,p)&&v(),b&&(y==null||!ka(y,p))&&ka(n,p)&&b())}})}function gy(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!=t[e])return!1;return!0}function PH({defaultSize:i,dragState:t,layout:e,panelData:n,panelIndex:r,precision:l=3}){const o=e[r];let c;return o==null?c=i!=null?i.toPrecision(l):"1":n.length===1?c="1":c=o.toPrecision(l),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function zH(i,t=10){let e=null;return(...r)=>{e!==null&&clearTimeout(e),e=setTimeout(()=>{i(...r)},t)}}function xR(i){try{if(typeof localStorage<"u")i.getItem=t=>localStorage.getItem(t),i.setItem=(t,e)=>{localStorage.setItem(t,e)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),i.getItem=()=>null,i.setItem=()=>{}}}function vN(i){return`react-resizable-panels:${i}`}function AN(i){return i.map(t=>{const{constraints:e,id:n,idIsFromProps:r,order:l}=t;return r?n:l?`${l}:${JSON.stringify(e)}`:JSON.stringify(e)}).sort((t,e)=>t.localeCompare(e)).join(",")}function wN(i,t){try{const e=vN(i),n=t.getItem(e);if(n){const r=JSON.parse(n);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function IH(i,t,e){var n,r;const l=(n=wN(i,e))!==null&&n!==void 0?n:{},o=AN(t);return(r=l[o])!==null&&r!==void 0?r:null}function jH(i,t,e,n,r){var l;const o=vN(i),c=AN(t),h=(l=wN(i,r))!==null&&l!==void 0?l:{};h[c]={expandToSizes:Object.fromEntries(e.entries()),layout:n};try{r.setItem(o,JSON.stringify(h))}catch(p){console.error(p)}}function ER({layout:i,panelConstraints:t}){const e=[...i],n=e.reduce((l,o)=>l+o,0);if(e.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${e.map(l=>`${l}%`).join(", ")}`);if(!ns(n,100)&&e.length>0)for(let l=0;l<t.length;l++){const o=e[l];Gt(o!=null,`No layout data found for index ${l}`);const c=100/n*o;e[l]=c}let r=0;for(let l=0;l<t.length;l++){const o=e[l];Gt(o!=null,`No layout data found for index ${l}`);const c=Yc({panelConstraints:t,panelIndex:l,size:o});o!=c&&(r+=o-c,e[l]=c)}if(!ns(r,0))for(let l=0;l<t.length;l++){const o=e[l];Gt(o!=null,`No layout data found for index ${l}`);const c=o+r,h=Yc({panelConstraints:t,panelIndex:l,size:c});if(o!==h&&(r-=h-o,e[l]=h,ns(r,0)))break}return e}const FH=100,Gf={getItem:i=>(xR(Gf),Gf.getItem(i)),setItem:(i,t)=>{xR(Gf),Gf.setItem(i,t)}},_R={};function SN({autoSaveId:i=null,children:t,className:e="",direction:n,forwardedRef:r,id:l=null,onLayout:o=null,keyboardResizeBy:c=null,storage:h=Gf,style:p,tagName:g="div",...y}){const b=Hx(l),v=et.useRef(null),[S,w]=et.useState(null),[_,T]=et.useState([]),O=TH(),N=et.useRef({}),I=et.useRef(new Map),z=et.useRef(0),L=et.useRef({autoSaveId:i,direction:n,dragState:S,id:b,keyboardResizeBy:c,onLayout:o,storage:h}),B=et.useRef({layout:_,panelDataArray:[],panelDataArrayChanged:!1});et.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),et.useImperativeHandle(r,()=>({getId:()=>L.current.id,getLayout:()=>{const{layout:k}=B.current;return k},setLayout:k=>{const{onLayout:at}=L.current,{layout:pt,panelDataArray:st}=B.current,ct=ER({layout:k,panelConstraints:st.map(yt=>yt.constraints)});SR(pt,ct)||(T(ct),B.current.layout=ct,at&&at(ct),Nc(st,ct,N.current))}}),[]),Iu(()=>{L.current.autoSaveId=i,L.current.direction=n,L.current.dragState=S,L.current.id=b,L.current.onLayout=o,L.current.storage=h}),MH({committedValuesRef:L,eagerValuesRef:B,groupId:b,layout:_,panelDataArray:B.current.panelDataArray,setLayout:T,panelGroupElement:v.current}),et.useEffect(()=>{const{panelDataArray:k}=B.current;if(i){if(_.length===0||_.length!==k.length)return;let at=_R[i];at==null&&(at=zH(jH,FH),_R[i]=at);const pt=[...k],st=new Map(I.current);at(i,pt,st,_,h)}},[i,_,h]),et.useEffect(()=>{});const X=et.useCallback(k=>{const{onLayout:at}=L.current,{layout:pt,panelDataArray:st}=B.current;if(k.constraints.collapsible){const ct=st.map(ge=>ge.constraints),{collapsedSize:yt=0,panelSize:Rt,pivotIndices:Ut}=_o(st,k,pt);if(Gt(Rt!=null,`Panel size not found for panel "${k.id}"`),!ka(Rt,yt)){I.current.set(k.id,Rt);const me=Uc(st,k)===st.length-1?Rt-yt:yt-Rt,te=Vf({delta:me,initialLayout:pt,panelConstraints:ct,pivotIndices:Ut,prevLayout:pt,trigger:"imperative-api"});gy(pt,te)||(T(te),B.current.layout=te,at&&at(te),Nc(st,te,N.current))}}},[]),Q=et.useCallback((k,at)=>{const{onLayout:pt}=L.current,{layout:st,panelDataArray:ct}=B.current;if(k.constraints.collapsible){const yt=ct.map(Yt=>Yt.constraints),{collapsedSize:Rt=0,panelSize:Ut=0,minSize:ge=0,pivotIndices:me}=_o(ct,k,st),te=at??ge;if(ka(Ut,Rt)){const Yt=I.current.get(k.id),Un=Yt!=null&&Yt>=te?Yt:te,He=Uc(ct,k)===ct.length-1?Ut-Un:Un-Ut,Ye=Vf({delta:He,initialLayout:st,panelConstraints:yt,pivotIndices:me,prevLayout:st,trigger:"imperative-api"});gy(st,Ye)||(T(Ye),B.current.layout=Ye,pt&&pt(Ye),Nc(ct,Ye,N.current))}}},[]),rt=et.useCallback(k=>{const{layout:at,panelDataArray:pt}=B.current,{panelSize:st}=_o(pt,k,at);return Gt(st!=null,`Panel size not found for panel "${k.id}"`),st},[]),$=et.useCallback((k,at)=>{const{panelDataArray:pt}=B.current,st=Uc(pt,k);return PH({defaultSize:at,dragState:S,layout:_,panelData:pt,panelIndex:st})},[S,_]),J=et.useCallback(k=>{const{layout:at,panelDataArray:pt}=B.current,{collapsedSize:st=0,collapsible:ct,panelSize:yt}=_o(pt,k,at);return Gt(yt!=null,`Panel size not found for panel "${k.id}"`),ct===!0&&ka(yt,st)},[]),ht=et.useCallback(k=>{const{layout:at,panelDataArray:pt}=B.current,{collapsedSize:st=0,collapsible:ct,panelSize:yt}=_o(pt,k,at);return Gt(yt!=null,`Panel size not found for panel "${k.id}"`),!ct||Uu(yt,st)>0},[]),tt=et.useCallback(k=>{const{panelDataArray:at}=B.current;at.push(k),at.sort((pt,st)=>{const ct=pt.order,yt=st.order;return ct==null&&yt==null?0:ct==null?-1:yt==null?1:ct-yt}),B.current.panelDataArrayChanged=!0,O()},[O]);Iu(()=>{if(B.current.panelDataArrayChanged){B.current.panelDataArrayChanged=!1;const{autoSaveId:k,onLayout:at,storage:pt}=L.current,{layout:st,panelDataArray:ct}=B.current;let yt=null;if(k){const Ut=IH(k,ct,pt);Ut&&(I.current=new Map(Object.entries(Ut.expandToSizes)),yt=Ut.layout)}yt==null&&(yt=LH({panelDataArray:ct}));const Rt=ER({layout:yt,panelConstraints:ct.map(Ut=>Ut.constraints)});SR(st,Rt)||(T(Rt),B.current.layout=Rt,at&&at(Rt),Nc(ct,Rt,N.current))}}),Iu(()=>{const k=B.current;return()=>{k.layout=[]}},[]);const dt=et.useCallback(k=>{let at=!1;const pt=v.current;return pt&&window.getComputedStyle(pt,null).getPropertyValue("direction")==="rtl"&&(at=!0),function(ct){ct.preventDefault();const yt=v.current;if(!yt)return()=>null;const{direction:Rt,dragState:Ut,id:ge,keyboardResizeBy:me,onLayout:te}=L.current,{layout:Yt,panelDataArray:Un}=B.current,{initialLayout:Be}=Ut??{},He=mN(ge,k,yt);let Ye=OH(ct,k,Rt,Ut,me,yt);const Ds=Rt==="horizontal";Ds&&at&&(Ye=-Ye);const Nr=Un.map(Or=>Or.constraints),pi=Vf({delta:Ye,initialLayout:Be??Yt,panelConstraints:Nr,pivotIndices:He,prevLayout:Yt,trigger:aN(ct)?"keyboard":"mouse-or-touch"}),Ia=!gy(Yt,pi);(lN(ct)||oN(ct))&&z.current!=Ye&&(z.current=Ye,!Ia&&Ye!==0?Ds?nw(k,Ye<0?cN:hN):nw(k,Ye<0?dN:fN):nw(k,0)),Ia&&(T(pi),B.current.layout=pi,te&&te(pi),Nc(Un,pi,N.current))}},[]),F=et.useCallback((k,at)=>{const{onLayout:pt}=L.current,{layout:st,panelDataArray:ct}=B.current,yt=ct.map(Yt=>Yt.constraints),{panelSize:Rt,pivotIndices:Ut}=_o(ct,k,st);Gt(Rt!=null,`Panel size not found for panel "${k.id}"`);const me=Uc(ct,k)===ct.length-1?Rt-at:at-Rt,te=Vf({delta:me,initialLayout:st,panelConstraints:yt,pivotIndices:Ut,prevLayout:st,trigger:"imperative-api"});gy(st,te)||(T(te),B.current.layout=te,pt&&pt(te),Nc(ct,te,N.current))},[]),G=et.useCallback((k,at)=>{const{layout:pt,panelDataArray:st}=B.current,{collapsedSize:ct=0,collapsible:yt}=at,{collapsedSize:Rt=0,collapsible:Ut,maxSize:ge=100,minSize:me=0}=k.constraints,{panelSize:te}=_o(st,k,pt);te!=null&&(yt&&Ut&&ka(te,ct)?ka(ct,Rt)||F(k,Rt):te<me?F(k,me):te>ge&&F(k,ge))},[F]),bt=et.useCallback((k,at)=>{const{direction:pt}=L.current,{layout:st}=B.current;if(!v.current)return;const ct=ev(k,v.current);Gt(ct,`Drag handle element not found for id "${k}"`);const yt=bN(pt,at);w({dragHandleId:k,dragHandleRect:ct.getBoundingClientRect(),initialCursorPosition:yt,initialLayout:st})},[]),Et=et.useCallback(()=>{w(null)},[]),C=et.useCallback(k=>{const{panelDataArray:at}=B.current,pt=Uc(at,k);pt>=0&&(at.splice(pt,1),delete N.current[k.id],B.current.panelDataArrayChanged=!0,O())},[O]),K=et.useMemo(()=>({collapsePanel:X,direction:n,dragState:S,expandPanel:Q,getPanelSize:rt,getPanelStyle:$,groupId:b,isPanelCollapsed:J,isPanelExpanded:ht,reevaluatePanelConstraints:G,registerPanel:tt,registerResizeHandle:dt,resizePanel:F,startDragging:bt,stopDragging:Et,unregisterPanel:C,panelGroupElement:v.current}),[X,S,n,Q,rt,$,b,J,ht,G,tt,dt,F,bt,Et,C]),ut={display:"flex",flexDirection:n==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return et.createElement(Zb.Provider,{value:K},et.createElement(g,{...y,children:t,className:e,id:l,ref:v,style:{...ut,...p},[Ge.group]:"",[Ge.groupDirection]:n,[Ge.groupId]:b}))}const xN=et.forwardRef((i,t)=>et.createElement(SN,{...i,forwardedRef:t}));SN.displayName="PanelGroup";xN.displayName="forwardRef(PanelGroup)";function Uc(i,t){return i.findIndex(e=>e===t||e.id===t.id)}function _o(i,t,e){const n=Uc(i,t),l=n===i.length-1?[n-1,n]:[n,n+1],o=e[n];return{...t.constraints,panelSize:o,pivotIndices:l}}function BH({disabled:i,handleId:t,resizeHandler:e,panelGroupElement:n}){et.useEffect(()=>{if(i||e==null||n==null)return;const r=ev(t,n);if(r==null)return;const l=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),e(o);break}case"F6":{o.preventDefault();const c=r.getAttribute(Ge.groupId);Gt(c,`No group element found for id "${c}"`);const h=ep(c,n),p=gN(c,t,n);Gt(p!==null,`No resize element found for id "${t}"`);const g=o.shiftKey?p>0?p-1:h.length-1:p+1<h.length?p+1:0;h[g].focus();break}}};return r.addEventListener("keydown",l),()=>{r.removeEventListener("keydown",l)}},[n,i,t,e])}function EN({children:i=null,className:t="",disabled:e=!1,hitAreaMargins:n,id:r,onBlur:l,onClick:o,onDragging:c,onFocus:h,onPointerDown:p,onPointerUp:g,style:y={},tabIndex:b=0,tagName:v="div",...S}){var w,_;const T=et.useRef(null),O=et.useRef({onClick:o,onDragging:c,onPointerDown:p,onPointerUp:g});et.useEffect(()=>{O.current.onClick=o,O.current.onDragging=c,O.current.onPointerDown=p,O.current.onPointerUp=g});const N=et.useContext(Zb);if(N===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:I,groupId:z,registerResizeHandle:L,startDragging:B,stopDragging:X,panelGroupElement:Q}=N,rt=Hx(r),[$,J]=et.useState("inactive"),[ht,tt]=et.useState(!1),[dt,F]=et.useState(null),G=et.useRef({state:$});Iu(()=>{G.current.state=$}),et.useEffect(()=>{if(e)F(null);else{const K=L(rt);F(()=>K)}},[e,rt,L]);const bt=(w=n==null?void 0:n.coarse)!==null&&w!==void 0?w:15,Et=(_=n==null?void 0:n.fine)!==null&&_!==void 0?_:5;et.useEffect(()=>{if(e||dt==null)return;const K=T.current;Gt(K,"Element ref not attached");let ut=!1;return _H(rt,K,I,{coarse:bt,fine:Et},(at,pt,st)=>{if(!pt){J("inactive");return}switch(at){case"down":{J("drag"),ut=!1,Gt(st,'Expected event to be defined for "down" action'),B(rt,st);const{onDragging:ct,onPointerDown:yt}=O.current;ct==null||ct(!0),yt==null||yt();break}case"move":{const{state:ct}=G.current;ut=!0,ct!=="drag"&&J("hover"),Gt(st,'Expected event to be defined for "move" action'),dt(st);break}case"up":{J("hover"),X();const{onClick:ct,onDragging:yt,onPointerUp:Rt}=O.current;yt==null||yt(!1),Rt==null||Rt(),ut||ct==null||ct();break}}})},[bt,I,e,Et,L,rt,dt,B,X]),BH({disabled:e,handleId:rt,resizeHandler:dt,panelGroupElement:Q});const C={touchAction:"none",userSelect:"none"};return et.createElement(v,{...S,children:i,className:t,id:r,onBlur:()=>{tt(!1),l==null||l()},onFocus:()=>{tt(!0),h==null||h()},ref:T,role:"separator",style:{...C,...y},tabIndex:b,[Ge.groupDirection]:I,[Ge.groupId]:z,[Ge.resizeHandle]:"",[Ge.resizeHandleActive]:$==="drag"?"pointer":ht?"keyboard":void 0,[Ge.resizeHandleEnabled]:!e,[Ge.resizeHandleId]:rt,[Ge.resizeHandleState]:$})}EN.displayName="PanelResizeHandle";function _N(i,t){return function(){return i.apply(t,arguments)}}const{toString:HH}=Object.prototype,{getPrototypeOf:Vx}=Object,nv=(i=>t=>{const e=HH.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),tr=i=>(i=i.toLowerCase(),t=>nv(t)===i),iv=i=>t=>typeof t===i,{isArray:hd}=Array,np=iv("undefined");function UH(i){return i!==null&&!np(i)&&i.constructor!==null&&!np(i.constructor)&&as(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const CN=tr("ArrayBuffer");function qH(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&CN(i.buffer),t}const VH=iv("string"),as=iv("function"),TN=iv("number"),sv=i=>i!==null&&typeof i=="object",GH=i=>i===!0||i===!1,Ky=i=>{if(nv(i)!=="object")return!1;const t=Vx(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},YH=tr("Date"),XH=tr("File"),$H=tr("Blob"),WH=tr("FileList"),KH=i=>sv(i)&&as(i.pipe),QH=i=>{let t;return i&&(typeof FormData=="function"&&i instanceof FormData||as(i.append)&&((t=nv(i))==="formdata"||t==="object"&&as(i.toString)&&i.toString()==="[object FormData]"))},ZH=tr("URLSearchParams"),[JH,t4,e4,n4]=["ReadableStream","Request","Response","Headers"].map(tr),i4=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bg(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let n,r;if(typeof i!="object"&&(i=[i]),hd(i))for(n=0,r=i.length;n<r;n++)t.call(null,i[n],n,i);else{const l=e?Object.getOwnPropertyNames(i):Object.keys(i),o=l.length;let c;for(n=0;n<o;n++)c=l[n],t.call(null,i[c],c,i)}}function RN(i,t){t=t.toLowerCase();const e=Object.keys(i);let n=e.length,r;for(;n-- >0;)if(r=e[n],t===r.toLowerCase())return r;return null}const Mo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,DN=i=>!np(i)&&i!==Mo;function KS(){const{caseless:i}=DN(this)&&this||{},t={},e=(n,r)=>{const l=i&&RN(t,r)||r;Ky(t[l])&&Ky(n)?t[l]=KS(t[l],n):Ky(n)?t[l]=KS({},n):hd(n)?t[l]=n.slice():t[l]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&Bg(arguments[n],e);return t}const s4=(i,t,e,{allOwnKeys:n}={})=>(Bg(t,(r,l)=>{e&&as(r)?i[l]=_N(r,e):i[l]=r},{allOwnKeys:n}),i),r4=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),a4=(i,t,e,n)=>{i.prototype=Object.create(t.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},l4=(i,t,e,n)=>{let r,l,o;const c={};if(t=t||{},i==null)return t;do{for(r=Object.getOwnPropertyNames(i),l=r.length;l-- >0;)o=r[l],(!n||n(o,i,t))&&!c[o]&&(t[o]=i[o],c[o]=!0);i=e!==!1&&Vx(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},o4=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const n=i.indexOf(t,e);return n!==-1&&n===e},u4=i=>{if(!i)return null;if(hd(i))return i;let t=i.length;if(!TN(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},c4=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&Vx(Uint8Array)),h4=(i,t)=>{const n=(i&&i[Symbol.iterator]).call(i);let r;for(;(r=n.next())&&!r.done;){const l=r.value;t.call(i,l[0],l[1])}},d4=(i,t)=>{let e;const n=[];for(;(e=i.exec(t))!==null;)n.push(e);return n},f4=tr("HTMLFormElement"),p4=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,r){return n.toUpperCase()+r}),CR=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),g4=tr("RegExp"),kN=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),n={};Bg(e,(r,l)=>{let o;(o=t(r,l,i))!==!1&&(n[l]=o||r)}),Object.defineProperties(i,n)},m4=i=>{kN(i,(t,e)=>{if(as(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=i[e];if(as(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},y4=(i,t)=>{const e={},n=r=>{r.forEach(l=>{e[l]=!0})};return hd(i)?n(i):n(String(i).split(t)),e},b4=()=>{},v4=(i,t)=>i!=null&&Number.isFinite(i=+i)?i:t;function A4(i){return!!(i&&as(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const w4=i=>{const t=new Array(10),e=(n,r)=>{if(sv(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;const l=hd(n)?[]:{};return Bg(n,(o,c)=>{const h=e(o,r+1);!np(h)&&(l[c]=h)}),t[r]=void 0,l}}return n};return e(i,0)},S4=tr("AsyncFunction"),x4=i=>i&&(sv(i)||as(i))&&as(i.then)&&as(i.catch),MN=((i,t)=>i?setImmediate:t?((e,n)=>(Mo.addEventListener("message",({source:r,data:l})=>{r===Mo&&l===e&&n.length&&n.shift()()},!1),r=>{n.push(r),Mo.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",as(Mo.postMessage)),E4=typeof queueMicrotask<"u"?queueMicrotask.bind(Mo):typeof process<"u"&&process.nextTick||MN,Z={isArray:hd,isArrayBuffer:CN,isBuffer:UH,isFormData:QH,isArrayBufferView:qH,isString:VH,isNumber:TN,isBoolean:GH,isObject:sv,isPlainObject:Ky,isReadableStream:JH,isRequest:t4,isResponse:e4,isHeaders:n4,isUndefined:np,isDate:YH,isFile:XH,isBlob:$H,isRegExp:g4,isFunction:as,isStream:KH,isURLSearchParams:ZH,isTypedArray:c4,isFileList:WH,forEach:Bg,merge:KS,extend:s4,trim:i4,stripBOM:r4,inherits:a4,toFlatObject:l4,kindOf:nv,kindOfTest:tr,endsWith:o4,toArray:u4,forEachEntry:h4,matchAll:d4,isHTMLForm:f4,hasOwnProperty:CR,hasOwnProp:CR,reduceDescriptors:kN,freezeMethods:m4,toObjectSet:y4,toCamelCase:p4,noop:b4,toFiniteNumber:v4,findKey:RN,global:Mo,isContextDefined:DN,isSpecCompliantForm:A4,toJSONObject:w4,isAsyncFn:S4,isThenable:x4,setImmediate:MN,asap:E4};function Bt(i,t,e,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}Z.inherits(Bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}});const NN=Bt.prototype,ON={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{ON[i]={value:i}});Object.defineProperties(Bt,ON);Object.defineProperty(NN,"isAxiosError",{value:!0});Bt.from=(i,t,e,n,r,l)=>{const o=Object.create(NN);return Z.toFlatObject(i,o,function(h){return h!==Error.prototype},c=>c!=="isAxiosError"),Bt.call(o,i.message,t,e,n,r),o.cause=i,o.name=i.name,l&&Object.assign(o,l),o};const _4=null;function QS(i){return Z.isPlainObject(i)||Z.isArray(i)}function LN(i){return Z.endsWith(i,"[]")?i.slice(0,-2):i}function TR(i,t,e){return i?i.concat(t).map(function(r,l){return r=LN(r),!e&&l?"["+r+"]":r}).join(e?".":""):t}function C4(i){return Z.isArray(i)&&!i.some(QS)}const T4=Z.toFlatObject(Z,{},null,function(t){return/^is[A-Z]/.test(t)});function rv(i,t,e){if(!Z.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=Z.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,_){return!Z.isUndefined(_[w])});const n=e.metaTokens,r=e.visitor||g,l=e.dots,o=e.indexes,h=(e.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(t);if(!Z.isFunction(r))throw new TypeError("visitor must be a function");function p(S){if(S===null)return"";if(Z.isDate(S))return S.toISOString();if(!h&&Z.isBlob(S))throw new Bt("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(S)||Z.isTypedArray(S)?h&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function g(S,w,_){let T=S;if(S&&!_&&typeof S=="object"){if(Z.endsWith(w,"{}"))w=n?w:w.slice(0,-2),S=JSON.stringify(S);else if(Z.isArray(S)&&C4(S)||(Z.isFileList(S)||Z.endsWith(w,"[]"))&&(T=Z.toArray(S)))return w=LN(w),T.forEach(function(N,I){!(Z.isUndefined(N)||N===null)&&t.append(o===!0?TR([w],I,l):o===null?w:w+"[]",p(N))}),!1}return QS(S)?!0:(t.append(TR(_,w,l),p(S)),!1)}const y=[],b=Object.assign(T4,{defaultVisitor:g,convertValue:p,isVisitable:QS});function v(S,w){if(!Z.isUndefined(S)){if(y.indexOf(S)!==-1)throw Error("Circular reference detected in "+w.join("."));y.push(S),Z.forEach(S,function(T,O){(!(Z.isUndefined(T)||T===null)&&r.call(t,T,Z.isString(O)?O.trim():O,w,b))===!0&&v(T,w?w.concat(O):[O])}),y.pop()}}if(!Z.isObject(i))throw new TypeError("data must be an object");return v(i),t}function RR(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Gx(i,t){this._pairs=[],i&&rv(i,this,t)}const PN=Gx.prototype;PN.append=function(t,e){this._pairs.push([t,e])};PN.toString=function(t){const e=t?function(n){return t.call(this,n,RR)}:RR;return this._pairs.map(function(r){return e(r[0])+"="+e(r[1])},"").join("&")};function R4(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zN(i,t,e){if(!t)return i;const n=e&&e.encode||R4;Z.isFunction(e)&&(e={serialize:e});const r=e&&e.serialize;let l;if(r?l=r(t,e):l=Z.isURLSearchParams(t)?t.toString():new Gx(t,e).toString(n),l){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+l}return i}class DR{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Z.forEach(this.handlers,function(n){n!==null&&t(n)})}}const IN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},D4=typeof URLSearchParams<"u"?URLSearchParams:Gx,k4=typeof FormData<"u"?FormData:null,M4=typeof Blob<"u"?Blob:null,N4={isBrowser:!0,classes:{URLSearchParams:D4,FormData:k4,Blob:M4},protocols:["http","https","file","blob","url","data"]},Yx=typeof window<"u"&&typeof document<"u",ZS=typeof navigator=="object"&&navigator||void 0,O4=Yx&&(!ZS||["ReactNative","NativeScript","NS"].indexOf(ZS.product)<0),L4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",P4=Yx&&window.location.href||"http://localhost",z4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Yx,hasStandardBrowserEnv:O4,hasStandardBrowserWebWorkerEnv:L4,navigator:ZS,origin:P4},Symbol.toStringTag,{value:"Module"})),Jn={...z4,...N4};function I4(i,t){return rv(i,new Jn.classes.URLSearchParams,Object.assign({visitor:function(e,n,r,l){return Jn.isNode&&Z.isBuffer(e)?(this.append(n,e.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},t))}function j4(i){return Z.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function F4(i){const t={},e=Object.keys(i);let n;const r=e.length;let l;for(n=0;n<r;n++)l=e[n],t[l]=i[l];return t}function jN(i){function t(e,n,r,l){let o=e[l++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),h=l>=e.length;return o=!o&&Z.isArray(r)?r.length:o,h?(Z.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!c):((!r[o]||!Z.isObject(r[o]))&&(r[o]=[]),t(e,n,r[o],l)&&Z.isArray(r[o])&&(r[o]=F4(r[o])),!c)}if(Z.isFormData(i)&&Z.isFunction(i.entries)){const e={};return Z.forEachEntry(i,(n,r)=>{t(j4(n),r,e,0)}),e}return null}function B4(i,t,e){if(Z.isString(i))try{return(t||JSON.parse)(i),Z.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(i)}const Hg={transitional:IN,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,l=Z.isObject(t);if(l&&Z.isHTMLForm(t)&&(t=new FormData(t)),Z.isFormData(t))return r?JSON.stringify(jN(t)):t;if(Z.isArrayBuffer(t)||Z.isBuffer(t)||Z.isStream(t)||Z.isFile(t)||Z.isBlob(t)||Z.isReadableStream(t))return t;if(Z.isArrayBufferView(t))return t.buffer;if(Z.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return I4(t,this.formSerializer).toString();if((c=Z.isFileList(t))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return rv(c?{"files[]":t}:t,h&&new h,this.formSerializer)}}return l||r?(e.setContentType("application/json",!1),B4(t)):t}],transformResponse:[function(t){const e=this.transitional||Hg.transitional,n=e&&e.forcedJSONParsing,r=this.responseType==="json";if(Z.isResponse(t)||Z.isReadableStream(t))return t;if(t&&Z.isString(t)&&(n&&!this.responseType||r)){const o=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(c){if(o)throw c.name==="SyntaxError"?Bt.from(c,Bt.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jn.classes.FormData,Blob:Jn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],i=>{Hg.headers[i]={}});const H4=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),U4=i=>{const t={};let e,n,r;return i&&i.split(`
`).forEach(function(o){r=o.indexOf(":"),e=o.substring(0,r).trim().toLowerCase(),n=o.substring(r+1).trim(),!(!e||t[e]&&H4[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},kR=Symbol("internals");function Ef(i){return i&&String(i).trim().toLowerCase()}function Qy(i){return i===!1||i==null?i:Z.isArray(i)?i.map(Qy):String(i)}function q4(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(i);)t[n[1]]=n[2];return t}const V4=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function sw(i,t,e,n,r){if(Z.isFunction(n))return n.call(this,t,e);if(r&&(t=e),!!Z.isString(t)){if(Z.isString(n))return t.indexOf(n)!==-1;if(Z.isRegExp(n))return n.test(t)}}function G4(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function Y4(i,t){const e=Z.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+e,{value:function(r,l,o){return this[n].call(this,t,r,l,o)},configurable:!0})})}let ki=class{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function l(c,h,p){const g=Ef(h);if(!g)throw new Error("header name must be a non-empty string");const y=Z.findKey(r,g);(!y||r[y]===void 0||p===!0||p===void 0&&r[y]!==!1)&&(r[y||h]=Qy(c))}const o=(c,h)=>Z.forEach(c,(p,g)=>l(p,g,h));if(Z.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(Z.isString(t)&&(t=t.trim())&&!V4(t))o(U4(t),e);else if(Z.isHeaders(t))for(const[c,h]of t.entries())l(h,c,n);else t!=null&&l(e,t,n);return this}get(t,e){if(t=Ef(t),t){const n=Z.findKey(this,t);if(n){const r=this[n];if(!e)return r;if(e===!0)return q4(r);if(Z.isFunction(e))return e.call(this,r,n);if(Z.isRegExp(e))return e.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Ef(t),t){const n=Z.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||sw(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let r=!1;function l(o){if(o=Ef(o),o){const c=Z.findKey(n,o);c&&(!e||sw(n,n[c],c,e))&&(delete n[c],r=!0)}}return Z.isArray(t)?t.forEach(l):l(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const l=e[n];(!t||sw(this,this[l],l,t,!0))&&(delete this[l],r=!0)}return r}normalize(t){const e=this,n={};return Z.forEach(this,(r,l)=>{const o=Z.findKey(n,l);if(o){e[o]=Qy(r),delete e[l];return}const c=t?G4(l):String(l).trim();c!==l&&delete e[l],e[c]=Qy(r),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return Z.forEach(this,(n,r)=>{n!=null&&n!==!1&&(e[r]=t&&Z.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(r=>n.set(r)),n}static accessor(t){const n=(this[kR]=this[kR]={accessors:{}}).accessors,r=this.prototype;function l(o){const c=Ef(o);n[c]||(Y4(r,o),n[c]=!0)}return Z.isArray(t)?t.forEach(l):l(t),this}};ki.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(ki.prototype,({value:i},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(n){this[e]=n}}});Z.freezeMethods(ki);function rw(i,t){const e=this||Hg,n=t||e,r=ki.from(n.headers);let l=n.data;return Z.forEach(i,function(c){l=c.call(e,l,r.normalize(),t?t.status:void 0)}),r.normalize(),l}function FN(i){return!!(i&&i.__CANCEL__)}function dd(i,t,e){Bt.call(this,i??"canceled",Bt.ERR_CANCELED,t,e),this.name="CanceledError"}Z.inherits(dd,Bt,{__CANCEL__:!0});function BN(i,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?i(e):t(new Bt("Request failed with status code "+e.status,[Bt.ERR_BAD_REQUEST,Bt.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function X4(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function $4(i,t){i=i||10;const e=new Array(i),n=new Array(i);let r=0,l=0,o;return t=t!==void 0?t:1e3,function(h){const p=Date.now(),g=n[l];o||(o=p),e[r]=h,n[r]=p;let y=l,b=0;for(;y!==r;)b+=e[y++],y=y%i;if(r=(r+1)%i,r===l&&(l=(l+1)%i),p-o<t)return;const v=g&&p-g;return v?Math.round(b*1e3/v):void 0}}function W4(i,t){let e=0,n=1e3/t,r,l;const o=(p,g=Date.now())=>{e=g,r=null,l&&(clearTimeout(l),l=null),i.apply(null,p)};return[(...p)=>{const g=Date.now(),y=g-e;y>=n?o(p,g):(r=p,l||(l=setTimeout(()=>{l=null,o(r)},n-y)))},()=>r&&o(r)]}const fb=(i,t,e=3)=>{let n=0;const r=$4(50,250);return W4(l=>{const o=l.loaded,c=l.lengthComputable?l.total:void 0,h=o-n,p=r(h),g=o<=c;n=o;const y={loaded:o,total:c,progress:c?o/c:void 0,bytes:h,rate:p||void 0,estimated:p&&c&&g?(c-o)/p:void 0,event:l,lengthComputable:c!=null,[t?"download":"upload"]:!0};i(y)},e)},MR=(i,t)=>{const e=i!=null;return[n=>t[0]({lengthComputable:e,total:i,loaded:n}),t[1]]},NR=i=>(...t)=>Z.asap(()=>i(...t)),K4=Jn.hasStandardBrowserEnv?((i,t)=>e=>(e=new URL(e,Jn.origin),i.protocol===e.protocol&&i.host===e.host&&(t||i.port===e.port)))(new URL(Jn.origin),Jn.navigator&&/(msie|trident)/i.test(Jn.navigator.userAgent)):()=>!0,Q4=Jn.hasStandardBrowserEnv?{write(i,t,e,n,r,l){const o=[i+"="+encodeURIComponent(t)];Z.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),Z.isString(n)&&o.push("path="+n),Z.isString(r)&&o.push("domain="+r),l===!0&&o.push("secure"),document.cookie=o.join("; ")},read(i){const t=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Z4(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function J4(i,t){return t?i.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):i}function HN(i,t,e){let n=!Z4(t);return i&&(n||e==!1)?J4(i,t):t}const OR=i=>i instanceof ki?{...i}:i;function qu(i,t){t=t||{};const e={};function n(p,g,y,b){return Z.isPlainObject(p)&&Z.isPlainObject(g)?Z.merge.call({caseless:b},p,g):Z.isPlainObject(g)?Z.merge({},g):Z.isArray(g)?g.slice():g}function r(p,g,y,b){if(Z.isUndefined(g)){if(!Z.isUndefined(p))return n(void 0,p,y,b)}else return n(p,g,y,b)}function l(p,g){if(!Z.isUndefined(g))return n(void 0,g)}function o(p,g){if(Z.isUndefined(g)){if(!Z.isUndefined(p))return n(void 0,p)}else return n(void 0,g)}function c(p,g,y){if(y in t)return n(p,g);if(y in i)return n(void 0,p)}const h={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(p,g,y)=>r(OR(p),OR(g),y,!0)};return Z.forEach(Object.keys(Object.assign({},i,t)),function(g){const y=h[g]||r,b=y(i[g],t[g],g);Z.isUndefined(b)&&y!==c||(e[g]=b)}),e}const UN=i=>{const t=qu({},i);let{data:e,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:l,headers:o,auth:c}=t;t.headers=o=ki.from(o),t.url=zN(HN(t.baseURL,t.url,t.allowAbsoluteUrls),i.params,i.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let h;if(Z.isFormData(e)){if(Jn.hasStandardBrowserEnv||Jn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((h=o.getContentType())!==!1){const[p,...g]=h?h.split(";").map(y=>y.trim()).filter(Boolean):[];o.setContentType([p||"multipart/form-data",...g].join("; "))}}if(Jn.hasStandardBrowserEnv&&(n&&Z.isFunction(n)&&(n=n(t)),n||n!==!1&&K4(t.url))){const p=r&&l&&Q4.read(l);p&&o.set(r,p)}return t},tU=typeof XMLHttpRequest<"u",eU=tU&&function(i){return new Promise(function(e,n){const r=UN(i);let l=r.data;const o=ki.from(r.headers).normalize();let{responseType:c,onUploadProgress:h,onDownloadProgress:p}=r,g,y,b,v,S;function w(){v&&v(),S&&S(),r.cancelToken&&r.cancelToken.unsubscribe(g),r.signal&&r.signal.removeEventListener("abort",g)}let _=new XMLHttpRequest;_.open(r.method.toUpperCase(),r.url,!0),_.timeout=r.timeout;function T(){if(!_)return;const N=ki.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),z={data:!c||c==="text"||c==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:N,config:i,request:_};BN(function(B){e(B),w()},function(B){n(B),w()},z),_=null}"onloadend"in _?_.onloadend=T:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(T)},_.onabort=function(){_&&(n(new Bt("Request aborted",Bt.ECONNABORTED,i,_)),_=null)},_.onerror=function(){n(new Bt("Network Error",Bt.ERR_NETWORK,i,_)),_=null},_.ontimeout=function(){let I=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const z=r.transitional||IN;r.timeoutErrorMessage&&(I=r.timeoutErrorMessage),n(new Bt(I,z.clarifyTimeoutError?Bt.ETIMEDOUT:Bt.ECONNABORTED,i,_)),_=null},l===void 0&&o.setContentType(null),"setRequestHeader"in _&&Z.forEach(o.toJSON(),function(I,z){_.setRequestHeader(z,I)}),Z.isUndefined(r.withCredentials)||(_.withCredentials=!!r.withCredentials),c&&c!=="json"&&(_.responseType=r.responseType),p&&([b,S]=fb(p,!0),_.addEventListener("progress",b)),h&&_.upload&&([y,v]=fb(h),_.upload.addEventListener("progress",y),_.upload.addEventListener("loadend",v)),(r.cancelToken||r.signal)&&(g=N=>{_&&(n(!N||N.type?new dd(null,i,_):N),_.abort(),_=null)},r.cancelToken&&r.cancelToken.subscribe(g),r.signal&&(r.signal.aborted?g():r.signal.addEventListener("abort",g)));const O=X4(r.url);if(O&&Jn.protocols.indexOf(O)===-1){n(new Bt("Unsupported protocol "+O+":",Bt.ERR_BAD_REQUEST,i));return}_.send(l||null)})},nU=(i,t)=>{const{length:e}=i=i?i.filter(Boolean):[];if(t||e){let n=new AbortController,r;const l=function(p){if(!r){r=!0,c();const g=p instanceof Error?p:this.reason;n.abort(g instanceof Bt?g:new dd(g instanceof Error?g.message:g))}};let o=t&&setTimeout(()=>{o=null,l(new Bt(`timeout ${t} of ms exceeded`,Bt.ETIMEDOUT))},t);const c=()=>{i&&(o&&clearTimeout(o),o=null,i.forEach(p=>{p.unsubscribe?p.unsubscribe(l):p.removeEventListener("abort",l)}),i=null)};i.forEach(p=>p.addEventListener("abort",l));const{signal:h}=n;return h.unsubscribe=()=>Z.asap(c),h}},iU=function*(i,t){let e=i.byteLength;if(e<t){yield i;return}let n=0,r;for(;n<e;)r=n+t,yield i.slice(n,r),n=r},sU=async function*(i,t){for await(const e of rU(i))yield*iU(e,t)},rU=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const t=i.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},LR=(i,t,e,n)=>{const r=sU(i,t);let l=0,o,c=h=>{o||(o=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:p,value:g}=await r.next();if(p){c(),h.close();return}let y=g.byteLength;if(e){let b=l+=y;e(b)}h.enqueue(new Uint8Array(g))}catch(p){throw c(p),p}},cancel(h){return c(h),r.return()}},{highWaterMark:2})},av=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",qN=av&&typeof ReadableStream=="function",aU=av&&(typeof TextEncoder=="function"?(i=>t=>i.encode(t))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),VN=(i,...t)=>{try{return!!i(...t)}catch{return!1}},lU=qN&&VN(()=>{let i=!1;const t=new Request(Jn.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!t}),PR=64*1024,JS=qN&&VN(()=>Z.isReadableStream(new Response("").body)),pb={stream:JS&&(i=>i.body)};av&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!pb[t]&&(pb[t]=Z.isFunction(i[t])?e=>e[t]():(e,n)=>{throw new Bt(`Response type '${t}' is not supported`,Bt.ERR_NOT_SUPPORT,n)})})})(new Response);const oU=async i=>{if(i==null)return 0;if(Z.isBlob(i))return i.size;if(Z.isSpecCompliantForm(i))return(await new Request(Jn.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(i)||Z.isArrayBuffer(i))return i.byteLength;if(Z.isURLSearchParams(i)&&(i=i+""),Z.isString(i))return(await aU(i)).byteLength},uU=async(i,t)=>{const e=Z.toFiniteNumber(i.getContentLength());return e??oU(t)},cU=av&&(async i=>{let{url:t,method:e,data:n,signal:r,cancelToken:l,timeout:o,onDownloadProgress:c,onUploadProgress:h,responseType:p,headers:g,withCredentials:y="same-origin",fetchOptions:b}=UN(i);p=p?(p+"").toLowerCase():"text";let v=nU([r,l&&l.toAbortSignal()],o),S;const w=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let _;try{if(h&&lU&&e!=="get"&&e!=="head"&&(_=await uU(g,n))!==0){let z=new Request(t,{method:"POST",body:n,duplex:"half"}),L;if(Z.isFormData(n)&&(L=z.headers.get("content-type"))&&g.setContentType(L),z.body){const[B,X]=MR(_,fb(NR(h)));n=LR(z.body,PR,B,X)}}Z.isString(y)||(y=y?"include":"omit");const T="credentials"in Request.prototype;S=new Request(t,{...b,signal:v,method:e.toUpperCase(),headers:g.normalize().toJSON(),body:n,duplex:"half",credentials:T?y:void 0});let O=await fetch(S);const N=JS&&(p==="stream"||p==="response");if(JS&&(c||N&&w)){const z={};["status","statusText","headers"].forEach(Q=>{z[Q]=O[Q]});const L=Z.toFiniteNumber(O.headers.get("content-length")),[B,X]=c&&MR(L,fb(NR(c),!0))||[];O=new Response(LR(O.body,PR,B,()=>{X&&X(),w&&w()}),z)}p=p||"text";let I=await pb[Z.findKey(pb,p)||"text"](O,i);return!N&&w&&w(),await new Promise((z,L)=>{BN(z,L,{data:I,headers:ki.from(O.headers),status:O.status,statusText:O.statusText,config:i,request:S})})}catch(T){throw w&&w(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new Bt("Network Error",Bt.ERR_NETWORK,i,S),{cause:T.cause||T}):Bt.from(T,T&&T.code,i,S)}}),tx={http:_4,xhr:eU,fetch:cU};Z.forEach(tx,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const zR=i=>`- ${i}`,hU=i=>Z.isFunction(i)||i===null||i===!1,GN={getAdapter:i=>{i=Z.isArray(i)?i:[i];const{length:t}=i;let e,n;const r={};for(let l=0;l<t;l++){e=i[l];let o;if(n=e,!hU(e)&&(n=tx[(o=String(e)).toLowerCase()],n===void 0))throw new Bt(`Unknown adapter '${o}'`);if(n)break;r[o||"#"+l]=n}if(!n){const l=Object.entries(r).map(([c,h])=>`adapter ${c} `+(h===!1?"is not supported by the environment":"is not available in the build"));let o=t?l.length>1?`since :
`+l.map(zR).join(`
`):" "+zR(l[0]):"as no adapter specified";throw new Bt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:tx};function aw(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new dd(null,i)}function IR(i){return aw(i),i.headers=ki.from(i.headers),i.data=rw.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),GN.getAdapter(i.adapter||Hg.adapter)(i).then(function(n){return aw(i),n.data=rw.call(i,i.transformResponse,n),n.headers=ki.from(n.headers),n},function(n){return FN(n)||(aw(i),n&&n.response&&(n.response.data=rw.call(i,i.transformResponse,n.response),n.response.headers=ki.from(n.response.headers))),Promise.reject(n)})}const YN="1.8.4",lv={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{lv[i]=function(n){return typeof n===i||"a"+(t<1?"n ":" ")+i}});const jR={};lv.transitional=function(t,e,n){function r(l,o){return"[Axios v"+YN+"] Transitional option '"+l+"'"+o+(n?". "+n:"")}return(l,o,c)=>{if(t===!1)throw new Bt(r(o," has been removed"+(e?" in "+e:"")),Bt.ERR_DEPRECATED);return e&&!jR[o]&&(jR[o]=!0,console.warn(r(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(l,o,c):!0}};lv.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function dU(i,t,e){if(typeof i!="object")throw new Bt("options must be an object",Bt.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let r=n.length;for(;r-- >0;){const l=n[r],o=t[l];if(o){const c=i[l],h=c===void 0||o(c,l,i);if(h!==!0)throw new Bt("option "+l+" must be "+h,Bt.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Bt("Unknown option "+l,Bt.ERR_BAD_OPTION)}}const Zy={assertOptions:dU,validators:lv},ur=Zy.validators;let ju=class{constructor(t){this.defaults=t,this.interceptors={request:new DR,response:new DR}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const l=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=qu(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:l}=e;n!==void 0&&Zy.assertOptions(n,{silentJSONParsing:ur.transitional(ur.boolean),forcedJSONParsing:ur.transitional(ur.boolean),clarifyTimeoutError:ur.transitional(ur.boolean)},!1),r!=null&&(Z.isFunction(r)?e.paramsSerializer={serialize:r}:Zy.assertOptions(r,{encode:ur.function,serialize:ur.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),Zy.assertOptions(e,{baseUrl:ur.spelling("baseURL"),withXsrfToken:ur.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=l&&Z.merge(l.common,l[e.method]);l&&Z.forEach(["delete","get","head","post","put","patch","common"],S=>{delete l[S]}),e.headers=ki.concat(o,l);const c=[];let h=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(e)===!1||(h=h&&w.synchronous,c.unshift(w.fulfilled,w.rejected))});const p=[];this.interceptors.response.forEach(function(w){p.push(w.fulfilled,w.rejected)});let g,y=0,b;if(!h){const S=[IR.bind(this),void 0];for(S.unshift.apply(S,c),S.push.apply(S,p),b=S.length,g=Promise.resolve(e);y<b;)g=g.then(S[y++],S[y++]);return g}b=c.length;let v=e;for(y=0;y<b;){const S=c[y++],w=c[y++];try{v=S(v)}catch(_){w.call(this,_);break}}try{g=IR.call(this,v)}catch(S){return Promise.reject(S)}for(y=0,b=p.length;y<b;)g=g.then(p[y++],p[y++]);return g}getUri(t){t=qu(this.defaults,t);const e=HN(t.baseURL,t.url,t.allowAbsoluteUrls);return zN(e,t.params,t.paramsSerializer)}};Z.forEach(["delete","get","head","options"],function(t){ju.prototype[t]=function(e,n){return this.request(qu(n||{},{method:t,url:e,data:(n||{}).data}))}});Z.forEach(["post","put","patch"],function(t){function e(n){return function(l,o,c){return this.request(qu(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:o}))}}ju.prototype[t]=e(),ju.prototype[t+"Form"]=e(!0)});let fU=class XN{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(l){e=l});const n=this;this.promise.then(r=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](r);n._listeners=null}),this.promise.then=r=>{let l;const o=new Promise(c=>{n.subscribe(c),l=c}).then(r);return o.cancel=function(){n.unsubscribe(l)},o},t(function(l,o,c){n.reason||(n.reason=new dd(l,o,c),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new XN(function(r){t=r}),cancel:t}}};function pU(i){return function(e){return i.apply(null,e)}}function gU(i){return Z.isObject(i)&&i.isAxiosError===!0}const ex={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ex).forEach(([i,t])=>{ex[t]=i});function $N(i){const t=new ju(i),e=_N(ju.prototype.request,t);return Z.extend(e,ju.prototype,t,{allOwnKeys:!0}),Z.extend(e,t,null,{allOwnKeys:!0}),e.create=function(r){return $N(qu(i,r))},e}const Je=$N(Hg);Je.Axios=ju;Je.CanceledError=dd;Je.CancelToken=fU;Je.isCancel=FN;Je.VERSION=YN;Je.toFormData=rv;Je.AxiosError=Bt;Je.Cancel=Je.CanceledError;Je.all=function(t){return Promise.all(t)};Je.spread=pU;Je.isAxiosError=gU;Je.mergeConfig=qu;Je.AxiosHeaders=ki;Je.formToJSON=i=>jN(Z.isHTMLForm(i)?new FormData(i):i);Je.getAdapter=GN.getAdapter;Je.HttpStatusCode=ex;Je.default=Je;const{Axios:RU,AxiosError:DU,CanceledError:kU,isCancel:MU,CancelToken:NU,VERSION:OU,all:LU,Cancel:PU,isAxiosError:zU,spread:IU,toFormData:jU,AxiosHeaders:FU,HttpStatusCode:BU,formToJSON:HU,getAdapter:UU,mergeConfig:qU}=Je,mU="10.32.112.180",yU="3000",bU=`http://${mU}:${yU}`;function vU(i){try{return i?JSON.parse(i):{x:0,y:0}}catch{return console.warn(`无法解析 position: ${i}`),{x:0,y:0}}}async function AU(i){const e=new TextEncoder().encode(i),n=await crypto.subtle.digest("SHA-256",e),l=Array.from(new Uint8Array(n)).map(o=>o.toString(16).padStart(2,"0")).join("");return console.log("file path: "+i+" --> file id: "+l),l}async function wU(i){const t=await AU(i);try{const e=await Je.get(`${bU}/comments`,{params:{file_id:t}});return console.log("getAllComments: 获取了 ",e.data.length," 条评论"),e.data.map(n=>({id:n.id.toString(),page:n.page_number||1,type:n.type,content:n.content||"",author:n.author||"匿名",time:n.created_at,position:vU(n.position)}))}catch(e){throw console.error("获取评论失败:",e),new Error(`获取评论失败: ${e}`)}}const FR=[{id:"code1",page:2,content:'console.log("Hello World");',position:{x:.5,y:.5,width:.6,height:.1}}],SU=()=>{const{openPanels:i}=Gb(),[t,e]=et.useState([]);et.useEffect(()=>{async function o(){try{const c=await wU("/Users/alice/test.pdf");e(c)}catch(c){console.error("加载评论失败:",c)}}o()},[]);const r=i.some(o=>o.type==="code")?60:70,l=100-r;return i.length===0?P.jsxs(gR,{children:[P.jsx(mR,{data:t}),P.jsx(yR,{data:FR})]}):P.jsxs(xN,{direction:"horizontal",children:[P.jsx($S,{defaultSize:r,children:P.jsxs(gR,{children:[P.jsx(mR,{data:t}),P.jsx(yR,{data:FR})]})}),P.jsx(EN,{className:"resize-handle"}),P.jsx($S,{defaultSize:l,children:P.jsx(fH,{})})]})},xU=()=>P.jsx(wF,{children:P.jsx(SU,{})}),Oc=Pa();function EU(){const[i,t]=et.useState("LoginPage"),[e,n]=et.useState(null),[r,l]=et.useState("");et.useEffect(()=>{const g=y=>{const b=y.data;b.command==="logoutResult"&&b.success&&(n(null),t("LoginPage")),b.command==="currentUseridResult"&&(b.userId||(n(null),t("LoginPage")))};return window.addEventListener("message",g),Oc==null||Oc.postMessage({command:"getCurrentUserid"}),()=>window.removeEventListener("message",g)},[]);const o=g=>{n(g),t("HomePage")},c=g=>{n(g),t("HomePage")},h=()=>{Oc==null||Oc.postMessage({command:"logout"})},p=()=>{if(!e)return i==="RegisterPage"?P.jsx(vL,{onRegisterSuccess:c,onSwitchToLogin:()=>t("LoginPage")}):P.jsx(bL,{onLoginSuccess:o,onSwitchToRegister:()=>t("RegisterPage")});if(r)return P.jsx(AF,{filePath:r});switch(i){case"HomePage":return P.jsx(VC,{});case"CoursePage":return P.jsx(AL,{setSelectedFile:l});case"CalendarPage":return P.jsx($P,{});case"DemoPage":return P.jsx(xU,{});default:return P.jsx(VC,{})}};return P.jsxs("div",{className:"p-4 bg-gray-50 min-h-screen",children:[e&&P.jsxs("div",{className:"flex justify-between items-center mb-4",children:[P.jsxs("div",{children:["欢迎，",e.name]}),P.jsxs("div",{className:"flex gap-2",children:[P.jsxs("select",{value:i,onChange:g=>t(g.target.value),className:"border p-2 rounded-md bg-white shadow",children:[P.jsx("option",{value:"HomePage",children:"主页"}),P.jsx("option",{value:"CoursePage",children:"课程页面"}),P.jsx("option",{value:"CalendarPage",children:"日历页面"}),P.jsx("option",{value:"DemoPage",children:"🧪 Demo 测试"})]}),P.jsx("button",{onClick:h,className:"bg-red-500 text-white px-4 py-2 rounded",children:"注销"})]})]}),r&&P.jsx("button",{onClick:()=>l(""),className:"mt-2 p-2 bg-blue-500 text-white rounded",children:"返回课程页面"}),p()]})}mL.createRoot(document.getElementById("root")).render(P.jsx(Lb.StrictMode,{children:P.jsx(EU,{})}));
